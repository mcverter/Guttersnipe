if (self.CavalryLogger) { CavalryLogger.start_js(["VmVOI"]); }

__d('ClickPointIdentifiersDEPRECATED',[],(function a(b,c,d,e,f,g){var h={types:{TIMELINE_SEE_LIKERS:'timeline:seelikes'},getUserActionID:function i(j){return '{"ua_id":"'+j+'"}';}};f.exports=h;}),null);
__d('UFISubscribeLink.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.subscribeAction?h._("Turn On Notifications"):h._("Turn Off Notifications"),n=this.props.subscribeAction?h._("Get a notification whenever someone comments."):h._("Stop getting notifications when someone comments.");return (c('React').createElement('a',{className:'UFISubscribeLink',href:'#',role:'button','aria-live':'polite',title:n,onClick:this.props.onClick},m));};function l(){i.apply(this,arguments);}l.propTypes={subscribeAction:k.bool,onClick:k.func};f.exports=l;}),null);
__d('UFIActionLinkController',['cx','Arbiter','BootloadedComponent.react','ClickPointIdentifiersDEPRECATED','CommentPrelude','CSS','DataStore','DOM','DOMQuery','JSResource','Parent','React','ReactDOM','TrackingNodes','UFIBling.react','UFICentralUpdates','UFICommentActionLink.react','UFIConstants','UFIDispatcher','UFIDispatcherContext.react','UFIFeedbackTargets','UFIInstanceAction','UFILikeActionLink.react','UFIReactionStore','UFIShareActionLink.react','UFISharedDispatcher','UFISubscribeLink.react','UFITimelineBlingBox.react','UFIToplevelPagedCommentList','UFIUserActions','UFIPrivateReplyLink.react'],(function a(b,c,d,e,f,g,h){'use strict';function i(k,l,m){var n=c('DOMQuery').scry(k,l)[0];if(n){var o=document.createElement('span');n.parentNode.replaceChild(o,n);o.appendChild(n);if(typeof m==='function')m(o);}else var p=c('Arbiter').subscribe('PhotoSnowlift.DATA_CHANGE',function(){c('Arbiter').unsubscribe(p);i(k,l,m);},c('Arbiter').SUBSCRIBE_NEW);}function j(k,l,m){this.$UFIActionLinkController1=k;this.$UFIActionLinkController2=l;this.$UFIActionLinkController3=m.targetfbid;this.$UFIActionLinkController4=this.$UFIActionLinkController5();this.$UFIActionLinkController6=new (c('UFIDispatcher'))();this.$UFIActionLinkController7={UFIReactionStore:new (c('UFIReactionStore'))(this.$UFIActionLinkController6)};if(this.$UFIActionLinkController4){this.$UFIActionLinkController8();}else this.$UFIActionLinkController9();if(m.viewercanlike||m.hasviewerliked)this.$UFIActionLinkController10();if(m.cancomment)this.$UFIActionLinkController11();if(m.viewercansubscribetopost)this.$UFIActionLinkController12();this.$UFIActionLinkController13();this.$UFIActionLinkController14();this.$UFIActionLinkController15();this.$UFIActionLinkController16();c('UFICentralUpdates').subscribe('feedback-updated',function(n,o){var p=o.updates;if(l.ftentidentifier in p)this.render();}.bind(this));this.render();}j.prototype.$UFIActionLinkController9=function(){i(this.$UFIActionLinkController1,'^form .uiBlingBox',function(k){this.$UFIActionLinkController17=k;if(this.$UFIActionLinkController18)this.$UFIActionLinkController19();}.bind(this));};j.prototype.$UFIActionLinkController8=function(){var k=c('DOMQuery').scry(this.$UFIActionLinkController1,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline')[0];if(k){var l=c('DOMQuery').scry(k,'.fbTimelineFeedbackLikes')[0];this.$UFIActionLinkController20=!!l;var m=c('DOMQuery').scry(k,'.fbTimelineFeedbackComments')[0];this.$UFIActionLinkController21=!!m;}this.$UFIActionLinkController22=k;if(this.$UFIActionLinkController18)this.$UFIActionLinkController23();};j.prototype.$UFIActionLinkController15=function(){i(this.$UFIActionLinkController1,'^form .inline_feedback',function(k){this.$UFIActionLinkController24=k;if(this.$UFIActionLinkController25)this.$UFIActionLinkController26();}.bind(this));};j.prototype.$UFIActionLinkController16=function(){i(this.$UFIActionLinkController1,'^form .actor_selector',function(k){this.$UFIActionLinkController27=k;if(this.$UFIActionLinkController25)this.$UFIActionLinkController28();}.bind(this));};j.prototype.$UFIActionLinkController10=function(){i(this.$UFIActionLinkController1,'^form .like_link',function(k){this.$UFIActionLinkController29=k;if(this.$UFIActionLinkController18)this.$UFIActionLinkController30();}.bind(this));};j.prototype.$UFIActionLinkController11=function(){i(this.$UFIActionLinkController1,'^form .comment_link',function(k){this.$UFIActionLinkController31=k;if(this.$UFIActionLinkController18)this.$UFIActionLinkController32();}.bind(this));};j.prototype.$UFIActionLinkController12=function(){i(this.$UFIActionLinkController1,'^form .unsub_link',function(k){this.$UFIActionLinkController33=k;if(this.$UFIActionLinkController18)this.$UFIActionLinkController34();}.bind(this));};j.prototype.$UFIActionLinkController14=function(){i(this.$UFIActionLinkController1,'^form .message_reply_action_link',function(k){this.$UFIActionLinkController35=k;if(this.$UFIActionLinkController35.previousSibling&&this.$UFIActionLinkController35.previousSibling.nodeType===3){this.$UFIActionLinkController36=this.$UFIActionLinkController35.previousSibling;this.$UFIActionLinkController37=this.$UFIActionLinkController36.data;}if(this.$UFIActionLinkController18)this.$UFIActionLinkController38();}.bind(this));};j.prototype.$UFIActionLinkController13=function(){i(this.$UFIActionLinkController1,'^form .share_action_link',function(k){this.$UFIActionLinkController39=k;c('CSS').addClass(this.$UFIActionLinkController39,"share_root");var l=c('DOMQuery').scry(this.$UFIActionLinkController39,'.share_action_link')[0];if(l){this.$UFIActionLinkController40=l.getAttribute('href');this.$UFIActionLinkController41=l.getAttribute('rel');this.$UFIActionLinkController42=c('DataStore').get(l,'share-now-menu-uri');this.$UFIActionLinkController43=c('DataStore').get(l,'misinformation-confirm-dialog-uri');}if(this.$UFIActionLinkController18)this.$UFIActionLinkController44();}.bind(this));};j.prototype.render=function(){this.$UFIActionLinkController18=true;if(this.$UFIActionLinkController4){this.$UFIActionLinkController23();}else this.$UFIActionLinkController19();this.$UFIActionLinkController30();this.$UFIActionLinkController32();this.$UFIActionLinkController34();this.$UFIActionLinkController44();this.$UFIActionLinkController38();this.$UFIActionLinkController26();this.$UFIActionLinkController28();};j.prototype.$UFIActionLinkController19=function(){if(this.$UFIActionLinkController17)c('UFIFeedbackTargets').getFeedbackTarget(this.$UFIActionLinkController2.ftentidentifier,function(k){this.$UFIActionLinkController45=c('ReactDOM').render(c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIActionLinkController6,stores:this.$UFIActionLinkController7},this.getBling(k)),this.$UFIActionLinkController17);}.bind(this));};j.prototype.getBling=function(k){return (c('React').createElement(c('UFIBling.react'),{contextArgs:this.$UFIActionLinkController2,feedbackTarget:k,onCommentVisibilityChanged:function(){return c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').toggleComments(this.$UFIActionLinkController2));}.bind(this)}));};j.prototype.$UFIActionLinkController23=function(){if(this.$UFIActionLinkController22)c('UFIFeedbackTargets').getFeedbackTarget(this.$UFIActionLinkController2.ftentidentifier,function(k){c('ReactDOM').render(this.getTimelineBling(k),this.$UFIActionLinkController22);}.bind(this));};j.prototype.getTimelineBling=function(k){var l=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.BLINGBOX),m=c('ClickPointIdentifiersDEPRECATED').getUserActionID(c('ClickPointIdentifiersDEPRECATED').types.TIMELINE_SEE_LIKERS),n=function p(event){var q=c('Parent').byTag(event.target,'form');c('CommentPrelude').uncollapse(q,'action_link_timeline_bling');var r=c('DOMQuery').scry(q,'a.UFIPagerLink');if(r.length)r[0].click();event.preventDefault();},o=c('UFIToplevelPagedCommentList').getDisplayedCommentCountForFeedbackTargetID_UNSAFE(this.$UFIActionLinkController2.ftentidentifier);return (c('React').createElement(c('UFITimelineBlingBox.react'),{comments:o,commentsreduced:k.commentcountreduced,commentOnClick:n,contextArgs:this.$UFIActionLinkController2,'data-ft':l,'data-gt':m,enableShowComments:this.$UFIActionLinkController21,enableShowLikes:this.$UFIActionLinkController20,feedbackFBID:this.$UFIActionLinkController3,likes:k.likecount,likesreduced:k.likecountreduced,reshares:k.sharecount,resharesreduced:k.sharecountreduced,actorid:k.actorid}));};j.prototype.$UFIActionLinkController26=function(){if(this.$UFIActionLinkController24)c('ReactDOM').render(this.getInlineSearchFeedback(),this.$UFIActionLinkController24);};j.prototype.getInlineSearchFeedback=function(){return (c('React').createElement('div',null,c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('InlineFeedback.react').__setRef('UFIActionLinkController')},this.$UFIActionLinkController2.inlineSearchFeedbackConfig))));};j.prototype.$UFIActionLinkController28=function(){if(this.$UFIActionLinkController46)c('ReactDOM').render(this.getActorSelector(),this.$UFIActionLinkController27);};j.prototype.getActorSelector=function(){var k=this.$UFIActionLinkController2.actorSelectorConfig,l=k.module,m=k.props;m.nuxHoverContext=c('Parent').byTag(event.target,'form');return (c('React').createElement(l,m));};j.prototype.$UFIActionLinkController30=function(){if(this.$UFIActionLinkController29)c('UFIFeedbackTargets').getFeedbackTarget(this.$UFIActionLinkController2.ftentidentifier,function(k){c('ReactDOM').render(c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIActionLinkController6,stores:this.$UFIActionLinkController7},this.getLike(k)),this.$UFIActionLinkController29);}.bind(this));};j.prototype.getLike=function(k){return (c('React').createElement(c('UFILikeActionLink.react'),{feedback:k,contextArgs:this.$UFIActionLinkController2}));};j.prototype.$UFIActionLinkController32=function(){if(this.$UFIActionLinkController31)this.$UFIActionLinkController47=c('ReactDOM').render(this.getComment(),this.$UFIActionLinkController31);};j.prototype.getComment=function(){return (c('React').createElement(c('UFICommentActionLink.react'),{contextArgs:this.$UFIActionLinkController2}));};j.prototype.$UFIActionLinkController38=function(){if(this.$UFIActionLinkController35)c('UFIFeedbackTargets').getFeedbackTarget(this.$UFIActionLinkController2.ftentidentifier,function(k){this.$UFIActionLinkController48=null;var l=this.getMessageReply(k);if(l)this.$UFIActionLinkController48=c('ReactDOM').render(l,this.$UFIActionLinkController35);if(!this.$UFIActionLinkController48||!c('ReactDOM').findDOMNode(this.$UFIActionLinkController48)){if(this.$UFIActionLinkController36)this.$UFIActionLinkController36.data='';c('DOM').setContent(this.$UFIActionLinkController35,null);return;}if(this.$UFIActionLinkController36)this.$UFIActionLinkController36.data=this.$UFIActionLinkController37;}.bind(this));};j.prototype.getMessageReply=function(k){if(k.messagereplycontext)return (c('React').createElement(c('UFIPrivateReplyLink.react'),{actorID:k.actorforpost,activityID:this.$UFIActionLinkController2.ftentidentifier,context:k.messagereplycontext,seeResponseLabel:false}));return null;};j.prototype.$UFIActionLinkController34=function(){if(this.$UFIActionLinkController33)c('UFIFeedbackTargets').getFeedbackTarget(this.$UFIActionLinkController2.ftentidentifier,function(k){this.$UFIActionLinkController49=c('ReactDOM').render(this.getSubscribe(k),this.$UFIActionLinkController33);}.bind(this));};j.prototype.getSubscribe=function(k){var l=!k.hasviewersubscribed,m=function(event){c('UFIUserActions').changeSubscribe(this.$UFIActionLinkController2.ftentidentifier,l,{source:this.$UFIActionLinkController2.source,target:event.target,rootid:this.$UFIActionLinkController2.rootid,commentexpandmode:k.commentexpandmode});event.preventDefault();}.bind(this);return (c('React').createElement(c('UFISubscribeLink.react'),{onClick:m,subscribeAction:l}));};j.prototype.$UFIActionLinkController44=function(){if(this.$UFIActionLinkController39&&this.$UFIActionLinkController40)c('UFIFeedbackTargets').getFeedbackTarget(this.$UFIActionLinkController2.ftentidentifier,function(k){this.$UFIActionLinkController50=c('ReactDOM').render(this.getShare(k),this.$UFIActionLinkController39);}.bind(this));};j.prototype.getShare=function(k){return (c('React').createElement(c('UFIShareActionLink.react'),{feedbackTarget:k,ufiInstanceID:this.$UFIActionLinkController2.instanceid,shareURI:this.$UFIActionLinkController40,shareRel:this.$UFIActionLinkController41,shareNowMenuURI:this.$UFIActionLinkController42,misinformationConfirmDialogURI:this.$UFIActionLinkController43}));};j.prototype.$UFIActionLinkController5=function(){if(this.$UFIActionLinkController2.source===c('UFIConstants').UFIFeedbackSourceType.PROFILE){var k=c('DOMQuery').scry(this.$UFIActionLinkController1,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline');return k.length>0;}return false;};f.exports=j;}),null);