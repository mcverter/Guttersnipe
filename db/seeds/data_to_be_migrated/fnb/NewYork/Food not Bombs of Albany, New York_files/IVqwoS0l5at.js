if (self.CavalryLogger) { CavalryLogger.start_js(["40OtJ"]); }

__d("AdsCanvasCapabilities",[],(function a(b,c,d,e,f,g){f.exports={CAN_ADD_CULTURAL_MOMENT_COMPONENTS:"CAN_ADD_CULTURAL_MOMENT_COMPONENTS",CAN_ADD_OFFER:"CAN_ADD_OFFER",CAN_ADD_PRODUCT_SET:"CAN_ADD_PRODUCT_SET",CAN_ADD_STORE_LOCATOR:"CAN_ADD_STORE_LOCATOR",CAN_SAVE_INCOMPLETE_ELEMENTS:"CAN_SAVE_INCOMPLETE_ELEMENTS",CAN_USE_CANVAS_EDITOR_TEMPLATEV0:"CAN_USE_CANVAS_EDITOR_TEMPLATEV0",CAN_USE_CANVAS_EDITOR_TEMPLATEV1:"CAN_USE_CANVAS_EDITOR_TEMPLATEV1",CAN_USE_LINKED_CANVAS:"CAN_USE_LINKED_CANVAS"};}),null);
__d("AdsCanvasWebdriverIDs",[],(function a(b,c,d,e,f,g){f.exports={ADD_COMPONENT_DIALOG_BUTTON_COMPONENT:"add-component-dialog-button",ADD_COMPONENT_DIALOG_CANCEL:"add-component-dialog-cancel",ADD_COMPONENT_DIALOG_CAROUSEL_COMPONENT:"add-component-dialog-carousel",ADD_COMPONENT_DIALOG_CM_HEADER_COMPONENT:"add-component-dialog-cm-header",ADD_COMPONENT_DIALOG_CM_IMAGE_COMPONENT:"add-component-dialog-cm-image",ADD_COMPONENT_DIALOG_CM_POPULAR_MEDIA_COMPONENT:"add-component-dialog-cm-popular-media",ADD_COMPONENT_DIALOG_CM_TITLE_COMPONENT:"add-component-dialog-cm-title",ADD_COMPONENT_DIALOG_CONFIRM:"add-component-dialog-confirm",ADD_COMPONENT_DIALOG_HEADER_COMPONENT:"add-component-dialog-header",ADD_COMPONENT_DIALOG_OFFER_COMPONENT:"add-component-dialog-offer",ADD_COMPONENT_DIALOG_PHOTO_COMPONENT:"add-component-dialog-photo",ADD_COMPONENT_DIALOG_PRODUCT_SET_COMPONENT:"add-component-dialog-product-set",ADD_COMPONENT_DIALOG_SCRUBBABLE_GIF_COMPONENT:"add-component-dialog-scrubbable-gif",ADD_COMPONENT_DIALOG_STORE_LOCATOR_COMPONENT:"add-component-dialog-store-locator",ADD_COMPONENT_DIALOG_TEXT_COMPONENT:"add-component-dialog-text",ADD_COMPONENT_DIALOG_VIDEO_COMPONENT:"add-component-dialog-video",ADS_CANVAS_BUILDER:"ads-canvas-builder",ADS_CANVAS_BUILDER_COMPONENT_SELECTOR:"ads-canvas-builder-component-selector",ADS_CANVAS_BUILDER_CANVAS_EDITOR:"ads-canvas-builder-element-editor",ADS_CANVAS_BUILDER_PREVIEW:"ads-canvas-builder-preview",ADS_CANVAS_BUILDER_TOOLBAR:"ads-canvas-builder-toolbar",ADS_CANVAS_BUILDER_WELCOME_PANE:"ads-canvas-builder-welcome-pane",ADS_CANVAS_TYPEAHEAD:"ads-canvas-typeahead",ADS_CANVAS_CREATE_BUTTON:"ads-canvas-typeahead-create-button",CANVAS_EDITOR_BUTTON_COMPONENT:"canvas-editor-button-component",CANVAS_EDITOR_CAROUSEL_COMPONENT:"canvas-editor-carousel-component",CANVAS_EDITOR_DOCUMENT_NAME_FIELD:"canvas-editor-document-name-field",CANVAS_EDITOR_HEADER_COMPONENT:"canvas-editor-header-component",CANVAS_EDITOR_PHOTO_COMPONENT:"canvas-editor-photo-component",CANVAS_EDITOR_TEXT_COMPONENT:"canvas-editor-text-component",CANVAS_EDITOR_VIDEO_COMPONENT:"canvas-editor-video-component",CAROUSEL_COMPONENT_ADD_NEW_ITEM_BUTTON:"carousel-component-add-new-item-button",CAROUSEL_COMPONENT_ITEM:"carousel-component-item",CAROUSEL_COMPONENT_ITEM_SELECT_BAR:"carousel-component-item-select-bar",DESTINATION_FIELD:"destination-field",DESTINATION_INPUT_FIELD:"destination-input-field",DESTINATION_TYPE_FIELD:"destination-type-field",PAGE_PUBLISH_TOOLS_CREATE_BUTTON:"ppt-create-button",PHOTO_UPLOADER_PREVIEW:"photo-uploader-preview",PHOTO_UPLOADER_PROGRESS_BAR:"photo-uploader-progress-bar",PHOTO_UPLOADER_UPLOAD_BUTTON:"photo-uploader-upload-button",PREVIEW_BUTTON_COMPONENT:"preview-button-component",PREVIEW_CAROUSEL_COMPONENT:"preview-carousel-component",PREVIEW_CAROUSEL_IMAGE:"preview-carousel-image",PREVIEW_HEADER_IMAGE:"preview-header-image",PREVIEW_HEADER_COMPONENT:"preview-header-component",PREVIEW_PHOTO_IMAGE:"preview-photo-image",PREVIEW_PHOTO_COMPONENT:"preview-photo-component",PREVIEW_TEXT_COMPONENT:"preview-text-component",PREVIEW_VIDEO_THUMBNAIL:"preview-video-thumbnail",PREVIEW_VIDEO_COMPONENT:"preview-video-component",PUBLISH_DIALOG:"publish-dialog",PUBLISH_DIALOG_CANCEL:"publish-dialog-cancel",PUBLISH_DIALOG_CONFIRM:"publish-dialog-confirm",TOOLBAR_ADD_COMPONENT_BUTTON:"toolbar-add-component-button",TOOLBAR_LOADING_INDICATOR:"toolbar-loading-indicator",TOOLBAR_PUBLISH_BUTTON:"toolbar-publish-button",TOOLBAR_SAVE_BUTTON:"toolbar-save-button",VIDEO_COMPONENT_THUMBNAIL:"video-component-thumbnail",VIDEO_COMPONENT_PROGRESS_BAR:"video-component-progress-bar",VIDEO_COMPONENT_UPLOAD_BUTTON:"video-component-upload-button",WELCOME_PANE_OPEN_BLANK_CANVAS_BUTTON:"welcome-pane-open-blank-canvas-button",TEXT_EDITOR:"text-component-editor"};}),null);
__d("BOFSellerLoggingSources",[],(function a(b,c,d,e,f,g){f.exports={ADD_SECTION:"AddSection",FINISH_SETUP_BANNER:"FinishSetupBanner",PAGE_COMPOSER:"PageComposer",PRODUCT_TAGGING_TYPEAHEAD:"ProductTaggingTypeahead",PUBLISHING_TOOLS:"PublishingTools",QP:"QP",SHOP_TAB:"ShopTab",STRIPE_REDIRECT:"StripeRedirect",GRAPH_API:"GraphApi",DEV_TEST:"DevTest",SHOP_EDIT:"ShopEdit",PAGE_CARD:"PageCard"};}),null);
__d("BrandedContentSharedToSponsorStatus",[],(function a(b,c,d,e,f,g){f.exports={NOT_SHARED:0,ALL_SHARED:1};}),null);
__d("BrandedContentSponsorRelationship",[],(function a(b,c,d,e,f,g){f.exports={WITH:0,PAID_RELATIONSHIP_WITH:1,PRESENTED_BY:2};}),null);
__d("BrandedContentTaggerNuxAction",[],(function a(b,c,d,e,f,g){f.exports={LOG_VIEW:"log_view",DISMISS:"dismiss"};}),null);
__d("CanvasCreationEvent",[],(function a(b,c,d,e,f,g){f.exports={ADD_ELEMENT:"editor.add_element",ADD_ELEMENT_TOP_TOOLBAR_BUTTON:"editor.add_element_top_toolbar",ADD_ELEMENT_BOTTOM_TOOLBAR_BUTTON:"editor.add_element_bottom_toolbar",BACK_TO_MENU:"editor.back_to_menu",CREATE:"create",DUPLICATE:"duplicate",EDITOR_EXIT:"editor.editor_exit",EDITOR_LINE_HEIGHT_TOUCH:"editor.editor_line_height_touch",EDITOR_PADDING_TOUCH:"editor.editor_padding_touch",EDITOR_PHOTO_ASPECT_RATIO_WARNING:"editor.editor_photo_aspect_ratio_warning",EDITOR_PHOTO_UPLOAD_TIMEOUT:"editor.editor_photo_upload_timeout",GETTING_STARTED_GUIDE:"welcome_screen.getting_started_guide",LOAD:"load",LOAD_TEMPLATE:"editor.load_template",PHOTO_UPLOAD_ERROR:"editor.photo_upload_error",PHOTO_UPLOAD_SUCCESS:"editor.photo_upload_success",PREVIEW_FAILURE:"editor.preview_failure",PREVIEW_SUCCESS:"editor.preview_success",PUBLISH:"publish",PUBLISH_FAILURE:"editor.publish_failure",REORDER_COMPONENT:"editor.reorder_component",TEMPLATE_FETCH_FAILED:"editor.template_fetch_failed",TEMPLATE_DOWNLOADED:"editor.template_downloaded",TEMPLATE_SELECTED:"editor.template_selected",TOOLBAR_PUBLISH_CLICKED:"editor.toolbar_publish_clicked",VIDEO_ENCODE_SUCCESS:"editor.video_encode_success",VIDEO_ENCODE_ERROR:"editor.video_encode_error",VIDEO_POST_SUCCESS:"editor.video_post_success",VIDEO_POST_ERROR:"editor.video_post_error",VIDEO_UPLOAD_SUCCESS:"editor.video_upload_success",VIDEO_UPLOAD_ERROR:"editor.video_upload_error",SAVE:"save",SAVE_INCOMPLETE_ELEMENTS:"save_incomplete_elements",SAVE_FAILURE:"editor.save_failure",SHARE_PREVIEW:"editor.share_preview",SWIPE_TO_OPEN_TOGGLED:"editor.swipe_to_open_toggled",VALIDATION_ERROR:"editor.validation_error",WELCOMESCREEN_ADD_COMPONENT:"welcome_screen.addcomponents",WELCOMESCREEN_BLANKCANVAS:"welcome_screen.blankcanvas",WELCOMESCREEN_EXAMPLES:"welcome_screen.examples",WELCOMESCREEN_TEMPLATE:"welcome_screen.template",WELCOMESCREEN_TIPS:"welcome_screen.tips",WELCOMESCREEN_TOUR:"welcome_screen.tour"};}),null);
__d("CanvasLoadSource",[],(function a(b,c,d,e,f,g){f.exports={LOAD_EXISTING_DOC:"load_existing",LOAD_DUPLICATE_DOC:"load_duplicate",LOAD_NEW_DEFAULT_DOC:"load_new",LOAD_NEW_USER:"load_new_user"};}),null);
__d("CommerceB2CUnsupportedCurrencies",[],(function a(b,c,d,e,f,g){f.exports={CNY:"CNY",CUC:"CUC",IRR:"IRR",KPW:"KPW",SDG:"SDG",SYP:"SYP"};}),null);
__d("CommerceProductVariantType",[],(function a(b,c,d,e,f,g){f.exports={SIZE:"Size",COLOR:"Color",MATERIAL:"Material",LENGTH:"Length",FIT:"Fit",WIDTH:"Width",SCENT:"Scent",FLAVOR:"Flavor",MODEL:"Model",FORMAT:"Format",PLATFORM:"Platform",EDITION:"Edition"};}),null);
__d("CommerceSelfServeProductTaxCategories",[],(function a(b,c,d,e,f,g){f.exports={NONE:0,TAX_ITEM_CODE_COMMERCE_SPORT_RECREATION_BAD:4900000,TAX_ITEM_CODE_COMMERCE_SPORT_RECREATION:4.9e+07,TAX_ITEM_CODE_COMMERCE_CLOTHING:53100000,TAX_ITEM_CODE_COMMERCE_SHOES:53110000,TAX_ITEM_CODE_COMMERCE_LUGGAGE_BAGS:53120000,TAX_ITME_CODE_COMMERCE_PERSONAL_CARE:53130000,TAX_ITEM_CODE_COMMERCE_JEWELRY:54100000,TAX_ITEM_CODE_COMMERCE_WATCHES:54111500,TAX_ITEM_CODE_COMMERCE_OTHERS:-1};}),null);
__d("CommerceSelfServeSection",[],(function a(b,c,d,e,f,g){f.exports={CHECKOUT_URL:"checkout_url",COMMERCE_INSIGHTS:"commerce_insights",FEATURED_PRODUCT_TOGGLE:"featured_product_toggle",INVENTORY:"inventory",PRODUCT_VISIBILITY:"product_visibility",SHIPPING_OPTIONS:"shipping_options",TAX_CATEGORY:"tax_category",TAX_TABLE:"tax_table",VARIANTS:"variants",MINIMUM_PRICE_ERROR:"minimum_price_error",SALE_PRICE:"sale_price"};}),null);
__d("CommerceSelfServeUI",[],(function a(b,c,d,e,f,g){f.exports={MIN_SHIPPING_OPTIONS:1,MAX_SHIPPING_OPTIONS:5};}),null);
__d("InstantShoppingDocumentElementType",[],(function a(b,c,d,e,f,g){f.exports={RICH_TEXT:1,PHOTO:2,BUTTON:3,SLIDESHOW:4,DIVIDER:5,EXPANDABLE_SECTION:6,STATEFUL:7,VIDEO:8,COLOR_SELECTOR:9,TOGGLE_BUTTON:10,HEADER:11,COMPOSITE_BLOCK:12,FOOTER:13,ELEMENT_GROUP:14,TITLE_AND_DATE:15,STORE_LOCATOR:16,SCRUBBABLE_GIF:17,LOCAL_IMAGE:18,OFFER:19,WEBVIEW:20,CULTURAL_MOMENT_POPULAR_MEDIA:900};}),null);
__d("PagesComposerCarouselPostNuxType",[],(function a(b,c,d,e,f,g){f.exports={MEDIA_ATTACHEMENT_URL_INPUT_AREA_NUX:"media_attachment_url_input_area_nux"};}),null);
__d("PagesComposerExtraAttachmentIcons",[],(function a(b,c,d,e,f,g){f.exports={BOOK_TRAVEL_ICON:"BOOK_TRAVEL_ICON",CAUSE_ICON:"CAUSE_ICON",COUPONS_ICON:"COUPONS_ICON",EVENTS_ICON:"EVENTS_ICON",FINCH_COUPONS_ICON:"FINCH_COUPONS_ICON",FINCH_EVENTS_ICON:"FINCH_EVENTS_ICON",LEARN_MORE_ICON:"LEARN_MORE_ICON",MORE_ICON:"MORE_ICON",OFFERS_ICON:"OFFERS_ICON",PRODUCT_ICON:"PRODUCT_ICON",Q_AND_A_ICON:"Q_AND_A_ICON",SHOP_NOW_ICON:"SHOP_NOW_ICON",SIGN_UP_ICON:"SIGN_UP_ICON"};}),null);
__d("PagesManagerProductToolsConstants",[],(function a(b,c,d,e,f,g){f.exports={MAX_FEATURED_ITEM_COUNT:10};}),null);
__d("PaymentsTypeEnum",[],(function a(b,c,d,e,f,g){f.exports={BOF:"BOF",NMOR:"NMOR"};}),null);
__d("ProductVisibility",[],(function a(b,c,d,e,f,g){f.exports={LEGACY_PUBLIC:"",STAGING:"staging",PUBLISHED:"published"};}),null);
__d("PUWUploaders",[],(function a(b,c,d,e,f,g){f.exports={HTML5:"html5",FLASH:"flash"};}),null);
__d("RichMediaStoreLocatorElementTheme",[],(function a(b,c,d,e,f,g){f.exports={LIGHT:"Light",DARK:"Dark",CUSTOM:"Custom"};}),null);
__d("SponsorTagsOptInOptions",[],(function a(b,c,d,e,f,g){f.exports={QUERY_STATUS:"query_status",OPT_IN:"opt_in",OPT_OUT:"opt_out"};}),null);
__d("XCommerceSelfServeParam",[],(function a(b,c,d,e,f,g){f.exports={EXPLANATION:"explanation",PAGE_ID:"page_id",AMOUNT:"amount",ADDRESS:"address",STREET_1:"street1",CITY:"city",STATE:"region",ZIP:"postalCode",ALERT_EMAIL:"alert_email",COLLECTION_NAME:"collection_name",CONTACT_EMAIL:"contact_email",SECONDARY_CTA:"secondary_product_cta",PAYMENT_PROVIDER:"payment_provider",PAYPAL_MERCHANT_EMAIL:"paypal_merchant_email",RETURN_POLICY_TIME:"return_policy_time",SETTINGS_ID:"settings_id",SHIPPING_POLICY_TIME:"shipping_policy_time",STRIPE_DEFERRED_EMAIL:"stripe_deferred_email",TAX_NEXUS_LOCATIONS:"tax_nexus_locations",VISIBILITY:"visibility",CHECKOUT_URL:"checkout_url",COLLECTION_ID:"collection_id",CURRENCY_CODE:"currency_code",DEFAULT_SHIPPING_OPTIONS_JSON:"default_shipping_options_json",FEATURED_PRODUCT:"featured_product",INVENTORY:"inventory",IS_ON_SALE:"is_on_sale",PRODUCT_DESCRIPTION:"product_desc",PRODUCT_ID:"product_id",PRODUCT_PHOTO_IDS:"photo_ids",PRODUCT_VIDEO_IDS:"video_ids",PRODUCT_PRICE:"product_price",PRODUCT_SALE_PRICE:"product_sale_price",PRODUCT_TITLE:"product_title",SHARE_TO_TIMELINE:"share_to_timeline",SHIPPING_OPTION_NAMES:"shipping_option_names",SHIPPING_OPTION_VALUES:"shipping_option_values",TAX_APPLIED_TO_SHIPPING_MAP:"tax_applied_to_shipping_map",TAX_CATEGORY:"tax_category",TAX_LOCATIONS:"tax_locations",TAX_PERCENT_MAP:"tax_percent_map",VARIANT_NAMES:"variant_names",VARIANT_INVENTORY:"variant_inventory_map",VARIANT_PRICE:"variant_price_map",VARIANT_SALE_PRICE:"variant_sale_price_map",VARIANT_DATA:"variant_serial_data_map",VARIANT_PRODUCT_ID:"variant_product_id_map"};}),null);
__d('AdsCanvasEditorEnums',[],(function a(b,c,d,e,f,g){'use strict';var h={SAVED:0,SAVING:1,UNSAVED:2},i={NONE:'NONE',WARNING:'WARNING',ERROR:'ERROR'},j={WEBSITE:'WEBSITE',NATIVE:'NATIVE',CANVAS:'CANVAS'};f.exports={ErrorTypeEnum:i,SaveStateEnum:h,LinkDestinationEnum:j};}),null);
__d('CanvasCreationWaterfallTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:CanvasCreationWaterfallLoggerConfig',this.$CanvasCreationWaterfallTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:CanvasCreationWaterfallLoggerConfig',this.$CanvasCreationWaterfallTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$CanvasCreationWaterfallTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$CanvasCreationWaterfallTypedLogger1=babelHelpers['extends']({},this.$CanvasCreationWaterfallTypedLogger1,j);return this;};h.prototype.setCanvasID=function(j){this.$CanvasCreationWaterfallTypedLogger1.canvas_id=j;return this;};h.prototype.setCanvasLoadType=function(j){this.$CanvasCreationWaterfallTypedLogger1.canvas_load_type=j;return this;};h.prototype.setCanvasName=function(j){this.$CanvasCreationWaterfallTypedLogger1.canvas_name=j;return this;};h.prototype.setCanvasTags=function(j){this.$CanvasCreationWaterfallTypedLogger1.canvas_tags=c('GeneratedLoggerUtils').serializeVector(j);return this;};h.prototype.setDuplicateParentCanvasID=function(j){this.$CanvasCreationWaterfallTypedLogger1.duplicate_parent_canvas_id=j;return this;};h.prototype.setEditorLineHeight=function(j){this.$CanvasCreationWaterfallTypedLogger1.editor_line_height=j;return this;};h.prototype.setEditorPaddingBottom=function(j){this.$CanvasCreationWaterfallTypedLogger1.editor_padding_bottom=j;return this;};h.prototype.setEditorPaddingTop=function(j){this.$CanvasCreationWaterfallTypedLogger1.editor_padding_top=j;return this;};h.prototype.setEditorPhotoHeight=function(j){this.$CanvasCreationWaterfallTypedLogger1.editor_photo_height=j;return this;};h.prototype.setEditorPhotoWidth=function(j){this.$CanvasCreationWaterfallTypedLogger1.editor_photo_width=j;return this;};h.prototype.setEditorURL=function(j){this.$CanvasCreationWaterfallTypedLogger1.editor_url=j;return this;};h.prototype.setElementPayload=function(j){this.$CanvasCreationWaterfallTypedLogger1.element_payload=j;return this;};h.prototype.setElementType=function(j){this.$CanvasCreationWaterfallTypedLogger1.element_type=j;return this;};h.prototype.setErrorCode=function(j){this.$CanvasCreationWaterfallTypedLogger1.error_code=j;return this;};h.prototype.setEventDetails=function(j){this.$CanvasCreationWaterfallTypedLogger1.event_details=j;return this;};h.prototype.setEventName=function(j){this.$CanvasCreationWaterfallTypedLogger1.event_name=j;return this;};h.prototype.setHelpPageEventName=function(j){this.$CanvasCreationWaterfallTypedLogger1.help_page_event_name=j;return this;};h.prototype.setIncompleteElements=function(j){this.$CanvasCreationWaterfallTypedLogger1.incomplete_elements=j;return this;};h.prototype.setIsNewUser=function(j){this.$CanvasCreationWaterfallTypedLogger1.is_new_user=j;return this;};h.prototype.setPageCanvasCount=function(j){this.$CanvasCreationWaterfallTypedLogger1.page_canvas_count=j;return this;};h.prototype.setPageID=function(j){this.$CanvasCreationWaterfallTypedLogger1.page_id=j;return this;};h.prototype.setPageName=function(j){this.$CanvasCreationWaterfallTypedLogger1.page_name=j;return this;};h.prototype.setPagePublishedCanvasCount=function(j){this.$CanvasCreationWaterfallTypedLogger1.page_published_canvas_count=j;return this;};h.prototype.setPublishedURL=function(j){this.$CanvasCreationWaterfallTypedLogger1.published_url=j;return this;};h.prototype.setReorderComponentDistance=function(j){this.$CanvasCreationWaterfallTypedLogger1.reorder_component_distance=j;return this;};h.prototype.setSource=function(j){this.$CanvasCreationWaterfallTypedLogger1.source=j;return this;};h.prototype.setVC=function(j){this.$CanvasCreationWaterfallTypedLogger1.vc=j;return this;};h.prototype.setVideoID=function(j){this.$CanvasCreationWaterfallTypedLogger1.video_id=j;return this;};h.prototype.setViewerID=function(j){this.$CanvasCreationWaterfallTypedLogger1.viewer_id=j;return this;};var i={canvas_id:true,canvas_load_type:true,canvas_name:true,canvas_tags:true,duplicate_parent_canvas_id:true,editor_line_height:true,editor_padding_bottom:true,editor_padding_top:true,editor_photo_height:true,editor_photo_width:true,editor_url:true,element_payload:true,element_type:true,error_code:true,event_details:true,event_name:true,help_page_event_name:true,incomplete_elements:true,is_new_user:true,page_canvas_count:true,page_id:true,page_name:true,page_published_canvas_count:true,published_url:true,reorder_component_distance:true,source:true,vc:true,video_id:true,viewer_id:true};f.exports=h;}),null);
__d('RichMediaEditorActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirrorRecursive')({ADD_DOCUMENT_ELEMENT:true,ADD_ELEMENTS_SELECTED:true,ADD_FILES_TO_DOCUMENT_ELEMENT:true,BACK_TO_MENU_CLICKED:true,CANVAS_TEMPLATE_SELECTED:false,COLLAPSE_EXPANDED_ELEMENTS:false,CREATE_DEFAULT_DOCUMENT:true,DELETE_ELEMENT:true,DESELECT_ELEMENT_TO_ADD:true,EDIT_DOCUMENT_ELEMENT:true,FETCH_TEMPLATES:null,LOAD_BLANK_CANVAS:false,LOAD_CANVAS_TEMPLATE:false,LOAD_DOCUMENT:true,MOVE_ELEMENT_DOWN:true,MOVE_ELEMENT_UP:true,REPLACE_FILE_IN_DOCUMENT:true,RESET_UNPUBLISHED_CANVAS:true,SAVE_INCOMPLETE_ELEMENTS:false,SELECT_ELEMENT_TO_ADD:true,SET_ADD_COMPONENT_DIALOG_SHOWN:true,SET_CANVAS_PAGEID:null,SET_CANVAS_SOURCE:null,SET_CUSTOMIZE_THEME_COLOR:true,SET_DIALOG_CANVAS:true,SET_DIALOG_SHOWN:true,SET_DOCUMENT_EDIT_STATE:true,SET_DOCUMENT_NAME:true,SET_DOCUMENT_THEME:true,SET_DOCUMENT_URL_DIALOG_SHOWN:true,SET_FORCE_EDIT_PUBLISHED:true,SET_NONEMPTY_ELEMENT_NAME:true,SET_PREVIEW_FAILED:true,SET_SAVE_FAILED:true,SET_SELECTED_CANVAS:true,SET_SENDING_PREVIEW:true,SET_SHOW_TEMPLATES:false,SET_SWIPE_TO_OPEN_ENABLED:true,SET_UNPUBLISHED_CANVAS:true,SET_USE_CUSTOMIZE_THEME_COLOR:true,SET_VALIDATION_FAILED:false,TEMPLATE_FETCHED:null,TOGGLE_DOCUMENT_DEBUG_PANE_SHOWN:true,TOGGLE_WELCOME_PANE_SHOWN:false,TOOLBAR_PUBLISH_CLICK:false,TRIGGER_NUX_TOUR:false,LOAD_PAGE_DATA_SUCCESS:false,LOAD_PAGE_DATA_ERROR:false},'RichMediaEditor');}),null);
__d("XCanvasAdsUtilsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ads\/canvas\/pageconfig\/",{page_id:{type:"String",required:true}});}),null);
__d('RichMediaEditorDataLoader',['AsyncRequest','AsyncResponse','XCanvasAdsUtilsController'],(function a(b,c,d,e,f,g){'use strict';var h={getCanvasPageData:function i(j){var k=c('XCanvasAdsUtilsController').getURIBuilder().setString('page_id',j).getURI();return new (c('AsyncRequest'))().setURI(k).exec();}};f.exports=h;}),null);
__d('RichMediaEditorDispatcher',['ReactDispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ReactDispatcher_DEPRECATED'));i=h&&h.prototype;function j(){i.constructor.call(this);this.dispatch=this.dispatch.bind(this);}f.exports=new j();}),null);
__d('RichMediaEditorDataDispatcher',['CanvasCreationWaterfallTypedLogger','RichMediaEditorDataLoader','RichMediaEditorActionTypes','AdsDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h={getCanvasPageData:function i(j,k,l){c('RichMediaEditorDataLoader').getCanvasPageData(j).then(function(m){var n=m.getPayload(),o=n.page_canvas_count,p=n.page_published_canvas_count;c('AdsDispatcher').handleUpdateFromViewAction({funnelLogger:l,logger:k,pageCanvasCount:o,pagePublishedCanvasCount:p,type:c('RichMediaEditorActionTypes').LOAD_PAGE_DATA_SUCCESS});})['catch'](function(m){c('AdsDispatcher').handleUpdateFromViewAction({funnelLogger:l,logger:k,type:c('RichMediaEditorActionTypes').LOAD_PAGE_DATA_ERROR});}).done();}};f.exports=h;}),null);
__d('RichMediaEditorConstants',[],(function a(b,c,d,e,f,g){'use strict';f.exports={EDITOR_HEIGHT:666,EDITOR_ELEMENT_ID_PREFIX:'editor_element',EDITOR_ELEMENT_CONTAINER_ID:'editor_element_container',EDITOR_FONT_FAMILIIES:['sans-serif','serif','HelveticaNeue-Regular','HelveticaNeue-Light','HelveticaNeue-Medium','HelveticaNeue-UltraLight','HelveticaNeue-CondensedBold','Georgia'],EDITOR_LINE_HEIGHT:['0.8','1.0','1.1','1.2','1.3','1.4','1.5','1.6','1.7','1.8','1.9','2.0'],EDITOR_DEFAULT_LINE_HEIGHT:'1.2',EDITOR_PADDING:['0','4','8','12','16','20','24','28','32','48','96','192'],EDITOR_DEFAULT_PADDING:'0',EDITOR_DEFAULT_TEXT_BUTTON_PADDING_VERTICAL:'48',EDITOR_DEFAULT_TEXT_BUTTON_PADDING_HORIZONTAL:'20',EDITOR_PADDING_PREVIEW_SCALE:1.2,MAX_LENGTH_SCRUBBABLE_GIF_SEC:30,MIN_LENGTH_SCRUBBABLE_GIF_SEC:1};}),null);
__d('RichMediaEditorUtil',['ads-lib-urllib'],(function a(b,c,d,e,f,g){'use strict';var h={isValidURL:function i(j){return c('ads-lib-urllib').isUrl(j);},normalizeURL:function i(j){return c('ads-lib-urllib').normalize(j);},isValidDeeplink:function i(j){return true;}};f.exports=h;}),null);
__d('RichMediaElementValidationUtil',['AdsCanvasEditorEnums'],(function a(b,c,d,e,f,g){'use strict';var h=c('AdsCanvasEditorEnums').LinkDestinationEnum,i={validateForAppstoreDestination:function j(k,l){if(l)for(var m=0;m<l.length;m++){var n=l[m];if(n===k)break;if(n.destination===h.NATIVE&&n.link&&k.destination===h.NATIVE&&k.link&&n.link!==k.link)return {isValid:false,errorMsg:'App store URLs should be same'};}return {isValid:true,errorMsg:''};}};f.exports=i;}),null);
__d('RichMediaRichFormatText',['ContentState','immutable','decodeBlocks','encodeBlocks','RichMediaEditorConstants'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record,k=c('RichMediaEditorConstants').EDITOR_FONT_FAMILIIES,l=c('RichMediaEditorConstants').EDITOR_LINE_HEIGHT,m=c('RichMediaEditorConstants').EDITOR_DEFAULT_LINE_HEIGHT,n={id:'',composedText:{entityMap:{},blocks:[]},textAlignment:'center',textColor:'#000',fontSize:15,fontFamily:k[0],lineHeight:m},o=j(n);h=babelHelpers.inherits(p,o);i=h&&h.prototype;p.create=function(q,r,s,t,u,v){return new p({composedText:c('encodeBlocks')(q),textAlignment:r,textColor:s,fontSize:t,fontFamily:u,lineHeight:v});};p.createDefault=function(){return p.create(c('ContentState').createFromText(''),'center','#777',15,k[0],m);};p.createFromObject=function(q){var r=q.fontFamily;if(k.indexOf(r)===-1)r=k[0];var s=q.lineHeight;if(l.indexOf(s)===-1)s=m;return new p({composedText:q.composedText,textAlignment:q.textAlignment,textColor:q.textColor,fontSize:q.fontSize,fontFamily:r,lineHeight:s});};p.getPlainTextFromComposedText=function(q){var r=c('decodeBlocks')(q.blocks,q.entityMap);return r.getPlainText();};function p(){h.apply(this,arguments);}f.exports=p;}),null);
__d('validateDeepLink',['AdsCreationConfig','URIRFC3986','arrayContains','trim'],(function a(b,c,d,e,f,g){'use strict';var h=c('AdsCreationConfig').deepLinkBlacklist.map(function(j){return new RegExp(c('trim')(j,'/'));});function i(j){j=j.toLowerCase();var k=j.indexOf('://');if(k===-1)return false;var l=j.slice(0,k);if(l&&l.includes('.')){if(!/^[a-z0-9][a-z0-9+-.]*$/.test(l))return false;}else{var m=c('URIRFC3986').parse(j);if(m==null||!m.scheme||!/^([a-z][a-z0-9+-.]*):/i.test(j))return false;}if(c('arrayContains')(['http','https'],l))return true;var n=h.some(function(o){return o.test(j);});return !n;}f.exports=i;}),null);
__d('RichMediaButtonElement',['immutable','InstantShoppingDocumentElementType','RichMediaEditorUtil','RichMediaElementValidationUtil','RichMediaRichFormatText','RichMediaEditorConstants','AdsCanvasEditorEnums','validateDeepLink'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('RichMediaEditorConstants').EDITOR_DEFAULT_TEXT_BUTTON_PADDING_VERTICAL,k=c('RichMediaEditorConstants').EDITOR_DEFAULT_TEXT_BUTTON_PADDING_HORIZONTAL,l=c('AdsCanvasEditorEnums').LinkDestinationEnum,m=c('immutable').Record,n=40,o={id:'',name:'',type:c('InstantShoppingDocumentElementType').BUTTON,index:0,expanded:false,advancedExpanded:false,padding:{paddingTop:j,paddingBottom:j,paddingLeft:k,paddingRight:k},buttonColor:'#000',isFilled:false,isFixedToBottom:false,link:'',deeplink:null,linkedCanvasName:null,destination:l.WEBSITE,richFormatText:c('RichMediaRichFormatText').createDefault()},p=m(o);h=babelHelpers.inherits(q,p);i=h&&h.prototype;q.create=function(r,s,t,u,v,w,x,y,z,aa,ba,ca,da){return new q({index:r,name:s,type:c('InstantShoppingDocumentElementType').BUTTON,expanded:t,advancedExpanded:u,padding:v,buttonColor:w,isFilled:x,isFixedToBottom:y,link:z,deeplink:aa,linkedCanvasName:ba,destination:ca,richFormatText:da});};q.createDefault=function(r){return q.create(r,'Button',true,false,{paddingTop:j,paddingBottom:j,paddingLeft:k,paddingRight:k},'#000',false,false,'',null,null,l.WEBSITE,c('RichMediaRichFormatText').createDefault());};q.createFromObject=function(r){return q.create(r.index,r.name,r.expanded,r.advancedExpanded,{paddingTop:r.padding&&r.padding.paddingTop?r.padding.paddingTop:j,paddingBottom:r.padding&&r.padding.paddingBottom?r.padding.paddingBottom:j,paddingLeft:r.padding&&r.padding.paddingLeft?r.padding.paddingLeft:k,paddingRight:r.padding&&r.padding.paddingRight?r.padding.paddingRight:k},r.buttonColor,r.isFilled,r.isFixedToBottom,r.link,r.deeplink,r.linkedCanvasName,r.destination,c('RichMediaRichFormatText').createFromObject(r.richFormatText));};q.validate=function(r,s){if(!r.link)return {isValid:false,errorMsg:'Empty Link URL'};if(!c('RichMediaEditorUtil').isValidURL(r.link))if(r.destination===l.NATIVE){return {isValid:false,errorMsg:'Invalid Store URL'};}else return {isValid:false,errorMsg:'Invalid Website URL'};var t=c('RichMediaElementValidationUtil').validateForAppstoreDestination(r,s);if(!t.isValid)return t;if(r.deeplink)if(!c('validateDeepLink')(r.deeplink))return {isValid:false,errorMsg:'Invalid Deeplink'};var u=c('RichMediaRichFormatText').getPlainTextFromComposedText(r.richFormatText.composedText);if(u.length>n)return {isValid:false,errorMsg:'Button text too long'};return {isValid:true,errorMsg:''};};function q(){h.apply(this,arguments);}f.exports=q;}),null);
__d('RichMediaCarouselItem',['immutable','RichMediaEditorUtil','RichMediaElementValidationUtil','AsyncUploadRequest','AdsCanvasEditorEnums','getByPath','validateDeepLink'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('AdsCanvasEditorEnums').LinkDestinationEnum,k=c('immutable').Record,l={id:'',index:0,photo:null,name:'',description:null,link:null,deeplink:null,linkedCanvasName:null,destination:j.WEBSITE,uploadStatus:null,uploadRequest:null},m=k(l);h=babelHelpers.inherits(n,m);i=h&&h.prototype;n.create=function(o,p,q,r,s,t,u,v,w,x,y){return new n({id:o,index:p,photo:q,name:r,description:s,link:t,deeplink:u,linkedCanvasName:v,destination:w,uploadStatus:x,uploadRequest:y});};n.createDefault=function(o,p,q){return n.create(o,p,null,'',null,null,null,null,j.WEBSITE,null,q);};n.createFromObject=function(o){return n.create(o.id||o.name+'_'+Date.now(),o.index,o.photo,o.name,o.description,o.link,o.deeplink,o.linkedCanvasName,o.destination,null,o.uploadRequest);};n.createFromPayloadAndElementField=function(o,p){if(p)o.photo.src=c('getByPath')(p,['element','photo','source']);return n.create(o.id||o.name+'_'+Date.now(),o.index,o.photo,o.name,o.description,o.link,o.deeplink,o.linkedCanvasName,o.destination,null,o.uploadRequest);};n.validate=function(o,p){if(!o.photo)return {isValid:false,errorMsg:'Missing photo'};if(o.link&&!c('RichMediaEditorUtil').isValidURL(o.link))if(o.destination===j.NATIVE){return {isValid:false,errorMsg:'Invalid Store URL'};}else return {isValid:false,errorMsg:'Invalid Website URL'};var q=c('RichMediaElementValidationUtil').validateForAppstoreDestination(o,p);if(!q.isValid)return q;if(o.deeplink)if(!c('validateDeepLink')(o.deeplink))return {isValid:false,errorMsg:'Invalid Deeplink'};if(o.uploadStatus&&o.uploadStatus.isUploading!==false)return {isValid:false,errorMsg:''};return {isValid:true,errorMsg:''};};function n(){h.apply(this,arguments);}f.exports=n;}),null);
__d('RichMediaElement',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record;h=babelHelpers.inherits(k,j({id:'',index:-1,name:'',type:-1,expanded:false,advancedExpanded:false}));i=h&&h.prototype;function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('RichMediaCarouselElement',['immutable','InstantShoppingDocumentElementType','RichMediaCarouselItem','AsyncResponse','AsyncUploadRequest','RichMediaElement','RichMediaEditorConstants','getByPath'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('RichMediaEditorConstants').EDITOR_DEFAULT_PADDING,k=c('immutable').Record,l={id:'',name:'',type:c('InstantShoppingDocumentElementType').SLIDESHOW,index:0,expanded:false,advancedExpanded:false,padding:{paddingTop:j,paddingBottom:j},layout:'fit_to_width',items:[],selectedItemIndex:0,addFile:function o(){return null;},onFileProgress:function o(){return n.createDefault(0);},onFileSuccess:function o(){return n.createDefault(0);},onFileError:function o(){return n.createDefault(0);}},m=k(l);h=babelHelpers.inherits(n,m);i=h&&h.prototype;n.create=function(o,p,q,r,s,t,u,v){return new n({index:o,name:p,type:c('InstantShoppingDocumentElementType').SLIDESHOW,expanded:q,advancedExpanded:r,padding:s,layout:t,items:u,selectedItemIndex:v});};n.createDefault=function(o){return n.create(o,'Carousel',true,false,{paddingTop:j,paddingBottom:j},'fit_to_width',[0,1].map(function(p){return (c('RichMediaCarouselItem').createDefault(p+'_'+Math.round(Math.random()*10000)+'_'+Date.now(),p,null));}),0);};n.createFromObject=function(o){var p=[],q=0;o.items.forEach(function(s){if(s){var t=c('RichMediaCarouselItem').createFromObject(s);p.push(t.set('index',q));q++;}});var r=o.selectedItemIndex||o.selectedItemIndex===0?o.selectedItemIndex:0;r=Math.min(Math.max(0,r),p.length-1);return n.create(o.index,o.name,o.expanded,o.advancedExpanded,o.padding,o.layout,p,r);};n.createFromPayloadAndElementField=function(o,p){var q=[],r=c('getByPath')(p,['element','child_elements','length'],0);for(var s=0;s<o.items.length;s++){var t=o.items[s],u=s<r&&p.element&&p.element.child_elements?p.element.child_elements[s]:null;if(t){var v=c('RichMediaCarouselItem').createFromPayloadAndElementField(t,u);q.push(v.set('index',s));}}var w=o.selectedItemIndex||o.selectedItemIndex===0?o.selectedItemIndex:0;w=Math.min(Math.max(0,w),q.length-1);return n.create(o.index,o.name,o.expanded,o.advancedExpanded,o.padding,o.layout,q,w);};n.validate=function(o,p){if(o.items.length<=1)return {isValid:false,errorMsg:'Upload at least 2 images to create a carousel'};for(var q=0;q<o.items.length;++q){var r=o.items[q],s=c('RichMediaCarouselItem').validate(r,p);if(!s.isValid)return {isValid:false,errorMsg:'Item '+(q+1)+' '+s.errorMsg};}return {isValid:true,errorMsg:''};};n.equals=function(o,p){if(o.padding&&(o.padding.paddingTop!==p.padding.paddingTop||o.padding.paddingBottom!==p.padding.paddingBottom)||o.layout!==p.layout||o.selectedItemIndex!==p.selectedItemIndex||o.items.length!==p.items.length||o.items.some(function(q,r){if(!q.photo||!p.items[r].photo)return true;return q.photo.src!==p.items[r].photo.src;}))return false;return true;};n.prototype.addFile=function(o,p){this.items.push(c('RichMediaCarouselItem').createDefault(o,this.items.length,p));return this;};n.prototype.reorderItem=function(o,p){var q=this.items[o];this.items.splice(o,1);this.items.splice(p,0,q);return this;};n.prototype.replaceFile=function(o,p){var q=this.items.findIndex(function(r){return r.id===o;});if(q<0)return this;this.items[q]=this.items[q].set('uploadStatus',{isUploading:true,percentage:0});return this;};n.prototype.onFileProgress=function(o,p){var q=this.items.findIndex(function(r){return r.id===o;});this.items[q]=this.items[q].set('uploadStatus',{isUploading:true,percentage:p});return this;};n.prototype.onFileSuccess=function(o,p){var q=this.items.findIndex(function(r){return r.id===o;});this.items[q]=this.items[q].set('uploadStatus',{isUploading:false}).set('photo',p.payload.photo);return this;};n.prototype.onFileError=function(o){var p=this.items.findIndex(function(q){return q.id===o;});this.items[p]=this.items[p].set('uploadStatus',{isUploading:false});return this;};function n(){h.apply(this,arguments);}f.exports=n;}),null);
/**
 * @providesModule colr-convert
 * @preserve-header
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014 George Czabania
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */__d("colr-convert",[],(function a(b,c,d,e,f,g){'use strict';f.exports={grayscale:{rgb:q},hex:{rgb:i},rgb:{hsl:k,hsv:l,hex:j,grayscale:r},hsl:{rgb:m,hsv:n},hsv:{rgb:o,hsl:p}};function h(s){return (s<58?s-48:s<71?s-55:s-87);}function i(s){var t=s[0]==='#'?1:0,u=s.length;if(u-t<3)throw new Error('hex input must be at least three chars long');var v,w,x,y=h(s.charCodeAt(0+t)),z=h(s.charCodeAt(1+t)),aa=h(s.charCodeAt(2+t));if(u-t>=6){v=(y<<4)+z;w=(aa<<4)+h(s.charCodeAt(3+t));x=(h(s.charCodeAt(4+t))<<4)+h(s.charCodeAt(5+t));}else{v=(y<<4)+y;w=(z<<4)+z;x=(aa<<4)+aa;}if(v<0||v>255||w<0||w>255||x<0||x>255)throw new Error('hex input is invalid');return [v,w,x];}function j(s){return '#'+('000000'+((s[0]<<16)+(s[1]<<8)+s[2]).toString(16)).slice(-6);}function k(s){var t=s[0]/255,u=s[1]/255,v=s[2]/255,w=Math.min(t,u,v),x=Math.max(t,u,v),y=x-w,z,aa,ba;if(x===w){z=0;}else if(t===x){z=(u-v)/y;}else if(u===x){z=2+(v-t)/y;}else if(v===x)z=4+(t-u)/y;z=Math.min(z*60,360);if(z<0)z+=360;ba=(w+x)/2;if(x===w){aa=0;}else if(ba<=.5){aa=y/(x+w);}else aa=y/(2-x-w);return [z,aa*100,ba*100];}function l(s){var t=s[0],u=s[1],v=s[2],w=Math.min(t,u,v),x=Math.max(t,u,v),y=x-w,z,aa,ba;if(x===0){aa=0;}else aa=(y/x*1000)/10;if(x===w){z=0;}else if(t===x){z=(u-v)/y;}else if(u===x){z=2+(v-t)/y;}else if(v===x)z=4+(t-u)/y;z=Math.min(z*60,360);if(z<0)z+=360;ba=((x/255)*1000)/10;return [z,aa,ba];}function m(s){var t=s[0]/360,u=s[1]/100,v=s[2]/100,w,x,y;if(u===0){w=x=y=v;}else{var z=v<.5?v*(u+1):v+u-v*u,aa=2*v-z,ba;ba=t+1/3;if(ba<0){ba+=1;}else if(ba>1)ba-=1;if(ba<1/6){w=aa+(z-aa)*ba*6;}else if(ba<1/2){w=z;}else if(ba<2/3){w=aa+(z-aa)*(2/3-ba)*6;}else w=aa;ba=t;if(ba<0){ba+=1;}else if(ba>1)ba-=1;if(ba<1/6){x=aa+(z-aa)*ba*6;}else if(ba<1/2){x=z;}else if(ba<2/3){x=aa+(z-aa)*(2/3-ba)*6;}else x=aa;ba=t-1/3;if(ba<0){ba+=1;}else if(ba>1)ba-=1;if(ba<1/6){y=aa+(z-aa)*ba*6;}else if(ba<1/2){y=z;}else if(ba<2/3){y=aa+(z-aa)*(2/3-ba)*6;}else y=aa;}return [w*255,x*255,y*255];}function n(s){var t=s[0],u=s[1]/100,v=s[2]/100,w,x;if(u===0)return [t,0,v*100];if(v===0)return [t,0,0];v*=2;u*=(v<=1)?v:2-v;x=(v+u)/2;w=(2*u)/(v+u);return [t,w*100,x*100];}function o(s){var t=s[0]/60,u=s[1]/100,v=s[2]/100,w=Math.floor(t)%6,x=t-Math.floor(t),y=255*v*(1-u),z=255*v*(1-(u*x)),aa=255*v*(1-(u*(1-x)));v=255*v;switch(w){case 0:return [v,aa,y];case 1:return [z,v,y];case 2:return [y,v,aa];case 3:return [y,z,v];case 4:return [aa,y,v];case 5:return [v,y,z];}}function p(s){var t=s[0],u=s[1]/100,v=s[2]/100,w,x;if(u===0)return [t,0,v*100];if(v===0)return [t,0,0];x=(2-u)*v;w=u*v;w/=(x<=1)?x:2-x;x/=2;return [t,w*100,x*100];}function q(s){return [s,s,s];}function r(s){return (s[0]*299+s[1]*587+s[2]*114)/1000;}}),null);
/**
 * @providesModule colr
 * @fullSyntaxTransform
 * 
 * @preserve-header
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014 George Czabania
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */__d('colr',['colr-convert'],(function a(b,c,d,e,f,g){'use strict';function h(){this._={};}h.fromHex=function(m){return new h().fromHex(m);};h.fromGrayscale=function(m){return new h().fromGrayscale(m);};h.fromRgb=function(m,n,o){return new h().fromRgb(m,n,o);};h.fromRgbArray=function(m){return new h().fromRgb(m[0],m[1],m[2]);};h.fromRgbObject=function(m){return new h().fromRgb(m.r,m.g,m.b);};h.fromHsl=function(m,n,o){return new h().fromHsl(m,n,o);};h.fromHslArray=function(m){return new h().fromHsl(m[0],m[1],m[2]);};h.fromHslObject=function(m){return new h().fromHsl(m.h,m.s,m.l);};h.fromHsv=function(m,n,o){return new h().fromHsv(m,n,o);};h.fromHsvArray=function(m){return new h().fromHsv(m[0],m[1],m[2]);};h.fromHsvObject=function(m){return new h().fromHsv(m.h,m.s,m.v);};h.prototype.fromHex=function(m){var n=c('colr-convert').hex.rgb(m);this._={rgb:n};return this;};h.prototype.fromGrayscale=function(m){m=j(m);var n=c('colr-convert').grayscale.rgb(m);this._={rgb:n};return this;};h.prototype.fromRgb=function(m,n,o){if(typeof m!=='number'||typeof n!=='number'||typeof o!=='number')throw new Error('Arguments must be numbers');var p=k(m,n,o);this._={rgb:p};return this;};h.prototype.fromRgbArray=function(m){return this.fromRgb(m[0],m[1],m[2]);};h.prototype.fromRgbObject=function(m){return this.fromRgb(m.r,m.g,m.b);};h.prototype.fromHsl=function(m,n,o){if(typeof m!=='number'||typeof n!=='number'||typeof o!=='number')throw new Error('Arguments must be numbers');this._={hsl:l(m,n,o)};return this;};h.prototype.fromHslArray=function(m){return this.fromHsl(m[0],m[1],m[2]);};h.prototype.fromHslObject=function(m){return this.fromHsl(m.h,m.s,m.l);};h.prototype.fromHsv=function(m,n,o){if(typeof m!=='number'||typeof n!=='number'||typeof o!=='number')throw new Error('Arguments must be numbers');this._={hsv:l(m,n,o)};return this;};h.prototype.fromHsvArray=function(m){return this.fromHsv(m[0],m[1],m[2]);};h.prototype.fromHsvObject=function(m){return this.fromHsv(m.h,m.s,m.v);};h.prototype.toHex=function(){var m=this._.hex;if(m!==undefined)return m;var n,o=this._.rgb;if(o!==undefined){n=o;}else n=this.toRawRgbArray();n[0]=Math.round(n[0]);n[1]=Math.round(n[1]);n[2]=Math.round(n[2]);var p=c('colr-convert').rgb.hex(n);this._.hex=p;return p;};h.prototype.toGrayscale=function(){var m=this._.grayscale;if(m!==undefined)return m;var n,o=this._.rgb;if(o!==undefined){n=o;}else n=this.toRawRgbArray();var p=c('colr-convert').rgb.grayscale(n);this._.grayscale=p;return p;};h.prototype.toRawRgbArray=function(){var m=this._.rgb;if(m!==undefined)return m;var n;if((n=this._.hsv)!==undefined){n=c('colr-convert').hsv.rgb(n);}else if((n=this._.hsl)!==undefined){n=c('colr-convert').hsl.rgb(n);}else throw new Error('No data to convert');this._.rgb=n;return n;};h.prototype.toRawRgbObject=function(){var m=this.toRawRgbArray();return {r:m[0],g:m[1],b:m[2]};};h.prototype.toRgbArray=function(){var m=this.toRawRgbArray();return [Math.round(m[0]),Math.round(m[1]),Math.round(m[2])];};h.prototype.toRgbObject=function(){var m=this.toRgbArray();return {r:m[0],g:m[1],b:m[2]};};h.prototype.toRawHslArray=function(){var m=this._.hsl;if(m!==undefined)return m;var n;if((n=this._.hsv)!==undefined){n=c('colr-convert').hsv.hsl(n);}else if((n=this._.rgb)!==undefined){n=c('colr-convert').rgb.hsl(n);}else throw new Error('No data to convert');this._.hsl=n;return n;};h.prototype.toRawHslObject=function(){var m=this.toRawHslArray();return {h:m[0],s:m[1],l:m[2]};};h.prototype.toHslArray=function(){var m=this.toRawHslArray();return [Math.round(m[0]),Math.round(m[1]),Math.round(m[2])];};h.prototype.toHslObject=function(){var m=this.toHslArray();return {h:m[0],s:m[1],l:m[2]};};h.prototype.toRawHsvArray=function(){var m=this._.hsv;if(m!==undefined)return m;var n;if((n=this._.hsl)!==undefined){n=c('colr-convert').hsl.hsv(n);}else if((n=this._.rgb)!==undefined){n=c('colr-convert').rgb.hsv(n);}else throw new Error('No data to convert');this._.hsv=n;return n;};h.prototype.toRawHsvObject=function(){var m=this.toRawHsvArray();return {h:m[0],s:m[1],v:m[2]};};h.prototype.toHsvArray=function(){var m=this.toRawHsvArray();return [Math.round(m[0]),Math.round(m[1]),Math.round(m[2])];};h.prototype.toHsvObject=function(){var m=this.toHsvArray();return {h:m[0],s:m[1],v:m[2]};};h.prototype.lighten=function(m){var n=this.toRawHslArray();n[2]=i(n[2]+m);this._={hsl:n};return this;};h.prototype.darken=function(m){var n=this.toRawHslArray();n[2]=i(n[2]-m);this._={hsl:n};return this;};h.prototype.clone=function(){var m=new h();m._.hex=this._.hex;m._.grayscale=this._.grayscale;if(this._.rgb!==undefined)m._.rgb=this._.rgb.slice(0);if(this._.hsv!==undefined)m._.hsv=this._.hsv.slice(0);if(this._.hsl!==undefined)m._.hsl=this._.hsl.slice(0);return m;};function i(m){return Math.max(Math.min(m,100),0);}function j(m){return Math.max(Math.min(m,255),0);}function k(m,n,o){return [Math.max(Math.min(m,255),0),Math.max(Math.min(n,255),0),Math.max(Math.min(o,255),0)];}function l(m,n,o){return [Math.max(Math.min(m,360),0),Math.max(Math.min(n,100),0),Math.max(Math.min(o,100),0)];}f.exports=h;}),null);
__d('CanvasColorUtils',['Assert','colr'],(function a(b,c,d,e,f,g){'use strict';function h(k){var l=Math.floor(k*255/100).toString(16);if(l.length===1)l='0'+l;return l;}function i(k){c('Assert').isTrue(k.length<=2,'invalid hex string: '+k);return Math.ceil(parseInt(k,16)/255*100);}function j(k){return c('colr').fromHex(k).toGrayscale()/255;}f.exports={convertColorWithOpacityToARGB:function k(l){var m=l.color;c('Assert').isTrue(6===m.length,'unexpected length string: '+m);var n=h(l.opacity)+m;c('Assert').isTrue(n.length===8,'generated invalid argb: '+n);return n;},convertARGBToColorWithOpacity:function k(l){c('Assert').isTrue(l.length===8,'Got argb: '+l);return {color:l.slice(2),opacity:i(l.slice(0,2))};},convertRGBtoCSSColorWithOpacity:function k(l,m){c('Assert').isTrue(6===l.length,'unexpected length string: '+l);return 'rgba('+parseInt(l.slice(0,2),16)+','+parseInt(l.slice(2,4),16)+','+parseInt(l.slice(4,6),16)+','+m+')';},luminosityOfColor:j,colorContrastingWith:function k(l){return j(l)>.5?'#000':'#FFF';}};}),null);
__d('RichMediaHeaderElement',['CanvasColorUtils','immutable','InstantShoppingDocumentElementType','RichMediaEditorConstants','getByPath'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('RichMediaEditorConstants').EDITOR_DEFAULT_PADDING,k=c('immutable').Record,l={id:'',name:'',type:c('InstantShoppingDocumentElementType').HEADER,index:0,expanded:false,advancedExpanded:false,padding:{paddingTop:j,paddingBottom:j},fixToTop:true,photo:null,backgroundColor:null,isCulturalMomentHeader:null,uploadStatus:null},m=k(l);h=babelHelpers.inherits(n,m);i=h&&h.prototype;n.create=function(o,p,q,r,s,t,u,v,w){return new n({name:o,type:c('InstantShoppingDocumentElementType').HEADER,expanded:q,advancedExpanded:r,padding:s,index:p,fixToTop:true,photo:t,backgroundColor:u,isCulturalMomentHeader:v,uploadStatus:w});};n.createDefault=function(o){return n.create('Header',o,true,false,{paddingTop:j,paddingBottom:j},null,'FFFFFFFF',null,null);};n.createFromObject=function(o){return n.create(o.name,o.index,o.expanded,o.advancedExpanded,o.padding,o.photo,o.backgroundColor,o.isCulturalMomentHeader);};n.createFromPayloadAndElementField=function(o,p){if(o.photo)o.photo.src=c('getByPath')(p,['element','child_elements','0','element','photo','source']);return n.create(o.name,o.index,o.expanded,o.advancedExpanded,o.padding,o.photo,o.backgroundColor,o.isCulturalMomentHeader);};n.validate=function(o){if(!o.photo)return {isValid:false,errorMsg:'Missing photo'};if(!o.backgroundColor)return {isValid:false,errorMsg:'Missing background color'};if(o.uploadStatus&&o.uploadStatus.isUploading!==false)return {isValid:false,errorMsg:''};return {isValid:true,errorMsg:''};};n.prototype.isOpaque=function(){if(!this.backgroundColor)return true;var o=c('CanvasColorUtils').convertARGBToColorWithOpacity(this.backgroundColor);if(o.opacity===100)return true;return false;};function n(){h.apply(this,arguments);}f.exports=n;}),null);
__d('RichMediaCulturalMomentHeaderElement',['InstantShoppingDocumentElementType','RichMediaEditorConstants','RichMediaHeaderElement'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('RichMediaEditorConstants').EDITOR_DEFAULT_PADDING;h=babelHelpers.inherits(k,c('RichMediaHeaderElement'));i=h&&h.prototype;k.create=function(l,m,n,o,p,q,r,s,t){return new k({name:l,type:c('InstantShoppingDocumentElementType').HEADER,expanded:n,advancedExpanded:o,padding:p,index:m,fixToTop:true,photo:q,backgroundColor:r,isCulturalMomentHeader:s,uploadStatus:t});};k.createDefault=function(l){return k.create('Header',l,true,false,{paddingTop:j,paddingBottom:j},null,'FF000000',true,null);};k.createFromObject=function(l){return k.create(l.name,l.index,l.expanded,l.advancedExpanded,l.padding,l.photo,l.backgroundColor,l.isCulturalMomentHeader);};k.createFromPayloadAndElementField=function(l,m){return k.create(l.name,l.index,l.expanded,l.advancedExpanded,l.padding,l.photo,l.backgroundColor,l.isCulturalMomentHeader);};k.validate=function(l){if(!l.backgroundColor)return {isValid:false,errorMsg:'Missing background color'};return {isValid:true,errorMsg:''};};function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('RichMediaCultureMomentPopularMediaElement',['immutable','InstantShoppingDocumentElementType'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record,k={id:'',name:'',type:c('InstantShoppingDocumentElementType').CULTURAL_MOMENT_POPULAR_MEDIA,index:0,previewOnly:true,expanded:false,advancedExpanded:false,keyword:'',previewPhotos:null,previewFetchedTime:0,handPickedPhotos:['','','','',''],useKeywordSearch:false,title:'',actionTitle:'',uriForSeeAll:'',permalinks:null},l=j(k);h=babelHelpers.inherits(m,l);i=h&&h.prototype;m.create=function(n,o,p,q,r,s,t,u,v,w,x,y,z){return new m({index:n,name:o,type:c('InstantShoppingDocumentElementType').CULTURAL_MOMENT_POPULAR_MEDIA,previewOnly:p,expanded:q,advancedExpanded:r,keyword:s,previewPhotos:t,handPickedPhotos:u,useKeywordSearch:v,title:w,actionTitle:x,uriForSeeAll:y,permalinks:z});};m.createDefault=function(n){return m.create(n,'Culture Moment Popular Media Image',true,true,false,'',null,['','','','',''],false,'','','',null);};m.createFromObject=function(n){return m.create(n.index,n.name,n.previewOnly,n.expanded,n.advancedExpanded,n.keyword,n.previewPhotos,n.handPickedPhotos,n.useKeywordSearch,n.title,n.actionTitle,n.uriForSeeAll,n.permalinks);};m.validate=function(n){if(n.keyword==null||n.keyword.length===0)return {isValid:false,errorMsg:'Keyword should be set up'};return {isValid:true,errorMsg:''};};function m(){h.apply(this,arguments);}f.exports=m;}),null);
__d('RichMediaEditorActions',['Map','RichMediaEditorActionTypes','AdsDispatcher'],(function a(b,c,d,e,f,g){'use strict';f.exports={collapseExpandedElements:function h(){c('AdsDispatcher').handleUpdateFromViewAction({type:c('RichMediaEditorActionTypes').COLLAPSE_EXPANDED_ELEMENTS});},setDocumentName:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({name:i,type:c('RichMediaEditorActionTypes').SET_DOCUMENT_NAME});},setNonEmptyElementName:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({element:i,type:c('RichMediaEditorActionTypes').SET_NONEMPTY_ELEMENT_NAME});},setDocumentTheme:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({theme:i,type:c('RichMediaEditorActionTypes').SET_DOCUMENT_THEME});},setDocumentEditState:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({editState:i,type:c('RichMediaEditorActionTypes').SET_DOCUMENT_EDIT_STATE});},addDocumentElement:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({element:i,type:c('RichMediaEditorActionTypes').ADD_DOCUMENT_ELEMENT});},addFilesToDocumentElement:function h(i,j,k){c('AdsDispatcher').handleUpdateFromViewAction({element:i,pageID:j,files:k,type:c('RichMediaEditorActionTypes').ADD_FILES_TO_DOCUMENT_ELEMENT});},replaceFileInDocumentElement:function h(i,j,k,l){c('AdsDispatcher').handleUpdateFromViewAction({element:i,pageID:j,itemID:k,files:l,type:c('RichMediaEditorActionTypes').REPLACE_FILE_IN_DOCUMENT});},editDocumentElement:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({element:i,type:c('RichMediaEditorActionTypes').EDIT_DOCUMENT_ELEMENT});},moveElementUp:function h(i){var j=arguments.length<=1||arguments[1]===undefined?1:arguments[1];c('AdsDispatcher').handleUpdateFromViewAction({element:i,distance:j,type:c('RichMediaEditorActionTypes').MOVE_ELEMENT_UP});},moveElementDown:function h(i){var j=arguments.length<=1||arguments[1]===undefined?1:arguments[1];c('AdsDispatcher').handleUpdateFromViewAction({element:i,distance:j,type:c('RichMediaEditorActionTypes').MOVE_ELEMENT_DOWN});},deleteElement:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({element:i,type:c('RichMediaEditorActionTypes').DELETE_ELEMENT});},createDefaultDocument:function h(){c('AdsDispatcher').handleUpdateFromViewAction({type:c('RichMediaEditorActionTypes').CREATE_DEFAULT_DOCUMENT});},saveIncompleteElements:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({elementValidation:i,type:c('RichMediaEditorActionTypes').SAVE_INCOMPLETE_ELEMENTS});},setPreviewFailed:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({previewFailed:i,type:c('RichMediaEditorActionTypes').SET_PREVIEW_FAILED});},setSendingPreview:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({sendingPreview:i,type:c('RichMediaEditorActionTypes').SET_SENDING_PREVIEW});},setSaveFailed:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({saveFailed:i,type:c('RichMediaEditorActionTypes').SET_SAVE_FAILED});},setValidationFailed:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({elementValidation:i,type:c('RichMediaEditorActionTypes').SET_VALIDATION_FAILED});},setDialogShown:function h(i,j){c('AdsDispatcher').handleUpdateFromViewAction({dialogID:i,dialogShown:j,type:c('RichMediaEditorActionTypes').SET_DIALOG_SHOWN});},setDialogCanvas:function h(i,j){c('AdsDispatcher').handleUpdateFromViewAction({dialogID:i,canvas:j,type:c('RichMediaEditorActionTypes').SET_DIALOG_CANVAS});},setDocumentURLDialogShown:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({dialogShown:i,type:c('RichMediaEditorActionTypes').SET_DOCUMENT_URL_DIALOG_SHOWN});},setForceEditPublished:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({forceEditPublished:i,type:c('RichMediaEditorActionTypes').SET_FORCE_EDIT_PUBLISHED});},toggleDocumentDebugPaneShown:function h(){c('AdsDispatcher').handleUpdateFromViewAction({type:c('RichMediaEditorActionTypes').TOGGLE_DOCUMENT_DEBUG_PANE_SHOWN});},toggleWelcomePaneShown:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({shown:i,type:c('RichMediaEditorActionTypes').TOGGLE_WELCOME_PANE_SHOWN});},triggerNuxTour:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({shown:i,type:c('RichMediaEditorActionTypes').TRIGGER_NUX_TOUR});},loadDocument:function h(i,j,k,l,m,n,o){c('AdsDispatcher').handleUpdateFromViewAction({documentName:i,documentTheme:j,documentID:k,elementsPayload:l,elements:m,style_list:n,tags:o,type:c('RichMediaEditorActionTypes').LOAD_DOCUMENT});},selectElementToAdd:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({elementTypeName:i,type:c('RichMediaEditorActionTypes').SELECT_ELEMENT_TO_ADD});},deselectElementToAdd:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({elementTypeName:i,type:c('RichMediaEditorActionTypes').DESELECT_ELEMENT_TO_ADD});},addElementsSelected:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({elementsSelected:i,type:c('RichMediaEditorActionTypes').ADD_ELEMENTS_SELECTED});},setAddComponentDialogShown:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({dialogShown:i,type:c('RichMediaEditorActionTypes').SET_ADD_COMPONENT_DIALOG_SHOWN});},setUseCustomizeThemeColor:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({useCustomizeThemeColor:i,type:c('RichMediaEditorActionTypes').SET_USE_CUSTOMIZE_THEME_COLOR});},setCustomizeThemeColor:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({customizeThemeColor:i,type:c('RichMediaEditorActionTypes').SET_CUSTOMIZE_THEME_COLOR});},setUnpublishedCanvas:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({unpublishedCanvas:i,type:c('RichMediaEditorActionTypes').SET_UNPUBLISHED_CANVAS});},resetUnpublishedCanvas:function h(){c('AdsDispatcher').handleUpdateFromViewAction({type:c('RichMediaEditorActionTypes').RESET_UNPUBLISHED_CANVAS});},setSelectedCanvas:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({selectedCanvas:i,type:c('RichMediaEditorActionTypes').SET_SELECTED_CANVAS});},loadCanvasTemplate:function h(i,j,k){c('AdsDispatcher').handleUpdateFromViewAction({selectedTemplate:i,elementsPayload:j,elements:k,type:c('RichMediaEditorActionTypes').LOAD_CANVAS_TEMPLATE});},setShowTemplates:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({showTemplates:i,type:c('RichMediaEditorActionTypes').SET_SHOW_TEMPLATES});},canvasTemplateSelected:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({selectedTemplate:i,type:c('RichMediaEditorActionTypes').CANVAS_TEMPLATE_SELECTED});},setBackToMenuFromUnsavedCanvasDialogShown:function h(i,j){c('AdsDispatcher').handleUpdateFromViewAction({dialogShown:i,confirmed:j,type:c('RichMediaEditorActionTypes').BACK_TO_MENU_CLICKED});},setCanvasSource:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({source:i,type:c('RichMediaEditorActionTypes').SET_CANVAS_SOURCE});},setCanvasPageId:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({pageId:i,type:c('RichMediaEditorActionTypes').SET_CANVAS_PAGEID});},setSwipeToOpenEnabled:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({value:i,type:c('RichMediaEditorActionTypes').SET_SWIPE_TO_OPEN_ENABLED});},fetchTemplates:function h(i,j){c('AdsDispatcher').handleUpdateFromViewAction({accessToken:i,pageID:j,type:c('RichMediaEditorActionTypes').FETCH_TEMPLATES});},templateFetched:function h(i,j,k){c('AdsDispatcher').handleUpdateFromViewAction({template:i,payload:j,elements:k,type:c('RichMediaEditorActionTypes').TEMPLATE_FETCHED});},toolbarPublishClick:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({elementValidation:i,type:c('RichMediaEditorActionTypes').TOOLBAR_PUBLISH_CLICK});}};}),null);
__d('AdsCanvasEditorFunnelLoggingConstants',[],(function a(b,c,d,e,f,g){'use strict';f.exports={FUNNEL_LOGGING_NAME:'WWW_CANVAS_EDITOR_FUNNEL',FUNNEL_LOGGING_EVENT:{ADD_ELEMENT:'add_element',BACK_TO_MENU:'back_to_menu',CREATE_POST:'create_post',CHANGE_CANVAS_TITLE:'change_canvas_title',CHANGE_ELEMENT_TITLE:'change_element_title',DUPLICATE:'duplicate',GET_URL:'get_url',GETTING_STARTED_GUIDE:'getting_started_guide',PREVIEW_FAIL:'preview_fail',PREVIEW_SELF:'preview_self',PREVIEW_SHARE:'preview_share',PUBLISH:'publish_canvas',PUBLISH_FAILURE:'publish_failure',REMOVE_ELEMENT:'remove_element',SAVE:'save_canvas',SAVE_INCOMPLETE_ELEMENTS:'save_incomplete_elements',SAVE_FAILURE:'save_failure',SWIPE_TO_OPEN_TOGGLED:'swipe_to_open_toggled',SWITCH_ELEMENT:'switch_element',TEMPLATE_PREVIEW_LAYOUT:'template_preview_layout',TEMPLATE_SELECT_LAYOUT:'template_select_layout',TEMPLATE_DOWNLOAD_LAYOUT:'template_download_layout',TOOLBAR_PUBLISH_CLICKED:'toolbar_publish_clicked',UPLOAD_VIDEO:'upload_video',UPLOAD_PHOTO:'upload_photo',VALIDATION_ERROR:'validation_error',WELCOMESCREEN_BLANKCANVAS:'welcome_screen_blankcanvas',WELCOMESCREEN_EXAMPLES:'welcome_screen_examples',WELCOMESCREEN_TEMPLATE:'welcome_screen_template',WELCOMESCREEN_TIPS:'welcome_screen_tips',WELCOMESCREEN_TOUR:'welcome_screen_tour'},FUNNEL_LOGGING_TIMEOUT:999999,FUNNEL_LOGGING_TAGS:{EDITOR_EXIT:'editor_exit',FIRST_TIME_USER:'first_time_user',IS_EMPLOYEE:'is_employee',LOAD_EXISTING_DOC_WITH_VALIDATION_ERRORS:'load_existing_doc_with_validation_errors',PAGE_HAS_NEVER_CREATED:'page_has_never_created',PAGE_HAS_NEVER_PUBLISHED:'page_has_never_published',WELCOMESCREEN_SHOWN:'welcome_screen_shown'}};}),null);
__d('RichMediaDocumentThemeConstants',[],(function a(b,c,d,e,f,g){'use strict';f.exports={WHITE:'FFFFFFFF',BLACK:'FF000000'};}),null);
__d('RichMediaEditorTemplateLayouts',['fbt'],(function a(b,c,d,e,f,g,h){'use strict';f.exports={LAYOUT_CONFIGS:[{title:h._("Single Screen"),subtitle:h._("Quickly put together a Canvas that complements the message from your ad."),value:'single_screen'},{title:h._("Storytelling"),subtitle:h._("Guide people through a story with photos, videos and text."),value:'storytelling'},{title:h._("Fullscreen Media"),subtitle:h._("Show a set of photos and videos in a fullscreen layout."),value:'fullscreen_media'}]};}),null);
__d("XCanvasPhotoUploadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ads\/canvas\/upload\/photo\/",{});}),null);
__d('RichMediaEditorUploader',['ActorURI','AsyncUploadRequest','XCanvasPhotoUploadController'],(function a(b,c,d,e,f,g){'use strict';var h={upload:function i(j,k,l){var m=c('ActorURI').create(c('XCanvasPhotoUploadController').getURIBuilder().getURI(),j),n=new (c('AsyncUploadRequest'))(m).setAllowCrossOrigin(false).setFiles({file:k}),o=[];o.push(n.subscribe('progress',function(p,q){var event=q.getProgressEvent();if(event.lengthComputable)l.onProgress(q.getFile(),event.loaded/event.total*100);}));o.push(n.subscribe('success',function(p,q){l.onSuccess(q.getFile(),q.getResponse());}));o.push(n.subscribe('error',function(p,q){l.onError(q.getFile());}));o.push(n.subscribe('complete',function(p,q){while(o.length)o.pop().unsubscribe();}));n.send();return n;}};f.exports=h;}),null);
__d('RichMediaElementTypeConstant',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirrorRecursive')({BUTTON:'',CAROUSEL:'',CULTURAL_MOMENT_HEADER:'',CULTURAL_MOMENT_POPULAR_MEDIA:'',FOOTER:'',HEADER:'',LOCAL_IMAGE:'',PHOTO:'',PRODUCT_SET:'',RICH_TEXT:'',SCRUBBABLE_GIF:'',STORE_LOCATOR:'',TITLE_AND_DATE:'',VIDEO:''});f.exports={TYPE_NAMES:{BUTTON:'button',CAROUSEL:'carousel',CULTURAL_MOMENT_HEADER:'cultural_moment_header',CULTURAL_MOMENT_POPULAR_MEDIA:'culture_moment_popular_media',HEADER:'header',LOCAL_IMAGE:'local_image',OFFER:'offer',PHOTO:'photo',TEXT:'text',VIDEO:'video',PRODUCT_SET:'product_set',TITLE_AND_DATE:'title_and_date',SCRUBBABLE_GIF:'scrubbable_gif',STORE_LOCATOR:'store_locator'},RichMediaElementTypes:h};}),null);
__d('RichMediaPhotoElement',['immutable','InstantShoppingDocumentElementType','RichMediaEditorUtil','RichMediaElementValidationUtil','RichMediaEditorConstants','AdsCanvasEditorEnums','getByPath','validateDeepLink'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('RichMediaEditorConstants').EDITOR_DEFAULT_PADDING,k=c('AdsCanvasEditorEnums').LinkDestinationEnum,l=c('immutable').Record,m={id:'',name:'',type:c('InstantShoppingDocumentElementType').PHOTO,index:0,expanded:false,advancedExpanded:false,padding:{paddingTop:j,paddingBottom:j},layout:'fit_to_width',description:null,link:null,deeplink:null,linkedCanvasName:null,destination:k.WEBSITE,photo:null,culturalMomentAnnotationImage:null,uploadStatus:null},n=l(m);h=babelHelpers.inherits(o,n);i=h&&h.prototype;o.create=function(p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){return new o({name:p,type:c('InstantShoppingDocumentElementType').PHOTO,index:q,expanded:r,advancedExpanded:s,padding:t,layout:u,description:v,link:w,deeplink:x,linkedCanvasName:y,destination:z,photo:aa,culturalMomentAnnotationImage:ba,uploadStatus:ca});};o.createDefault=function(p){return o.create('Photo',p,true,false,{paddingTop:j,paddingBottom:j},'fit_to_width',null,null,null,null,k.WEBSITE,null,null,null);};o.createFromObject=function(p){return o.create(p.name,p.index,p.expanded,p.advancedExpanded,p.padding,p.layout,p.description,p.link,p.deeplink,p.linkedCanvasName,p.destination,p.photo,p.culturalMomentAnnotationImage);};o.createFromPayloadAndElementField=function(p,q){if(p.photo)p.photo.src=c('getByPath')(q,['element','photo','images','0','source']);return o.create(p.name,p.index,p.expanded,p.advancedExpanded,p.padding,p.layout,p.description,p.link,p.deeplink,p.linkedCanvasName,p.destination,p.photo,p.culturalMomentAnnotationImage);};o.validate=function(p,q){if(!p.photo)return {isValid:false,errorMsg:'Missing photo'};if(p.link&&!c('RichMediaEditorUtil').isValidURL(p.link))if(p.destination===k.NATIVE){return {isValid:false,errorMsg:'Invalid Store URL'};}else return {isValid:false,errorMsg:'Invalid Website URL'};var r=c('RichMediaElementValidationUtil').validateForAppstoreDestination(p,q);if(!r.isValid)return r;if(p.deeplink)if(!c('validateDeepLink')(p.deeplink))return {isValid:false,errorMsg:'Invalid Deeplink'};if(p.uploadStatus&&p.uploadStatus.isUploading!==false)return {isValid:false,errorMsg:''};return {isValid:true,errorMsg:''};};function o(){h.apply(this,arguments);}f.exports=o;}),null);
__d('RichMediaProductSetElement',['immutable','InstantShoppingDocumentElementType','RichMediaEditorConstants'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('RichMediaEditorConstants').EDITOR_DEFAULT_PADDING,k=c('immutable').Record,l={id:'',name:'',type:c('InstantShoppingDocumentElementType').ELEMENT_GROUP,index:0,expanded:false,advancedExpanded:false,padding:{paddingTop:j,paddingBottom:j},catalogID:null,setID:null,limit:0},m=k(l);h=babelHelpers.inherits(n,m);i=h&&h.prototype;n.create=function(o,p,q,r,s,t,u,v){return new n({name:o,index:p,type:c('InstantShoppingDocumentElementType').ELEMENT_GROUP,expanded:q,advancedExpanded:r,padding:s,catalogID:t,setID:u,limit:v});};n.createDefault=function(o){return n.create('Product',o,true,false,{paddingTop:j,paddingBottom:j},null,null,40);};n.createFromObject=function(o){return n.create(o.name,o.index,o.expanded,o.advancedExpanded,o.padding,o.catalogID,o.setID,o.limit);};n.validate=function(o){if(o.catalogID==null)return {isValid:false,errorMsg:'Missing catalog ID'};if(o.setID==null)return {isValid:false,errorMsg:'Please choose or create a Product Set from your Product Catalog'};if(o.limit<=0)return {isValid:false,errorMsg:'Invalid maximum products count'};return {isValid:true,errorMsg:''};};function n(){h.apply(this,arguments);}f.exports=n;}),null);
__d('RichMediaTextElement',['immutable','InstantShoppingDocumentElementType','RichMediaEditorUtil','RichMediaRichFormatText','RichMediaEditorConstants','AdsCanvasEditorEnums','validateDeepLink'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('RichMediaEditorConstants').EDITOR_DEFAULT_LINE_HEIGHT,k=c('RichMediaEditorConstants').EDITOR_DEFAULT_TEXT_BUTTON_PADDING_VERTICAL,l=c('RichMediaEditorConstants').EDITOR_DEFAULT_TEXT_BUTTON_PADDING_HORIZONTAL,m=c('AdsCanvasEditorEnums').LinkDestinationEnum,n=c('immutable').Record,o={id:'',name:'',type:c('InstantShoppingDocumentElementType').RICH_TEXT,index:0,expanded:false,advancedExpanded:false,padding:{paddingTop:k,paddingBottom:k,paddingLeft:l,paddingRight:l},richFormatText:{composedText:{entityMap:{},blocks:[]},textAlignment:'center',textColor:'#000',fontSize:12,fontFamily:'sans-serif',lineHeight:j},backgroundColor:'#FFFFFF',link:null,deeplink:null,destination:m.WEBSITE},p=n(o);h=babelHelpers.inherits(q,p);i=h&&h.prototype;q.create=function(r,s,t,u,v,w,x,y,z,aa){return new q({index:r,name:s,type:c('InstantShoppingDocumentElementType').RICH_TEXT,expanded:t,advancedExpanded:u,padding:v,richFormatText:w,backgroundColor:x,link:y,deeplink:z,destination:aa});};q.createDefault=function(r){return q.create(r,'Text',true,false,{paddingTop:k,paddingBottom:k,paddingLeft:l,paddingRight:l},c('RichMediaRichFormatText').createDefault(),'#FFFFFF',null,null,m.WEBSITE);};q.createFromObject=function(r){return q.create(r.index,r.name,r.expanded,r.advancedExpanded,{paddingTop:r.padding&&r.padding.paddingTop?r.padding.paddingTop:k,paddingBottom:r.padding&&r.padding.paddingBottom?r.padding.paddingBottom:k,paddingLeft:r.padding&&r.padding.paddingLeft?r.padding.paddingLeft:l,paddingRight:r.padding&&r.padding.paddingRight?r.padding.paddingRight:l},c('RichMediaRichFormatText').createFromObject(r.richFormatText),r.backgroundColor,r.link,r.deeplink,r.destination?r.destination:m.WEBSITE);};q.validate=function(r){var s=c('RichMediaRichFormatText').getPlainTextFromComposedText(r.richFormatText.composedText);if(s.length==0)return {isValid:false,errorMsg:'Empty text block is not allowed'};if(r.link&&!c('RichMediaEditorUtil').isValidURL(r.link))if(r.destination===m.NATIVE){return {isValid:false,errorMsg:'Invalid Store URL'};}else return {isValid:false,errorMsg:'Invalid Website URL'};if(r.deeplink)if(!c('validateDeepLink')(r.deeplink))return {isValid:false,errorMsg:'Invalid Deeplink'};return {isValid:true,errorMsg:''};};function q(){h.apply(this,arguments);}f.exports=q;}),null);
__d('RichMediaVideoElement',['immutable','InstantShoppingDocumentElementType','RichMediaEditorConstants'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('RichMediaEditorConstants').EDITOR_DEFAULT_PADDING,k=c('immutable').Record,l={id:'',name:'',type:c('InstantShoppingDocumentElementType').VIDEO,index:0,expanded:false,advancedExpanded:false,padding:{paddingTop:j,paddingBottom:j},layout:'fit_to_width',video:null,culturalMomentAnnotationImage:null,uploadStatus:null},m=k(l);h=babelHelpers.inherits(n,m);i=h&&h.prototype;n.create=function(o,p,q,r,s,t,u,v,w){return new n({name:o,type:c('InstantShoppingDocumentElementType').VIDEO,index:p,expanded:q,advancedExpanded:r,padding:s,layout:t?t:'fit_to_width',video:u,culturalMomentAnnotationImage:v,uploadStatus:w});};n.createDefault=function(o){return n.create('Video',o,true,false,{paddingTop:j,paddingBottom:j},'fit_to_width',null,null,null);};n.createFromObject=function(o){return n.create(o.name,o.index,o.expanded,o.advancedExpanded,o.padding,o.layout,o.video,o.culturalMomentAnnotationImage);};n.validate=function(o){if(!o.video)return {isValid:false,errorMsg:'Missing video'};if(o.uploadStatus&&(o.uploadStatus.isUploading!==false||o.uploadStatus.isEncoding!==false))return {isValid:false,errorMsg:''};return {isValid:true,errorMsg:''};};function n(){h.apply(this,arguments);}f.exports=n;}),null);
__d('RichMediaElementUtil',['InstantShoppingDocumentElementType','RichMediaButtonElement','RichMediaCarouselElement','RichMediaCulturalMomentHeaderElement','RichMediaCultureMomentPopularMediaElement','RichMediaHeaderElement','RichMediaPhotoElement','RichMediaProductSetElement','RichMediaTextElement','RichMediaVideoElement','RichMediaEditorActions'],(function a(b,c,d,e,f,g){'use strict';var h,i={_elementTypeNameMap:(h={},h[c('InstantShoppingDocumentElementType').BUTTON]='Button',h[c('InstantShoppingDocumentElementType').RICH_TEXT]='Rich Text',h[c('InstantShoppingDocumentElementType').PHOTO]='Photo',h[c('InstantShoppingDocumentElementType').SCRUBBABLE_GIF]='Scrubbable GIF',h[c('InstantShoppingDocumentElementType').VIDEO]='Video',h[c('InstantShoppingDocumentElementType').SLIDESHOW]='Carousel',h[c('InstantShoppingDocumentElementType').ELEMENT_GROUP]='Product',h[c('InstantShoppingDocumentElementType').HEADER]='Header',h[c('InstantShoppingDocumentElementType').STORE_LOCATOR]='Store Locator',h),getDefaultElementName:function j(k){if(this._elementTypeNameMap[k])return this._elementTypeNameMap[k];return 'Untitled';},validateElements:function j(k){var l=true,m=[];for(var n=0;n<k.length;++n){var o=this.validateElement(k[n],k);if(!o.isValid){l=false;var p=this._elementTypeNameMap[k[n].type];m.push({element:p,errorMsg:o.errorMsg});}}return {isValid:l,errorMsg:JSON.stringify(m)};},setNonEmptyElementNames:function j(k){for(var l=0;l<k.length;++l)c('RichMediaEditorActions').setNonEmptyElementName(k[l]);},validateElement:function j(k,l){switch(k.type){case c('InstantShoppingDocumentElementType').RICH_TEXT:return c('RichMediaTextElement').validate(k);case c('InstantShoppingDocumentElementType').PHOTO:return c('RichMediaPhotoElement').validate(k,l);case c('InstantShoppingDocumentElementType').VIDEO:return c('RichMediaVideoElement').validate(k);case c('InstantShoppingDocumentElementType').BUTTON:return c('RichMediaButtonElement').validate(k,l);case c('InstantShoppingDocumentElementType').SLIDESHOW:return c('RichMediaCarouselElement').validate(k,l);case c('InstantShoppingDocumentElementType').HEADER:if(k.isCulturalMomentHeader){return c('RichMediaCulturalMomentHeaderElement').validate(k);}else return c('RichMediaHeaderElement').validate(k);case c('InstantShoppingDocumentElementType').ELEMENT_GROUP:return c('RichMediaProductSetElement').validate(k);case c('InstantShoppingDocumentElementType').CULTURAL_MOMENT_POPULAR_MEDIA:return c('RichMediaCultureMomentPopularMediaElement').validate(k);}return {isValid:true,errorMsg:''};},getFixToBottomButtonElement:function j(k){if(k.length===0)return null;if(k[k.length-1].type===c('InstantShoppingDocumentElementType').BUTTON&&k[k.length-1].isFixedToBottom)return k[k.length-1];return null;},getHeaderElement:function j(k){if(k.length===0)return null;if(k[0].type===c('InstantShoppingDocumentElementType').HEADER)return c('RichMediaHeaderElement').createFromObject(k[0]);return null;},hasFixToTopHeaderElement:function j(k){if(k.length===0)return false;if(k[0].type===c('InstantShoppingDocumentElementType').HEADER)return k[0].isOpaque();return false;},isContentUploadingInElement:function j(k){if(k.uploadStatus){var l=k.uploadStatus;switch(k.type){case c('InstantShoppingDocumentElementType').PHOTO:if(l.isUploading)return true;break;case c('InstantShoppingDocumentElementType').VIDEO:if(l.isUploading||l.isEncoding)return true;break;default:break;}}else if(k.type===c('InstantShoppingDocumentElementType').SLIDESHOW){var m=k.items;for(var n=0;n<m.length;n++)if(m[n].uploadStatus&&m[n].uploadStatus.isUploading)return true;}return false;}};f.exports=i;}),null);
__d('RichMediaLocalImageElement',['immutable','InstantShoppingDocumentElementType'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record,k={id:'',name:'',type:c('InstantShoppingDocumentElementType').LOCAL_IMAGE,index:0,expanded:false,advancedExpanded:false},l=j(k);h=babelHelpers.inherits(m,l);i=h&&h.prototype;m.create=function(n,o,p,q){return new m({index:n,name:o,type:c('InstantShoppingDocumentElementType').LOCAL_IMAGE,expanded:p,advancedExpanded:q});};m.createDefault=function(n){return m.create(n,'Local Footer Image',true,false);};m.createFromObject=function(n){return m.create(n.index,n.name,n.expanded,n.advancedExpanded);};m.validate=function(n){return {isValid:true,errorMsg:''};};function m(){h.apply(this,arguments);}f.exports=m;}),null);
__d('RichMediaScrubbableGIFElement',['immutable','InstantShoppingDocumentElementType','RichMediaEditorConstants'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('RichMediaEditorConstants').EDITOR_DEFAULT_PADDING,k=c('immutable').Record,l={id:'',name:'',type:c('InstantShoppingDocumentElementType').SCRUBBABLE_GIF,index:0,expanded:false,advancedExpanded:false,padding:{paddingTop:j,paddingBottom:j},layout:'fit_to_width',video:null,uploadStatus:null},m=k(l);h=babelHelpers.inherits(n,m);i=h&&h.prototype;n.create=function(o,p,q,r,s,t,u,v){return new n({name:o,type:c('InstantShoppingDocumentElementType').SCRUBBABLE_GIF,index:p,expanded:q,advancedExpanded:r,padding:s,layout:t?t:'fit_to_width',video:u,uploadStatus:v});};n.createDefault=function(o){return n.create('Scrubbable GIF',o,true,false,{paddingTop:j,paddingBottom:j},'fit_to_width',null,null);};n.createFromObject=function(o){return n.create(o.name,o.index,o.expanded,o.advancedExpanded,o.padding,o.layout,o.video);};n.validate=function(o){if(!o.video)return {isValid:false,errorMsg:'Missing video'};if(o.uploadStatus&&(o.uploadStatus.isUploading!==false||o.uploadStatus.isEncoding!==false))return {isValid:false,errorMsg:''};return {isValid:true,errorMsg:''};};function n(){h.apply(this,arguments);}f.exports=n;}),null);
__d('RichMediaStoreLocatorThemes',['fbt','RichMediaStoreLocatorElementTheme'],(function a(b,c,d,e,f,g,h){'use strict';var i;f.exports={STORE_LOCATOR_THEMES:c('RichMediaStoreLocatorElementTheme'),STORE_LOCATOR_THEMES_LABELS:(i={},i[c('RichMediaStoreLocatorElementTheme').LIGHT]=h._("Light"),i[c('RichMediaStoreLocatorElementTheme').DARK]=h._("Dark"),i[c('RichMediaStoreLocatorElementTheme').CUSTOM]=h._("Custom"),i),STORE_LOCATOR_LIGHT_HEADER_BACKGROUND_COLOR:'#FFFFFF',STORE_LOCATOR_DARK_HEADER_BACKGROUND_COLOR:'#000000',STORE_LOCATOR_DEFAULT_CUSTOM_HEADER_BACKGROUND_COLOR:'#4267b2',STORE_LOCATOR_DEFAULT_TYPEFACE:'HelveticaNeue-Light'};}),null);
__d('RichMediaStoreLocatorElement',['InstantShoppingDocumentElementType','RichMediaStoreLocatorThemes','RichMediaEditorConstants','immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('RichMediaStoreLocatorThemes').STORE_LOCATOR_DARK_HEADER_BACKGROUND_COLOR,k=c('RichMediaStoreLocatorThemes').STORE_LOCATOR_DEFAULT_CUSTOM_HEADER_BACKGROUND_COLOR,l=c('RichMediaStoreLocatorThemes').STORE_LOCATOR_DEFAULT_TYPEFACE,m=c('RichMediaStoreLocatorThemes').STORE_LOCATOR_LIGHT_HEADER_BACKGROUND_COLOR,n=c('RichMediaStoreLocatorThemes').STORE_LOCATOR_THEMES,o=c('RichMediaEditorConstants').EDITOR_FONT_FAMILIIES,p=c('immutable').Record,q={id:'',name:'',type:c('InstantShoppingDocumentElementType').STORE_LOCATOR,index:0,expanded:false,advancedExpanded:false,adAccountID:'',pageID:'',typeface:l,theme:n.LIGHT,customHeaderBackgroundColor:k},r=p(q);h=babelHelpers.inherits(s,r);i=h&&h.prototype;s.create=function(t,u,v,w,x,y,z,aa,ba){return new s({index:t,name:u,type:c('InstantShoppingDocumentElementType').STORE_LOCATOR,expanded:v,advancedExpanded:w,adAccountID:x,pageID:y,typeface:z,theme:aa,customHeaderBackgroundColor:ba});};s.createDefault=function(t){return s.create(t,'Store Locator',true,false,q.adAccountID,q.pageID,q.typeface,q.theme,q.customHeaderBackgroundColor);};s.createFromObject=function(t){return s.create(t.index,t.name,t.expanded,t.advancedExpanded,t.adAccountID,t.pageID,t.typeface,t.theme,t.customHeaderBackgroundColor);};s.isValidColor=function(t){return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t);};s.isValidTheme=function(t){return t in n;};s.isValidTypeface=function(t){return o.indexOf(t)!=-1;};s.validate=function(t){var u='',v=true;if(!s.isValidTheme(t.theme)){v=false;u+='The theme "'+t.theme+'" is not valid.\n';}if(!s.isValidTypeface(t.typeface)){v=false;u+='The typeface "'+t.typeface+'" is not valid.\n';}if(!s.isValidColor(t.customHeaderBackgroundColor)){v=false;u+='The custom header background color "'+t.customHeaderBackgroundColor+'" is not a valid hex color.\n';}return {isValid:v,errorMsg:u};};s.prototype.headerBackgroundColor=function(){switch(this.theme){case n.LIGHT:return m;case n.DARK:return j;case n.CUSTOM:return this.customHeaderBackgroundColor;default:throw new Error('Theme not supported.');}};function s(){h.apply(this,arguments);}f.exports=s;}),null);
__d('RichMediaTitleAndDateElement',['immutable','InstantShoppingDocumentElementType'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record,k={id:'',name:'',type:c('InstantShoppingDocumentElementType').TITLE_AND_DATE,index:0,expanded:false,advancedExpanded:false,title:'',startTime:Date.now()/1000,endTime:Date.now()/1000,isLocalTime:true},l=j(k);h=babelHelpers.inherits(m,l);i=h&&h.prototype;m.create=function(n,o,p,q,r,s,t,u){return new m({index:n,name:o,type:c('InstantShoppingDocumentElementType').TITLE_AND_DATE,expanded:p,advancedExpanded:q,title:r,startTime:s,endTime:t,isLocalTime:u});};m.createDefault=function(n){return m.create(n,'Title And Date',true,false,'Title',Date.now()/1000,Date.now()/1000,true);};m.createFromObject=function(n){return m.create(n.index,n.name,n.expanded,n.advancedExpanded,n.title,n.startTime,n.endTime,n.isLocalTime);};m.validate=function(n){if(n.title.length==0)return {isValid:false,errorMsg:'Empty title is not allowed'};if(n.startTime>n.endTime)return {isValid:false,errorMsg:'Start date must be less than the end date'};return {isValid:true,errorMsg:''};};function m(){h.apply(this,arguments);}f.exports=m;}),null);
__d('RichMediaEditorStore',['fbt','invariant','AdsCanvasEditorFeature','AdsDispatcher','AsyncUploadRequest','CanvasSource','FluxStore','InstantShoppingDocumentElementType','RichMediaEditorActionTypes','RichMediaEditorActions','RichMediaEditorUploader','RichMediaEditorUtil','RichMediaElementUtil','RichMediaButtonElement','RichMediaCarouselElement','RichMediaCulturalMomentHeaderElement','RichMediaHeaderElement','RichMediaLocalImageElement','RichMediaCultureMomentPopularMediaElement','RichMediaPhotoElement','RichMediaProductSetElement','RichMediaScrubbableGIFElement','RichMediaStoreLocatorElement','RichMediaTextElement','RichMediaTitleAndDateElement','RichMediaVideoElement','SimpleNUXMessage','SimpleNUXMessageTypes','AdsCanvasEditorEnums','RichMediaDocumentThemeConstants','RichMediaEditorTemplateLayouts','RichMediaElementTypeConstant','Map'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('AdsCanvasEditorEnums').ErrorTypeEnum,m=c('AdsCanvasEditorEnums').LinkDestinationEnum,n=c('AdsCanvasEditorEnums').SaveStateEnum,o=c('RichMediaDocumentThemeConstants').WHITE,p=c('RichMediaDocumentThemeConstants').BLACK,q=c('RichMediaEditorTemplateLayouts').LAYOUT_CONFIGS,r=c('RichMediaElementTypeConstant').TYPE_NAMES;j=babelHelpers.inherits(s,c('FluxStore'));k=j&&j.prototype;function s(t){k.constructor.call(this,t);this.$RichMediaEditorStore1=[];this.$RichMediaEditorStore2='';this.$RichMediaEditorStore3=o;this.$RichMediaEditorStore4=[];this.$RichMediaEditorStore5=n.SAVED;this.$RichMediaEditorStore6='';this.$RichMediaEditorStore7=l.NONE;this.$RichMediaEditorStore16=false;this.$RichMediaEditorStore8=false;this.$RichMediaEditorStore9=false;this.$RichMediaEditorStore10=false;this.$RichMediaEditorStore11=false;this.$RichMediaEditorStore12=false;this.$RichMediaEditorStore13=false;this.$RichMediaEditorStore14=-1;this.$RichMediaEditorStore15={};this.$RichMediaEditorStore17=false;this.$RichMediaEditorStore19=false;this.$RichMediaEditorStore20=p;this.$RichMediaEditorStore21=0;this.$RichMediaEditorStore22=false;this.$RichMediaEditorStore23=false;this.$RichMediaEditorStore24=false;this.$RichMediaEditorStore25=null;this.$RichMediaEditorStore26=false;this.$RichMediaEditorStore18=false;this.$RichMediaEditorStore27=c('CanvasSource').OTHER;this.$RichMediaEditorStore28='';this.$RichMediaEditorStore29=false;this.$RichMediaEditorStore30=true;this.$RichMediaEditorStore31=[];}s.prototype.__onDispatch=function(t){var u=t.action,v=void 0,w=void 0;switch(u.type){case c('RichMediaEditorActionTypes').SET_DOCUMENT_NAME:this.$RichMediaEditorStore2=u.name;this.$RichMediaEditorStore5=n.UNSAVED;this.$RichMediaEditorStore14=-1;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_NONEMPTY_ELEMENT_NAME:z=this.$RichMediaEditorStore4;ja=u.element.index;if(z[ja].name.trim().length==0){var x=c('RichMediaElementUtil').getDefaultElementName(u.element.type),y=z[ja].set('name',x);z[ja]=y;this.__emitChange();}break;case c('RichMediaEditorActionTypes').SET_DOCUMENT_THEME:this.$RichMediaEditorStore3=u.theme;this.$RichMediaEditorStore5=n.UNSAVED;this.$RichMediaEditorStore14=-1;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_DOCUMENT_EDIT_STATE:this.$RichMediaEditorStore5=u.editState;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_FORCE_EDIT_PUBLISHED:this.$RichMediaEditorStore16=u.forceEditPublished;this.__emitChange();break;case c('RichMediaEditorActionTypes').ADD_DOCUMENT_ELEMENT:var z=this.$RichMediaEditorStore4;this.$RichMediaEditorStore7=l.NONE;if(u.element.type===c('InstantShoppingDocumentElementType').HEADER){this.$RichMediaEditorStore32(u.element,0);}else if(u.element.type===c('InstantShoppingDocumentElementType').BUTTON&&u.element.isFixedToBottom){this.$RichMediaEditorStore4.push(u.element);}else if(this.getHasStoreLocatorElement()||this.getHasFixedToBottomElement()){var aa=this.getHasStoreLocatorElement()&&this.getHasFixedToBottomElement()?2:1;this.$RichMediaEditorStore32(u.element,this.$RichMediaEditorStore4.length-aa);}else this.$RichMediaEditorStore4.push(u.element);this.$RichMediaEditorStore14=u.element.index;this.$RichMediaEditorStore5=n.UNSAVED;this.__emitChange();break;case c('RichMediaEditorActionTypes').ADD_FILES_TO_DOCUMENT_ELEMENT:v=this.$RichMediaEditorStore33(u.files,u.pageID,this.getDocumentElement(u.element.id));this.$RichMediaEditorStore4[v.index]=v;this.$RichMediaEditorStore14=v.index;this.__emitChange();break;case c('RichMediaEditorActionTypes').REPLACE_FILE_IN_DOCUMENT:v=this.getDocumentElement(u.element.id);v.type===c('InstantShoppingDocumentElementType').SLIDESHOW||i(0);var ba=new (c('Map'))();ba[u.files[0].name]=u.itemID;var ca=c('RichMediaEditorUploader').upload(u.pageID,[u.files[0]],this.$RichMediaEditorStore34(v.id,ba));this.$RichMediaEditorStore1.push(ca);v=v.replaceFile(u.itemID,ca);this.$RichMediaEditorStore4[v.index]=v;this.$RichMediaEditorStore14=v.index;this.$RichMediaEditorStore5=n.UNSAVED;this.__emitChange();break;case c('RichMediaEditorActionTypes').EDIT_DOCUMENT_ELEMENT:this.$RichMediaEditorStore8=false;z=this.$RichMediaEditorStore4;var da=this.$RichMediaEditorStore4[u.element.index];if(da&&da!=u.element&&da.expanded===u.element.expanded&&u.element.previewOnly!==true)this.$RichMediaEditorStore5=n.UNSAVED;this.$RichMediaEditorStore4[u.element.index]=u.element;var ea=u.element.uploadStatus&&(u.element.uploadStatus.isEncoding||u.element.uploadStatus.isUploading);if(!ea)this.$RichMediaEditorStore14=u.element.index;if(u.element.type===c('InstantShoppingDocumentElementType').BUTTON)if(u.element.isFixedToBottom){z.splice(u.element.index,1);z.push(u.element);for(var fa=u.element.index;fa<z.length;fa++)z[fa]=z[fa].set('index',fa);this.$RichMediaEditorStore14=z.length-1;}else if(da.isFixedToBottom&&this.getHasStoreLocatorElement()&&u.element.index===z.length-1&&!u.element.isFixedToBottom){var ga=z[z.length-2].set('index',z.length-1),ha=z[z.length-1].set('index',z.length-2);z[z.length-2]=ha;z[z.length-1]=ga;this.$RichMediaEditorStore14=z.length-2;}if(c('RichMediaElementUtil').validateElements(z).isValid)this.$RichMediaEditorStore7=l.WARNING;this.__emitChange();break;case c('RichMediaEditorActionTypes').MOVE_ELEMENT_UP:if(u.element.index>0&&u.element.index-u.distance>=0){z=this.$RichMediaEditorStore4;var ia=0;for(ia=0;ia<u.distance;ia++){var ja=u.element.index-ia,ka=z[ja].set('index',ja-1),la=z[ja-1].set('index',ja);if(la.type!==c('InstantShoppingDocumentElementType').HEADER){z[ja]=la;z[ja-1]=ka;}else break;this.$RichMediaEditorStore14=ja-ia;}this.$RichMediaEditorStore5=n.UNSAVED;this.__emitChange();}break;case c('RichMediaEditorActionTypes').MOVE_ELEMENT_DOWN:var ma=this.$RichMediaEditorStore4.length;if(this.getHasStoreLocatorElement())ma--;if(this.getHasFixedToBottomElement())ma--;if(u.element.index<ma-u.distance&&u.element.type!==c('InstantShoppingDocumentElementType').HEADER){z=this.$RichMediaEditorStore4;var na=0;for(na=0;na<u.distance;na++){ja=u.element.index+na;ka=z[ja];var oa=z[ja+1];z[ja]=oa.set('index',ja);z[ja+1]=ka.set('index',ja+1);this.$RichMediaEditorStore14=ja+1;}this.$RichMediaEditorStore5=n.UNSAVED;this.__emitChange();}break;case c('RichMediaEditorActionTypes').DELETE_ELEMENT:z=this.$RichMediaEditorStore4;ja=u.element.index;z.splice(ja,1);for(var pa=ja;pa<z.length;++pa)z[pa]=z[pa].set('index',pa);this.$RichMediaEditorStore5=n.UNSAVED;this.$RichMediaEditorStore14=ja>0?ja-1:0;if(z.length==0||c('RichMediaElementUtil').validateElements(z).isValid)this.$RichMediaEditorStore7=l.WARNING;this.__emitChange();break;case c('RichMediaEditorActionTypes').CREATE_DEFAULT_DOCUMENT:this.$RichMediaEditorStore31=[];this.$RichMediaEditorStore8=true;this.$RichMediaEditorStore25=null;this.$RichMediaEditorStore26=false;this.$RichMediaEditorStore30=true;this.$RichMediaEditorStore7=l.NONE;this.$RichMediaEditorStore29=!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').AD_CANVAS_EDITOR_TOOLBAR_NUX);this.$RichMediaEditorStore2=h._("Untitled Canvas").toString();this.$RichMediaEditorStore3=o;this.$RichMediaEditorStore19=false;this.$RichMediaEditorStore20=p;this.$RichMediaEditorStore6='';this.$RichMediaEditorStore4=[];this.$RichMediaEditorStore5=n.UNSAVED;this.$RichMediaEditorStore12=false;this.$RichMediaEditorStore23=true;this.$RichMediaEditorStore22=false;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_PREVIEW_FAILED:this.$RichMediaEditorStore9=u.previewFailed;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_SENDING_PREVIEW:this.$RichMediaEditorStore11=u.sendingPreview;this.__emitChange();break;case c('RichMediaEditorActionTypes').SAVE_INCOMPLETE_ELEMENTS:w=c('RichMediaElementUtil').validateElements(this.$RichMediaEditorStore4);this.$RichMediaEditorStore7=l.WARNING;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_SAVE_FAILED:w=c('RichMediaElementUtil').validateElements(this.$RichMediaEditorStore4);if(w.isValid)this.$RichMediaEditorStore10=u.saveFailed;if(u.saveFailed)this.$RichMediaEditorStore7=l.ERROR;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_VALIDATION_FAILED:if(!u.elementValidation.isValid)this.$RichMediaEditorStore7=l.ERROR;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_DIALOG_SHOWN:if(!u.isShown)this.$RichMediaEditorStore1.forEach(function(va){return va.abort();});break;case c('RichMediaEditorActionTypes').LOAD_DOCUMENT:this.$RichMediaEditorStore31=u.tags;this.$RichMediaEditorStore24=false;this.$RichMediaEditorStore7=l.NONE;this.$RichMediaEditorStore8=false;this.$RichMediaEditorStore29=!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').AD_CANVAS_EDITOR_TOOLBAR_NUX);this.$RichMediaEditorStore5=n.SAVED;var qa=JSON.parse(u.elementsPayload);qa.forEach(function(va,wa){if(va.index!==wa)this.$RichMediaEditorStore5=n.UNSAVED;va.index=wa;}.bind(this));u.elementsPayload=JSON.stringify(qa);if(u.documentName)this.$RichMediaEditorStore2=u.documentName;if(u.documentID)this.$RichMediaEditorStore6=u.documentID;if(u.documentTheme){this.$RichMediaEditorStore3=u.documentTheme;this.$RichMediaEditorStore19=u.documentTheme!==o&&u.documentTheme!==p;this.$RichMediaEditorStore20=this.$RichMediaEditorStore19?u.documentTheme:p;}if(u.elementsPayload&&u.elements){this.$RichMediaEditorStore35(u.elementsPayload,u.elements);}else if(u.elementsPayload)this.$RichMediaEditorStore36(u.elementsPayload);this.$RichMediaEditorStore30=!!(u.style_list&&u.style_list.includes('ENABLE_SWIPE_TO_OPEN'));this.$RichMediaEditorStore12=false;this.$RichMediaEditorStore23=false;this.$RichMediaEditorStore22=false;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_DOCUMENT_URL_DIALOG_SHOWN:this.$RichMediaEditorStore13=u.dialogShown;this.__emitChange();break;case c('RichMediaEditorActionTypes').TOGGLE_DOCUMENT_DEBUG_PANE_SHOWN:this.$RichMediaEditorStore12=!this.$RichMediaEditorStore12;this.__emitChange();break;case c('RichMediaEditorActionTypes').TOGGLE_WELCOME_PANE_SHOWN:this.$RichMediaEditorStore23=u.shown;if(u.shown){this.$RichMediaEditorStore25=null;this.$RichMediaEditorStore6='';this.$RichMediaEditorStore4=[];this.$RichMediaEditorStore21=0;}this.__emitChange();break;case c('RichMediaEditorActionTypes').TRIGGER_NUX_TOUR:this.$RichMediaEditorStore22=u.shown;this.__emitChange();break;case c('RichMediaEditorActionTypes').COLLAPSE_EXPANDED_ELEMENTS:if(!c('AdsCanvasEditorFeature').ads_canvas_editor_publish_redesign)break;z=this.$RichMediaEditorStore4;for(var ra=0;ra<z.length;++ra)z[ra]=z[ra].set('expanded',false);this.$RichMediaEditorStore24=true;this.__emitChange();break;case c('RichMediaEditorActionTypes').SELECT_ELEMENT_TO_ADD:var sa=u.elementTypeName;if(sa in this.$RichMediaEditorStore15){this.$RichMediaEditorStore15[sa]++;}else this.$RichMediaEditorStore15[sa]=1;this.__emitChange();break;case c('RichMediaEditorActionTypes').DESELECT_ELEMENT_TO_ADD:sa=u.elementTypeName;if(sa in this.$RichMediaEditorStore15){this.$RichMediaEditorStore15[sa]--;if(this.$RichMediaEditorStore15[sa]<=0)delete this.$RichMediaEditorStore15[sa];}this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_ADD_COMPONENT_DIALOG_SHOWN:this.$RichMediaEditorStore17=u.dialogShown;this.__emitChange();break;case c('RichMediaEditorActionTypes').ADD_ELEMENTS_SELECTED:this.$RichMediaEditorStore7=l.NONE;for(var ta in r){sa=r[ta];if(sa in this.$RichMediaEditorStore15&&this.$RichMediaEditorStore15[sa]>0){this.$RichMediaEditorStore37(sa);this.$RichMediaEditorStore5=n.UNSAVED;this.$RichMediaEditorStore8=false;}}if(this.$RichMediaEditorStore15[r.HEADER]>0){this.$RichMediaEditorStore14=0;}else if(!this.$RichMediaEditorStore15[r.STORE_LOCATOR]&&this.getHasStoreLocatorElement()){this.$RichMediaEditorStore14=this.$RichMediaEditorStore4.length-2;}else this.$RichMediaEditorStore14=this.$RichMediaEditorStore4.length-1;if(this.getHasFixedToBottomElement()&&this.$RichMediaEditorStore14>0)this.$RichMediaEditorStore14-=1;this.$RichMediaEditorStore15={};this.$RichMediaEditorStore17=false;this.$RichMediaEditorStore23=false;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_USE_CUSTOMIZE_THEME_COLOR:this.$RichMediaEditorStore19=u.useCustomizeThemeColor;if(u.useCustomizeThemeColor&&this.$RichMediaEditorStore3!==this.$RichMediaEditorStore20){this.$RichMediaEditorStore3=this.$RichMediaEditorStore20;this.$RichMediaEditorStore5=n.UNSAVED;}this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_CUSTOMIZE_THEME_COLOR:if(this.$RichMediaEditorStore19===false||this.$RichMediaEditorStore20!==u.customizeThemeColor){this.$RichMediaEditorStore20=u.customizeThemeColor;this.$RichMediaEditorStore3=u.customizeThemeColor;this.$RichMediaEditorStore19=true;this.$RichMediaEditorStore5=n.UNSAVED;}this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_SHOW_TEMPLATES:this.$RichMediaEditorStore18=u.showTemplates;this.__emitChange();break;case c('RichMediaEditorActionTypes').LOAD_CANVAS_TEMPLATE:this.$RichMediaEditorStore25=u.selectedTemplate;if(u.selectedTemplate)this.$RichMediaEditorStore38(u.selectedTemplate,u.elementsPayload,u.elements);this.$RichMediaEditorStore30=false;this.__emitChange();break;case c('RichMediaEditorActionTypes').CANVAS_TEMPLATE_SELECTED:this.$RichMediaEditorStore25=u.selectedTemplate;this.$RichMediaEditorStore23=false;if(u.selectedTemplate==='blank'){this.$RichMediaEditorStore17=true;this.$RichMediaEditorStore4=[];}if(u.selectedTemplate==='tour'){this.$RichMediaEditorStore22=true;this.$RichMediaEditorStore4=[];}var ua=q.findIndex(function(va){return va.value===u.selectedTemplate;});if(ua!==-1)this.$RichMediaEditorStore2=q[ua].title.toString();this.$RichMediaEditorStore30=true;this.__emitChange();break;case c('RichMediaEditorActionTypes').BACK_TO_MENU_CLICKED:this.$RichMediaEditorStore26=u.dialogShown;if(u.confirmed){this.$RichMediaEditorStore8=true;this.$RichMediaEditorStore23=true;this.$RichMediaEditorStore25=null;}this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_CANVAS_SOURCE:this.$RichMediaEditorStore27=u.source;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_CANVAS_PAGEID:this.$RichMediaEditorStore28=u.pageId;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_SWIPE_TO_OPEN_ENABLED:this.$RichMediaEditorStore30=u.value;this.$RichMediaEditorStore5=n.UNSAVED;this.__emitChange();break;}};s.prototype.getCanvasPageId=function(){return this.$RichMediaEditorStore28;};s.prototype.getCanvasSource=function(){return this.$RichMediaEditorStore27;};s.prototype.getCanvasTags=function(){return this.$RichMediaEditorStore31;};s.prototype.getDocumentName=function(){return this.$RichMediaEditorStore2;};s.prototype.getDocumentTheme=function(){return this.$RichMediaEditorStore3;};s.prototype.getDocumentEditState=function(){return this.$RichMediaEditorStore5;};s.prototype.getDocumentElement=function(t){return this.$RichMediaEditorStore4.find(function(u){return u.id===t;});};s.prototype.getDocumentID=function(){return this.$RichMediaEditorStore6;};s.prototype.getDocumentElements=function(){return this.$RichMediaEditorStore4.slice();};s.prototype.getPreviewFailed=function(){return this.$RichMediaEditorStore9;};s.prototype.getSendingPreview=function(){return this.$RichMediaEditorStore11;};s.prototype.getSaveFailed=function(){return this.$RichMediaEditorStore10;};s.prototype.getDocumentURLDialogShown=function(){return this.$RichMediaEditorStore13;};s.prototype.getDocumentDebugPaneShown=function(){return this.$RichMediaEditorStore12;};s.prototype.getForceEditPublished=function(){return this.$RichMediaEditorStore16;};s.prototype.getCurrentEditingElementIndex=function(){return this.$RichMediaEditorStore14;};s.prototype.getSelectedElementsToAdd=function(){return babelHelpers['extends']({},this.$RichMediaEditorStore15);};s.prototype.getShowAddComponentDialog=function(){return this.$RichMediaEditorStore17;};s.prototype.getShowBackToMenuUnsavedDialog=function(){return this.$RichMediaEditorStore26;};s.prototype.getHasFixedToBottomElement=function(){var t=this.$RichMediaEditorStore4;if(t.length>0&&t[t.length-1].type===c('InstantShoppingDocumentElementType').BUTTON&&t[t.length-1].isFixedToBottom)return true;return false;};s.prototype.getHasHeaderElement=function(){var t=this.$RichMediaEditorStore4.filter(function(u){return u.type===c('InstantShoppingDocumentElementType').HEADER;});return t.length!==0;};s.prototype.getHasStoreLocatorElement=function(){var t=this.$RichMediaEditorStore4.filter(function(u){return (u.type===c('InstantShoppingDocumentElementType').STORE_LOCATOR);});return t.length!==0;};s.prototype.getHasOfferElement=function(){var t=this.$RichMediaEditorStore4.filter(function(u){return (u.type===c('InstantShoppingDocumentElementType').OFFER);});return t.length!==0;};s.prototype.getNumberOfScrubbableGIFs=function(){return this.$RichMediaEditorStore4.filter(function(t){return (t.type===c('InstantShoppingDocumentElementType').SCRUBBABLE_GIF);}).length;};s.prototype.getUseCustomizeThemeColor=function(){return this.$RichMediaEditorStore19;};s.prototype.getCustomizeThemeColor=function(){return this.$RichMediaEditorStore20;};s.prototype.getErrorType=function(){return this.$RichMediaEditorStore7;};s.prototype.getSelectedTemplate=function(){return this.$RichMediaEditorStore25;};s.prototype.getShowTemplates=function(){return this.$RichMediaEditorStore18;};s.prototype.getSwipeToOpenEnabled=function(){return this.$RichMediaEditorStore30;};s.prototype.isDefaultDocument=function(){return this.$RichMediaEditorStore8;};s.prototype.isWelcomePaneShown=function(){return this.$RichMediaEditorStore23;};s.prototype.isElementsCollapsed=function(){return this.$RichMediaEditorStore24;};s.prototype.showNuxTour=function(){return this.$RichMediaEditorStore22;};s.prototype.shouldEnableSwipeToOpenCheckbox=function(){var t=this.$RichMediaEditorStore4[this.$RichMediaEditorStore4.length-1];if(!t)return false;switch(t.type){case c('InstantShoppingDocumentElementType').PHOTO:if(t.layout==='fit_to_height'||t.layout==='expandable'||!t.link||t.destination===m.CANVAS||!c('RichMediaEditorUtil').isValidURL(t.link))return false;return true;case c('InstantShoppingDocumentElementType').BUTTON:if(!t.link||t.destination===m.CANVAS||!c('RichMediaEditorUtil').isValidURL(t.link))return false;return true;case c('InstantShoppingDocumentElementType').SLIDESHOW:if(t.layout==='fit_to_height'||!t.items.some(function(u){return u.link&&u.destination!==m.CANVAS&&c('RichMediaEditorUtil').isValidURL(u.link);}))return false;return true;default:return false;}};s.prototype.isNewUser=function(){return this.$RichMediaEditorStore29;};s.prototype.setIsNotNewUser=function(){if(this.$RichMediaEditorStore29){c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').AD_CANVAS_EDITOR_TOOLBAR_NUX);this.$RichMediaEditorStore29=false;}};s.prototype.$RichMediaEditorStore32=function(t,u){var v=this.$RichMediaEditorStore4;for(var w=u;w<v.length;++w)v[w]=v[w].set('index',w+1);v.splice(u,0,t.set('index',u));};s.prototype.$RichMediaEditorStore37=function(t){var u=-1;if(t===r.HEADER){u=0;}else{u=this.$RichMediaEditorStore4.length;if(this.getHasFixedToBottomElement())u-=1;if(this.getHasStoreLocatorElement())u-=1;}var v=null;switch(t){case r.BUTTON:v=c('RichMediaButtonElement').createDefault(u);break;case r.CAROUSEL:v=c('RichMediaCarouselElement').createDefault(u);break;case r.CULTURAL_MOMENT_HEADER:v=c('RichMediaCulturalMomentHeaderElement').createDefault(u);break;case r.HEADER:v=c('RichMediaHeaderElement').createDefault(u);break;case r.PHOTO:v=c('RichMediaPhotoElement').createDefault(u);break;case r.TEXT:v=c('RichMediaTextElement').createDefault(u);break;case r.VIDEO:v=c('RichMediaVideoElement').createDefault(u);break;case r.SCRUBBABLE_GIF:v=c('RichMediaScrubbableGIFElement').createDefault(u);break;case r.PRODUCT_SET:v=c('RichMediaProductSetElement').createDefault(u);break;case r.TITLE_AND_DATE:v=c('RichMediaTitleAndDateElement').createDefault(u);break;case r.STORE_LOCATOR:v=c('RichMediaStoreLocatorElement').createDefault(u);break;case r.LOCAL_IMAGE:v=c('RichMediaLocalImageElement').createDefault(u);break;case r.CULTURAL_MOMENT_POPULAR_MEDIA:v=c('RichMediaCultureMomentPopularMediaElement').createDefault(u);break;}if(!v)return;v=this.$RichMediaEditorStore39(v);this.$RichMediaEditorStore32(v,u);};s.prototype.$RichMediaEditorStore36=function(t){this.$RichMediaEditorStore4=[];var u=JSON.parse(t);this.$RichMediaEditorStore21=u.length;for(var v=0;v<u.length;++v){var w=u[v];w.expanded=!!w.expanded;w.advancedExpanded=!!w.advancedExpanded;switch(w.type){case c('InstantShoppingDocumentElementType').RICH_TEXT:w=c('RichMediaTextElement').createFromObject(w);break;case c('InstantShoppingDocumentElementType').PHOTO:w=c('RichMediaPhotoElement').createFromObject(w);break;case c('InstantShoppingDocumentElementType').VIDEO:w=c('RichMediaVideoElement').createFromObject(w);break;case c('InstantShoppingDocumentElementType').SCRUBBABLE_GIF:w=c('RichMediaScrubbableGIFElement').createFromObject(w);break;case c('InstantShoppingDocumentElementType').BUTTON:w=c('RichMediaButtonElement').createFromObject(w);break;case c('InstantShoppingDocumentElementType').SLIDESHOW:w.selectedItemIndex=0;w=c('RichMediaCarouselElement').createFromObject(w);break;case c('InstantShoppingDocumentElementType').HEADER:if(w.isCulturalMomentHeader){w=c('RichMediaCulturalMomentHeaderElement').createFromObject(w);}else w=c('RichMediaHeaderElement').createFromObject(w);break;case c('InstantShoppingDocumentElementType').ELEMENT_GROUP:w=c('RichMediaProductSetElement').createFromObject(w);break;case c('InstantShoppingDocumentElementType').STORE_LOCATOR:w=c('RichMediaStoreLocatorElement').createFromObject(w);break;}this.$RichMediaEditorStore4.push(this.$RichMediaEditorStore39(w));}};s.prototype.$RichMediaEditorStore35=function(t,u){this.$RichMediaEditorStore4=[];var v=JSON.parse(t);this.$RichMediaEditorStore21=v.length;var w=v.length;if(w>0&&u[w-1].element_type==='FOOTER'){var x=-1;for(var y=0;y<w;y++)if(v[y].type===c('InstantShoppingDocumentElementType').BUTTON&&v[y].isFixedToBottom===true){x=y;break;}if(x!==-1){var z=v[x];for(var aa=x;aa<w-1;aa++){v[aa]=v[aa+1];v[aa].index=aa;}v[w-1]=z;v[w-1].index=w-1;}}for(var ba=0;ba<w;ba++){var ca=v[ba],da=u[ba],ea=ca;if(!ca.expanded)ea.expanded=false;if(!ca.advancedExpanded)ea.advancedExpanded=false;switch(ea.type){case c('InstantShoppingDocumentElementType').RICH_TEXT:ea=c('RichMediaTextElement').createFromObject(ea);break;case c('InstantShoppingDocumentElementType').PHOTO:ea=c('RichMediaPhotoElement').createFromPayloadAndElementField(ca,da);break;case c('InstantShoppingDocumentElementType').VIDEO:ea=c('RichMediaVideoElement').createFromObject(ea);break;case c('InstantShoppingDocumentElementType').SCRUBBABLE_GIF:ea=c('RichMediaScrubbableGIFElement').createFromObject(ea);break;case c('InstantShoppingDocumentElementType').BUTTON:ea=c('RichMediaButtonElement').createFromObject(ea);break;case c('InstantShoppingDocumentElementType').SLIDESHOW:ea.selectedItemIndex=0;ea=c('RichMediaCarouselElement').createFromPayloadAndElementField(ca,da);break;case c('InstantShoppingDocumentElementType').HEADER:if(ca.isCulturalMomentHeader){ea=c('RichMediaCulturalMomentHeaderElement').createFromPayloadAndElementField(ca,da);}else ea=c('RichMediaHeaderElement').createFromPayloadAndElementField(ca,da);break;case c('InstantShoppingDocumentElementType').ELEMENT_GROUP:ea=c('RichMediaProductSetElement').createFromObject(ea);break;case c('InstantShoppingDocumentElementType').TITLE_AND_DATE:ea=c('RichMediaTitleAndDateElement').createFromObject(ea);break;case c('InstantShoppingDocumentElementType').STORE_LOCATOR:ea=c('RichMediaStoreLocatorElement').createFromObject(ea);break;case c('InstantShoppingDocumentElementType').LOCAL_IMAGE:ea=c('RichMediaLocalImageElement').createFromObject(ea);break;case c('InstantShoppingDocumentElementType').CULTURAL_MOMENT_POPULAR_MEDIA:ea=c('RichMediaCultureMomentPopularMediaElement').createFromObject(ea);break;}this.$RichMediaEditorStore4.push(this.$RichMediaEditorStore39(ea));}};s.prototype.$RichMediaEditorStore39=function(t){return t.set('id',(++this.$RichMediaEditorStore21).toString());};s.prototype.$RichMediaEditorStore33=function(t,u,v){v.type===c('InstantShoppingDocumentElementType').SLIDESHOW||i(0);var w=void 0,x=new (c('Map'))();for(var y=0,z=t.length;y<z;++y){w=t[y];x[w.name]=w.name+'_'+Date.now();}var aa=this.$RichMediaEditorStore34(v.id,x);for(y=0;y<z;++y){w=t[y];var ba=c('RichMediaEditorUploader').upload(u,[w],aa);v=v.addFile(x[w.name],ba);this.$RichMediaEditorStore1.push(ba);}return v;};s.prototype.$RichMediaEditorStore38=function(t,u,v){this.$RichMediaEditorStore8=true;this.$RichMediaEditorStore7=l.NONE;this.$RichMediaEditorStore5=n.UNSAVED;this.$RichMediaEditorStore2=h._("Untitled Canvas").toString();this.$RichMediaEditorStore12=false;this.$RichMediaEditorStore23=true;this.$RichMediaEditorStore22=false;if(u&&v){this.$RichMediaEditorStore35(u,v);}else{this.$RichMediaEditorStore4=[];this.$RichMediaEditorStore21=0;}};s.prototype.$RichMediaEditorStore34=function(t,u){return {onProgress:function(v,w){var x=this.getDocumentElement(t);if(x&&x.onFileProgress){x=x.onFileProgress(u[v.name],w);if(x)c('RichMediaEditorActions').editDocumentElement(x);}}.bind(this),onSuccess:function(v,w){var x=this.getDocumentElement(t);if(x&&x.onFileSuccess){x=x.onFileSuccess(u[v.name],w);if(x)c('RichMediaEditorActions').editDocumentElement(x);}}.bind(this),onError:function(v){var w=this.getDocumentElement(t);if(w&&w.onFileError){w=w.onFileError(u[v.name]);if(w)c('RichMediaEditorActions').editDocumentElement(w);}}.bind(this)};};f.exports=new s(c('AdsDispatcher'));}),null);
__d('RichMediaLoggingStoreUtils',['CanvasCreationWaterfallTypedLogger','RichMediaEditorDataDispatcher','RichMediaEditorStore'],(function a(b,c,d,e,f,g){'use strict';var h={logRichMediaCreationEventWithLogger:function i(j,k){j.setCanvasID(k?k:c('RichMediaEditorStore').getDocumentID()||null).setCanvasName(c('RichMediaEditorStore').getDocumentName()).setIsNewUser(c('RichMediaEditorStore').isNewUser()).setPageID(c('RichMediaEditorStore').getCanvasPageId()).setSource(c('RichMediaEditorStore').getCanvasSource());c('RichMediaEditorDataDispatcher').getCanvasPageData(c('RichMediaEditorStore').getCanvasPageId(),j);}};f.exports=h;}),null);
__d('RichMediaEditorLoggerStore',['AdsCanvasConstants','AdsCanvasEditorFunnelLoggingConstants','CanvasCreationEvent','CanvasCreationWaterfallTypedLogger','CanvasLoadSource','FluxStore','FunnelLogger','RichMediaEditorActionTypes','AdsDispatcher','RichMediaEditorStore','RichMediaElementUtil','RichMediaLoggingStoreUtils','SimpleNUXMessage','SimpleNUXMessageTypes'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('AdsCanvasConstants').DEFAULT_PAGE_CANVAS_COUNT,k=c('AdsCanvasConstants').DEFAULT_PAGE_PUBLISHED_CANVAS_COUNT,l=c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_NAME,m=c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_EVENT,n=c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_TAGS;h=babelHelpers.inherits(o,c('FluxStore'));i=h&&h.prototype;function o(){i.constructor.call(this,c('AdsDispatcher'));this.$RichMediaEditorLoggerStoreClass1=!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').AD_CANVAS_EDITOR_TOOLBAR_NUX);}o.prototype.__onDispatch=function(q){var r=q.action;switch(r.type){case c('RichMediaEditorActionTypes').MOVE_ELEMENT_UP:c('FunnelLogger').appendAction(l,m.SWITCH_ELEMENT);c('RichMediaLoggingStoreUtils').logRichMediaCreationEventWithLogger(new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').REORDER_COMPONENT).setReorderComponentDistance(-1*r.distance));break;case c('RichMediaEditorActionTypes').MOVE_ELEMENT_DOWN:c('FunnelLogger').appendAction(l,m.SWITCH_ELEMENT);c('RichMediaLoggingStoreUtils').logRichMediaCreationEventWithLogger(new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').REORDER_COMPONENT).setReorderComponentDistance(r.distance));break;case c('RichMediaEditorActionTypes').DELETE_ELEMENT:c('FunnelLogger').appendAction(l,m.REMOVE_ELEMENT);break;case c('RichMediaEditorActionTypes').CREATE_DEFAULT_DOCUMENT:if(this.$RichMediaEditorLoggerStoreClass1)c('FunnelLogger').addFunnelTag(l,n.FIRST_TIME_USER);c('FunnelLogger').addFunnelTag(l,c('CanvasLoadSource').LOAD_NEW_DEFAULT_DOC);c('FunnelLogger').addFunnelTag(l,n.WELCOMESCREEN_SHOWN);c('RichMediaLoggingStoreUtils').logRichMediaCreationEventWithLogger(new (c('CanvasCreationWaterfallTypedLogger'))().setCanvasLoadType(c('CanvasLoadSource').LOAD_NEW_DEFAULT_DOC).setEventName(c('CanvasCreationEvent').LOAD));break;case c('RichMediaEditorActionTypes').SET_SAVE_FAILED:break;case c('RichMediaEditorActionTypes').SET_VALIDATION_FAILED:c('FunnelLogger').appendAction(l,m.VALIDATION_ERROR);c('RichMediaLoggingStoreUtils').logRichMediaCreationEventWithLogger(new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').VALIDATION_ERROR).setIncompleteElements(r.elementValidation.errorMsg));break;case c('RichMediaEditorActionTypes').SAVE_INCOMPLETE_ELEMENTS:c('FunnelLogger').appendAction(l,m.SAVE_INCOMPLETE_ELEMENTS);c('RichMediaLoggingStoreUtils').logRichMediaCreationEventWithLogger(new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').SAVE_INCOMPLETE_ELEMENTS).setIncompleteElements(r.elementValidation.errorMsg));break;case c('RichMediaEditorActionTypes').LOAD_DOCUMENT:if(this.$RichMediaEditorLoggerStoreClass1)c('FunnelLogger').addFunnelTag(l,n.FIRST_TIME_USER);c('FunnelLogger').addFunnelTag(l,c('CanvasLoadSource').LOAD_EXISTING_DOC);if(r.documentID)c('FunnelLogger').addFunnelTag(l,r.documentID);var s=c('RichMediaEditorStore').getDocumentElements(),t=c('RichMediaElementUtil').validateElements(s);if(!t.isValid)c('FunnelLogger').addFunnelTag(l,n.LOAD_EXISTING_DOC_WITH_VALIDATION_ERRORS);c('RichMediaLoggingStoreUtils').logRichMediaCreationEventWithLogger(new (c('CanvasCreationWaterfallTypedLogger'))().setCanvasLoadType(c('CanvasLoadSource').LOAD_EXISTING_DOC).setEventName(c('CanvasCreationEvent').LOAD).setIncompleteElements(!t.isValid?t.errorMsg:null));break;case c('RichMediaEditorActionTypes').LOAD_PAGE_DATA_SUCCESS:if(r.logger!=null)r.logger.setPageCanvasCount(r.pageCanvasCount).setPagePublishedCanvasCount(r.pagePublishedCanvasCount).log();if(r.funnelLogger!=null){if(r.pageCanvasCount<=j)r.funnelLogger.addFunnelTag(l,n.PAGE_HAS_NEVER_CREATED);if(r.pagePublishedCanvasCount<=k)r.funnelLogger.addFunnelTag(l,n.PAGE_HAS_NEVER_PUBLISHED);}this.__emitChange();break;case c('RichMediaEditorActionTypes').LOAD_PAGE_DATA_ERROR:if(r.logger!=null)r.logger.log();this.__emitChange();break;case c('RichMediaEditorActionTypes').ADD_ELEMENTS_SELECTED:c('FunnelLogger').appendAction(l,m.ADD_ELEMENT);c('RichMediaLoggingStoreUtils').logRichMediaCreationEventWithLogger(new (c('CanvasCreationWaterfallTypedLogger'))().setEventDetails(JSON.stringify(Object.keys(r.elementsSelected))).setEventName(c('CanvasCreationEvent').ADD_ELEMENT));break;case c('RichMediaEditorActionTypes').CANVAS_TEMPLATE_SELECTED:var u=m.TEMPLATE_SELECT_LAYOUT.concat('_',r.selectedTemplate);c('FunnelLogger').appendAction(l,u);c('RichMediaLoggingStoreUtils').logRichMediaCreationEventWithLogger(new (c('CanvasCreationWaterfallTypedLogger'))().setEventDetails(r.selectedTemplate).setEventName(c('CanvasCreationEvent').TEMPLATE_SELECTED));break;case c('RichMediaEditorActionTypes').LOAD_CANVAS_TEMPLATE:if(r.selectedTemplate){var v=m.TEMPLATE_PREVIEW_LAYOUT.concat('_',r.selectedTemplate);c('FunnelLogger').appendAction(l,v);c('RichMediaLoggingStoreUtils').logRichMediaCreationEventWithLogger(new (c('CanvasCreationWaterfallTypedLogger'))().setEventDetails(r.selectedTemplate).setEventName(c('CanvasCreationEvent').LOAD_TEMPLATE));}break;case c('RichMediaEditorActionTypes').BACK_TO_MENU_CLICKED:if(r.confirmed)c('FunnelLogger').appendAction(l,m.BACK_TO_MENU);c('RichMediaLoggingStoreUtils').logRichMediaCreationEventWithLogger(new (c('CanvasCreationWaterfallTypedLogger'))().setEventDetails(c('RichMediaEditorStore').getSelectedTemplate()).setEventName(c('CanvasCreationEvent').BACK_TO_MENU));break;case c('RichMediaEditorActionTypes').SET_SWIPE_TO_OPEN_ENABLED:c('FunnelLogger').appendAction(l,m.SWIPE_TO_OPEN_TOGGLED);c('RichMediaLoggingStoreUtils').logRichMediaCreationEventWithLogger(new (c('CanvasCreationWaterfallTypedLogger'))().setEventDetails(String(r.value)).setEventName(c('CanvasCreationEvent').SWIPE_TO_OPEN_TOGGLED));break;case c('RichMediaEditorActionTypes').TOOLBAR_PUBLISH_CLICK:c('FunnelLogger').appendAction(l,m.TOOLBAR_PUBLISH_CLICKED);c('RichMediaLoggingStoreUtils').logRichMediaCreationEventWithLogger(new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').TOOLBAR_PUBLISH_CLICKED).setIncompleteElements(r.elementValidation&&!r.elementValidation.isValid?r.elementValidation.errorMsg:null));break;}};var p=new o(c('AdsDispatcher'));f.exports=p;}),null);
__d('AdsCanvasCapabilityConfig',['AdsCanvasCapabilities','immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k=c('immutable').Record,l=(j={},j[c('AdsCanvasCapabilities').CAN_ADD_CULTURAL_MOMENT_COMPONENTS]=false,j[c('AdsCanvasCapabilities').CAN_ADD_OFFER]=false,j[c('AdsCanvasCapabilities').CAN_ADD_PRODUCT_SET]=false,j[c('AdsCanvasCapabilities').CAN_ADD_STORE_LOCATOR]=false,j[c('AdsCanvasCapabilities').CAN_SAVE_INCOMPLETE_ELEMENTS]=false,j[c('AdsCanvasCapabilities').CAN_USE_CANVAS_EDITOR_TEMPLATEV0]=false,j[c('AdsCanvasCapabilities').CAN_USE_CANVAS_EDITOR_TEMPLATEV1]=false,j[c('AdsCanvasCapabilities').CAN_USE_LINKED_CANVAS]=false,j);h=babelHelpers.inherits(m,k(l));i=h&&h.prototype;m.prototype.hasCapability=function(n){return this.get(n);};function m(){h.apply(this,arguments);}f.exports=m;}),null);
__d('AdsCanvasBuilderDispatcher',['ReactDispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('ReactDispatcher_DEPRECATED'))();}),null);
__d('SUIButtonGroup.react',['cx','React','SUIComponent','SUITheme','Set','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('SUIComponent'));j=i&&i.prototype;l.prototype.render=function(){var m=c('React').Children.toArray(this.props.children).filter(function(n){return n;}).map(function(n,o,p){var q=o===0,r=o===p.length-1,s=[];if(q)s.push('topLeft','bottomLeft');if(r)s.push('topRight','bottomRight');var t=new (c('Set'))(['top','bottom','left']);if(n.props.isActive||r)t.add('right');if(o>0&&p[o-1].props.isActive)t['delete']('left');return c('React').cloneElement(n,{className_DEPRECATED:c('joinClasses')(n.props.className_DEPRECATED,"_1t-s"),borderedSides:Array.from(t),roundedCorners:s});});return (c('React').createElement('div',{className:this.props.className,'data-testid':this.props['data-testid']},m));};function l(){i.apply(this,arguments);}l.propTypes={'data-testid':k.string,className:k.string,theme:k.instanceOf(c('SUITheme'))};f.exports=l;}),null);
__d('BUIAdoptionButtonGroup.react',['BIGAdoptionConfig','BUIAdoptionWrapper.react','React','SUIBusinessTheme','SUIButtonGroup.react','XUIButtonGroup.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){return (c('React').createElement(c('BUIAdoptionWrapper.react'),{enabled:c('BIGAdoptionConfig').sui_button_adoption,fallback:c('React').createElement(c('XUIButtonGroup.react'),this.props)},c('React').createElement(c('SUIButtonGroup.react'),babelHelpers['extends']({theme:c('SUIBusinessTheme')},this.props))));};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('AdsCanvasButtons.react',['ix','cx','fbt','xuiglyph','AdsCanvasWebdriverIDs','BUIAdoptionButtonGroup.react','FunnelLogger','Image.react','React','XUIButton.react','fbglyph','AdsCanvasEditorFunnelLoggingConstants'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m,n=c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_NAME,o=c('React').PropTypes;l=babelHelpers.inherits(p,c('React').Component);m=l&&l.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=m.constructor).call.apply(q,[this].concat(t)),this.$AdsCanvasButtons1=function(event){event.stopPropagation();this.props.onClickCreate&&this.props.onClickCreate();this.props.onClick('newCanvasDialog');c('FunnelLogger').addFunnelTag(n,this.props.source);}.bind(this),this.$AdsCanvasButtons2=function(event){event.stopPropagation();this.props.onClickPreview&&this.props.onClickPreview();if(this.props.canvas){this.props.onClick(this.props.canvas.id);c('FunnelLogger').addFunnelTag(n,this.props.source);}}.bind(this),r;}p.prototype.render=function(){var q=c('React').createElement(c('XUIButton.react'),{className:"_44jg",'data-testid':c('AdsCanvasWebdriverIDs').ADS_CANVAS_CREATE_BUTTON,disabled:this.props.disabled,image:c('React').createElement(c('Image.react'),{src:h("images\/mobile\/glyph\/plus_dark-grey_s.png")}),label:j._("Plus"),labelIsHidden:true,onClick:this.$AdsCanvasButtons1}),r=null;if(this.props.canvas)r=c('React').createElement(c('XUIButton.react'),{className:"_44jg",disabled:this.props.disabled,image:c('React').createElement(c('Image.react'),{src:h("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/eye_16_fig-light-50.png")}),label:j._("Show"),labelIsHidden:true,onClick:this.$AdsCanvasButtons2});return c('React').createElement(c('BUIAdoptionButtonGroup.react'),{className:"_44jh"},r,q);};p.propTypes={canvas:o.object,disabled:o.bool,source:o.string.isRequired,onClick:o.func.isRequired,onClickCreate:o.func,onClickPreview:o.func};f.exports=p;}),null);
__d('AdsCanvasCloseConfirmDialog.react',['cx','fbt','LayerFadeOnHide','LayerHideOnEscape','React','XUIDialog.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogButton.react','XUIDialogTitle.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$AdsCanvasCloseConfirmDialog1=function(){this.props.onConfirm(this.props.dialogID);}.bind(this),o;}m.prototype.render=function(){return c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerHideOnEscape:c('LayerHideOnEscape'),LayerFadeOnHide:c('LayerFadeOnHide')},shown:true,width:450},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:true},i._("Unsaved Changes")),c('React').createElement(c('XUIDialogBody.react'),null,i._("Do you want to discard unsaved changes?")),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:i._("Cancel"),onClick:this.props.onCancel}),c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',className:"_4jy1",label:i._("Confirm"),onClick:this.$AdsCanvasCloseConfirmDialog1})));};m.propTypes={dialogID:l.string,onCancel:l.func.isRequired,onConfirm:l.func.isRequired};f.exports=m;}),null);
__d('AdsCanvasComposerDialogStore',['AdsActionTypes','AdsDispatcher','FluxStore','RichMediaEditorActionTypes'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.$AdsCanvasComposerDialogStore1={};this.$AdsCanvasComposerDialogStore2={};this.$AdsCanvasComposerDialogStore3=null;this.$AdsCanvasComposerDialogStore4=null;}j.prototype.__onDispatch=function(k){var l=k.action;switch(l.type){case c('AdsActionTypes').CANVAS.DOC_ID.LOADED:this.$AdsCanvasComposerDialogStore2[l.canvasID]=l.canvas;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_UNPUBLISHED_CANVAS:this.$AdsCanvasComposerDialogStore4=l.unpublishedCanvas;this.__emitChange();break;case c('RichMediaEditorActionTypes').RESET_UNPUBLISHED_CANVAS:this.$AdsCanvasComposerDialogStore4=null;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_DIALOG_SHOWN:this.$AdsCanvasComposerDialogStore1[l.dialogID]=l.dialogShown;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_DIALOG_CANVAS:this.$AdsCanvasComposerDialogStore2[l.dialogID]=l.canvas;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_SELECTED_CANVAS:this.$AdsCanvasComposerDialogStore3=l.selectedCanvas;this.__emitChange();break;}};j.prototype.getDialogShown=function(k){if(k in this.$AdsCanvasComposerDialogStore1){return this.$AdsCanvasComposerDialogStore1[k];}else return false;};j.prototype.getDialogCanvas=function(k){if(k in this.$AdsCanvasComposerDialogStore2){return this.$AdsCanvasComposerDialogStore2[k];}else return null;};j.prototype.getSelectedCanvas=function(){return this.$AdsCanvasComposerDialogStore3;};j.prototype.getUnpublishedCanvas=function(){return this.$AdsCanvasComposerDialogStore4;};f.exports=new j(c('AdsDispatcher'));}),null);
__d('AdsCanvasEditorFunnelLogging',['AdsCanvasEditorFeature','AdsCanvasEditorFunnelLoggingConstants','AdsCanvasSV','CurrentUser','FunnelLogger','RichMediaEditorDataDispatcher','RichMediaEditorStore','Set'],(function a(b,c,d,e,f,g){'use strict';var h=false,i={startFunnel:function j(){if(h)return;h=true;c('FunnelLogger').startFunnel(c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_NAME);c('FunnelLogger').setFunnelTimeout(c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_NAME,c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_TIMEOUT);if(c('CurrentUser').isEmployee())c('FunnelLogger').addFunnelTag(c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_NAME,c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_TAGS.IS_EMPLOYEE);c('RichMediaEditorDataDispatcher').getCanvasPageData(c('RichMediaEditorStore').getCanvasPageId(),null,c('FunnelLogger'));},logGKExposures:function j(k){for(var l in c('AdsCanvasEditorFeature'))if(c('AdsCanvasEditorFeature').hasOwnProperty(l)){var m=c('AdsCanvasEditorFeature')[l];if(m&&c('AdsCanvasSV').ads_canvas_user_gks_to_log.indexOf(l)!=-1)c('FunnelLogger').addFunnelTag(c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_NAME,l);}if(k)k.map(function(n){c('FunnelLogger').addFunnelTag(c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_NAME,n);});},endFunnel:function j(){if(!h)return;h=false;c('FunnelLogger').addFunnelTag(c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_NAME,c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_TAGS.EDITOR_EXIT);c('FunnelLogger').endFunnel(c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_NAME);c('RichMediaEditorStore').setIsNotNewUser();},parseAndMergeFunnelTags:function j(){if(!c('AdsCanvasEditorFeature').canvas_editor_logging_tagset)return [];var k=new (c('Set'))(),l=c('RichMediaEditorStore').getCanvasTags();l.forEach(function(p){k.add(p);});var m=c('FunnelLogger').getFunnelInstance(c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_NAME),n=m?m.getTags():null;if(!n)return Array.from(k);for(var o in n)k.add(o);return Array.from(k);}};f.exports=i;}),null);
__d('AdsUnpublishedCanvasCloseConfirmDialog.react',['cx','fbt','LayerFadeOnHide','LayerHideOnEscape','React','XUIDialog.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogButton.react','XUIDialogTitle.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$AdsUnpublishedCanvasCloseConfirmDialog1=function(){this.props.onCloseReset();this.props.onConfirm(this.props.dialogID);}.bind(this),o;}m.prototype.render=function(){return c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerHideOnEscape:c('LayerHideOnEscape'),LayerFadeOnHide:c('LayerFadeOnHide')},shown:true,width:450},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:true},i._("Unpublished Canvas")),c('React').createElement(c('XUIDialogBody.react'),null,i._("You won't be able to use this Canvas in an ad until you publish it. You can still access a saved draft in Pages -> Publishing Tools -> Canvas. Do you want to close this draft without publishing it?")),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:i._("Cancel"),onClick:this.props.onCancel}),c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',className:"_4jy1",label:i._("Confirm"),onClick:this.$AdsUnpublishedCanvasCloseConfirmDialog1})));};m.propTypes={dialogID:l.string.isRequired,onCancel:l.func.isRequired,onCloseReset:l.func.isRequired,onConfirm:l.func.isRequired};f.exports=m;}),null);
__d('AdsCanvasButtonsContainer.react',['AdsCanvasButtons.react','AdsCanvasCloseConfirmDialog.react','AdsCanvasComposerDialogStore','AdsCanvasEditorFunnelLogging','AdsFluxContainer','AdsUnpublishedCanvasCloseConfirmDialog.react','CanvasCreationEvent','CanvasCreationWaterfallTypedLogger','BootloadOnRender.react','DOM','FluxStore','JSResource','LazyComponent.react','React','ReactDOM','RichMediaEditorActions','RichMediaEditorStore','RichMediaLoggingStoreUtils','emptyFunction','AdsCanvasEditorEnums'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('AdsCanvasEditorEnums').SaveStateEnum;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$AdsCanvasButtonsContainer2=function(q,r,s,t,u){if(r&&r.is_published||s===j.SAVED&&!this.props.mustPublish){return true;}else if(s===j.SAVED){c('ReactDOM').render(c('React').createElement(c('AdsUnpublishedCanvasCloseConfirmDialog.react'),{dialogID:q,onCancel:c('emptyFunction'),onCloseReset:t,onConfirm:u}),c('DOM').create('div'));return false;}else{c('ReactDOM').render(c('React').createElement(c('AdsCanvasCloseConfirmDialog.react'),{dialogID:q,onCancel:c('emptyFunction'),onConfirm:u}),c('DOM').create('div'));return false;}}.bind(this),this.$AdsCanvasButtonsContainer1=function(q){c('AdsCanvasEditorFunnelLogging').startFunnel();c('AdsCanvasEditorFunnelLogging').logGKExposures(this.props.extraGKsToLog);c('RichMediaEditorActions').setDialogShown(q,true);}.bind(this),this.$AdsCanvasButtonsContainer5=function(q,r){c('RichMediaEditorActions').setDialogShown(q,r);if(r){c('AdsCanvasEditorFunnelLogging').startFunnel();c('AdsCanvasEditorFunnelLogging').logGKExposures(this.props.extraGKsToLog);}else{c('AdsCanvasEditorFunnelLogging').endFunnel();c('RichMediaLoggingStoreUtils').logRichMediaCreationEventWithLogger(new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').EDITOR_EXIT));}}.bind(this),m;}k.getStores=function(){return [c('AdsCanvasComposerDialogStore'),c('RichMediaEditorStore')];};k.calculateState=function(l,m){var n=c('AdsCanvasComposerDialogStore').getDialogShown('newCanvasDialog'),o=null,p=false;if(m.canvasID)p=c('AdsCanvasComposerDialogStore').getDialogShown(m.canvasID);if(m.canvasID)o=c('AdsCanvasComposerDialogStore').getDialogCanvas(m.canvasID);return {canvas:o,createDialogShown:n,editDialogShown:p,editState:c('RichMediaEditorStore').getDocumentEditState()};};k.prototype.render=function(){var l=this.state.canvas,m=l?c('React').createElement(c('AdsCanvasButtons.react'),{canvas:l,disabled:!!this.props.disabled,source:this.props.source,onClick:this.$AdsCanvasButtonsContainer1,onClickCreate:this.props.onClickCreate||c('emptyFunction'),onClickPreview:this.props.onClickPreview||c('emptyFunction')}):c('React').createElement(c('AdsCanvasButtons.react'),{disabled:!!this.props.disabled,source:this.props.source,onClick:this.$AdsCanvasButtonsContainer1,onClickCreate:this.props.onClickCreate||c('emptyFunction')}),n={accessToken:this.props.accessToken,businessID:this.props.businessID,canvasCapbilityConfig:this.props.canvasCapbilityConfig,createPostEnabled:false,editState:this.state.editState,extraGKsToLog:this.props.extraGKsToLog,mustPublish:this.props.mustPublish,pageID:this.props.pageID,source:this.props.source,onBeforeHideDialog:this.$AdsCanvasButtonsContainer2,onCloseReset:this.props.onCloseReset,onConfirmClose:this.$AdsCanvasButtonsContainer3,onDuplicateReload:this.props.onDuplicateReload,onReloadCanvas:this.$AdsCanvasButtonsContainer4,onSaveCanvasSuccess:this.props.onSaveCanvasSuccess,onToggle:this.$AdsCanvasButtonsContainer5},o=c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),babelHelpers['extends']({dialogID:'newCanvasDialog',dialogShown:this.state.createDialogShown},n)),loader:c('JSResource')('AdsCanvasComposerDialog.react').__setRef('AdsCanvasButtonsContainer.react'),placeholder:c('React').createElement('span',null)}),p=null;if(l)p=c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),babelHelpers['extends']({canvas:l,dialogID:l.id,dialogShown:this.state.editDialogShown},n)),loader:c('JSResource')('AdsCanvasComposerDialog.react').__setRef('AdsCanvasButtonsContainer.react'),placeholder:c('React').createElement('span',null)});return c('React').createElement('div',null,m,o,p);};k.prototype.$AdsCanvasButtonsContainer3=function(l){c('AdsCanvasEditorFunnelLogging').endFunnel();c('RichMediaLoggingStoreUtils').logRichMediaCreationEventWithLogger(new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').EDITOR_EXIT));c('RichMediaEditorActions').setDialogShown(l,false);};k.prototype.$AdsCanvasButtonsContainer4=function(l,m){c('RichMediaEditorActions').setDialogCanvas(m.id,m);if(l!==m.id){c('RichMediaEditorActions').setDialogShown(l,false);c('RichMediaEditorActions').setDialogShown(m.id,true);}};f.exports=c('AdsFluxContainer').create(k,{withProps:true});}),null);
__d('AdsCanvasLabel.react',['cx','fbt','AdsCanvasConstants','AdsLabeledField.react','Link.react','React','emptyFunction'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);}l.prototype.render=function(){var m=this.props.hideLearnMore?'':c('React').createElement(c('Link.react'),{href:c('AdsCanvasConstants').CANVAS_LEARN_MORE_LINK,target:'_blank',onClick:this.props.onClickLearnMore||c('emptyFunction')},i._("Learn more"),'.'),n=i._("Canvas is a full-screen experience that opens in mobile when people click your ad. {=Learn more}{supplement}",[i.param('=Learn more',m),i.param('supplement',this.props.supplement?this.props.supplement:'')]);return (c('React').createElement(c('AdsLabeledField.react'),{helpText:n,label:i._("Canvas")}));};f.exports=l;}),null);
__d('AdsCanvasTypeaheadActionTypes',['ImmutableObject','keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('ImmutableObject'))(c('keyMirrorRecursive')({DOC_NAME:{LOADED:'',LOAD_ERROR:''},REFRESH_TYPEAHEAD:true},'AdsCanvasTypeahead'));f.exports=h;}),null);
__d('AdsCanvasTypeaheadActions',['AdsCanvasBuilderDispatcher','AdsCanvasTypeaheadActionTypes'],(function a(b,c,d,e,f,g){'use strict';var h={docNameResultsLoaded:function i(j,k,l,m){l=l.filter(function(n){return ((!m||n.is_published===true)&&!!n.name);});c('AdsCanvasBuilderDispatcher').dispatch({pageID:j,filter:k,results:l,type:c('AdsCanvasTypeaheadActionTypes').DOC_NAME.LOADED});},docNameLoadError:function i(j,k,l){c('AdsCanvasBuilderDispatcher').dispatch({pageID:j,error:l,filter:k,type:c('AdsCanvasTypeaheadActionTypes').DOC_NAME.LOAD_ERROR});},refreshTypeahead:function i(j){c('AdsCanvasBuilderDispatcher').dispatch({pageID:j,type:c('AdsCanvasTypeaheadActionTypes').REFRESH_TYPEAHEAD});}};f.exports=h;}),null);
__d('CanvasDataUtils',['adsGKCheck'],(function a(b,c,d,e,f,g){'use strict';var h={getFieldsForPagesCanvasList:function i(){if(c('adsGKCheck')('ads_canvas_editor_store_refactoring'))return ['id','name','background_color','is_published','update_time','element_payload','elements{'+'element{'+'child_elements{element{photo{source}}},'+'photo{images}'+'},'+'name,'+'element_type'+'}','body_elements','canvas_link','last_editor','business_id','store_url','linked_documents','style_list','tags'];return ['id','name','background_color','is_published','update_time','element_payload','elements{'+'element{'+'child_elements{element{photo{source}}},'+'photo{images}'+'},'+'name,'+'element_type'+'}','canvas_link','last_editor','business_id','store_url','linked_documents','style_list','tags'];}};f.exports=h;}),null);
__d('AdsCanvasTypeaheadDataManager',['AdsCanvasConstants','AdsCanvasTypeaheadActions','AdsGenericFilterSet','AdsGraphAPI','CanvasDataUtils','GraphSort'],(function a(b,c,d,e,f,g){'use strict';h.prototype.searchCanvasDoc=function(i,j,k,l){c('AdsGraphAPI').get(f.id).object('page',j).edge('rich_media_documents').get({access_token:i,fields:c('CanvasDataUtils').getFieldsForPagesCanvasList(),filtering:k.toAPI(),limit:c('AdsCanvasConstants').TYPE_AHEAD_LIMIT,sort:'name'+c('GraphSort').DESC,summary:true}).done(function(m){c('AdsCanvasTypeaheadActions').docNameResultsLoaded(j,k,m.data,l);},function(m){return c('AdsCanvasTypeaheadActions').docNameLoadError(j,k,m);});};function h(){}f.exports=new h();}),null);
__d('AdsCanvasTypeaheadSearchableEntry',['fbt','SearchableEntry'],(function a(b,c,d,e,f,g,h){'use strict';var i={createForCanvasDoc:function j(k){var l=k.is_published?h._("Finished"):h._("Draft");return new (c('SearchableEntry'))({auxiliaryData:k,subtitle:l,title:k.name,uniqueID:k.id});}};f.exports=i;}),null);
__d('AdsCanvasTypeaheadStore',['AdsCanvasBuilderDispatcher','AdsCanvasTypeaheadActionTypes','AdsCanvasTypeaheadDataManager','AdsCanvasTypeaheadSearchableEntry','AdsGenericFilter','AdsGenericFilterField','AdsGenericFilterFieldType','AdsGenericFilterOperator','AdsGenericFilterSet','FluxStore','LoadObject','LFUCache','ReactDispatcher_DEPRECATED','SearchableEntry'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=new (c('AdsGenericFilterField'))('name',c('AdsGenericFilterFieldType').STRING);h=babelHelpers.inherits(k,c('FluxStore'));i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.$AdsCanvasTypeaheadStore1=new (c('LFUCache'))();}k.prototype.__onDispatch=function(l){switch(l.type){case c('AdsCanvasTypeaheadActionTypes').DOC_NAME.LOADED:return this.__handleResultsLoaded(l.pageID,l.filter,l.results,function(m){return c('AdsCanvasTypeaheadSearchableEntry').createForCanvasDoc(m);});case c('AdsCanvasTypeaheadActionTypes').DOC_NAME.LOAD_ERROR:return this.__handleError(l.pageID,l.filter,l.error);case c('AdsCanvasTypeaheadActionTypes').REFRESH_TYPEAHEAD:return this.$AdsCanvasTypeaheadStore2(l.pageID);}};k.prototype.searchDocByName=function(l,m,n,o){var p=new (c('AdsGenericFilterSet'))([new (c('AdsGenericFilter'))(j,c('AdsGenericFilterOperator').CONTAIN,l||'')]),q=this.$AdsCanvasTypeaheadStore3(m,p),r=this.$AdsCanvasTypeaheadStore1.get(q);if(!r){r=c('LoadObject').loading();this.$AdsCanvasTypeaheadStore1.set(q,r);c('AdsCanvasTypeaheadDataManager').searchCanvasDoc(n,m,p,o);}return r;};k.prototype.__handleError=function(l,m,n){var o=this.$AdsCanvasTypeaheadStore3(l,m);this.$AdsCanvasTypeaheadStore1.set(o,c('LoadObject').empty().setError(n));};k.prototype.__handleResultsLoaded=function(l,m,n,o){var p=this.$AdsCanvasTypeaheadStore3(l,m),q=n.map(o,this);this.$AdsCanvasTypeaheadStore1.set(p,c('LoadObject').empty().setValue(q));this.__emitChange();};k.prototype.$AdsCanvasTypeaheadStore2=function(l){var m=new (c('AdsGenericFilterSet'))([new (c('AdsGenericFilter'))(j,c('AdsGenericFilterOperator').CONTAIN,'')]),n=this.$AdsCanvasTypeaheadStore3(l,m),o=this.$AdsCanvasTypeaheadStore1.get(n);if(o)this.$AdsCanvasTypeaheadStore1.set(n,null);};k.prototype.$AdsCanvasTypeaheadStore3=function(l,m){return l+'-'+m.toString();};f.exports=new k(c('AdsCanvasBuilderDispatcher'));}),null);
__d('AdsCanvasSearchSource',['AdsCanvasTypeaheadStore','AdsFluxStoreSearchSource'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('AdsFluxStoreSearchSource'));i=h&&h.prototype;function j(k){var l=babelHelpers['extends']({getAllForEmptyQuery:true},k,{queryRequests:[{store:c('AdsCanvasTypeaheadStore'),getData:function m(n){return c('AdsCanvasTypeaheadStore').searchDocByName(n,k.pageID,k.accessToken,k.onlyPublished);}}]});i.constructor.call(this,l);}f.exports=j;}),null);
__d('AdsCanvasTypeahead.react',['cx','AdsCanvasButtonsContainer.react','AdsCanvasLabel.react','AdsCanvasWebdriverIDs','ContextualLayerHideOnScrollOut','ContextualLayerUpdateOnScroll','Grid.react','React','XUITypeahead.react','XUITypeaheadView.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('Grid.react').GridItem;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.$AdsCanvasTypeahead8=function(event){this.props.onQueryChange&&this.props.onQueryChange();this.setState({queryString:event.target.value});}.bind(this);this.$AdsCanvasTypeahead7=function(){this.$AdsCanvasTypeahead2(this.props.selectedEntry);}.bind(this);this.$AdsCanvasTypeahead9=function(){var n=this.props.selectedEntry;this.setState({queryString:n?n.getTitle():''});}.bind(this);this.$AdsCanvasTypeahead10=function(n){if(this.props.onEntrySelect)this.props.onEntrySelect(n,this.props.blockerArgs);this.setState({queryString:n.getTitle()});}.bind(this);this.state={queryString:this.$AdsCanvasTypeahead1(m.selectedEntry)};}l.prototype.componentWillReceiveProps=function(m){if(m.selectedEntry!==this.props.selectedEntry)this.$AdsCanvasTypeahead2(m.selectedEntry);};l.prototype.render=function(){var m=this.$AdsCanvasTypeahead3(),n=this.props.shouldHideCanvasCreateButton?c('React').createElement('div',{className:"_39gc"},m):c('React').createElement(c('Grid.react'),{className:"_39gb",cols:2},c('React').createElement(k,{className:"_39gc"},m),c('React').createElement(k,null,this.$AdsCanvasTypeahead4()));return c('React').createElement('div',{'data-testid':c('AdsCanvasWebdriverIDs').ADS_CANVAS_TYPEAHEAD},this.$AdsCanvasTypeahead5(),n);};l.prototype.$AdsCanvasTypeahead3=function(){return c('React').createElement(c('XUITypeahead.react'),{autoHighlight:this.$AdsCanvasTypeahead6(),className:!!this.props.disabled?"_4i0b":'',disabled:this.props.disabled,focusedOnInit:this.props.focusedOnInit,placeholder:this.props.placeholder,presenter:{ViewRenderer:c('XUITypeaheadView.react'),useLayer:true,layerBehaviors:{ContextualLayerHideOnScrollOut:c('ContextualLayerHideOnScrollOut'),ContextualLayerUpdateOnScroll:c('ContextualLayerUpdateOnScroll')}},queryString:this.state.queryString,ref:'typeahead',searchSource:this.props.searchSource,searchSourceOptions:this.props.searchSourceOptions,showEntriesOnFocus:true,tallInput:true,xuiError:this.props.error,xuiErrorPosition:'above',onBlur:this.$AdsCanvasTypeahead7,onChange:this.$AdsCanvasTypeahead8,onFocus:this.$AdsCanvasTypeahead9,onSelectAttempt:this.$AdsCanvasTypeahead10});};l.prototype.$AdsCanvasTypeahead4=function(){if(this.props.shouldHideCanvasCreateButton)return null;return c('React').createElement(c('AdsCanvasButtonsContainer.react'),{accessToken:this.props.accessToken,businessID:this.props.businessID,canvasCapbilityConfig:this.props.canvasCapbilityConfig,canvasID:this.props.canvasID,disabled:this.props.disabled,extraGKsToLog:this.props.extraGKsToLog,mustPublish:this.props.mustPublish,pageID:this.props.pageID,source:this.props.source,onClickCreate:this.props.onClickCreate,onClickPreview:this.props.onClickPreview,onCloseReset:this.props.onCloseReset,onDuplicateReload:this.props.onDuplicateReload,onSaveCanvasSuccess:this.props.onSaveCanvasSuccess});};l.prototype.$AdsCanvasTypeahead5=function(){if(this.props.hideHelpText)return null;return c('React').createElement(c('AdsCanvasLabel.react'),{supplement:this.props.labelSupplement,onClickLearnMore:this.props.onClickLearnMore});};l.prototype.$AdsCanvasTypeahead6=function(){return !!this.state.queryString;};l.prototype.$AdsCanvasTypeahead1=function(m){return m?m.getTitle():'';};l.prototype.$AdsCanvasTypeahead2=function(m){this.setState({queryString:this.$AdsCanvasTypeahead1(m)});};f.exports=l;}),null);
__d('AdsNumberInput.react',['cx','fbt','AdsTextInput.react','React','intlNumUtils','joinClasses','mergeDeep'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={focused:false,formatError:false},this.$AdsNumberInput1=function(){this.setState({focused:false,formatError:false});}.bind(this),this.$AdsNumberInput2=function(s){var t=this.$AdsNumberInput5(s);if(t>=0)s=s.substring(0,t);this.props.onChange(c('intlNumUtils').parseNumber(s));}.bind(this),this.$AdsNumberInput3=function(){this.setState({focused:true});}.bind(this),this.$AdsNumberInput4=function(s){var t=this.$AdsNumberInput5(s),u=t>=0;this.setState({formatError:u});}.bind(this),this.$AdsNumberInput5=function(s){return s.search(/[^0-9\,\.\ ]/);},o;}m.prototype.render=function(){var n=this.props.errors||{};if(this.state.formatError)n=c('mergeDeep')(n,{NON_NUMERIC_INPUT:i._("This input can only contain numbers")});var o=this.props.value;if(o!=null)o=c('intlNumUtils').formatNumber(o);if(o&&!this.state.focused){var p=this.props.prefix||'',q=this.props.suffix||'';o=p+o+q;}var r="_x62";return c('React').createElement(c('AdsTextInput.react'),babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,r),errors:n,value:o,onBlur:this.$AdsNumberInput1,onChange:this.$AdsNumberInput2,onFocus:this.$AdsNumberInput3,onImmediateChange:this.$AdsNumberInput4}));};m.propTypes={errors:l.object,prefix:l.string,suffix:l.string,value:l.number,onChange:l.func.isRequired};f.exports=m;}),null);
__d('LoadingImageBox.react',['cssVar','BUIAdoptionXUISpinner.react','CenteredContainer.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.className,n=l.height,o=l.width;return (c('React').createElement(c('CenteredContainer.react'),{className:m,style:{backgroundColor:"#000000",height:n,width:o},vertical:true},c('React').createElement(c('BUIAdoptionXUISpinner.react'),{background:'dark',size:'large'})));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('SponsorTagsOptInActionTypes',[],(function a(b,c,d,e,f,g){'use strict';var h={SHOW:'sponsorTagsOptIn/show',NEXT:'sponsorTagsOptIn/next',ACCEPT:'sponsorTagsOptIn/accept',CANCEL:'sponsorTagsOptIn/cancel',QUERY_STATUS:'sponsorTagsOptIn/query_status',QUERY_OPT_IN:'sponsorTagsOptIn/query_opt_in',HANDLE_STATUS:'sponsorTagsOptIn/handle_status',HANDLE_OPT_IN:'sponsorTagsOptIn/handle_opt_in'};f.exports=h;}),null);
__d('SponsorTagsOptInDispatcher',['ExplicitRegistrationReactDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationReactDispatcher'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this);}f.exports=new j({strict:true});}),null);
__d("XSponsorTagsOptInController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/branded_content\/optin\/",{profile_id:{type:"Int"},option:{type:"String"}});}),null);
__d('SponsorTagsOptInDataManager',['AsyncRequest','SponsorTagsOptInActionTypes','SponsorTagsOptInDispatcher','SponsorTagsOptInOptions','XSponsorTagsOptInController'],(function a(b,c,d,e,f,g){'use strict';var h={queryStatus:function i(j){var k=c('XSponsorTagsOptInController').getURIBuilder().setString('option',c('SponsorTagsOptInOptions').QUERY_STATUS);if(j)k.setInt('profile_id',j);new (c('AsyncRequest'))().setMethod('POST').setReadOnly(false).setURI(k.getURI()).setHandler(this._handleStatusSuccess).setErrorHandler(this._handleStatusError).send();},_handleStatusSuccess:function i(j){var k=j.getPayload();c('SponsorTagsOptInDispatcher').dispatch({type:c('SponsorTagsOptInActionTypes').HANDLE_STATUS,payload:k});},_handleStatusError:function i(j){},queryOptIn:function i(j){var k=c('XSponsorTagsOptInController').getURIBuilder().setString('option',c('SponsorTagsOptInOptions').OPT_IN);if(j)k.setInt('profile_id',j);new (c('AsyncRequest'))().setMethod('POST').setReadOnly(false).setURI(k.getURI()).setHandler(this._handleOptInSuccess).setErrorHandler(this._handleOptInError).send();},_handleOptInSuccess:function i(j){var k=j.getPayload();c('SponsorTagsOptInDispatcher').dispatch({type:c('SponsorTagsOptInActionTypes').HANDLE_OPT_IN,payload:k});},_handleOptInError:function i(j){}};f.exports=h;}),null);
__d('SponsorTagsOptInStepHowItWorks.react',['ix','cx','fbt','Image.react','React','Text.react','XUIButton.react','XUICloseButton.react','XUIDialogBody.react','XUIDialogFooter.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').Component;k=babelHelpers.inherits(n,m);l=k&&k.prototype;n.prototype.render=function(){var o=[{imageSrc:h("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/magnifying-glass_24_big-accent-blue.png"),textTitle:j._("Search sponsor"),textContent:j._("Does your post feature a third party brand or product? Search the Page of whoever is sponsor it and tag them.")},{imageSrc:h("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/megaphone_24_big-accent-blue.png"),textTitle:j._("Get them to back you up"),textContent:j._("Pages you tag in your post will be notified. They will be able to view your post's metric and use it to create an ad.")},{imageSrc:h("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/trending_24_big-accent-blue.png"),textTitle:j._("Track your joined performance"),textContent:j._("If you promote this post, the tagged Page can see the ad spend and its CPM metrics.")}],p=o.map(function(q,r){return (c('React').createElement('div',{className:"_y1a",key:r},c('React').createElement('div',{className:"_y1c"},c('React').createElement(c('Image.react'),{src:q.imageSrc})),c('React').createElement('div',{className:"_y1g"},c('React').createElement(c('Text.react'),{className:"_y1h"},q.textTitle),c('React').createElement(c('Text.react'),{className:"_y1j"},q.textContent))));});return (c('React').createElement('div',null,c('React').createElement('div',{className:"_8s2"},c('React').createElement(c('XUICloseButton.react'),{label:j._("Close"),className:"layerCancel _51-t"})),c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement('div',{className:"_424x"},c('React').createElement(c('Text.react'),{className:"_y1l"},j._("How it Works")),p)),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIButton.react'),{use:'confirm',onClick:this.props.onClickNext,label:j._("Continue"),className:"_y1m"}))));};function n(){k.apply(this,arguments);}f.exports=n;}),null);
__d('SponsorTagsOptInStepIntro.react',['cx','fbt','ix','Image.react','React','Text.react','XUIButton.react','XUICloseButton.react','XUIDialogBody.react','XUIDialogFooter.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').Component,n=j("images\/branded_content\/sponsor_tags_opt_in_intro.png");k=babelHelpers.inherits(o,m);l=k&&k.prototype;o.prototype.render=function(){return (c('React').createElement('div',null,c('React').createElement('div',{className:"_8s2"},c('React').createElement(c('XUICloseButton.react'),{label:i._("Close"),className:"layerCancel _51-t"})),c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement('div',{className:"_424x"},c('React').createElement(c('Image.react'),{src:n}),c('React').createElement(c('Text.react'),{className:"_424z"},i._("Introducing Sponsor Tags")),c('React').createElement(c('Text.react'),{className:"_4250"},i._("You can now promote the brands you partner with when creating a new post. With Sponsor Tags, you and brands will be able to build more stronger relationships and more meaningful stories together.")))),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIButton.react'),{use:'confirm',onClick:this.props.onClickNext,label:i._("How it Works"),className:"_4252"}))));};function o(){k.apply(this,arguments);}f.exports=o;}),null);
__d('SponsorTagsOptInTCContent',['cx','Link.react','React'],(function a(b,c,d,e,f,g,h){var i=c('React').createElement('div',{className:"_47o7"},c('React').createElement('p',null,c('React').createElement('b',null,'Facebook Branded Content Policies')),c('React').createElement('p',null,'Our Branded Content Policies apply to Verified Pages and Verified Profiles (with the blue badge) on Facebook. Branded content may only be posted by Verified Pages and Verified Profiles. Branded content is defined as content originating from a Page or Profile that features third party products, brands, or sponsors that differ from the Profile or Page. When posting permitted branded content integrations, Verified Profiles and Verified Pages must use the Branded Content tool to tag the featured third party product, brand, or sponsor.'),c('React').createElement('ol',null,c('React').createElement('li',null,'Don\'t include pre, mid or post-roll ads in videos.'),c('React').createElement('li',null,'Don\'t include banner ads in videos or images.'),c('React').createElement('li',null,'Don\'t include third party products, brands or sponsors within your Profile or Page\'s cover photo or profile picture.'),c('React').createElement('li',null,'Don\'t include title cards within a video\'s first three seconds. Interstitial ad cards outside of a video\'s first three seconds, such as mid cards or end cards, must not persist for longer than five consecutive seconds and must be tagged appropriately using the Branded Content tool.'),c('React').createElement('li',null,'Don\'t include graphical overlays, logos or watermarks within a video\'s first three seconds. Graphical overlays, logos or watermarks included outside of a video\'s first three seconds must be tagged appropriately using the Branded Content tool. Ad elements and logos included in videos by virtue of being recorded during the subject matter\'s filming, such as stadium signage in sports related content, do not need to be tagged.'),c('React').createElement('li',null,'Graphical overlays, logos or watermarks included on image content must be tagged appropriately using the Branded Content tool.'),c('React').createElement('li',null,'Promotions, such as sweepstakes or giveaways, must be tagged appropriately using the Branded Content tool and must comply with section III. E. of the ',c('React').createElement(c('Link.react'),{href:'https://www.facebook.com/page_guidelines.php',target:'_blank'},'Facebook Pages Terms'),'.'),c('React').createElement('li',null,'Third party images or videos promoting brands, products or sponsors that are unassociated with your Profile or Page, such as full-length third party video commercials, must be tagged appropriately using the Branded Content tool.'),c('React').createElement('li',null,'Product placement in images or videos must be tagged appropriately using the Branded Content tool.'),c('React').createElement('li',null,'Profile and Page posts clearly disclosed as being sponsored or provided by a third party, such as self-disclosure within a post\'s text, must be tagged appropriately using the Branded Content tool.'),c('React').createElement('li',null,'You must comply with all applicable laws and regulations, including by ensuring that you provide all necessary disclosures to people using Facebook, such as any disclosures needed to indicate the commercial nature of content posted by you.')));f.exports=i;}),null);
__d('SponsorTagsOptInStepTerms.react',['cx','fbt','React','ScrollableArea.react','SponsorTagsOptInTCContent','Text.react','XUIButton.react','XUICloseButton.react','XUIDialogBody.react','XUIDialogFooter.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').Component;j=babelHelpers.inherits(m,l);k=j&&j.prototype;m.prototype.render=function(){return (c('React').createElement('div',null,c('React').createElement('div',{className:"_8s2"},c('React').createElement(c('XUICloseButton.react'),{label:i._("Close"),className:"layerCancel _51-t"})),c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement('div',{className:"_5vvo"},c('React').createElement(c('Text.react'),{className:"_y1l"},i._("Sponsor Tags Terms & Conditions")),c('React').createElement(c('ScrollableArea.react'),{maxHeight:280,fade:false},c('SponsorTagsOptInTCContent')))),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIButton.react'),{use:'default',onClick:this.props.onClickCancel,label:i._("Cancel"),className:"_82v"}),c('React').createElement(c('XUIButton.react'),{use:'confirm',onClick:this.props.onClickAccept,label:i._("Accept"),className:"_82v"}))));};function m(){j.apply(this,arguments);}f.exports=m;}),null);
__d('SponsorTagsOptInDialog.react',['cx','LayerFadeOnHide','React','SponsorTagsOptInStepHowItWorks.react','SponsorTagsOptInStepIntro.react','SponsorTagsOptInStepTerms.react','XUIDialog.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').Component;i=babelHelpers.inherits(l,k);j=i&&i.prototype;l.prototype.render=function(){if(!this.props.isShown)return null;var m=[c('React').createElement(c('SponsorTagsOptInStepIntro.react'),{onClickNext:this.props.onClickNext}),c('React').createElement(c('SponsorTagsOptInStepHowItWorks.react'),{onClickNext:this.props.onClickNext}),c('React').createElement(c('SponsorTagsOptInStepTerms.react'),{onClickAccept:this.props.onClickAccept,onClickCancel:this.props.onClickCancel})],n=m[this.props.step];return (c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},fixedTopPosition:120,hideOnEscape:false,layerHideOnBlur:false,onToggle:this.$SponsorTagsOptInDialog1.bind(this),shown:true,width:550,className:"_2um5"},n));};l.prototype.$SponsorTagsOptInDialog1=function(m){if(!m)this.props.onClickCancel();};function l(){i.apply(this,arguments);}f.exports=l;}),null);
__d('SponsorTagsOptInStore',['FluxReduceStore','immutable','SponsorTagsOptInActionTypes','SponsorTagsOptInDataManager','SponsorTagsOptInDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l={step:0,profileID:0,isShown:false,isOptedIn:null};h=babelHelpers.inherits(m,c('immutable').Record(l));i=h&&h.prototype;function m(){h.apply(this,arguments);}j=babelHelpers.inherits(n,c('FluxReduceStore'));k=j&&j.prototype;n.prototype.getInitialState=function(){return new m();};n.prototype.reduce=function(o,p){switch(p.type){case c('SponsorTagsOptInActionTypes').NEXT:return o.set('step',o.step+1);case c('SponsorTagsOptInActionTypes').SHOW:return o.set('isShown',true).set('step',0);case c('SponsorTagsOptInActionTypes').CANCEL:return o.set('isShown',false).set('step',0);case c('SponsorTagsOptInActionTypes').ACCEPT:c('SponsorTagsOptInDataManager').queryOptIn(o.profileID);return o.set('isShown',false);case c('SponsorTagsOptInActionTypes').QUERY_STATUS:c('SponsorTagsOptInDataManager').queryStatus(p.profileID);return o.set('profileID',p.profileID);case c('SponsorTagsOptInActionTypes').QUERY_OPT_IN:c('SponsorTagsOptInDataManager').queryOptIn(o.profileID);return o;case c('SponsorTagsOptInActionTypes').HANDLE_STATUS:return o.set('isOptedIn',p.payload.isOptedIn);case c('SponsorTagsOptInActionTypes').HANDLE_OPT_IN:return o.set('isOptedIn',p.payload.isOptedIn);default:return o;}};function n(){j.apply(this,arguments);}f.exports=new n(c('SponsorTagsOptInDispatcher'));}),null);
__d('SponsorTagsOptInDialogContainer.react',['FluxContainer','React','SponsorTagsOptInActionTypes','SponsorTagsOptInDialog.react','SponsorTagsOptInDispatcher','SponsorTagsOptInStore'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').Component;h=babelHelpers.inherits(k,j);i=h&&h.prototype;k.getStores=function(){return [c('SponsorTagsOptInStore')];};k.calculateState=function(){return {isShown:c('SponsorTagsOptInStore').getState().isShown,step:c('SponsorTagsOptInStore').getState().step};};function k(){i.constructor.call(this);this.state={isShown:false,step:0};}k.prototype.render=function(){return (c('React').createElement(c('SponsorTagsOptInDialog.react'),babelHelpers['extends']({},this.state,{onClickNext:this.$SponsorTagsOptInDialogContainer1.bind(this),onClickAccept:this.$SponsorTagsOptInDialogContainer2.bind(this),onClickCancel:this.$SponsorTagsOptInDialogContainer3.bind(this)})));};k.prototype.$SponsorTagsOptInDialogContainer3=function(){c('SponsorTagsOptInDispatcher').dispatch({type:c('SponsorTagsOptInActionTypes').CANCEL});};k.prototype.$SponsorTagsOptInDialogContainer2=function(){c('SponsorTagsOptInDispatcher').dispatch({type:c('SponsorTagsOptInActionTypes').ACCEPT});};k.prototype.$SponsorTagsOptInDialogContainer1=function(){c('SponsorTagsOptInDispatcher').dispatch({type:c('SponsorTagsOptInActionTypes').NEXT});};f.exports=c('FluxContainer').create(k);}),null);
__d('PageCommerceStripeRedirectConfirmationDialog.react',['cx','fbt','React','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogHeader.react','XUIDialogHeaderTitle.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=500;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={dialogShown:false},this.show=function(){this.setState({dialogShown:true});}.bind(this),this.hide=function(){this.setState({dialogShown:false});}.bind(this),p;}n.prototype.render=function(){if(!this.state.dialogShown)return null;return c('React').createElement(c('XUIDialog.react'),{width:m,onToggle:function(o){return this.setState({dialogShown:o});}.bind(this),shown:this.state.dialogShown},c('React').createElement(c('XUIDialogHeader.react'),null,c('React').createElement(c('XUIDialogHeaderTitle.react'),null,i._("You Have Pending Orders"))),c('React').createElement(c('XUIDialogBody.react'),{className:"_2ph_"},c('React').createElement(c('XUIText.react'),null,i._("Your shop has orders that haven't been shipped yet. If you connect to a different Stripe account, you'll no longer be able to receive payment for those orders. Consider completing and shipping your pending orders before changing the Stripe account for your shop."))),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{label:i._("Change Stripe Account"),use:'default',onClick:this.props.onContinue}),c('React').createElement(c('XUIDialogButton.react'),{label:i._("Cancel"),use:'confirm',onClick:this.hide})));};n.propTypes={onContinue:l.func.isRequired};f.exports=n;}),null);
__d("XCommerceSelfServeHasPendingOrdersQueryController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/commerce\/self-serve\/has-pending-orders\/",{page_id:{type:"Int",required:true}});}),null);
__d("XStripeOnboardingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/payment\/stripeconnect\/onboarding\/",{page_id:{type:"Int",required:true},payment_type:{type:"Enum",required:true,enumType:1}});}),null);
__d('CommerceStripeConnectLink.react',['cx','AsyncRequest','DOM','DTSG','Link.react','PageCommerceStripeRedirectConfirmationDialog.react','React','ReactDOM','XStripeOnboardingController','XCommerceSelfServeHasPendingOrdersQueryController','XUIText.react','PaymentsTypeEnum'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$CommerceStripeConnectLink1=function(r){var s=c('XCommerceSelfServeHasPendingOrdersQueryController').getURIBuilder().setInt('page_id',this.props.pageID).getURI();new (c('AsyncRequest'))().setURI(s).setHandler(function(t){var u=t.payload.has_pending_orders;if(u){var v=c('ReactDOM').render(c('React').createElement(c('PageCommerceStripeRedirectConfirmationDialog.react'),{onContinue:function w(){return r();}}),c('DOM').create('div'));v.show();}else r();}).send();}.bind(this),n;}l.prototype.render=function(){'use strict';var m=c('XStripeOnboardingController').getURIBuilder().setInt('page_id',this.props.pageID).setEnum('payment_type',c('PaymentsTypeEnum').BOF).getURI();return c('React').createElement('span',null,c('React').createElement('form',{className:"hidden_elem",action:m,method:'post',ref:'connectStripeForm',target:'_blank'},c('React').createElement('input',{type:'hidden',name:'fb_dtsg',value:c('DTSG').getToken()})),c('React').createElement(c('Link.react'),{onClick:this.$CommerceStripeConnectLink1.bind(this,function(){return this.refs.connectStripeForm.submit();}.bind(this))},c('React').createElement(c('XUIText.react'),{size:'small'},this.props.content)));};l.propTypes={confirmationURI:k.string,content:k.node.isRequired,pageID:k.string.isRequired};f.exports=l;}),null);
__d('CommerceExceptionHandlerMixin.react',['fbt','AsyncRequest','CommerceErrorCode','CommerceErrorNotice.react','CommerceStripeConnectLink.react','React','URI','XCommerceResponse'],(function a(b,c,d,e,f,g,h){'use strict';var i={getInitialState:function j(){return {xResponse:null};},sendAsync:function j(k,l,m,n){new (c('AsyncRequest'))(k).setData(l||{}).setHandler(function(o){var p=new (c('XCommerceResponse'))(o.payload);this.setState({xResponse:p});if(!p.hasErrors()){m&&m(o);}else n&&n(o);}.bind(this)).setErrorHandler(function(o){this.setGeneralError(c('CommerceErrorCode').COMMERCE__GENERIC_EXCEPTION);n&&n(o);}.bind(this)).send();},setGeneralError:function j(k){var l=this.state.xResponse?this.state.xResponse:new (c('XCommerceResponse'))({});l.setGeneralError(k);this.setState({xResponse:l});},addFieldError:function j(k,l){var m=this.state.xResponse?this.state.xResponse:new (c('XCommerceResponse'))({});m.addFieldError(k,l);this.setState({xResponse:m});},_getFullErrorMessage:function j(k){if(!k)return null;if(k.code.toString()===c('CommerceErrorCode').COMMERCE__STRIPE_DEFERRED_ACCOUNT_EMAIL_USED.code.toString()){var l=h._("connect your shop with an existing account");return h._("A Stripe account with this email address already exists. Please use a different email address or {connect to a different Stripe account link}.",[h.param('connect to a different Stripe account link',c('React').createElement(c('CommerceStripeConnectLink.react'),{pageID:this.props.pageID,content:l}))]);}return k.title+': '+k.message;},hasErrors:function j(){return !!this.state.xResponse&&this.state.xResponse.hasErrors();},hasGeneralError:function j(){return !!this.state.xResponse&&this.state.xResponse.hasGeneralError();},hasFieldErrors:function j(){return !!this.state.xResponse&&this.state.xResponse.hasFieldErrors();},renderAllErrors:function j(){var k=this.state.xResponse,l=[];if(this.hasFieldErrors()){var m=k.getFieldErrors();m.forEach(function(o){return l.push(o);});}if(this.hasGeneralError())l.push(k.getGeneralError());var n=l.map(function(o){return this._getFullErrorMessage(o);}.bind(this));return this.renderErrorMessages(n);},renderGeneralError:function j(){if(this.hasGeneralError()){return this.renderErrorMessages([this.getGeneralErrorMessage()]);}else return null;},renderErrorMessages:function j(k){if(k.length===0){return null;}else{var l=c('React').createElement('ul',null,k.map(function(m,n){return c('React').createElement('li',{key:n},m);}));return c('React').createElement(c('CommerceErrorNotice.react'),{error:l});}},getGeneralErrorMessage:function j(){if(this.hasGeneralError()){var k=this.state.xResponse.getGeneralError();return this._getFullErrorMessage(k);}else return null;},getFieldErrorMessage:function j(k){if(!this.hasFieldErrors())return null;return this._getFullErrorMessage(this.state.xResponse.getFieldErrors()[k]);}};f.exports=i;}),null);
__d('BOFSellerLogger',['BanzaiLogger','Event'],(function a(b,c,d,e,f,g){'use strict';var h='BOFSellerLoggerConfig',i={log:function j(k,l,m){m.event=k;m.seller_profile_id=l;c('BanzaiLogger').log(h,m);},initClickListener:function j(k,l,m,n){c('Event').listen(k,'click',function(){return this.log(l,m,n);}.bind(this));}};f.exports=i;}),null);
__d('ProductTaggingTranslations',['fbt'],(function a(b,c,d,e,f,g,h){'use strict';var i={getAddProductTitle:function j(k){return k?h._("Add Product"):h._("New Product");},getAddProductSubtitle:function j(k){return k?h._("Tag and add to your shop."):h._("Tag a new product in your posts.");}};f.exports=i;}),null);
__d('CommerceSelfServeProductTaxRatesTable.react',['ix','cx','fbt','invariant','xuiglyph','AdsNumberInput.react','CommerceUSAStates','Image.react','React','SUIAtlasTheme','SUICheckboxInput.react','SUITextInput.react','XUIButton.react','XUITable.react'],(function a(b,c,d,e,f,g,h,i,j,k,l){var m,n,o=c('React').PropTypes;m=babelHelpers.inherits(p,c('React').Component);n=m&&m.prototype;function p(){var q,r;'use strict';for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=n.constructor).call.apply(q,[this].concat(t)),this.state={newRateLocationError:false,newTaxRateLocation:'',newTaxRatePercentage:0,newIsAppliedToShipping:false,showNewRateRow:false},this.$CommerceSelfServeProductTaxRatesTable1=function(v,w){return (c('React').createElement('tr',{key:'tax_rate_'+v},c('React').createElement('td',null,c('React').createElement('span',null,v)),c('React').createElement('td',null,c('React').createElement(c('AdsNumberInput.react'),{value:this.$CommerceSelfServeProductTaxRatesTable3(w.tax_rate,3),suffix:'%',className:"_2263",onChange:function(x){if(x!==null){x=this.$CommerceSelfServeProductTaxRatesTable4(x,3);this.$CommerceSelfServeProductTaxRatesTable5(v,x,w.is_applied_to_shipping);}}.bind(this)})),c('React').createElement('td',null,c('React').createElement(c('SUICheckboxInput.react'),{label:w.is_applied_to_shipping?j._("Yes"):j._("No"),onChange:function(x){this.$CommerceSelfServeProductTaxRatesTable5(v,w.tax_rate,x);}.bind(this),theme:c('SUIAtlasTheme'),value:w.is_applied_to_shipping})),c('React').createElement('td',{className:"_5rpt"},c('React').createElement(c('Image.react'),{className:"_ksy _3-9b",src:h("images\/mobile\/glyph\/cross_dark-grey_s.png"),onClick:function(){this.$CommerceSelfServeProductTaxRatesTable6(v);}.bind(this)}))));}.bind(this),this.$CommerceSelfServeProductTaxRatesTable2=function(){return (c('React').createElement('tr',{key:'new_tax_rate_row'},c('React').createElement('td',null,c('React').createElement(c('SUITextInput.react'),{className:"_2263",onChange:function(v){this.setState({newTaxRateLocation:v.toUpperCase()});}.bind(this),theme:c('SUIAtlasTheme'),value:this.state.newTaxRateLocation})),c('React').createElement('td',null,c('React').createElement(c('AdsNumberInput.react'),{value:this.$CommerceSelfServeProductTaxRatesTable3(this.state.newTaxRatePercentage,3),suffix:'%',className:"_2263",onChange:function(v){if(v!==null){v=this.$CommerceSelfServeProductTaxRatesTable4(v,3);this.setState({newTaxRatePercentage:v});}}.bind(this)})),c('React').createElement('td',null,c('React').createElement(c('SUICheckboxInput.react'),{label:this.state.newIsAppliedToShipping?j._("Yes"):j._("No"),onChange:function(v){this.setState({newIsAppliedToShipping:v});}.bind(this),theme:c('SUIAtlasTheme'),value:this.state.newIsAppliedToShipping})),c('React').createElement('td',{className:"_5rpt"},c('React').createElement(c('XUIButton.react'),{label:j._("Confirm"),use:'confirm',disabled:!this.$CommerceSelfServeProductTaxRatesTable7(this.state.newTaxRateLocation),onClick:this.$CommerceSelfServeProductTaxRatesTable8}))));}.bind(this),this.$CommerceSelfServeProductTaxRatesTable6=function(v){var w=this.$CommerceSelfServeProductTaxRatesTable9(v),x=this.props.taxRates;delete x[w][v];this.props.onChangeTaxRates(x);}.bind(this),this.$CommerceSelfServeProductTaxRatesTable5=function(v,w,x){var y=this.$CommerceSelfServeProductTaxRatesTable9(v),z=this.props.taxRates;z[y][v]={tax_rate:w,is_applied_to_shipping:x};this.props.onChangeTaxRates(z);}.bind(this),this.$CommerceSelfServeProductTaxRatesTable8=function(){var v=this.state.newTaxRateLocation;this.$CommerceSelfServeProductTaxRatesTable5(v,this.state.newTaxRatePercentage,this.state.newIsAppliedToShipping);this.setState({newTaxRatePercentage:0,newTaxRateLocation:'',newIsAppliedToShipping:false});}.bind(this),this.$CommerceSelfServeProductTaxRatesTable9=function(v){this.$CommerceSelfServeProductTaxRatesTable7(v)||k(0);if(this.$CommerceSelfServeProductTaxRatesTable10(v)){return 'zip_code';}else return 'state_abbr';}.bind(this),this.$CommerceSelfServeProductTaxRatesTable3=function(v,w){var x=Math.round(v*Math.pow(10,w+2));return x/Math.pow(10,w);},this.$CommerceSelfServeProductTaxRatesTable4=function(v,w){var x=Math.round(v*Math.pow(10,w));return x/Math.pow(10,w+2);},this.$CommerceSelfServeProductTaxRatesTable7=function(v){return this.$CommerceSelfServeProductTaxRatesTable10(v)||this.$CommerceSelfServeProductTaxRatesTable11(v);}.bind(this),this.$CommerceSelfServeProductTaxRatesTable10=function(v){var w=/^[0-9]{5}$/;return v.match(w)!==null;},this.$CommerceSelfServeProductTaxRatesTable11=function(v){var w='STATE_';return w+v in c('CommerceUSAStates');},r;}p.prototype.render=function(){'use strict';var q=[];for(var r in this.props.taxRates){var s=this.props.taxRates[r];for(var t in s)q[q.length]=this.$CommerceSelfServeProductTaxRatesTable1(t,s[t]);}q[q.length]=this.$CommerceSelfServeProductTaxRatesTable2();return c('React').createElement('div',null,c('React').createElement(c('XUITable.react'),{outerBorder:true},c('React').createElement('thead',null,c('React').createElement('tr',null,c('React').createElement('th',null,j._("Location")),c('React').createElement('th',null,j._("Tax Rate")),c('React').createElement('th',null,j._("Apply tax to shipping cost?")),c('React').createElement('th',null))),c('React').createElement('tbody',null,q)));};p.propTypes={taxRates:o.object.isRequired,onChangeTaxRates:o.func.isRequired};f.exports=p;}),null);
__d('BUIFormButton.react',['invariant','BUIForm.react','React','XUIButton.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.density,n=babelHelpers.objectWithoutProperties(l,['density']),o=void 0;switch(m){case 'breathy':case 'svelt':o='xlarge';break;case 'snug':o='large';break;case 'taut':o='medium';break;default:}return (c('React').createElement(c('XUIButton.react'),babelHelpers['extends']({},n,{size:o})));};function k(){i.apply(this,arguments);}k.propTypes=babelHelpers['extends']({},c('XUIButton.react').propTypes,{density:c('BUIForm.react').propTypes.density});f.exports=k;}),null);
__d('CountryCodeMap',[],(function a(b,c,d,e,f,g){var h={US:'United States',CA:'Canada',GB:'United Kingdom',AR:'Argentina',AU:'Australia',AT:'Austria',BE:'Belgium',BR:'Brazil',CL:'Chile',CN:'China',CO:'Colombia',HR:'Croatia',DK:'Denmark',DO:'Dominican Republic',EG:'Egypt',FI:'Finland',FR:'France',DE:'Germany',GR:'Greece',HK:'Hong Kong',IN:'India',ID:'Indonesia',IE:'Ireland',IL:'Israel',IT:'Italy',JP:'Japan',JO:'Jordan',KW:'Kuwait',LB:'Lebanon',MY:'Malaysia',MX:'Mexico',NL:'Netherlands',NZ:'New Zealand',NG:'Nigeria',NO:'Norway',PK:'Pakistan',PA:'Panama',PE:'Peru',PH:'Philippines',PL:'Poland',RU:'Russia',SA:'Saudi Arabia',RS:'Serbia',SG:'Singapore',ZA:'South Africa',KR:'South Korea',ES:'Spain',SE:'Sweden',CH:'Switzerland',TW:'Taiwan',TH:'Thailand',TR:'Turkey',AE:'United Arab Emirates',VE:'Venezuela',PT:'Portugal',LU:'Luxembourg',BG:'Bulgaria',CZ:'Czech Republic',SI:'Slovenia',IS:'Iceland',SK:'Slovakia',LT:'Lithuania',TT:'Trinidad and Tobago',BD:'Bangladesh',LK:'Sri Lanka',KE:'Kenya',HU:'Hungary',MA:'Morocco',CY:'Cyprus',JM:'Jamaica',EC:'Ecuador',RO:'Romania',BO:'Bolivia',GT:'Guatemala',CR:'Costa Rica',QA:'Qatar',SV:'El Salvador',HN:'Honduras',NI:'Nicaragua',PY:'Paraguay',UY:'Uruguay',PR:'Puerto Rico',BA:'Bosnia and Herzegovina',PS:'Palestine',TN:'Tunisia',BH:'Bahrain',VN:'Vietnam',GH:'Ghana',MU:'Mauritius',UA:'Ukraine',MT:'Malta',BS:'The Bahamas',MV:'Maldives',OM:'Oman',MK:'Macedonia',LV:'Latvia',EE:'Estonia',IQ:'Iraq',DZ:'Algeria',AL:'Albania',NP:'Nepal',MO:'Macau',ME:'Montenegro',SN:'Senegal',GE:'Georgia',BN:'Brunei',UG:'Uganda',GP:'Guadeloupe',BB:'Barbados',AZ:'Azerbaijan',TZ:'Tanzania',LY:'Libya',MQ:'Martinique',CM:'Cameroon',BW:'Botswana',ET:'Ethiopia',KZ:'Kazakhstan',NA:'Namibia',MG:'Madagascar',NC:'New Caledonia',MD:'Moldova',FJ:'Fiji',BY:'Belarus',JE:'Jersey',GU:'Guam',YE:'Yemen',ZM:'Zambia',IM:'Isle Of Man',HT:'Haiti',KH:'Cambodia',AW:'Aruba',PF:'French Polynesia',AF:'Afghanistan',BM:'Bermuda',GY:'Guyana',AM:'Armenia',MW:'Malawi',AG:'Antigua',RW:'Rwanda',GG:'Guernsey',GM:'The Gambia',FO:'Faroe Islands',LC:'St. Lucia',KY:'Cayman Islands',BJ:'Benin',AD:'Andorra',GD:'Grenada',VI:'US Virgin Islands',BZ:'Belize',VC:'Saint Vincent and the Grenadines',MN:'Mongolia',MZ:'Mozambique',ML:'Mali',AO:'Angola',GF:'French Guiana',UZ:'Uzbekistan',DJ:'Djibouti',BF:'Burkina Faso',MC:'Monaco',TG:'Togo',GL:'Greenland',GA:'Gabon',GI:'Gibraltar',CD:'Democratic Republic of the Congo',KG:'Kyrgyzstan',PG:'Papua New Guinea',BT:'Bhutan',KN:'Saint Kitts and Nevis',SZ:'Swaziland',LS:'Lesotho',LA:'Laos',LI:'Liechtenstein',MP:'Northern Mariana Islands',SR:'Suriname',SC:'Seychelles',VG:'British Virgin Islands',TC:'Turks and Caicos Islands',DM:'Dominica',MR:'Mauritania',AX:'Aland Islands',SM:'San Marino',SL:'Sierra Leone',NE:'Niger',CG:'Republic of the Congo',AI:'Anguilla',YT:'Mayotte',CV:'Cape Verde',GN:'Guinea',TM:'Turkmenistan',BI:'Burundi',TJ:'Tajikistan',VU:'Vanuatu',SB:'Solomon Islands',ER:'Eritrea',WS:'Samoa',AS:'American Samoa',FK:'Falkland Islands',GQ:'Equatorial Guinea',TO:'Tonga',KM:'Comoros',PW:'Palau',FM:'Federated States of Micronesia',CF:'Central African Republic',SO:'Somalia',MH:'Marshall Islands',VA:'Vatican City',TD:'Chad',KI:'Kiribati',ST:'Sao Tome and Principe',TV:'Tuvalu',NR:'Nauru',RE:'R\u00e9union',LR:'Liberia',ZW:'Zimbabwe',CI:'C\u00f4te d\'Ivoire',MM:'Myanmar'};f.exports=h;}),null);
__d('TokenizerExampleSearchSource',['AbstractSearchSource','CountryCodeMap','SearchableEntry','filterObject','forEachObject'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('AbstractSearchSource'));i=h&&h.prototype;j.prototype.searchImpl=function(k,l,m){'use strict';var n=[];m=m||{};if(k){var o=k.toLowerCase(),p=c('filterObject')(c('CountryCodeMap'),function(r){return r.toLowerCase().startsWith(o);}),q=0;c('forEachObject')(p,function(r,s){return n.push(new (c('SearchableEntry'))({order:q++,photo:'/images/mobile/glyph/book_blue_s.png',subtitle:r,title:r,uniqueID:s}));});}l(n,k);};function j(){'use strict';h.apply(this,arguments);}f.exports=j;}),null);
__d('FreeformSearchSource',['AbstractSearchSource','RegexMatchSearchSource','SearchableEntry'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('AbstractSearchSource'));i=h&&h.prototype;function j(k,l,m){'use strict';i.constructor.call(this);this.$FreeformSearchSource1=k;this.$FreeformSearchSource2=new (c('RegexMatchSearchSource'))('\\S+');this.$FreeformSearchSource3=l;this.$FreeformSearchSource4=m;}j.prototype.getBootstrappedEntries=function(k){'use strict';return typeof this.$FreeformSearchSource1.getBootstrappedEntries==='function'?this.$FreeformSearchSource1.getBootstrappedEntries(k):null;};j.prototype.bootstrapImpl=function(k){'use strict';this.$FreeformSearchSource1.bootstrapImpl(k);};j.prototype.validateQuery=function(k){'use strict';return k.length>=this.$FreeformSearchSource4;};j.prototype.searchImpl=function(k,l,m){'use strict';this.$FreeformSearchSource2.searchImpl(k,function(n,o){var p=[];if(n.length===1&&this.validateQuery(o)){p=[new (c('SearchableEntry'))({uniqueID:n[0].getUniqueID(),title:this.$FreeformSearchSource3(n[0].getTitle().trim())})];l(p,k);}this.$FreeformSearchSource1.searchImpl(k,function(q,r){if(q.length>0)l(q.concat(p),r);},m);}.bind(this),m);};f.exports=j;}),null);
__d('AutoPager.react',['DOM','Event','OnVisible','Parent','React','ReactDOM','SubscriptionsHandler','throttle'],(function a(b,c,d,e,f,g){var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.getViewportListener=function(){if(!this.onEnterViewportListener)this.onEnterViewportListener=new (c('OnVisible'))(c('ReactDOM').findDOMNode(this),function(){return this.props.onVisible();}.bind(this),false,this.props.onEnterBuffer,false,this.scrollableArea);return this.onEnterViewportListener;}.bind(this),this.onScroll=function(){this.getViewportListener().reset();}.bind(this),m;}k.prototype.componentDidMount=function(){'use strict';if(this.props.scrollableAreaClass){this.scrollableArea=c('Parent').byClass(c('ReactDOM').findDOMNode(this),this.props.scrollableAreaClass);var l=c('DOM').find(this.scrollableArea,'.uiScrollableAreaWrap');}else l=window;this.subscriptions=new (c('SubscriptionsHandler'))();this.subscriptions.addSubscriptions(c('Event').listen(l,'scroll',c('throttle')(this.onScroll,100)));};k.prototype.componentWillUnmount=function(){'use strict';this.getViewportListener().remove();this.subscriptions.release();};k.prototype.render=function(){'use strict';return c('React').createElement('div',{className:this.props.className});};k.propTypes={className:j.string,onEnterBuffer:j.number.isRequired,onVisible:j.func.isRequired,scrollableAreaClass:j.string};f.exports=k;}),null);
__d('JobsActionsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:JobsActionsLoggerConfig',this.$JobsActionsTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:JobsActionsLoggerConfig',this.$JobsActionsTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$JobsActionsTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$JobsActionsTypedLogger1=babelHelpers['extends']({},this.$JobsActionsTypedLogger1,j);return this;};h.prototype.setActionTarget=function(j){this.$JobsActionsTypedLogger1.action_target=j;return this;};h.prototype.setActionTime=function(j){this.$JobsActionsTypedLogger1.action_time=j;return this;};h.prototype.setActionType=function(j){this.$JobsActionsTypedLogger1.action_type=j;return this;};h.prototype.setApplicationID=function(j){this.$JobsActionsTypedLogger1.application_id=j;return this;};h.prototype.setEmployerID=function(j){this.$JobsActionsTypedLogger1.employer_id=j;return this;};h.prototype.setExperimentGroup=function(j){this.$JobsActionsTypedLogger1.experiment_group=j;return this;};h.prototype.setFilteredCategories=function(j){this.$JobsActionsTypedLogger1.filtered_categories=c('GeneratedLoggerUtils').serializeVector(j);return this;};h.prototype.setFilteredJobTypes=function(j){this.$JobsActionsTypedLogger1.filtered_job_types=c('GeneratedLoggerUtils').serializeVector(j);return this;};h.prototype.setHasCursor=function(j){this.$JobsActionsTypedLogger1.has_cursor=j;return this;};h.prototype.setInterceptPostText=function(j){this.$JobsActionsTypedLogger1.intercept_post_text=j;return this;};h.prototype.setJobCarouselIndex=function(j){this.$JobsActionsTypedLogger1.job_carousel_index=j;return this;};h.prototype.setJobID=function(j){this.$JobsActionsTypedLogger1.job_id=j;return this;};h.prototype.setJobIds=function(j){this.$JobsActionsTypedLogger1.job_ids=c('GeneratedLoggerUtils').serializeVector(j);return this;};h.prototype.setJobMetadata=function(j){this.$JobsActionsTypedLogger1.job_metadata=c('GeneratedLoggerUtils').serializeMap(j);return this;};h.prototype.setJobTitleID=function(j){this.$JobsActionsTypedLogger1.job_title_id=j;return this;};h.prototype.setMechanism=function(j){this.$JobsActionsTypedLogger1.mechanism=j;return this;};h.prototype.setName=function(j){this.$JobsActionsTypedLogger1.name=j;return this;};h.prototype.setNotifID=function(j){this.$JobsActionsTypedLogger1.notif_id=j;return this;};h.prototype.setNumCategories=function(j){this.$JobsActionsTypedLogger1.num_categories=j;return this;};h.prototype.setNumJobRecommendations=function(j){this.$JobsActionsTypedLogger1.num_job_recommendations=j;return this;};h.prototype.setNumJobs=function(j){this.$JobsActionsTypedLogger1.num_jobs=j;return this;};h.prototype.setPaginationIndex=function(j){this.$JobsActionsTypedLogger1.pagination_index=j;return this;};h.prototype.setPostMetadata=function(j){this.$JobsActionsTypedLogger1.post_metadata=c('GeneratedLoggerUtils').serializeMap(j);return this;};h.prototype.setPredictionScore=function(j){this.$JobsActionsTypedLogger1.prediction_score=j;return this;};h.prototype.setRefererMechanism=function(j){this.$JobsActionsTypedLogger1.referer_mechanism=j;return this;};h.prototype.setRefererSurface=function(j){this.$JobsActionsTypedLogger1.referer_surface=j;return this;};h.prototype.setResolvedLatitude=function(j){this.$JobsActionsTypedLogger1.resolved_latitude=j;return this;};h.prototype.setResolvedLongitude=function(j){this.$JobsActionsTypedLogger1.resolved_longitude=j;return this;};h.prototype.setSearchCity=function(j){this.$JobsActionsTypedLogger1.search_city=j;return this;};h.prototype.setSearchKeyword=function(j){this.$JobsActionsTypedLogger1.search_keyword=j;return this;};h.prototype.setSearchLatitude=function(j){this.$JobsActionsTypedLogger1.search_latitude=j;return this;};h.prototype.setSearchLongitude=function(j){this.$JobsActionsTypedLogger1.search_longitude=j;return this;};h.prototype.setSearchRadius=function(j){this.$JobsActionsTypedLogger1.search_radius=j;return this;};h.prototype.setSurface=function(j){this.$JobsActionsTypedLogger1.surface=j;return this;};h.prototype.setTargetID=function(j){this.$JobsActionsTypedLogger1.target_id=j;return this;};h.prototype.setVC=function(j){this.$JobsActionsTypedLogger1.vc=j;return this;};h.prototype.setWaterfallSessionID=function(j){this.$JobsActionsTypedLogger1.waterfall_session_id=j;return this;};h.prototype.updateExtraData=function(j){j=c('nullthrows')(c('GeneratedLoggerUtils').serializeMap(j));c('GeneratedLoggerUtils').checkExtraDataFieldNames(j,i);this.$JobsActionsTypedLogger1=babelHelpers['extends']({},this.$JobsActionsTypedLogger1,j);return this;};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l);};var i={action_target:true,action_time:true,action_type:true,application_id:true,employer_id:true,experiment_group:true,filtered_categories:true,filtered_job_types:true,has_cursor:true,intercept_post_text:true,job_carousel_index:true,job_id:true,job_ids:true,job_metadata:true,job_title_id:true,mechanism:true,name:true,notif_id:true,num_categories:true,num_job_recommendations:true,num_jobs:true,pagination_index:true,post_metadata:true,prediction_score:true,referer_mechanism:true,referer_surface:true,resolved_latitude:true,resolved_longitude:true,search_city:true,search_keyword:true,search_latitude:true,search_longitude:true,search_radius:true,surface:true,target_id:true,vc:true,waterfall_session_id:true};f.exports=h;}),null);
__d('AsyncUploadQueue',['AsyncUploadBase'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('AsyncUploadBase'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);this._pending=[];this._waiting=[];}j.prototype.enqueue=function(k,l,m){'use strict';return this._add(this._waiting.push.bind(this._waiting),k,l,m);};j.prototype.prepend=function(k,l,m){'use strict';return this._add(this._waiting.unshift.bind(this._waiting),k,l,m);};j.prototype._add=function(k,l,m,n){'use strict';var o=babelHelpers['extends']({},this._data,n),p=this._createFileUpload(l,m,o);k(p);this._processQueue();return p;};j.prototype.dequeue=function(k){'use strict';this._abort(k);};f.exports=j;}),null);
__d('Waiter',[],(function a(b,c,d,e,f,g){function h(i){'use strict';this.$Waiter1=i;this.$Waiter2=0;this.$Waiter3=false;}h.prototype.wait=function(i){'use strict';var j=this,k=false;this.$Waiter4();return function(){if(k)return;for(var l=arguments.length,m=Array(l),n=0;n<l;n++)m[n]=arguments[n];i&&i.apply(this,m);j.$Waiter5();k=true;};};h.prototype.go=function(){'use strict';this.$Waiter3=true;this.$Waiter6();return this;};h.prototype.$Waiter4=function(){'use strict';this.$Waiter2++;};h.prototype.$Waiter6=function(){'use strict';if(!this.$Waiter2&&this.$Waiter3)this.$Waiter1();};h.prototype.$Waiter5=function(){'use strict';this.$Waiter2--;this.$Waiter6();};f.exports=h;}),null);
__d('ReactComposerBoostedPostLazyButton.react',['Bootloader','React','ReactDOM'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.componentDidMount=function(){'use strict';c('Bootloader').loadModules(["BoostedPostDialogButton.react"],function(k){c('ReactDOM').render(c('React').createElement(k,this.props),c('ReactDOM').findDOMNode(this.refs.boostButtonContainer));}.bind(this),'ReactComposerBoostedPostLazyButton.react');};j.prototype.render=function(){'use strict';return (c('React').createElement('span',{ref:'boostButtonContainer'}));};function j(){'use strict';h.apply(this,arguments);}f.exports=j;}),null);
__d('ReactComposerPagesBootloader',['Bootloader'],(function a(b,c,d,e,f,g){'use strict';var h={statusAttachment:function i(j){c('Bootloader').loadModules(["ReactComposerStatusAttachmentContainer.react","PagesComposerPostButton.react"],j,'ReactComposerPagesBootloader');},mediaAttachment:function i(j){c('Bootloader').loadModules(["ReactComposerMediaAttachmentContainer.react","PagesComposerPostButton.react"],j,'ReactComposerPagesBootloader');},qandaAttachment:function i(j){c('Bootloader').loadModules(["ReactComposerQAndAAttachmentContainer.react","PagesComposerPostButton.react"],j,'ReactComposerPagesBootloader');},questionAttachment:function i(j){c('Bootloader').loadModules(["ReactComposerQuestionAttachmentContainer.react","PagesComposerPostButton.react"],j,'ReactComposerPagesBootloader');},extraAttachment:function i(j){c('Bootloader').loadModules(["PagesComposerExtraAttachmentContainer.react","PagesComposerPostButton.react"],j,'ReactComposerPagesBootloader');},ctaAttachment:function i(j){c('Bootloader').loadModules(["ReactComposerCTAAttachmentContainer.react","PagesComposerPostButton.react"],j,'ReactComposerPagesBootloader');}};f.exports=h;}),null);
__d('ReactComposerPagesStore',['Bootloader','ReactComposerActionStore','ReactComposerMediaConfig','ReactComposerPostUtils','ReactComposerTaggerType','PagesComposerActionsTypes','PagesComposerUnpublishedPostsStore','dotAccess','formatDate'],(function a(b,c,d,e,f,g){var h,i,j={instagramCrossPosting:false};h=babelHelpers.inherits(k,c('ReactComposerActionStore'));i=h&&h.prototype;function k(){'use strict';var l;i.constructor.call(this,function(){return Object.assign({},j);},function(m){switch(m.type){case c('PagesComposerActionsTypes').INSTAGRAM_CROSS_POSTING:l&&l.$ReactComposerPagesStore1(m);break;}});l=this;}k.prototype.__onPostStarted=function(l){'use strict';var m=c('PagesComposerUnpublishedPostsStore').getIsDraft(l.composerID),n=Object.assign({},l.config);n.contextInfo=Object.assign({},n.contextInfo||{});n.contextInfo.draft=m;var o=c('PagesComposerUnpublishedPostsStore').getScheduledPublishTime(l.composerID);if(o){var p=c('formatDate')(o,'m/d/Y',{skipPatternLocalization:true}),q=60*(60*o.getHours()+o.getMinutes());n.contextInfo.scheduled=true;n.contextInfo.future_date=p;n.contextInfo.future_time=q;}var r=c('PagesComposerUnpublishedPostsStore').getBackdateConfig(l.composerID);if(r){n.contextInfo.backdated_date={year:r.year,month:r.month,day:r.day};n.contextInfo.hide_from_newsfeed=r.hideFromNewsFeed;}var s=c('PagesComposerUnpublishedPostsStore').getStopFeedDistributionTime(l.composerID);if(s){n.contextInfo.stopFeedDistributionDateFormatted=c('formatDate')(s,'m/d/Y',{skipPatternLocalization:true});n.contextInfo.stopFeedDistributionTimeFormatted=60*(60*s.getHours()+s.getMinutes());}var t=c('PagesComposerUnpublishedPostsStore').getIsAdsPost(l.composerID);if(t)n.contextInfo.is_ad_post=1;var u=this.getComposerData(l.composerID).instagramCrossPosting;if(u)n.contextInfo.instagramCrossPosting=true;var v=l.config.taggersConfig[c('ReactComposerTaggerType').TARGETING],w=v?c('dotAccess')(v,'feedTargetingGK'):false;c('ReactComposerPostUtils').post({actorID:l.actorID,composerConfig:n,composerID:l.composerID,composerType:l.composerType,targetID:l.targetID,onPostSuccess:l.onPostSuccess,useHints:w});};k.prototype.__onPostSucceeded=function(l){'use strict';var m=this.validateAction(l,'composerID');c('Bootloader').loadModules(["ReactComposerPagesSurvey"],function(n){return (n.onPostSucceeded(m));},'ReactComposerPagesStore');};k.prototype.__canPost=function(l){'use strict';return !c('ReactComposerPostUtils').isPostButtonDisabled(l.composerID,c('ReactComposerMediaConfig').photo.limit);};k.prototype.$ReactComposerPagesStore1=function(l){'use strict';var m=this.getComposerData(l.composerID);m.instagramCrossPosting=l.enabled;};f.exports=new k();}),null);
__d('PagesComposerExtraAttachmentSelector.react',['fbt','invariant','ix','ReactComponentWithPureRenderMixin','React','ReactDOM','ReactFragment','BanzaiODS','ReactComposerAttachmentSelectorContainer.react','ReactComposerAttachmentType','ReactComposerLoggingName','DOM','JobSearchStrings','JobsActionsTypedLogger','LayerHideOnTransition','PagesCalloutActions','PagesCalloutDispatcher','PagesCalloutHelper','XUIAmbientNUX.react','PagesComposerExtraAttachmentIcons','getByPath'],(function a(b,c,d,e,f,g,h,i,j){var k=c('React').PropTypes,l=c('React').createClass({displayName:'PagesComposerExtraAttachmentSelector',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{label:k.string.isRequired,icon:k.oneOf(Object.keys(c('PagesComposerExtraAttachmentIcons'))).isRequired,attachmentsConfig:k.object.isRequired},getInitialState:function m(){return {offersNuxShown:false,showJobOpeningNUX:false,showProductNux:false};},componentDidMount:function m(){var n=this.props.attachmentsConfig.attachments;if(n.JOB_OPENING&&n.JOB_OPENING.jobTipID)c('PagesCalloutDispatcher').dispatch({type:c('PagesCalloutActions').REGISTER_CALLOUT,data:{tip_id:n.JOB_OPENING.jobTipID,showCallback:function(){return this._showJobNux();}.bind(this),nux_id:n.JOB_OPENING.jobNuxID}});if(n.OFFER&&n.OFFER.offersTipID)c('PagesCalloutDispatcher').dispatch({type:c('PagesCalloutActions').REGISTER_CALLOUT,data:{tip_id:n.OFFER.offersTipID,showCallback:function(){return this._showOffersNux();}.bind(this),nux_id:n.OFFER.offersNuxID}});if(n.PRODUCT&&n.PRODUCT.productNuxTipData.tip_id)c('PagesCalloutDispatcher').dispatch({type:c('PagesCalloutActions').REGISTER_CALLOUT,data:{tip_id:n.PRODUCT.productNuxTipData.tip_id,showCallback:function(){return this._showProductNux();}.bind(this),nux_id:n.PRODUCT.productNuxTipData.nux_id}});},_showJobNux:function m(){new (c('JobsActionsTypedLogger'))().setName('pages_extra_composer_job_nux_impression').setEmployerID(c('getByPath')(this.props,['config','attachments','JOB_OPENING','pageID'],null)).log();this.setState({showJobOpeningNUX:true,offersNuxShown:false,showProductNux:false});},_showOffersNux:function m(){c('BanzaiODS').bumpEntityKey('offers','offers_v2_pages_composer_nux_shown');this.setState({offersNuxShown:true,showJobOpeningNUX:false,showProductNux:false});},_showProductNux:function m(){this.setState({showProductNux:true,showJobOpeningNUX:false,offersNuxShown:false});},_onOffersNUXCloseButtonClick:function m(){var n=this.props.attachmentsConfig.attachments;if(n.OFFER&&n.OFFER.offersTipID)c('PagesCalloutHelper').logXout(n.OFFER.offersTipID);c('BanzaiODS').bumpEntityKey('offers','offers_v2_pages_composer_nux_dismissed');this.setState({offersNuxShown:false});},_onJobPostingComposerNUXCloseButtonClick:function m(){var n=this.props.attachmentsConfig.attachments;if(n.JOB_OPENING&&n.JOB_OPENING.jobTipID)c('PagesCalloutHelper').logXout(n.JOB_OPENING.jobTipID);new (c('JobsActionsTypedLogger'))().setName('pages_extra_composer_job_nux_xout').setEmployerID(c('getByPath')(this.props,['config','attachments','JOB_OPENING','pageID'],null)).log();this.setState({showJobOpeningNUX:false});},_onProductNuxClose:function m(){var n=this.props.attachmentsConfig.attachments;if(n.PRODUCT&&n.PRODUCT.productNuxTipData)c('PagesCalloutHelper').logXout(n.PRODUCT.productNuxTipData.tip_id);this.setState({showProductNux:false});},renderLayers:function m(){var n={offers_nux:c('React').createElement(c('XUIAmbientNUX.react'),{behaviors:{LayerHideOnTransition:c('LayerHideOnTransition')},contextRef:function(){return this.refs.composerSelector;}.bind(this),position:'right',shown:this.state.offersNuxShown,onCloseButtonClick:this._onOffersNUXCloseButtonClick,key:'ambientNUX'},h._("Now you can create an offer right from your Page.")),job_posting_nux:c('React').createElement(c('XUIAmbientNUX.react'),{behaviors:{LayerHideOnTransition:c('LayerHideOnTransition')},contextRef:function(){return this.refs.composerSelector;}.bind(this),key:'ambientNUX',onCloseButtonClick:this._onJobPostingComposerNUXCloseButtonClick,position:'above',shown:this.state.showJobOpeningNUX},c('JobSearchStrings').INTRODUCING_JOB_POSTS_NUX_FOR_ADMINS),product_nux:null},o=c('ReactDOM').findDOMNode(this.refs.composerSelector),p=o?c('DOM').scry(o,'i')[0]:null;if(p!==null)n.product_nux=c('React').createElement(c('XUIAmbientNUX.react'),{behaviors:{LayerHideOnTransition:c('LayerHideOnTransition')},context:p,key:'ambientNUX',onCloseButtonClick:this._onProductNuxClose,position:'above',shown:this.state.showProductNux},h._("Share a product from your Shop"));return c('ReactFragment').create(n);},render:function m(){return (c('React').createElement('span',null,c('React').createElement(c('ReactComposerAttachmentSelectorContainer.react'),{attachmentID:c('ReactComposerAttachmentType').PAGES_EXTRA,label:this.props.label,icon:this._renderIcon(),id:'extraAttachmentSelector',ref:'composerSelector',loggingName:c('ReactComposerLoggingName').PAGES_EXTRA_TAB_SELECTOR}),this.renderLayers()));},_renderIcon:function m(){switch(this.props.icon){case c('PagesComposerExtraAttachmentIcons').FINCH_COUPONS_ICON:return j("images\/icons\/pages\/coupons\/finch-offers.png");case c('PagesComposerExtraAttachmentIcons').Q_AND_A_ICON:return j("images\/litestand\/composer\/icons\/qanda.png");case c('PagesComposerExtraAttachmentIcons').CAUSE_ICON:return j("images\/icons\/pages\/donations\/cause.png");case c('PagesComposerExtraAttachmentIcons').COUPONS_ICON:return j("images\/icons\/pages\/coupons\/offers.png");case c('PagesComposerExtraAttachmentIcons').FINCH_EVENTS_ICON:return j("images\/icons\/finch-event.png");case c('PagesComposerExtraAttachmentIcons').EVENTS_ICON:return j("images\/icons\/event.gif");case c('PagesComposerExtraAttachmentIcons').PRODUCT_ICON:return j("images\/litestand\/composer\/icons\/sell.png");case c('PagesComposerExtraAttachmentIcons').OFFERS_ICON:return j("images\/facelift\/composer\/icons\/offer_event_16.png");case c('PagesComposerExtraAttachmentIcons').BOOK_TRAVEL_ICON:return j("images\/icons\/pages\/composer\/booknow_1x.png");case c('PagesComposerExtraAttachmentIcons').LEARN_MORE_ICON:return j("images\/icons\/pages\/composer\/learnmore_1x.png");case c('PagesComposerExtraAttachmentIcons').SHOP_NOW_ICON:return j("images\/icons\/pages\/composer\/shopnow_1x.png");case c('PagesComposerExtraAttachmentIcons').SIGN_UP_ICON:return j("images\/icons\/pages\/composer\/signup_1x.png");case c('PagesComposerExtraAttachmentIcons').MORE_ICON:return j("images\/facelift\/composer\/icons\/more_16.png");default:i(0);}}});f.exports=l;}),null);
__d("XPagesExtraAttachmentBootstrapController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/react_composer\/pages\/extra\/bootstrap\/",{});}),null);
__d('PagesComposerExtraLazyAttachment.react',['ReactComposerAttachmentType','ReactComposerLoadableAttachmentBodyMixin','ReactComposerBootloaderPropTypes','ActorURI','React','XPagesExtraAttachmentBootstrapController'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'PagesComposerExtraLazyAttachment',mixins:[c('ReactComposerLoadableAttachmentBodyMixin')],propTypes:{bootloader:c('ReactComposerBootloaderPropTypes').isRequired},statics:{attachmentID:c('ReactComposerAttachmentType').PAGES_EXTRA},bootload:function j(k){this.props.bootloader.extraAttachment(k);},getBootstrapURI:function j(){var k=c('XPagesExtraAttachmentBootstrapController').getURIBuilder().getURI();return c('ActorURI').create(k,this.context.actorID);}});f.exports=i;}),null);
__d("XReactComposerCTAAttachmentBootstrapController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/react_composer\/cta\/bootstrap\/",{composer_id:{type:"String",required:true},composer_type:{type:"Enum",required:true,enumType:1},target_id:{type:"Int",required:true},cta_type:{type:"String",required:true}});}),null);
__d('ReactComposerCTALazyAttachment.react',['ReactComposerAttachmentType','ReactComposerBootloaderPropTypes','ReactComposerLoadableAttachmentBodyMixin','ActorURI','Bootloader','React','XReactComposerCTAAttachmentBootstrapController'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerCTALazyAttachment',mixins:[c('ReactComposerLoadableAttachmentBodyMixin')],statics:{attachmentID:c('ReactComposerAttachmentType').CTA},propTypes:{additionalFooterActions:h.arrayOf(h.element),bootloader:c('ReactComposerBootloaderPropTypes')},bootload:function j(k){if(this.props.bootloader&&this.props.bootloader.ctaAttachment){this.props.bootloader.ctaAttachment(k);}else c('Bootloader').loadModules(["ReactComposerCTAAttachmentContainer.react"],k,'ReactComposerCTALazyAttachment.react');},getBootstrapURI:function j(){var k=this.props.config.attachmentsConfig,l=k[c('ReactComposerAttachmentType').PAGES_EXTRA],m=l.attachments[c('ReactComposerAttachmentType').CTA],n=c('XReactComposerCTAAttachmentBootstrapController').getURIBuilder().setString('composer_id',this.context.composerID).setEnum('composer_type',this.context.composerType).setInt('target_id',this.context.targetID).setString('cta_type',m.ctaType).getURI();return c('ActorURI').create(n,this.context.actorID);}});f.exports=i;}),null);
__d('ReactComposerCallLazyAttachment.react',['ReactComposerAttachmentType','ReactComposerBootloaderPropTypes','ReactComposerLoadableAttachmentBodyMixin','AdsCallToActionTypes','ActorURI','Bootloader','React','XReactComposerCTAAttachmentBootstrapController'],(function a(b,c,d,e,f,g){var h=c('React').createClass({displayName:'ReactComposerCallLazyAttachment',mixins:[c('ReactComposerLoadableAttachmentBodyMixin')],statics:{attachmentID:c('ReactComposerAttachmentType').CALL},propTypes:{bootloader:c('ReactComposerBootloaderPropTypes')},bootload:function i(j){if(this.props.bootloader&&this.props.bootloader.ctaAttachment){this.props.bootloader.ctaAttachment(j);}else c('Bootloader').loadModules(["ReactComposerCTAAttachmentContainer.react"],j,'ReactComposerCallLazyAttachment.react');},getBootstrapURI:function i(){var j=c('XReactComposerCTAAttachmentBootstrapController').getURIBuilder().setString('composer_id',this.context.composerID).setEnum('composer_type',this.context.composerType).setInt('target_id',this.context.targetID).setString('cta_type',c('AdsCallToActionTypes').TYPES.CALL_NOW.name).getURI();return c('ActorURI').create(j,this.context.actorID);}});f.exports=h;}),null);
__d('ReactComposerGetDirectionsLazyAttachment.react',['ReactComposerAttachmentType','ReactComposerBootloaderPropTypes','ReactComposerLoadableAttachmentBodyMixin','AdsCallToActionTypes','ActorURI','Bootloader','React','XReactComposerCTAAttachmentBootstrapController'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerGetDirectionsLazyAttachment',mixins:[c('ReactComposerLoadableAttachmentBodyMixin')],statics:{attachmentID:c('ReactComposerAttachmentType').GET_DIRECTIONS},propTypes:{additionalFooterActions:h.arrayOf(h.element),bootloader:c('ReactComposerBootloaderPropTypes')},bootload:function j(k){if(this.props.bootloader&&this.props.bootloader.ctaAttachment){this.props.bootloader.ctaAttachment(k);}else c('Bootloader').loadModules(["ReactComposerCTAAttachmentContainer.react"],k,'ReactComposerGetDirectionsLazyAttachment.react');},getBootstrapURI:function j(){var k=c('XReactComposerCTAAttachmentBootstrapController').getURIBuilder().setString('composer_id',this.context.composerID).setEnum('composer_type',this.context.composerType).setInt('target_id',this.context.targetID).setString('cta_type',c('AdsCallToActionTypes').TYPES.GET_DIRECTIONS.name).getURI();return c('ActorURI').create(k,this.context.actorID);}});f.exports=i;}),null);
__d('ReactComposerMessageLazyAttachment.react',['ReactComposerAttachmentType','ReactComposerBootloaderPropTypes','ReactComposerLoadableAttachmentBodyMixin','AdsCallToActionTypes','ActorURI','Bootloader','React','XReactComposerCTAAttachmentBootstrapController'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerMessageLazyAttachment',mixins:[c('ReactComposerLoadableAttachmentBodyMixin')],statics:{attachmentID:c('ReactComposerAttachmentType').MESSAGE},propTypes:{additionalFooterActions:h.arrayOf(h.element),bootloader:c('ReactComposerBootloaderPropTypes')},bootload:function j(k){if(this.props.bootloader&&this.props.bootloader.ctaAttachment){this.props.bootloader.ctaAttachment(k);}else c('Bootloader').loadModules(["ReactComposerCTAAttachmentContainer.react"],k,'ReactComposerMessageLazyAttachment.react');},getBootstrapURI:function j(){var k=c('XReactComposerCTAAttachmentBootstrapController').getURIBuilder().setString('composer_id',this.context.composerID).setEnum('composer_type',this.context.composerType).setInt('target_id',this.context.targetID).setString('cta_type',c('AdsCallToActionTypes').TYPES.MESSAGE_PAGE.name).getURI();return c('ActorURI').create(k,this.context.actorID);}});f.exports=i;}),null);
__d('ReactTargetingTaggerStore.react',['ReactComposerStoreBase','ReactComposerTaggerActionType','ReactComposerTaggerType'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){var l={};l[c('ReactComposerTaggerType').TARGETING]={};return {taggersData:l,taggersSource:{}};},function(l){if(l.type===c('ReactComposerTaggerActionType').SET_TAGGER_DATA)k&&k.$ReactTargetingTaggerStore1(l);});k=this;}j.prototype.getTaggerData=function(k,l){'use strict';return this.getComposerData(k).taggersData[l];};j.prototype.$ReactTargetingTaggerStore1=function(k){'use strict';var l=this.getComposerData(k.composerID),m=Array.isArray(k.taggerData)?k.taggerData.slice():Object.assign({},k.taggerData);l.taggersData[k.taggerID]=m;this.emitChange(k.composerID);};f.exports=new j();}),null);
__d("XPagesGetTargetingMetadataController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/targeting\/metadata\/",{page_id:{type:"Int",required:true},target_spec:{type:"String",required:true}});}),null);
__d('ReactComposerTargetingUtils',['fbt','AsyncRequest','ReactComposerTaggerActions','ReactComposerTaggerStore','ReactComposerTaggerType','ReactTargetingTaggerStore.react','XPagesGetTargetingMetadataController','XUIText.react','React','curry','intlList'],(function a(b,c,d,e,f,g,h){var i={fetchMetadata:function j(k,l,m){var n=c('XPagesGetTargetingMetadataController').getURIBuilder().setInt('page_id',l).setString('target_spec',JSON.stringify(k)).getURI();new (c('AsyncRequest'))().setURI(n).setHandler(c('curry')(this._onFetchMetadataHandler,m)).send();},_onFetchMetadataHandler:function j(k,l){var m=l.payload,n=m.sentences.map(function(o){return (c('React').createElement('span',null,h._("{content_label} {children}",[h.param('content_label',c('React').createElement(c('XUIText.react'),{weight:'bold'},o.content)),h.param('children',c('intlList')(o.children,c('intlList').CONJUNCTIONS.OR))])));});k(JSON.parse(m.target_spec),c('React').createElement('span',null,c('intlList')(n,c('intlList').CONJUNCTIONS.NONE)),m.reach_estimate);},getDataFromComposerTaggerStore:function j(k){return c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').TARGETING);},getDataFromTargetingTaggerStore:function j(k){return c('ReactTargetingTaggerStore.react').getTaggerData(k,c('ReactComposerTaggerType').TARGETING);},setData:function j(k,l){var m={},n=['targeting','gating','hints','targetingSentences','gatingSentences','reachEstimate'];n.map(function(o){if(l[o])m[o]=l[o];});c('ReactComposerTaggerActions').setTaggerDataWithoutLogging(k,c('ReactComposerTaggerType').TARGETING,m);}};f.exports=i;}),null);
__d('PagesComposerAudiences.react',['cx','fbt','BanzaiODS','BootloadedComponent.react','ReactComposerContextMixin','JSResource','LayerFadeOnHide','Link.react','React','ReactComposerTaggerStore','ReactComposerTargetingUtils','ReactTargetingTaggerStore.react','TargetingSpecStore','XUIDialog.react','XUIDialogBody.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogSaveButton.react','XUISpinner.react','XUIText.react','areEqual','isEmpty'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=587,l=c('React').createClass({displayName:'PagesComposerAudiences',mixins:[c('ReactComposerContextMixin')],propTypes:{shown:j.bool.isRequired,onToggle:j.func.isRequired,onSave:j.func.isRequired,rootElement:j.object,callbackDataStatus:j.func,callbackSelectionStatus:j.func,saveData:j.func,initialActiveKey:j.string,canSeeCompleteList:j.bool,useTargetingAsFilter:j.bool,canSeeDemographicOptions:j.bool,feedTargetingShowReachGK:j.bool,hideFeedTargeting:j.bool,useFromLegacyComposer:j.bool,shouldShowRestrictionTabNux:j.bool,shouldHideLeftFooter:j.bool,allowExclusionsWithoutInclusions:j.bool},getStores:function m(){if(this.props.useFromLegacyComposer)return [c('ReactTargetingTaggerStore.react')];return [c('ReactComposerTaggerStore')];},getInitialState:function m(){return {fetching:false,targeting:this.getInitialSavedData('targeting'),gating:this.getInitialSavedData('gating'),hints:this.getInitialSavedData('hints'),targetingSentences:this.getInitialSavedData('targetingSentences'),gatingSentences:this.getInitialSavedData('gatingSentences'),reachEstimate:this.getInitialReachEstimate()};},componentWillMount:function m(){if(this.props.callbackSelectionStatus)this.props.callbackSelectionStatus(true);},componentWillUnmount:function m(){if(this.props.callbackSelectionStatus)this.props.callbackSelectionStatus(false);},componentDidMount:function m(){c('BanzaiODS').bumpEntityKey('ui_audience_targeting','dialog_open');},_onSave:function m(){var n={};Object.assign(n,this.state);if(!c('isEmpty')(n.targeting))n.targeting=this.convertConnectionsToInterestsFromApiToTargetingSpec(c('TargetingSpecStore').getTargetingApiSpec());if(!c('isEmpty')(n.gating))n.gating=c('TargetingSpecStore').getTargetingApiSpec();if(this.props.useFromLegacyComposer){this._onSaveLegacy(n);}else this._onSaveStore(n);this.props.onSave();},_onSaveStore:function m(n){c('ReactComposerTargetingUtils').setData(this.context.composerID,n);},_isDefaultSpec:function m(n){return c('areEqual')(n,{age_max:65,age_min:13});},_onSaveLegacy:function m(n){if(this.props.callbackDataStatus)this.props.callbackDataStatus(n.gating&&!c('isEmpty')(n.gating)&&!this._isDefaultSpec(n.gating)||n.targeting&&!c('isEmpty')(n.targeting)&&!this._isDefaultSpec(n.targeting)||n.hints&&!c('isEmpty')(n.hints)&&!this._isDefaultSpec(n.hints));c('ReactComposerTargetingUtils').setData(this.context.targetID,n);},_onTargetingChange:function m(n){if(!this.props.useTargetingAsFilter){delete n.age_min;delete n.age_max;}if(c('areEqual')(this.state.targeting,n)||c('areEqual')(this.state.hints,n))return;this.setState({fetching:true});var o=this.props.useTargetingAsFilter?n:Object.assign({},n,this.state.gating);c('ReactComposerTargetingUtils').fetchMetadata(o,this.context.targetID,this._onTargetingChangeHandler);},_onTargetingChangeHandler:function m(n,o,p){if(this.props.useTargetingAsFilter){this.setState({fetching:false,targeting:n,targetingSentences:o,reachEstimate:p});}else this.setState({fetching:false,hints:n,targetingSentences:o});},_onGatingChange:function m(n){if(c('areEqual')(this.state.gating,n))return;this.setState({fetching:true});var o=this.props.useTargetingAsFilter?n:Object.assign({},n,this.state.hints);c('ReactComposerTargetingUtils').fetchMetadata(o,this.context.targetID,this._onGatingChangeHandler);},_onGatingChangeHandler:function m(n,o){if(this.props.useTargetingAsFilter){this.setState({fetching:false,gating:n,gatingSentences:o});}else this.setState({fetching:false,gating:n,targetingSentences:o});},convertConnectionsToInterestsFromApiToTargetingSpec:function m(n){if(n&&n.connections&&!n.fan_of){n.fan_of=n.connections;delete n.connections;}return n;},convertInterestsToConnectionsFromTargetingSpecToApi:function m(n){if(n&&n.fan_of&&!n.connections){n.connections=n.fan_of;delete n.fan_of;}return n;},getInitialSavedData:function m(n){var o={};if(this.props.useFromLegacyComposer){o=this.getSavedSpec(n,this.context.targetID);}else o=this.getSavedSpec(n,this.context.composerID);return this.convertInterestsToConnectionsFromTargetingSpecToApi(o);},getSavedSpec:function m(n,o){if(this.props.useFromLegacyComposer){var p=c('ReactComposerTargetingUtils').getDataFromTargetingTaggerStore(o);}else p=c('ReactComposerTargetingUtils').getDataFromComposerTaggerStore(o);return p==null?null:p[n];},getInitialReachEstimate:function m(){if(!this.props.useTargetingAsFilter){return null;}else{var n=c('ReactComposerTargetingUtils').getDataFromComposerTaggerStore(this.context.composerID);return n==null?null:n.reachEstimate;}},renderReachEstimate:function m(){if(!this.state.reachEstimate)return null;var n=this.state.reachEstimate===20?i._("0-20"):this.state.reachEstimate,o=i._("Reach estimate for news feed targeting: {estimate_number}",[i.param('estimate_number',n)]);return (c('React').createElement(c('XUIText.react'),null,o));},renderHelpLink:function m(){var n=i._("Have a Question?"),o='https://www.facebook.com/facebookmedia/get-started/'+'audience-optimization/',p=c('React').createElement(c('Link.react'),{href:o,target:'_blank'},i._("Read our Guidelines."));return (c('React').createElement('div',{className:"_3xrd"},c('React').createElement(c('XUIText.react'),null,n),' ',p));},renderFooterLeftContent:function m(){if(this.props.shouldHideLeftFooter)return null;if(!this.props.useTargetingAsFilter)return this.renderHelpLink();return this.renderReachEstimate();},render:function m(){var n=c('React').createElement('div',{className:"_1220"},c('React').createElement(c('XUISpinner.react'),null)),o=this.props.useTargetingAsFilter?this.state.targeting:this.state.hints;return (c('React').createElement(c('XUIDialog.react'),{shown:this.props.shown,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},layerHideOnBlur:false,onToggle:this.props.onToggle,width:k},c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('PagesComposerAudiencesBody.react').__setRef('PagesComposerAudiences.react'),bootloadPlaceholder:n,initialTargetingSpec:o,initialGatingSpec:this.state.gating,onTargetingChange:this._onTargetingChange,onGatingChange:this._onGatingChange,initialActiveKey:this.props.initialActiveKey,canSeeCompleteList:this.props.canSeeCompleteList,useTargetingAsFilter:this.props.useTargetingAsFilter,canSeeDemographicOptions:this.props.canSeeDemographicOptions,feedTargetingShowReachGK:this.props.feedTargetingShowReachGK,hideFeedTargeting:this.props.hideFeedTargeting,shouldShowRestrictionTabNux:this.props.shouldShowRestrictionTabNux,allowExclusionsWithoutInclusions:this.props.allowExclusionsWithoutInclusions})),c('React').createElement(c('XUIDialogFooter.react'),{leftContent:this.renderFooterLeftContent()},c('React').createElement(c('XUIDialogCancelButton.react'),{use:'default'}),c('React').createElement(c('XUIDialogSaveButton.react'),{className:"_2uyv",use:'confirm',action:'confirm',disabled:this.state.fetching,onClick:this._onSave}))));}});f.exports=l;}),null);
__d('ReactComposerPagesPrivacySelector.react',['cx','fbt','ix','ReactComposerContextMixin','Image.react','PagesComposerAudiences.react','PopoverMenu.react','ReactComponentWithPureRenderMixin','React','ReactComposerTargetingUtils','ReactLayeredComponentMixin_DEPRECATED','ReactSelectorUtils','Tooltip.react','XUIGrayText.react','ReactXUIMenu','XUIMenuSeparator.react','XUIMenuStaticItem.react','XUISelector.react','XUISelectorButton.react','PagesComposerAudiencesConstants'],(function a(b,c,d,e,f,g,h,i,j){var k=c('ReactXUIMenu').SelectableMenu,l=c('XUISelector.react').Option,m=c('PagesComposerAudiencesConstants').TABS,n=j("images\/icons\/audience\/everyone.png"),o=j("images\/icons\/audience\/custom.png"),p='everyone',q='custom',r=c('React').PropTypes,s=c('React').createClass({displayName:'ReactComposerPagesPrivacySelector',mixins:[c('ReactComposerContextMixin'),c('ReactComponentWithPureRenderMixin'),c('ReactLayeredComponentMixin_DEPRECATED')],propTypes:{gatingSentences:r.object,useReactPrivacyDialogForLegacy:r.bool,isVideoDialog:r.bool,useTargetingAsFilter:r.bool},getInitialState:function t(){return {dialogShown:false};},_getSelectorButton:function t(){var u=this.props.gatingSentences?o:n;return (c('React').createElement(c('XUISelectorButton.react'),{image:c('React').createElement(c('Image.react'),{src:u}),suppressed:true}));},_getMenuItems:function t(){return [c('React').createElement(l,{icon:c('React').createElement(c('Image.react'),{src:n}),value:p,onclick:this._onClearPrivacy},i._("Public")),c('React').createElement(c('XUIMenuSeparator.react'),null),c('React').createElement(c('XUIMenuStaticItem.react'),null,c('React').createElement(c('XUIGrayText.react'),{shade:'light'},i._("Limit Audience By:"))),c('React').createElement(l,{icon:c('React').createElement(c('Image.react'),{src:o}),value:q,onclick:function(){return this._onToggle(true);}.bind(this)},i._("Demographics"))];},_onToggle:function t(u){setTimeout(function(){return this.setState({dialogShown:u});}.bind(this),0);},_onClearPrivacy:function t(){var u=c('ReactComposerTargetingUtils').getDataFromComposerTaggerStore(this.context.composerID),v=Object.assign({},u);v.gating=null;v.gatingSentences=null;c('ReactComposerTargetingUtils').setData(this.context.composerID,v);},renderLayers:function t(){if(!this.state.dialogShown)return {};return (c('React').createElement(c('PagesComposerAudiences.react'),{shown:this.state.dialogShown,onToggle:this._onToggle,onSave:function(){return this._onToggle(false);}.bind(this),initialActiveKey:m.GATING,useFromLegacyComposer:this.props.isVideoDialog,useTargetingAsFilter:this.props.useTargetingAsFilter}));},render:function t(){var u=this.props.gatingSentences?q:p,v=c('ReactSelectorUtils').processMenuItems(this._getMenuItems(),u),w=c('React').createElement(k,{value:u},v.items);return (c('React').createElement(c('Tooltip.react'),{tooltip:this.props.gatingSentences},c('React').createElement('div',{className:"_5dd8"},c('React').createElement(c('PopoverMenu.react'),{menu:w},this._getSelectorButton()))));}});f.exports=s;}),null);
__d('ReactComposerPagesPrivacyContainer.react',['fbt','ix','cx','ReactComposerPagesPrivacySelector.react','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComponentWithPureRenderMixin','React','Image.react','Tooltip.react'],(function a(b,c,d,e,f,g,h,i,j){var k=i("images\/icons\/audience\/everyone_gray.png"),l=c('React').PropTypes,m=c('React').createClass({displayName:'ReactComposerPagesPrivacyContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerTaggerStore'))],propTypes:{lockToPrivacy:l.string,useTargetingAsFilter:l.bool},statics:{calculateState:function n(o,p){var q=c('ReactComposerTaggerStore').getTaggerData(o,c('ReactComposerTaggerType').TARGETING)||{};return {gatingSentences:q.gatingSentences};}},render:function n(){if(this.props.lockToPrivacy){return this._renderLockedIcon();}else return this._renderSelector();},_renderSelector:function n(){return (c('React').createElement(c('ReactComposerPagesPrivacySelector.react'),{gatingSentences:this.state.gatingSentences,useTargetingAsFilter:this.props.useTargetingAsFilter}));},_renderLockedIcon:function n(){switch(this.props.lockToPrivacy){case 'everyone':return (c('React').createElement('div',{className:"_3jv0"},c('React').createElement(c('Tooltip.react'),{tooltip:h._("Everyone can see posts on this public page")},c('React').createElement('div',{className:"_3jv1"},c('React').createElement(c('Image.react'),{src:k})))));default:return null;}}});f.exports=m;}),null);
__d('ReactComposerProductTaggerButton.react',['fbt','cx','AsyncRequest','CommerceProductTaggerType','CommerceSelfServeNUXType','ReactComposerLoggingName','ReactComposerTaggerActions','ReactComposerTaggerButtonMixin','ReactComposerTaggerStore','ReactComposerTaggerType','React','XCommerceSelfServeMerchantNUXSeenController','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerProductTaggerButton',mixins:[c('ReactComposerTaggerButtonMixin')],statics:{loggingName:c('ReactComposerLoggingName').PRODUCT_TAGGER,taggerID:c('ReactComposerTaggerType').PRODUCT},propTypes:{autoSelect:j.bool,productTaggerType:j.string.isRequired},getTitle:function l(){return h._("Tag a product");},getNUX:function l(){if(!this.state.showNUX||!this.state.contextRef)return null;var m=this.props.productTaggerType===c('CommerceProductTaggerType').SHOP_PAGE?h._("Tag products from your shop in your post"):h._("Tag products in your post");return (c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'center',contextRef:function(){return this.state.contextRef;}.bind(this),onCloseButtonClick:this._hideNUX,position:'below',shown:true,width:'auto'},m));},getTooltip:function l(){return h._("Tag a product");},getClassName:function l(){return "_22ma";},getRef:function l(){return 'fbReactComposerProductTaggerButton';},componentDidMount:function l(){this.setState({contextRef:this.refs.fbReactComposerProductTaggerButton});if(this.props.autoSelect){var m=c('ReactComposerTaggerStore').getSelectedTagger(this.context.composerID);if(m!==c('ReactComposerTaggerType').PRODUCT)this._onSelect();}},_hideNUX:function l(){c('ReactComposerTaggerActions').handleSetTaggerShowNUX(this.context.composerID,c('ReactComposerTaggerType').PRODUCT,false);var m=c('XCommerceSelfServeMerchantNUXSeenController').getURIBuilder().setInt('page_id',this.context.actorID).setEnum('nux_type',c('CommerceSelfServeNUXType').COMPOSER_PRODUCT_TAGGER_BUTTON).getURI();new (c('AsyncRequest'))(m).send();}});f.exports=k;}),null);
__d('CommerceCurrencySelector.react',['CurrencyConfig','CommerceB2CUnsupportedCurrencies','React','XUISingleSelector.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('XUISingleSelector.react').Option,k=c('React').PropTypes,l=200,m='FBZ';h=babelHelpers.inherits(n,c('React').Component);i=h&&h.prototype;n.prototype.render=function(){var o=this.$CommerceCurrencySelector1(),p=this.props.selectedCurrency;o=o.filter(function(r){return (!this.$CommerceCurrencySelector2(r.iso));}.bind(this));if(this.$CommerceCurrencySelector2(p))p='USD';var q=o.map(function(r){return (c('React').createElement(j,{key:r.iso,value:r.iso},r.name));});return (c('React').createElement(c('XUISingleSelector.react'),{maxheight:l,value:p,onChange:this.props.onChange},q));};n.prototype.$CommerceCurrencySelector2=function(o){return Object.values(c('CommerceB2CUnsupportedCurrencies')).indexOf(o)!==-1;};n.prototype.$CommerceCurrencySelector1=function(){var o=c('CurrencyConfig').allCurrenciesByCode,p=Object.keys(o);return p.map(function(q){return o[q];}).filter(function(q){return q.iso!==m&&q.name!==null;}).sort(function(q,r){return q.name.localeCompare(r.name);});};function n(){h.apply(this,arguments);}n.propTypes={onChange:k.func.isRequired,selectedCurrency:k.string.isRequired,selectedPaymentProvider:k.number};f.exports=n;}),null);
__d('PageCommerceProductVariantPage.react',['ix','cx','fbt','glyph','invariant','AccessibleTableParts.react','AdsCurrencyInput.react','AdsHelpLink.react','CommerceProductVariantType','CommerceUI','DummySearchSource','FreeformSearchSource','Image.react','Layout.react','Link.react','NumberInput.atlas','React','SearchableEntry','XUISingleSelector.react','XUITable.react','XUITokenizer.react','isEmpty'],(function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';var m=c('React').PropTypes,n=c('AccessibleTableParts.react').BodyRow,o=c('AccessibleTableParts.react').HeadRow,p=c('Layout.react').Column,q=c('Layout.react').FillColumn,r=c('XUISingleSelector.react').Option,s=c('React').createClass({displayName:'PageCommerceProductVariantPage',propTypes:{currencyCode:m.string.isRequired,defaultVariantPrice:m.number,getPriceError:m.func.isRequired,isOnSale:m.bool.isRequired,setVariantInfo:m.func.isRequired,variants:m.arrayOf(m.shape({label:m.string,options:m.arrayOf(m.string)})).isRequired,variantItems:m.objectOf(m.shape({properties:m.object,price:m.number.isRequired,salePrice:m.number.isRequired,inventory:m.number,productID:m.number})).isRequired},_cachedItems:{},_deepClone:function t(u){return JSON.parse(JSON.stringify(u));},getInitialState:function t(){this._cachedItems=this._deepClone(this.props.variantItems);return {searchSource:new (c('FreeformSearchSource'))(new (c('DummySearchSource'))(),function(u){return u;},0)};},render:function t(){var u=null;if(this.props.variants.length<c('CommerceUI').MAX_VARIANTS)u=c('React').createElement(c('Link.react'),{onClick:this._addNewVariantInput},j._("Add Variant"));return (c('React').createElement('div',{className:"_3-8j"},c('React').createElement('div',{ref:'variant_input_list'},this.props.variants.map(function(v,w){return (this._getVariantInput(v,w,this._getVariantLabels()));}.bind(this))),u,this._getVariantsTable()));},_getVariantInput:function t(u,v,w){return (c('React').createElement('div',{key:'variant'+v,className:"_3-95"},c('React').createElement(c('Layout.react'),null,c('React').createElement(p,null,this._getVariantOptions(u,v,w)),c('React').createElement(q,{className:"_2pis"},c('React').createElement(c('XUITokenizer.react'),{entries:this._getTokenizerEntries(u),searchSource:this.state.searchSource,onRemoveEntryAttempt:this._onRemoveVariantOptionAttempt.bind(this,u,v),onAddEntryAttempt:this._onAddVariantOptionAttempt.bind(this,u,v),tokenizeQueryString:this._tokenizeQueryString.bind(this,u,v),selectOnBlur:true})),c('React').createElement(p,null,c('React').createElement(c('Image.react'),{className:"_11dw",onClick:this._removeVariant.bind(this,u,v),src:h("images\/ui\/xhp\/image\/glyph\/remove.png")})))));},_getVariantsTable:function t(){if(c('isEmpty')(this.props.variants))return null;var u=[];for(var v in this.props.variantItems){var w=this.props.variantItems[v],x=w.properties,y=[];this.props.variants.forEach(function(ba,ca){var da=x&&x[ba.label]?x[ba.label]:'';y.push(c('React').createElement('td',{className:"_2ncv",key:ca},da));});y.push(c('React').createElement('td',{width:'50',key:v+'inventory'},c('React').createElement(c('NumberInput.atlas'),{isZeroValidValue:true,name:'inventory',nonnegative:true,value:w.inventory,formatNumber:false,onValueUpdated:this._updateVariantItem.bind(this,v,'inventory')})));var z=w.price*100;y.push(c('React').createElement('td',{width:'50',key:v+'price'},c('React').createElement(c('AdsCurrencyInput.react'),{currency:this.props.currencyCode,onDataUpdate:this._updateVariantPrice.bind(this,v),value:z,xuiError:this.props.getPriceError(w.price)})));if(this.props.isOnSale)y.push(c('React').createElement('td',{width:'50',key:v+'salePrice'},c('React').createElement(c('AdsCurrencyInput.react'),{currency:this.props.currencyCode,onDataUpdate:this._updateVariantSalePrice.bind(this,v),value:w.salePrice*100,xuiError:this.props.getPriceError(w.salePrice)})));u.push(c('React').createElement(n,{key:v},y));}var aa=[];this.props.variants.forEach(function(ba,ca){aa.push(c('React').createElement('th',{key:ba.label+ca},this._getVariantLabelDescription(String(ba.label))));}.bind(this));aa.push(c('React').createElement('th',{key:'inventory'},j._("Inventory")));aa.push(c('React').createElement('th',{key:'price'},j._("Price")));if(this.props.isOnSale)aa.push(c('React').createElement('th',{key:'salePrice'},j._("Sale Price"),c('React').createElement(c('AdsHelpLink.react'),{width:350,position:'below'},j._("You can disable individual \"Sale Prices\" by setting them equal to regular \"Prices\"."))));return (c('React').createElement(c('XUITable.react'),{outerBorder:true,className:"_2ncw"},c('React').createElement('thead',null,c('React').createElement(o,null,aa)),c('React').createElement('tbody',null,u)));},_updateVariantPrice:function t(u,v){this._updateVariantItem(u,'price',v/100);},_updateVariantSalePrice:function t(u,v){this._updateVariantItem(u,'salePrice',v/100);},_updateVariantItem:function t(u,v,w){var x=this.props.variantItems;x[u][v]=w;this._cachedItems[u][v]=w;this.props.setVariantInfo({variantItems:x});},_getVariantItems:function t(u){var v={};if(u.length===0)return v;this._getVariantCombos(u.slice(0)).forEach(function(w){var x=[];for(var y in w)x.push(y+w[y]);x.sort();var z=JSON.stringify(x);if(z in this._cachedItems){v[z]=this._deepClone(this._cachedItems[z]);}else{v[z]={properties:w,price:this.props.defaultVariantPrice,salePrice:this.props.defaultVariantPrice,inventory:0};this._cachedItems[z]=this._deepClone(v[z]);}}.bind(this));return v;},_getVariantCombos:function t(u){if(u.length===0)return [{}];var v=[],w=u.shift(),x=this._getVariantCombos(u.slice(0));if(w.options.length==0)return x;w.options.forEach(function(y){x.forEach(function(z){var aa=Object.assign({},z);aa[w.label]=y;v.push(aa);});});return v;},_getTokenizerEntries:function t(u){return u.options.map(function(v){return new (c('SearchableEntry'))({uniqueID:v,title:v});});},_onRemoveVariantOptionAttempt:function t(u,v,w){var x=w.getTitle().trim(),y=u.options.indexOf(x);if(y>=0)u.options.splice(y,1);this._updateVariant(u,v);},_onAddVariantOptionAttempt:function t(u,v,w){var x=w.getTitle().trim();if(u.options.indexOf(x)>=0||x.length===0)return;u.options.push(x);this._updateVariant(u,v);},_updateVariant:function t(u,v){var w=this.props.variants;w[v]=u;var x=this._getVariantItems(w);this.props.setVariantInfo({variants:w,variantItems:x});},_tokenizeQueryString:function t(u,v,w){if(!w||!w.includes(','))return null;var x=w.split(',').filter(function(z){return z!=='';}),y=x.pop();x.map(function(z){this._onAddVariantOptionAttempt(u,v,new (c('SearchableEntry'))({uniqueID:z,title:z}));}.bind(this));return new (c('SearchableEntry'))({uniqueID:y,title:y});},_addNewVariantInput:function t(){var u=this.props.variants;u.push(this._getDefaultVariant());this.props.setVariantInfo({variants:u,variantItems:this._getVariantItems(u)});},_removeVariant:function t(u,v){var w=this.props.variants;w.splice(v,1);this.props.setVariantInfo({variants:w,variantItems:this._getVariantItems(w)});},_getVariantLabels:function t(){return this.props.variants.map(function(u){return String(u.label);});},_getDefaultVariant:function t(){var u=this._getVariantLabels(),v=void 0;for(var w in c('CommerceProductVariantType')){var x=c('CommerceProductVariantType')[w];if(u.indexOf(x)===-1){v=x;break;}}return {label:v,options:[]};},_getVariantOptions:function t(u,v,w){var x=[];for(var y in c('CommerceProductVariantType')){var z=c('CommerceProductVariantType')[y];if(u.label!==z&&w.indexOf(z)!==-1)continue;x.push(c('React').createElement(r,{key:y+v,value:z},this._getVariantLabelDescription(z)));}return (c('React').createElement(c('XUISingleSelector.react'),{className:"_11dy",onChange:this._onSelectorChange.bind(this,u,v),value:u.label,size:'large'},x));},_getVariantLabelDescription:function t(u){var v=u.toUpperCase();c('CommerceProductVariantType').hasOwnProperty(v)||l(0);switch(c('CommerceProductVariantType')[v]){case c('CommerceProductVariantType').SIZE:return j._("Size");case c('CommerceProductVariantType').COLOR:return j._("Color");case c('CommerceProductVariantType').MATERIAL:return j._("Material");case c('CommerceProductVariantType').LENGTH:return j._("Length");case c('CommerceProductVariantType').FIT:return j._("Fit");case c('CommerceProductVariantType').WIDTH:return j._("Width");case c('CommerceProductVariantType').SCENT:return j._("Scent");case c('CommerceProductVariantType').FLAVOR:return j._("Flavor");case c('CommerceProductVariantType').MODEL:return j._("Model");case c('CommerceProductVariantType').FORMAT:return j._("Format");case c('CommerceProductVariantType').PLATFORM:return j._("Platform");case c('CommerceProductVariantType').EDITION:return j._("Edition");default:return u;}},_onSelectorChange:function t(u,v,w){var x=this.props.variants;x[v].label=w.value;this.props.setVariantInfo({variants:x,variantItems:this._getVariantItems(x)});u.label=w.value;this._updateVariant(u,v);}});f.exports=s;}),null);
__d('PageContentTabDispatcher',['Dispatcher_DEPRECATED','PageContentTabConstants'],(function a(b,c,d,e,f,g){var h,i,j=c('PageContentTabConstants').ACTION_TYPES,k=c('PageContentTabConstants').PAYLOAD_SOURCES,l=c('PageContentTabConstants').TABS;h=babelHelpers.inherits(m,c('Dispatcher_DEPRECATED'));i=h&&h.prototype;m.prototype.handleServerResponse=function(n){'use strict';this.dispatch({action:n,payloadSource:k.SERVER});};m.prototype.handleViewAction=function(n){'use strict';this.dispatch({action:n,payloadSource:k.VIEW_ACTION});};m.prototype.handleInitialization=function(n,o,p,q){'use strict';if(n.externalURI)return;this.dispatch({action:{posts:{key:o,data:p},actionType:j.ADD_POSTS,tab:n,pageID:q},payloadSource:k.SERVER});};m.prototype.handlePostRemoved=function(n,o,p){'use strict';if(p){this.dispatch({payloadSource:k.VIEW_ACTION,action:{actionType:j.REMOVE_POST,postID:o,tab:p,pageID:n}});}else Object.keys(l).forEach(function(q){return this.dispatch({payloadSource:k.VIEW_ACTION,action:{actionType:j.REMOVE_POST,postID:o,tab:q,pageID:n}});}.bind(this),this);};m.prototype.handlePostsRemoved=function(n,o,p){'use strict';if(p){this.dispatch({payloadSource:k.VIEW_ACTION,action:{actionType:j.REMOVE_POSTS,postIDs:o,tab:p,pageID:n}});}else Object.keys(l).forEach(function(q){return this.dispatch({payloadSource:k.VIEW_ACTION,action:{actionType:j.REMOVE_POSTS,postIDs:o,tab:q,pageID:n}});}.bind(this));};m.prototype.handlePageInitialization=function(n){'use strict';this.dispatch({payloadSource:k.SERVER,action:{page:n,actionType:j.INIT_PAGE}});};m.prototype.handlePostCreated=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:n,actionType:j.CREATE_POST,post:o,pageID:p}});};m.prototype.handlePostsCreated=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:n,actionType:j.CREATE_POSTS,posts:o,pageID:p}});};m.prototype.handlePostChanged=function(n,o,p,q){'use strict';this.dispatch({payloadSource:k.SERVER,action:{actionType:j.EDIT_POSTS,isViewedUpdated:q,posts:[n],tab:o,pageID:p}});};m.prototype.handlePostsChanged=function(n,o,p,q){'use strict';this.dispatch({payloadSource:k.SERVER,action:{actionType:j.EDIT_POSTS,isViewedUpdated:q,posts:n,tab:o,pageID:p}});};m.prototype.handleStaleContentNoticeStatus=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:o,actionType:j.UPDATE_STALE_CONTENT_NOTICE,status:p,pageID:n}});};m.prototype.handleFilterStatus=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:o,actionType:j.UPDATE_FILTER_STATUS,status:p,pageID:n}});};m.prototype.handleSetCustomTabState=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:n,actionType:j.SET_CUSTOM_TAB_STATE,customTabState:o,pageID:p}});};m.prototype.handleError=function(n,o,p){'use strict';this.dispatch({payloadSource:k.SERVER,action:{tab:n,actionType:j.ERROR,error:o,pageID:p}});};m.prototype.handlePagingChanged=function(n,o,p,q){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:o,pageID:n,actionType:j.PAGING_CHANGED,currentPage:q,queryKey:p}});};m.prototype.handleQueryKeyChanged=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:o,actionType:j.QUERY_KEY_CHANGED,pageID:n,queryKey:p}});};m.prototype.handleQueryChanged=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:o,actionType:j.QUERY_CHANGED,pageID:n,query:p}});};m.prototype.handleFilterChanged=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:o,actionType:j.FILTER_CHANGED,pageID:n,filter:p}});};m.prototype.handleSortChanged=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:o,actionType:j.SORT_CHANGED,pageID:n,sort:p}});};m.prototype.handleBringPostToTop=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:n,actionType:j.BRING_POST_TO_TOP,post:o,pageID:p}});};function m(){'use strict';h.apply(this,arguments);}f.exports=new m();}),null);
__d('ComputerPanelActionState',['keyMirror'],(function a(b,c,d,e,f,g){var h=c('keyMirror')({NEUTRAL:null,DROP:null});f.exports=h;}),null);
__d('DragDropFilePicker',['DragDropTarget','mixin','ArbiterMixin','FilePickerEvent','FileSelectionContainer','createArrayFromMixed','SelectionSource'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this);this.$DragDropFilePicker1=new (c('DragDropTarget'))(k);if(l.onDocumentDragEnterCallback)this.$DragDropFilePicker1.setOnDocumentDragEnterCallback(l.onDocumentDragEnterCallback);if(l.onDocumentDragLeaveCallback)this.$DragDropFilePicker1.setOnDocumentDragLeaveCallback(l.onDocumentDragLeaveCallback);if(l.onDragEnterCallback)this.$DragDropFilePicker1.setOnDragEnterCallback(l.onDragEnterCallback);if(l.onDragLeaveCallback)this.$DragDropFilePicker1.setOnDragLeaveCallback(l.onDragLeaveCallback);this.$DragDropFilePicker1.setOnFilesDropCallback(function(m){var n=c('createArrayFromMixed')(m).filter(function(o){return !l.isFileValid||l.isFileValid(o);}).map(function(o){return new (c('FileSelectionContainer'))(o);});if(n.length>0){this.inform(c('FilePickerEvent').SELECTED,{sender:this,source:c('SelectionSource').FILE,selections:n});}else l.onDocumentDragLeaveCallback.call(null);}.bind(this));this.$DragDropFilePicker1.enable();}j.prototype.disable=function(){'use strict';this.$DragDropFilePicker1.disable();};f.exports=j;}),null);
__d('OmnipickerHTML5FilePickerFactory',['fbt','HTML5FilePicker','PUWApplications','PUWMethods','PUWUploaders'],(function a(b,c,d,e,f,g,h){var i={create:function j(k){return new (c('HTML5FilePicker'))(k,{accept:'image/*',fallbackFunction:function l(){},multiple:true,qn:'todo',waterfallApp:c('PUWApplications').WEB_OMNIPICKER,waterfallUploader:c('PUWUploaders').HTML5,waterfallMethod:c('PUWMethods').FILE_SELECTOR,title:h._("Choose files to upload")});}};f.exports=i;}),null);
__d('OmnipickerDispatcher',['Dispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('Dispatcher_DEPRECATED'))();}),null);
__d('OmnipickerActions',['OmnipickerDispatcher','clamp','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({APP_INITIALIZED:null,FILE_PICKER_SELECT_STARTED:null,FILE_PICKER_SELECTED:null,FILE_PICKER_SELECT_CANCELED:null,EXISTING_PHOTOS_FETCHED:null,PANEL_INITIALIZED:null,PHOTO_SELECTED_OPTIMISTICALLY:null,PHOTO_SOURCE_SELECTED:null,RESIZE_FAILED:null,RESIZE_STARTED:null,RESIZE_SUCCEEDED:null,SELECTION_CHANGED:null,UPLOAD_CANCELED:null,UPLOAD_FAILED:null,UPLOAD_FINISHED:null,UPLOAD_PROGRESSED:null,UPLOAD_QUEUED:null,UPLOAD_STARTED:null}),i={types:h,appInitialized:function j(k,l,m){c('OmnipickerDispatcher').dispatch({type:h.APP_INITIALIZED,appID:k,logger:l,initialSource:m});},panelInitialized:function j(k,l){c('OmnipickerDispatcher').dispatch({type:h.PANEL_INITIALIZED,appID:k,source:l});},photoSourceSelected:function j(k,l){c('OmnipickerDispatcher').dispatch({type:h.PHOTO_SOURCE_SELECTED,appID:k,source:l});},filePickerSelectStarted:function j(k,l,m){c('OmnipickerDispatcher').dispatch({type:h.FILE_PICKER_SELECT_STARTED,appID:k,method:l,ref:m});},filePickerSelected:function j(k,l,m){c('OmnipickerDispatcher').dispatch({type:h.FILE_PICKER_SELECTED,appID:k,method:l,ref:m});},filePickerSelectCancelled:function j(k,l,m){c('OmnipickerDispatcher').dispatch({type:h.FILE_PICKER_SELECT_CANCELED,appID:k,method:l,ref:m});},resizeFailed:function j(k,l,m,n){c('OmnipickerDispatcher').dispatch({type:h.RESIZE_FAILED,appID:k,dt:l,bytes:m,errorCode:n});},resizeStarted:function j(k){c('OmnipickerDispatcher').dispatch({type:h.RESIZE_STARTED,appID:k});},resizeSucceeded:function j(k,l,m,n,o){c('OmnipickerDispatcher').dispatch({type:h.RESIZE_SUCCEEDED,appID:k,dt:l,bytes:m,originalSize:n,customTags:o});},uploadQueued:function j(k,l,m){c('OmnipickerDispatcher').dispatch({type:h.UPLOAD_QUEUED,appID:k,source:l,ids:m.map(function(n){return n.getSelectionContainerID();}),volume:m.length});},selectionChanged:function j(k,l,m,n){c('OmnipickerDispatcher').dispatch({type:h.SELECTION_CHANGED,appID:k,source:l,id:m,checked:n});},uploadStart:function j(k,l,m,n){c('OmnipickerDispatcher').dispatch({type:h.UPLOAD_STARTED,appID:k,source:l,id:m,bytes:n});},uploadProgress:function j(k,l,m,n){var o=c('clamp')(n.bytesTransferred/n.file.size*100,0,100);c('OmnipickerDispatcher').dispatch({type:h.UPLOAD_PROGRESSED,appID:k,source:l,id:m,progress:o});},uploadDone:function j(k,l,m,n,o,p){c('OmnipickerDispatcher').dispatch({type:h.UPLOAD_FINISHED,appID:k,source:l,id:m,src:n,fbid:o,retriesNeeded:p});},uploadFailed:function j(k,l,m,n,o){c('OmnipickerDispatcher').dispatch({type:h.UPLOAD_FAILED,appID:k,source:l,id:m,retriesNeeded:n,errorCode:o});},existingPhotosFetched:function j(k,l,m){c('OmnipickerDispatcher').dispatch({type:h.EXISTING_PHOTOS_FETCHED,appID:k,photos:m.map(function(n){return {source:l,id:n.id,src:n.image.uri};})});},optimisticSelect:function j(k,l,m){c('OmnipickerDispatcher').dispatch({type:h.PHOTO_SELECTED_OPTIMISTICALLY,appID:k,source:l,id:m});},cancelUpload:function j(k,l,m){c('OmnipickerDispatcher').dispatch({type:h.UPLOAD_CANCELED,appID:k,source:l,id:m});}};f.exports=i;}),null);
__d('OmnipickerUploadController',['OmnipickerActions','SelectionSource'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$OmnipickerUploadController1={};}h.prototype.registerOmnipicker=function(i){this.$OmnipickerUploadController1[i]={};};h.prototype.registerAdapter=function(i,j,k){this.$OmnipickerUploadController1[i][k]=j;var l=c('SelectionSource').toPhotoSourceType(k);j.subscribe('maxReached',function(){});j.subscribe('resize_start',this.$OmnipickerUploadController2.bind(this,i));j.subscribe('resize_done',this.$OmnipickerUploadController3.bind(this,i));j.subscribe('resize_hires_start',function(){});j.subscribe('upload_start',this.$OmnipickerUploadController4.bind(this,i,l));j.subscribe('upload_progress',this.$OmnipickerUploadController5.bind(this,i,l));j.subscribe('upload_done',this.$OmnipickerUploadController6.bind(this,i,l));j.subscribe('upload_failed',this.$OmnipickerUploadController7.bind(this,i,l));j.subscribe('finished',function(){});};h.prototype.uploadSelections=function(i,j,k,l){if(!k.every(function(o){return o.getSource()==j;}))throw new Error("Selections' source must be "+j);var m=this.$OmnipickerUploadController1[i][j],n=c('SelectionSource').toPhotoSourceType(j);if(!m){k.forEach(function(o){var p=o.getExistingImageID(),q=o.getSrc();c('OmnipickerActions').uploadDone(i,n,p,q,p,0);});return;}if(!k[0].hasPlaceholderUI())c('OmnipickerActions').uploadQueued(i,n,k);m.uploadSelections(k,l);};h.prototype.cancelUpload=function(i,j,k){c('OmnipickerActions').cancelUpload(i,j,k);};h.prototype.$OmnipickerUploadController2=function(i,event,j){c('OmnipickerActions').resizeStarted(i);};h.prototype.$OmnipickerUploadController3=function(i,event,j){var k=j.scubaData.scuba_ints,l=k.timeResizing||k.dt,m=k.resizedSize;if(j.error){c('OmnipickerActions').resizeFailed(i,l,m,j.error.message);}else c('OmnipickerActions').resizeSucceeded(i,l,m,k.originalSize,{skipped_resizing:j.scubaData.scuba_tags.skippedResizing});};h.prototype.$OmnipickerUploadController4=function(i,j,event,k){c('OmnipickerActions').uploadStart(i,j,k.uploadID,k.size);};h.prototype.$OmnipickerUploadController5=function(i,j,event,k){c('OmnipickerActions').uploadProgress(i,j,k.uploadID,k);};h.prototype.$OmnipickerUploadController6=function(i,j,event,k){c('OmnipickerActions').uploadDone(i,j,k.uploadID,k.response.src,k.response.fbid,k.retriesNeeded);};h.prototype.$OmnipickerUploadController7=function(i,j,event,k){c('OmnipickerActions').uploadFailed(i,j,k.uploadID,k.retriesNeeded,k.response_error);};f.exports=new h();}),null);
__d('OmnipickerUploadSession',['FilePickerEvent','OmnipickerActions','OmnipickerUploadController','PhotoSourceTypes','SubscriptionsHandler'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$OmnipickerUploadSession1={};}h.prototype.registerOmnipicker=function(i){this.$OmnipickerUploadSession1[i]={pickersData:[]};};h.prototype.addPicker=function(i,j,k,l){var m=new (c('SubscriptionsHandler'))();m.addSubscriptions(j.subscribe(c('FilePickerEvent').SELECT_START,function(n,o){c('OmnipickerActions').filePickerSelectStarted(i,l,k);}),j.subscribe(c('FilePickerEvent').SELECTED,function(n,o){if(o.selections&&o.selections.length>0){c('OmnipickerActions').filePickerSelected(i,l,k);var p=o.selections[0].getSource();c('OmnipickerUploadController').uploadSelections(i,p,o.selections);}}),j.subscribe(c('FilePickerEvent').SELECT_CANCELED,function(n,o){c('OmnipickerActions').filePickerSelectCancelled(i,l,k);}));this.$OmnipickerUploadSession1[i].pickersData.push({picker:j,subscriptions:m});};h.prototype.removePicker=function(i,j){var k=this.$OmnipickerUploadSession1[i].pickersData;k.forEach(function(l,m){if(l.picker===j){l.subscriptions.release();k.splice(m,1);}});};h.prototype.cancelUpload=function(i,j,k){if(j!==c('PhotoSourceTypes').COMPUTER)throw new Error('Can only cancel '+c('PhotoSourceTypes').COMPUTER+' uploads. '+'Actual source: '+j);c('OmnipickerUploadController').cancelUpload(i,j,k);};f.exports=new h();}),null);
__d('HTML5FilePickerButton.react',['fbt','OmnipickerHTML5FilePickerFactory','OmnipickerUploadSession','React','ReactDOM','PhotoSourceTypes','PUWMethods','XUIButton.react'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.componentDidMount=function(){'use strict';this.picker=c('OmnipickerHTML5FilePickerFactory').create(c('ReactDOM').findDOMNode(this.refs.fileButton));c('OmnipickerUploadSession').addPicker(this.props.appID,this.picker,c('PhotoSourceTypes').COMPUTER,c('PUWMethods').FILE_SELECTOR);};l.prototype.componentWillUnmount=function(){'use strict';c('OmnipickerUploadSession').removePicker(this.props.appID,this.picker);};l.prototype.render=function(){'use strict';var m=h._("Select Files");return (c('React').createElement(c('XUIButton.react'),{ref:'fileButton',href:'#',size:'xlarge',label:m}));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={appID:k.string.isRequired};f.exports=l;}),null);
__d('DragDropInstructions.react',['cx','fbt','ComputerPanelActionState','HTML5FilePickerButton.react','React'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.renderInstructions=function(){switch(this.props.actionState){case c('ComputerPanelActionState').DROP:return (c('React').createElement('div',null,c('React').createElement('div',{className:"_39ld"},c('React').createElement('div',{className:"_4zwj"})),c('React').createElement('div',{className:"_4zwc"},i._("Drop photos here"))));case c('ComputerPanelActionState').NEUTRAL:return (c('React').createElement('div',null,c('React').createElement('div',null,c('React').createElement('div',{className:"_39ld"},c('React').createElement('div',{className:"_4zwd"})),c('React').createElement('div',{className:"_4zwc"},i._("Drag photos here"))),c('React').createElement('div',{className:"_4zwi"},c('React').createElement('span',{className:"_4zwe"}),i._("or"),c('React').createElement('span',{className:"_4zwe"})),c('React').createElement('div',{className:"_4zwf"},c('React').createElement(c('HTML5FilePickerButton.react'),{appID:this.props.appID}))));}}.bind(this),this.renderOverlay=function(){return (c('React').createElement('div',{className:"_4zwg"},c('React').createElement('div',{className:"_4zwh"},this.renderInstructions())));}.bind(this),o;}m.prototype.render=function(){'use strict';if(this.props.isOverlay)return this.renderOverlay();return this.renderInstructions();};m.propTypes={actionState:l.oneOf(Object.keys(c('ComputerPanelActionState'))).isRequired,appID:l.string.isRequired,isOverlay:l.bool};f.exports=m;}),null);
__d('EmptyPanel.react',['cx','DragDropInstructions.react','React','ComputerPanelActionState'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){'use strict';var m="_2gyt"+(this.props.actionState===c('ComputerPanelActionState').NEUTRAL?' '+"_2gyu":'')+(this.props.actionState===c('ComputerPanelActionState').DROP?' '+"_2gyw":'');return (c('React').createElement('div',{className:m},c('React').createElement('div',{className:"_2gyv"},c('React').createElement(c('DragDropInstructions.react'),{actionState:this.props.actionState,appID:this.props.appID}))));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={actionState:k.oneOf(Object.keys(c('ComputerPanelActionState'))).isRequired,appID:k.string.isRequired};f.exports=l;}),null);
__d('HTML5UploadAdapter',['AsyncUploadQueue','ArbiterMixin','PhotosUploadWaterfall','PhotosUploadWaterfallErrorCodes','PhotosUploadWaterfallMixin','PhotosMimeType','JpegResizer','QE','SphericalImage','SphericalPhotoConfig','performanceNow','SphericalPhotoUploadHelper','URI'],(function a(b,c,d,e,f,g){'use strict';var h=c('SphericalPhotoUploadHelper').shouldResize360;function i(j){this._config=babelHelpers['extends']({maxRetries:0,retryTimeout:250,uri:null,qn:null,postParams:{}},j);this._uploads={};this._numProcessing=0;this._activeUploadCount=0;this._uploadQueue=new (c('AsyncUploadQueue'))(this._config.uri);this._uploadQueue.setAllowCrossOrigin(true);this._uploadQueue.setLimit(j.maxParallel);this._uploadQueue.subscribe('start',this._handleStart.bind(this));this._uploadQueue.subscribe('failure',this._handleFailure.bind(this));this._uploadQueue.subscribe('success',this._handleSuccess.bind(this));this._uploadQueue.subscribe('progress',this._handleProgress.bind(this));this._uploadQueue.subscribe('success_after_abort',this._handleCanceledPhotoUploadedAnyway.bind(this));if(c('JpegResizer').isSupported()){this._jpegResizer=new (c('JpegResizer'))(j.maxParallel);if(j.hasOwnProperty('useHighQuality'))this._jpegResizer.setHighQuality(j.useHighQuality);}this._uploadQueue.setPreprocessHandler(this._resizeUpload.bind(this));}Object.assign(i,{isSupported:function j(){return c('AsyncUploadQueue').isSupported()&&c('JpegResizer').isSupported();},MAX_WIDTH:2048,MAX_HEIGHT:2048});Object.assign(i.prototype,c('ArbiterMixin'),c('PhotosUploadWaterfallMixin'),{getUploaderApp:function j(){return c('PhotosUploadWaterfall').APP_HTML5;},getWaterfallID:function j(){return this._config.qn;},getWaterfallSource:function j(){return this._config.ref;},uploadFiles:function j(k,l){var m=function(o,p){o.sphericalImage=p;this._enqueueUpload(o,babelHelpers['extends']({},this._config.postParams,l));}.bind(this),n=function(o){var p=c('performanceNow')(),q=function(s){m(o,s);this.logWaterfallStep(c('SphericalPhotoConfig').www_spherical_photo_new_detector?c('PhotosUploadWaterfall').DONE_SPHERICAL_CHECK_EXPERIMENTAL:c('PhotosUploadWaterfall').DONE_SPHERICAL_CHECK,{scuba_ints:{dt:c('performanceNow')()-p},projection_type:s.getProjectionType()});}.bind(this),r=function(s){m(o);this.logWaterfallStep(c('SphericalPhotoConfig').www_spherical_photo_new_detector?c('PhotosUploadWaterfall').FAIL_SPHERICAL_CHECK_EXPERIMENTAL:c('PhotosUploadWaterfall').FAIL_SPHERICAL_CHECK,{code:c('PhotosUploadWaterfallErrorCodes').SPHERICAL_CHECK_FAILED,scuba_ints:{dt:c('performanceNow')()-p}});}.bind(this);c('SphericalImage').createFromBlob(o).then(q)['catch'](r).done();}.bind(this);k.forEach(n);},uploadSelections:function j(k,l){var m=k.map(function(n){var o=n.getFile();o.uploadID=n.getSelectionContainerID();return o;});this.uploadFiles(m,l);},setHiRes:function j(k){if(this._config.hasOwnProperty('useHighQuality'))this._jpegResizer&&this._jpegResizer.setHighQuality(k);},setNumSelected:function j(k){},markDeleted:function j(k){},addPostParam:function j(k,l){this._config.postParams=this._config.postParams||{};this._config.postParams[k]=l;},cancelIndividualUpload:function j(k){var l=this._getUpload(k);if(l){this._uploadQueue.dequeue(l);this._removeUpload(l);}},cancelAllUploads:function j(){for(var k in this._uploads){var l=this._getUpload(k);this._uploadQueue.dequeue(l);this._removeUpload(l);}},getActiveUploadCount:function j(){return this._activeUploadCount;},_getUpload:function j(k){if(k&&this._uploads[k]){return this._uploads[k];}else return null;},_removeUpload:function j(k){if(!this._uploads[k.getFile().uploadID])return;delete this._uploads[k.getFile().uploadID];if(!k.isWaiting())this._activeUploadCount--;},_handleStart:function j(k,l){this._activeUploadCount++;this.inform('upload_start',{uploadID:l.getFile().uploadID,retry:!!l.getFile()._retryCount,file:l.getFile(),size:l.getFile().size});},_handleFailure:function j(k,l){var m=Math.pow(2,l.getFile()._retryCount);this._removeUpload(l);if(l.getFile()._retryCount++<this._config.maxRetries){setTimeout(this._enqueueUpload.bind(this,l.getFile(),babelHelpers['extends']({},this._config.postParams,{retry:l.getFile()._retryCount})),this._config.retryTimeout*m);this.logWaterfallStep(c('PhotosUploadWaterfall').RETRY_UPLOAD,{code:l.getResponse().getError()});this.inform('upload_retry',{uploadID:l.getFile().uploadID,file:l.getFile(),response:l.getResponse(),retry:l.getFile()._retryCount});}else this.inform('upload_failed',{uploadID:l.getFile().uploadID,file:l.getFile(),response:l.getResponse()});return false;},_handleSuccess:function j(k,l){this._removeUpload(l);var m=l.getResponse(),n=m.payload;if(n.metadata)n=n.metadata;this.inform('upload_done',{uploadID:l.getFile().uploadID,response:n[0],hiRes:true,retriesNeeded:l.getFile()._retryCount});},_handleProgress:function j(k,l){this.inform('upload_progress',{file:l.getFile(),uploadID:l.getFile().uploadID,bytesTransferred:l.getProgressEvent().loaded});},_resizeUpload:function j(k,l){var m=k.getFile();if(!c('PhotosMimeType').isJpeg(m.type))return l(k);this.inform('resize_start',{uploadID:m.uploadID,file:m});var n=c('performanceNow')(),o=function(t,u,v){if(t)this.logWaterfallStep(c('PhotosUploadWaterfall').CLIENT_ERROR,{code:c('PhotosUploadWaterfall').CERROR_RESIZING_FAILED,meta:{message:t.message}});var w=t||v;this.inform('resize_done',{uploadID:m.uploadID,scubaData:{scuba_tags:{skippedResizing:+w},scuba_ints:{timeResizing:c('performanceNow')()-n,originalSize:m.size,resizedSize:u&&u.size}},error:t});if(!w){u.uploadID=m.uploadID;u.name=m.name;k.setFile(u);}l(k);}.bind(this);if(m.sphericalImage&&m.sphericalImage.isSpherical()){c('QE').logExposure('spherical_photo');var p=m.sphericalImage,q=p.getSize(),r=c('SphericalPhotoConfig').upload_size_limit,s=p.getProjectionType();if(this._jpegResizer&&h(s,q,r)){this._jpegResizer.resize360Blob(m,o,function(){},r);}else o(false,m,true);}else if(this._jpegResizer){this._jpegResizer.resizeBlob(m,o);}else o(false,m,true);},_handleCanceledPhotoUploadedAnyway:function j(k,l){this.inform('canceled_photo_uploaded',l.payload[0].fbid);},_enqueueUpload:function j(k,l){l=babelHelpers['extends']({},l,{uploader:'html5'});k._retryCount=k._retryCount||0;this._uploads[k.uploadID]=k._retryCount?this._uploadQueue.prepend(k.fileName,k,l):this._uploadQueue.enqueue(k.fileName,k,l);}});f.exports=i;}),null);
__d('OmnipickerPanelMixin.react',['PhotoSourceTypes','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i={propTypes:{appID:h.string,photoData:h.object,sourceType:h.oneOf(Object.keys(c('PhotoSourceTypes'))),selectionSource:h.string.isRequired}};f.exports=i;}),null);
__d('OmnipickerPhotoUploadState',['keyMirror'],(function a(b,c,d,e,f,g){var h=c('keyMirror')({NOT_STARTED:null,UPLOADING:null,DONE:null,FAILED:null});f.exports=h;}),null);
__d('OmnipickerPhoto.react',['cx','fbt','Event','Image.react','OmnipickerActions','OmnipickerPhotoUploadState','OmnipickerUploadSession','PhotoSourceTypes','ProgressBar.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=20000;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={canCancel:false},this.onDragStart=function(event){c('Event').kill(event);},this.onMouseDown=function(){},this.onMouseUp=function(){var t=true;if(!this.props.checked&&this.props.onPhotoSelected)t=this.props.onPhotoSelected.call(null,this.props.id);if(t)c('OmnipickerActions').selectionChanged(this.props.appID,this.props.photoSourceType,this.props.id,!this.props.checked);}.bind(this),this.getImage=function(){if(!this.props.src)return null;return (c('React').createElement(c('Image.react'),{src:this.props.src,className:"_2dh3"}));}.bind(this),this.getSelection=function(){if(!this.props.checked)return null;return c('React').createElement('div',{className:"_2dh3 _1cyy"});}.bind(this),this.getCancelOverlay=function(){if(this.props.uploadState!==c('OmnipickerPhotoUploadState').UPLOADING||!this.state.canCancel)return null;return (c('React').createElement('div',{className:"_5goe"},c('React').createElement('div',{className:"_5gof _1cu0",onClick:this.onCancel,role:'button',tabIndex:'0'},i._("Cancel Upload"))));}.bind(this),this.getFailedOverlay=function(){if(this.props.uploadState!==c('OmnipickerPhotoUploadState').FAILED)return null;return (c('React').createElement('div',{className:"_5goe"},c('React').createElement('div',{className:"_5gof"},i._("Upload Failed"))));}.bind(this),this.getProgressBar=function(){if(!this.props.showUploadProgress||this.props.uploadState!==c('OmnipickerPhotoUploadState').UPLOADING)return null;var t=null;if(this.props.progress<100){t=c('React').createElement(c('ProgressBar.react'),{value:this.props.progress,min:0,max:100});}else t=c('React').createElement('div',{className:"_1t2c"});return (c('React').createElement('div',{className:"_1cyx"},t));}.bind(this),this.onCancel=function(){c('OmnipickerUploadSession').cancelUpload(this.props.appID,this.props.photoSourceType,this.props.id);}.bind(this),this.setCancelTimeout=function(){this.cancelTimeout=setTimeout(function(){this.setState({canCancel:true});}.bind(this),m);}.bind(this),this.clearCancelTimeout=function(){if(this.cancelTimeout){clearTimeout(this.cancelTimeout);this.cancelTimeout=null;}}.bind(this),p;}n.prototype.componentDidMount=function(){if(this.props.supportsCancel&&this.props.uploadState===c('OmnipickerPhotoUploadState').UPLOADING)this.setCancelTimeout();};n.prototype.componentWillReceiveProps=function(o){if(this.props.supportsCancel){var p=this.props.uploadState!==o.uploadState||this.props.progress!==o.progress;if(p){this.clearCancelTimeout();if(o.uploadState===c('OmnipickerPhotoUploadState').UPLOADING)this.setCancelTimeout();}}};n.prototype.componentWillUnmount=function(){this.clearCancelTimeout();};n.prototype.render=function(){return c('React').createElement('div',{className:"_47pv",onDragStart:this.onDragStart,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},this.getImage(),this.getSelection(),this.getCancelOverlay(),this.getFailedOverlay(),this.getProgressBar());};n.propTypes={appID:l.string.isRequired,checked:l.bool,id:l.string.isRequired,onPhotoSelected:l.func,photoSourceType:l.oneOf(Object.keys(c('PhotoSourceTypes'))).isRequired,progress:l.number,showUploadProgress:l.bool,src:l.string,supportsCancel:l.bool,uploadState:l.oneOf([c('OmnipickerPhotoUploadState').NOT_STARTED,c('OmnipickerPhotoUploadState').UPLOADING,c('OmnipickerPhotoUploadState').DONE,c('OmnipickerPhotoUploadState').FAILED]).isRequired};n.defaultProps={checked:false,progress:0,showUploadProgress:true,supportsCancel:false};f.exports=n;}),null);
__d('OmnipickerPhotoGrid.react',['cx','AutoPager.react','OmnipickerPhoto.react','PhotoSourceTypes','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=300;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.getPhotos=function(){return Object.keys(this.props.photos).map(function(s){var t=this.props.photos[s];return (c('React').createElement(c('OmnipickerPhoto.react'),{appID:this.props.appID,checked:t.checked,id:t.id,key:t.id,onPhotoSelected:this.props.onPhotoSelected,photoSourceType:this.props.photoSourceType,progress:t.progress,showUploadProgress:this.props.showUploadProgress,src:t.src,supportsCancel:this.props.supportsCancel,uploadState:t.uploadState}));}.bind(this));}.bind(this),this.getAutoPager=function(){if(!this.props.onScrollPositionThresholdReached)return null;return (c('React').createElement(c('AutoPager.react'),{className:"_4qgs",onEnterBuffer:l,onVisible:this.props.onScrollPositionThresholdReached,scrollableAreaClass:"_xhf"}));}.bind(this),o;}m.prototype.render=function(){return c('React').createElement('div',{className:"_xhf"},c('React').createElement('div',{className:"uiScrollableAreaWrap _1-nf"},this.getPhotos(),this.getAutoPager()));};m.propTypes={appID:k.string.isRequired,onPhotoSelected:k.func,onScrollPositionThresholdReached:k.func,photos:k.object.isRequired,photoSourceType:k.oneOf(Object.keys(c('PhotoSourceTypes'))).isRequired,showUploadProgress:k.bool,supportsCancel:k.bool};m.defaultProps={showUploadProgress:true,supportsCancel:false};f.exports=m;}),null);
__d('PhotoPanel.react',['cx','fbt','ComputerPanelActionState','DragDropInstructions.react','HTML5FilePickerButton.react','OmnipickerPhotoGrid.react','PhotoSourceTypes','React','ReactDOM','Scroll'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={photoCount:0},this.renderInstructions=function(){return (c('React').createElement('div',{className:"_1-nd"},c('React').createElement('div',null,c('React').createElement('div',{className:"_4zwc"},i._("Drag more photos"))),c('React').createElement('div',{className:"_4zwi"},c('React').createElement('span',{className:"_4zwe"}),i._("or"),c('React').createElement('span',{className:"_4zwe"})),c('React').createElement('div',{className:"_4zwf"},c('React').createElement(c('HTML5FilePickerButton.react'),{appID:this.props.appID}))));}.bind(this),this.renderDragAndDropInstructions=function(){if(this.props.actionState!==c('ComputerPanelActionState').NEUTRAL)return (c('React').createElement(c('DragDropInstructions.react'),{actionState:this.props.actionState,appID:this.props.appID,isOverlay:true}));}.bind(this),this.renderPhotoGrid=function(){return (c('React').createElement(c('OmnipickerPhotoGrid.react'),{appID:this.props.appID,photos:this.props.photoData,photoSourceType:c('PhotoSourceTypes').COMPUTER,supportsCancel:true}));}.bind(this),o;}m.prototype.componentWillReceiveProps=function(n){'use strict';var o=Object.keys(n.photoData).length;this.setState({photoCount:o});};m.prototype.componentDidUpdate=function(n,o){'use strict';if(this.state.photoCount>o.photoCount){var p=c('ReactDOM').findDOMNode(this.refs.pickerBox);c('Scroll').setTop(p,p.scrollHeight);}};m.prototype.render=function(){'use strict';return (c('React').createElement('div',null,c('React').createElement('div',{className:"_1x-l"},c('React').createElement('div',{className:"_1-ne _1-nf",ref:'pickerBox'},this.renderPhotoGrid(),this.renderInstructions())),this.renderDragAndDropInstructions()));};m.propTypes={actionState:l.oneOf(Object.keys(c('ComputerPanelActionState'))).isRequired,appID:l.string.isRequired,photoData:l.object.isRequired};f.exports=m;}),null);
__d('ComputerPanel.react',['ComputerPanelActionState','DragDropFilePicker','EmptyPanel.react','FilePickerEvent','HTML5UploadAdapter','React','OmnipickerConfig','OmnipickerPanelMixin.react','OmnipickerUploadSession','PhotosMimeType','PhotoPanel.react','PhotoSourceTypes','PUWMethods','PUWUploaders','SelectionSource'],(function a(b,c,d,e,f,g){var h=c('React').createClass({displayName:'ComputerPanel',mixins:[c('OmnipickerPanelMixin.react')],statics:{getAdapter:function i(j,k){var l=c('OmnipickerConfig').FILE_UPLOAD_URI;if(k&&k.fileUploadURI)l=k.fileUploadURI;return new (c('HTML5UploadAdapter'))({uri:l,maxRetries:c('OmnipickerConfig').HTML5_UPLOADER_MAX_RETRIES,maxParallel:c('OmnipickerConfig').HTML5_UPLOADER_MAX_PARALLEL,postParams:{},qn:j.getWaterfallID(),waterfallApp:j.getWaterfallAppName(),waterfallUploader:c('PUWUploaders').HTML5});}},getDefaultProps:function i(){return {selectionSource:c('SelectionSource').FILE,sourceType:c('PhotoSourceTypes').COMPUTER};},getInitialState:function i(){return {actionState:c('ComputerPanelActionState').NEUTRAL};},componentDidMount:function i(){this.picker=new (c('DragDropFilePicker'))(document.documentElement,{onDocumentDragEnterCallback:function(){this.setState({actionState:c('ComputerPanelActionState').DROP});}.bind(this),onDocumentDragLeaveCallback:function(){this.setState({actionState:c('ComputerPanelActionState').NEUTRAL});}.bind(this),isFileValid:function j(k){return c('PhotosMimeType').isImage(k.type);}});c('OmnipickerUploadSession').addPicker(this.props.appID,this.picker,c('PhotoSourceTypes').COMPUTER,c('PUWMethods').DRAGDROP);this.picker.subscribe(c('FilePickerEvent').SELECTED,this.onFilesDropped);},componentWillUnmount:function i(){this.picker.disable();c('OmnipickerUploadSession').removePicker(this.props.appID,this.picker);},onFilesDropped:function i(j){this.setState({actionState:c('ComputerPanelActionState').NEUTRAL});},renderEmptyPanel:function i(){return (c('React').createElement(c('EmptyPanel.react'),{actionState:this.state.actionState,appID:this.props.appID}));},renderPhotoPanel:function i(){return (c('React').createElement(c('PhotoPanel.react'),{actionState:this.state.actionState,appID:this.props.appID,photoData:this.props.photoData}));},render:function i(){var j=Object.keys(this.props.photoData).length,k=j===0?this.renderEmptyPanel():this.renderPhotoPanel();return c('React').createElement('div',null,k);}});f.exports=h;}),null);
__d('OmnipickerLoggerStore',['invariant','OmnipickerActions','FluxStore','OmnipickerDispatcher','PUWSteps'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('OmnipickerActions').types;i=babelHelpers.inherits(l,c('FluxStore'));j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.$OmnipickerLoggerStore1={};}l.prototype.__onDispatch=function(m){if(m.type===k.APP_INITIALIZED){m.logger||h(0);this.$OmnipickerLoggerStore1[m.appID]=m.logger;return;}var n=this.$OmnipickerLoggerStore1[m.appID];n||h(0);switch(m.type){case k.FILE_PICKER_SELECT_STARTED:case k.FILE_PICKER_SELECTED:case k.FILE_PICKER_SELECT_CANCELED:this.$OmnipickerLoggerStore2(m,n);break;case k.RESIZE_STARTED:n.logStep(c('PUWSteps').CLIENT_UPLOAD_BEGIN);n.logStep(c('PUWSteps').CLIENT_PROCESS_BEGIN);break;case k.RESIZE_SUCCEEDED:n.logStep(c('PUWSteps').CLIENT_PROCESS_SUCCESS,{dt:m.dt,bytes:m.bytes,media_data_size:m.originalSize,custom_tags:m.customTags});break;case k.RESIZE_FAILED:n.logStep(c('PUWSteps').CLIENT_PROCESS_FAIL,{dt:m.dt,bytes:m.bytes,error_code:m.errorCode});break;case k.UPLOAD_STARTED:n.logStep(c('PUWSteps').CLIENT_TRANSFER_BEGIN,{bytes:m.bytes,ref:m.source});break;case k.UPLOAD_FINISHED:n.logStep(c('PUWSteps').CLIENT_TRANSFER_SUCCESS,{auto_retry_count:m.retriesNeeded,ref:m.source});n.logStep(c('PUWSteps').CLIENT_UPLOAD_SUCCESS,{fbid:m.fbid,ref:m.source});break;case k.UPLOAD_FAILED:n.logStep(c('PUWSteps').CLIENT_UPLOAD_FAIL,{auto_retry_count:m.retriesNeeded,error_code:m.errorCode,ref:m.source});break;case k.UPLOAD_QUEUED:n.logStep(c('PUWSteps').CLIENT_TRANSFER_BATCH_BEGIN,{ref:m.source,volume:m.volume});break;default:}};l.prototype.$OmnipickerLoggerStore2=function(m,n){var o=void 0;switch(m.type){case k.FILE_PICKER_SELECT_STARTED:o=c('PUWSteps').CLIENT_SELECT_BEGIN;break;case k.FILE_PICKER_SELECTED:o=c('PUWSteps').CLIENT_SELECT_SUCCESS;break;case k.FILE_PICKER_SELECT_CANCELED:o=c('PUWSteps').CLIENT_SELECT_CANCEL;break;default:h(0);}var p=m.method,q=m.ref;n.logStep(o,{method:p,ref:q});};f.exports=new l(c('OmnipickerDispatcher'));}),null);
__d('OmnipickerPanelList.react',['cx','ix','Image.react','OmnipickerActions','PhotoSourceTypes','React'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.componentWillMount=function(){'use strict';c('React').Children.forEach(this.props.children,function(n){if(!n)return;var o=this.props.appID;c('OmnipickerActions').panelInitialized(o,n.props.sourceType);}.bind(this));};m.prototype.render=function(){'use strict';var n=null;if(this.props.doneSelecting)n=c('React').createElement('div',{className:"_5e8d"},c('React').createElement('div',{className:"_5e8e"},c('React').createElement(c('Image.react'),{className:"_5e8o",src:i("images\/photos\/omnipicker\/mountain_sun.png")})));var o;if(this.props.children.length){o=this.props.children.find(function(p){if(!p)return false;return p.props.sourceType===this.props.selectedSourceType;}.bind(this));}else o=this.props.children;o=c('React').cloneElement(o,{photoData:this.props.photoData,appID:this.props.appID});return (c('React').createElement('div',null,n,c('React').createElement('div',{className:"_5gfy"},o)));};function m(){'use strict';j.apply(this,arguments);}m.propTypes={appID:l.string,photoData:l.object,doneSelecting:l.bool,selectedSourceType:l.oneOf(Object.keys(c('PhotoSourceTypes')))};f.exports=m;}),null);
__d('OmnipickerPhotoSourceStore',['OmnipickerActions','FluxStore','OmnipickerDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('OmnipickerActions').types;h=babelHelpers.inherits(k,c('FluxStore'));i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.$OmnipickerPhotoSourceStore1={};}k.prototype.__onDispatch=function(l){switch(l.type){case j.APP_INITIALIZED:this.$OmnipickerPhotoSourceStore1[l.appID]={currentSource:l.initialSource};break;case j.PHOTO_SOURCE_SELECTED:this.$OmnipickerPhotoSourceStore1[l.appID].currentSource=l.source;this.__emitChange();break;default:return;}};k.prototype.getCurrentSource=function(l){return this.$OmnipickerPhotoSourceStore1[l].currentSource;};f.exports=new k(c('OmnipickerDispatcher'));}),null);
__d('OmnipickerPhotoStore',['invariant','OmnipickerActions','FluxStore','OmnipickerDispatcher','OmnipickerPhotoUploadState'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('OmnipickerActions').types;i=babelHelpers.inherits(l,c('FluxStore'));j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.$OmnipickerPhotoStore1={};}l.prototype.__onDispatch=function(m){m.appID||h(0);var n=this.$OmnipickerPhotoStore1[m.appID];if(n){var o=n.deletedPhotos;if(o&&o[m.id])return;}switch(m.type){case k.APP_INITIALIZED:this.$OmnipickerPhotoStore2(m);return;case k.PANEL_INITIALIZED:this.$OmnipickerPhotoStore3(m);return;case k.EXISTING_PHOTOS_FETCHED:this.$OmnipickerPhotoStore4(m);break;case k.PHOTO_SELECTED_OPTIMISTICALLY:this.$OmnipickerPhotoStore5(m);break;case k.SELECTION_CHANGED:this.$OmnipickerPhotoStore6(m);break;case k.UPLOAD_CANCELED:this.$OmnipickerPhotoStore7(m);break;case k.UPLOAD_FAILED:this.$OmnipickerPhotoStore8(m);break;case k.UPLOAD_FINISHED:this.$OmnipickerPhotoStore9(m);break;case k.UPLOAD_PROGRESSED:this.$OmnipickerPhotoStore10(m);break;case k.UPLOAD_QUEUED:this.$OmnipickerPhotoStore11(m);break;case k.UPLOAD_STARTED:this.$OmnipickerPhotoStore12(m);break;default:return;}this.__emitChange();};l.prototype.getState=function(m){var n=this.$OmnipickerPhotoStore1[m];return {numPhotosSelected:this.$OmnipickerPhotoStore13(n).length,photosOptimisticallyUploading:n.photosOptimisticallyUploading,photosWaitingForUpload:n.photosWaitingForUpload,photoData:n.photos};};l.prototype.getSelectedPhotos=function(m){var n=this.$OmnipickerPhotoStore1[m];return this.$OmnipickerPhotoStore13(n,n.uploadOrder).filter(function(o){return o.fbid!=='';});};l.prototype.$OmnipickerPhotoStore13=function(m,n){var o=n||m.photos,p=[];Object.keys(m.photos).forEach(function(q){var r=Array.isArray(o[q])?o[q]:Object.keys(o[q]);r.forEach(function(s){var t=this.$OmnipickerPhotoStore14(m,q,s);if(t.checked)if(t)p.push(t);}.bind(this));}.bind(this));return p;};l.prototype.$OmnipickerPhotoStore14=function(m,n,o){var p=m.photos;p[n]||h(0);var q=p[n][o];q||h(0);return q;};l.prototype.$OmnipickerPhotoStore15=function(m){this.$OmnipickerPhotoStore16(m,['source','id']);return this.$OmnipickerPhotoStore14(this.$OmnipickerPhotoStore1[m.appID],m.source,m.id);};l.prototype.$OmnipickerPhotoStore17=function(m,n){m.hasOwnProperty(n)||h(0);m[n]!==undefined&&m[n]!==null||h(0);};l.prototype.$OmnipickerPhotoStore16=function(m,n){n.push('appID');n.forEach(function(o){return this.$OmnipickerPhotoStore17(m,o);}.bind(this));};l.prototype.$OmnipickerPhotoStore18=function(m,n,o){var p=m.photos;p[n]||h(0);!p[n][o]||h(0);m.uploadOrder[n].push(o);return p[n][o]={id:o,checked:false,fbid:'',progress:0,src:'',uploadState:c('OmnipickerPhotoUploadState').NOT_STARTED};};l.prototype.$OmnipickerPhotoStore19=function(m,n){m.photosWaitingForUpload[n.id]=true;};l.prototype.$OmnipickerPhotoStore2=function(m){var n=m.appID;!this.$OmnipickerPhotoStore1[n]||h(0);this.$OmnipickerPhotoStore1[n]={deletedPhotos:{},photos:{},photosWaitingForUpload:{},photosOptimisticallyUploading:{},uploadOrder:{}};};l.prototype.$OmnipickerPhotoStore5=function(m){var n=this.$OmnipickerPhotoStore15(m);n.checked=true;var o=this.$OmnipickerPhotoStore1[m.appID];o.photosOptimisticallyUploading[m.id]=true;};l.prototype.$OmnipickerPhotoStore6=function(m){this.$OmnipickerPhotoStore16(m,['checked']);var n=this.$OmnipickerPhotoStore15(m);n.checked=m.checked;};l.prototype.$OmnipickerPhotoStore3=function(m){this.$OmnipickerPhotoStore16(m,['source']);var n=this.$OmnipickerPhotoStore1[m.appID];n.photos[m.source]={};n.uploadOrder[m.source]=[];};l.prototype.$OmnipickerPhotoStore20=function(m,n,o,p){if(p===c('OmnipickerPhotoUploadState').FAILED||m.photosOptimisticallyUploading[o])return;n.checked=true;};l.prototype.$OmnipickerPhotoStore21=function(m,n,o,p){n.uploadState=p;delete m.photosWaitingForUpload[o];delete m.photosOptimisticallyUploading[o];};l.prototype.$OmnipickerPhotoStore22=function(m,n,o){var p=n.id;delete m.photos[o][p];delete m.photosWaitingForUpload[p];delete m.photosOptimisticallyUploading[p];var q=m.uploadOrder[o].indexOf(p);m.uploadOrder[o].splice(q,1);m.deletedPhotos[p]=true;};l.prototype.$OmnipickerPhotoStore4=function(m){this.$OmnipickerPhotoStore17(m,'photos');var n=this.$OmnipickerPhotoStore1[m.appID];m.photos.forEach(function(o){var p=o.source,q=o.id,r=o.src,s=this.$OmnipickerPhotoStore18(n,p,q);s.src=r;}.bind(this));};l.prototype.$OmnipickerPhotoStore7=function(m){var n=this.$OmnipickerPhotoStore15(m);this.$OmnipickerPhotoStore22(this.$OmnipickerPhotoStore1[m.appID],n,m.source);};l.prototype.$OmnipickerPhotoStore8=function(m){var n=this.$OmnipickerPhotoStore1[m.appID];this.$OmnipickerPhotoStore21(n,this.$OmnipickerPhotoStore15(m),m.id,c('OmnipickerPhotoUploadState').FAILED);};l.prototype.$OmnipickerPhotoStore9=function(m){this.$OmnipickerPhotoStore16(m,['src','fbid']);var n=m.appID,o=m.id,p=m.src,q=m.fbid,r=this.$OmnipickerPhotoStore1[n],s=this.$OmnipickerPhotoStore15(m),t=c('OmnipickerPhotoUploadState').DONE;this.$OmnipickerPhotoStore20(r,s,o,t);this.$OmnipickerPhotoStore21(r,s,o,t);s.src=p;s.fbid=q;};l.prototype.$OmnipickerPhotoStore10=function(m){this.$OmnipickerPhotoStore17(m,'progress');var n=this.$OmnipickerPhotoStore15(m);n.progress=100;};l.prototype.$OmnipickerPhotoStore12=function(m){var n=this.$OmnipickerPhotoStore15(m);n.uploadState=c('OmnipickerPhotoUploadState').UPLOADING;};l.prototype.$OmnipickerPhotoStore11=function(m){this.$OmnipickerPhotoStore16(m,['source','ids']);var n=m.source,o=this.$OmnipickerPhotoStore1[m.appID],p=m.ids;p.forEach(function(q){return this.$OmnipickerPhotoStore19(o,this.$OmnipickerPhotoStore18(o,n,q));}.bind(this));};f.exports=new l(c('OmnipickerDispatcher'));}),null);
__d('OmnipickerWaterfallLogger',['PhotosUploadWaterfallXMixin','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('PhotosUploadWaterfallXMixin')));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this);this.$OmnipickerWaterfallLogger1=k;this.$OmnipickerWaterfallLogger2=l;}j.prototype.getWaterfallAppName=function(){'use strict';return this.$OmnipickerWaterfallLogger1;};j.prototype.getWaterfallID=function(){'use strict';return this.$OmnipickerWaterfallLogger2;};f.exports=j;}),null);
__d('Omnipicker.react',['invariant','ClientIDs','OmnipickerActions','OmnipickerPanelList.react','OmnipickerPhotoSourceStore','OmnipickerPhotoStore','OmnipickerUploadController','OmnipickerUploadSession','OmnipickerWaterfallLogger','React','SubscriptionsHandler','Waiter','OmnipickerLoggerStore'],(function a(b,c,d,e,f,g,h){var i,j;c('OmnipickerLoggerStore');c('OmnipickerPhotoSourceStore');c('OmnipickerPhotoStore');var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={numPhotosSelected:0,numPhotosUploading:0,photoData:{}},this.handlePhotosChangeEvent=function(){var r=c('OmnipickerPhotoStore').getState(this.state.appID),s=Object.keys(r.photosWaitingForUpload).length,t=Object.keys(r.photosOptimisticallyUploading).length;if(t>0){if(!this.$Omnipicker3)this.$Omnipicker3=this.$Omnipicker2.wait();}else if(this.$Omnipicker3){this.$Omnipicker3.call(this);this.$Omnipicker3=null;}this.setState({numPhotosSelected:r.numPhotosSelected,numPhotosUploading:s,photoData:r.photoData});this.props.onPhotosChange&&this.props.onPhotosChange(r.numPhotosSelected,s);}.bind(this),this.handleSourceChangeEvent=function(){this.setState({sourceType:c('OmnipickerPhotoSourceStore').getCurrentSource(this.state.appID)});}.bind(this),n;}l.prototype.componentWillMount=function(){'use strict';var m='Omnipicker_ID_'+c('ClientIDs').getNewClientID();c('OmnipickerUploadController').registerOmnipicker(m);c('OmnipickerUploadSession').registerOmnipicker(m);var n=[];c('React').Children.forEach(this.props.children,function(q){if(q.type===c('OmnipickerPanelList.react'))n.push(c('React').cloneElement(q,{appID:m}));});n.length===1||h(0);var o=n[0],p=null;c('React').Children.forEach(o.props.children,function(q){if(!q)return;if(!p||q.props.isSelected)p=q.props.sourceType;if(q.type.getAdapter)c('OmnipickerUploadController').registerAdapter(m,q.type.getAdapter(this.props.logger,q.props.config),q.props.selectionSource);}.bind(this));!!p||h(0);this.setState({appID:m,sourceType:p});c('OmnipickerActions').appInitialized(m,this.props.logger,p);};l.prototype.componentDidMount=function(){'use strict';this.$Omnipicker1=new (c('SubscriptionsHandler'))();this.$Omnipicker1.addSubscriptions(c('OmnipickerPhotoStore').addListener(this.handlePhotosChangeEvent),c('OmnipickerPhotoSourceStore').addListener(this.handleSourceChangeEvent));this.$Omnipicker2=new (c('Waiter'))(function(){this.props.onDoneSelecting(c('OmnipickerPhotoStore').getSelectedPhotos(this.state.appID),this.state.sourceType);}.bind(this));};l.prototype.componentWillUnmount=function(){'use strict';this.$Omnipicker1.release();};l.prototype.componentDidUpdate=function(){'use strict';if(this.props.doneSelecting)this.$Omnipicker2.go();};l.prototype.render=function(){'use strict';var m=c('React').Children.map(this.props.children,function(n){var o={selectedSourceType:this.state.sourceType,appID:this.state.appID};if(n.type===c('OmnipickerPanelList.react'))Object.assign(o,{photoData:this.state.photoData[this.state.sourceType]||{},doneSelecting:this.props.doneSelecting});return c('React').cloneElement(n,o);}.bind(this));return c('React').createElement('div',null,m);};l.propTypes={doneSelecting:k.bool.isRequired,logger:k.instanceOf(c('OmnipickerWaterfallLogger')).isRequired,onDoneSelecting:k.func.isRequired,onPhotosChange:k.func};l.defaultProps={doneSelecting:false};f.exports=l;}),null);
__d('OmnipickerSelector.react',['cx','OmnipickerActions','PhotoSourceTypes','React','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.onClick=function(){c('OmnipickerActions').photoSourceSelected(this.props.appID,this.props.sourceType);}.bind(this),n;}l.prototype.render=function(){'use strict';return (c('React').createElement('li',{className:"_1ys7"},c('React').createElement('div',{className:"_1ys8"+(this.props.isSelected?' '+"selected":''),onClick:this.onClick,role:'button',tabIndex:'0'},c('React').createElement('div',{className:"_1ys9"},c('React').createElement('span',{className:c('joinClasses')("_1ysb",this.props.iconClass)}),c('React').createElement('span',{className:"_1ysc"},this.props.children)))));};l.propTypes={appID:k.string.isRequired,iconClass:k.string.isRequired,isSelected:k.bool.isRequired,sourceType:k.oneOf(Object.keys(c('PhotoSourceTypes'))).isRequired};f.exports=l;}),null);
__d('OmnipickerComputerSelector.react',['cx','fbt','OmnipickerSelector.react','PhotoSourceTypes','React'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';return (c('React').createElement(c('OmnipickerSelector.react'),babelHelpers['extends']({iconClass:"_5o68"},this.props),this.props.labelText));};function m(){'use strict';j.apply(this,arguments);}m.propTypes={labelText:l.string};m.defaultProps={sourceType:c('PhotoSourceTypes').COMPUTER,labelText:i._("Computer")};f.exports=m;}),null);
__d('OmnipickerDialog.react',['cx','fbt','DOM','Event','Keys','Link.react','OmnipickerConfig','React','SubscriptionsHandler','XUICloseButton.react','XUIDialog.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={doneSelecting:false,numPhotosSelected:0,numPhotosUploading:0,uploadProgress:0},this.getButtonLabel=function(){var s=this.state.numPhotosSelected;if(s===1)return i._("Use Photo");if(s>1)return i._("Use Photos ({number})",[i.param('number',s)]);return i._("Use Photos");}.bind(this),this.handleUsePhotos=function(){this.setState({doneSelecting:true});}.bind(this),this.handleKeyDownEvent=function(event){if(c('Event').getKeyCode(event)===c('Keys').ESC)this.props.onCancel();}.bind(this),this.handlePhotosChange=function(s,t){this.setState({numPhotosSelected:s,numPhotosUploading:t});}.bind(this),o;}m.prototype.componentDidMount=function(){'use strict';this.$OmnipickerDialog1=new (c('SubscriptionsHandler'))();this.$OmnipickerDialog1.addSubscriptions(c('Event').listen(document,'keydown',this.handleKeyDownEvent));};m.prototype.componentWillUnmount=function(){'use strict';this.$OmnipickerDialog1.release();};m.prototype.render=function(){'use strict';var n=this.state.doneSelecting||this.state.numPhotosSelected<1||this.state.numPhotosUploading>0,o=null;if(c('OmnipickerConfig').FEEDBACK_GROUP_PATH)o=c('React').createElement('div',{className:"_2srv"},c('React').createElement(c('Link.react'),{href:c('OmnipickerConfig').FEEDBACK_GROUP_PATH,target:'_blank'},'Omnipicker Feedback Group'));var p=c('React').Children.only(this.props.children);p=c('React').cloneElement(p,{onPhotosChange:this.handlePhotosChange,doneSelecting:this.state.doneSelecting});return (c('React').createElement(c('XUIDialog.react'),{shown:true,layerHideOnBlur:false,width:c('OmnipickerConfig').DIALOG_WIDTH,key:'dialog'},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},c('React').createElement('span',null,this.props.title),c('React').createElement(c('XUICloseButton.react'),{className:"_51-t",label:i._("Close"),onClick:this.props.onCancel})),p,c('React').createElement('div',{className:"_3bnc"},c('React').createElement(c('XUIDialogFooter.react'),{className:"_3bnd",leftContent:o},c('React').createElement(c('XUIDialogButton.react'),{action:'button',label:i._("Cancel"),onClick:this.props.onCancel,size:'xlarge'}),c('React').createElement(c('XUIDialogButton.react'),{className:"_3bne",use:'confirm',action:'confirm',size:'xlarge',disabled:n,label:this.getButtonLabel(),onClick:this.handleUsePhotos})))));};m.propTypes={onCancel:l.func.isRequired,title:l.string.isRequired};f.exports=m;}),null);
__d('OmnipickerDialogRenderer',['DOM','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';function h(i){this.$OmnipickerDialogRenderer1=i;this.$OmnipickerDialogRenderer2=i.props.$OmnipickerDialogRenderer2;if(!this.$OmnipickerDialogRenderer2){this.$OmnipickerDialogRenderer2=c('DOM').create('div');c('DOM').appendContent(document.body,this.$OmnipickerDialogRenderer2);}}h.prototype.show=function(){if(!this.$OmnipickerDialogRenderer2){this.$OmnipickerDialogRenderer2=c('DOM').create('div');c('DOM').appendContent(document.body,this.$OmnipickerDialogRenderer2);}c('ReactDOM').render(this.$OmnipickerDialogRenderer1,this.$OmnipickerDialogRenderer2);};h.prototype.hide=function(){c('ReactDOM').unmountComponentAtNode(this.$OmnipickerDialogRenderer2);c('DOM').remove(this.$OmnipickerDialogRenderer2);this.$OmnipickerDialogRenderer2=null;};h.prototype.isShowing=function(){return !!this.$OmnipickerDialogRenderer2;};f.exports=h;}),null);
__d('ExistingPhotoSelectionContainer',['BaseSelectionContainer'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('BaseSelectionContainer'));i=h&&h.prototype;function j(k,l,m){'use strict';i.constructor.call(this);this.$ExistingPhotoSelectionContainer1=k;this.$ExistingPhotoSelectionContainer2=l;this.$ExistingPhotoSelectionContainer3=m;}j.prototype.getExistingImageID=function(){'use strict';return this.$ExistingPhotoSelectionContainer1;};j.prototype.getSrc=function(){'use strict';return this.$ExistingPhotoSelectionContainer2;};j.prototype.getSource=function(){'use strict';return this.$ExistingPhotoSelectionContainer3;};j.prototype.hasPlaceholderUI=function(){'use strict';return true;};f.exports=j;}),null);
__d('ExistingPhotoPicker',['ArbiterMixin','mixin','FilePickerEvent','ExistingPhotoSelectionContainer'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.$ExistingPhotoPicker1=k;}j.prototype.begin=function(){'use strict';this.inform(c('FilePickerEvent').BEGIN);};j.prototype.select=function(k,l){'use strict';this.inform(c('FilePickerEvent').SELECTED,{sender:this,selections:[new (c('ExistingPhotoSelectionContainer'))(k,l,this.$ExistingPhotoPicker1)]});};f.exports=j;}),null);
__d('OmnipickerExistingPhotosPanelMixin.react',['cx','invariant','ExistingPhotoPicker','OmnipickerActions','OmnipickerPanelMixin.react','OmnipickerPhotoGrid.react','OmnipickerUploadSession','PhotoStore','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k={mixins:[c('OmnipickerPanelMixin.react')],propTypes:{initBatchSize:j.number,pageBatchSize:j.number,puwMethod:j.string.isRequired,setID:j.string.isRequired},componentWillMount:function l(){typeof this.getViewState==='function'||i(0);this.picker=new (c('ExistingPhotoPicker'))(this.props.selectionSource);c('OmnipickerUploadSession').addPicker(this.props.appID,this.picker,this.props.sourceType,this.props.puwMethod);},componentDidMount:function l(){this.getViewState().initViewState();this.picker.begin();},componentWillUnmount:function l(){this.getViewState().destroy();c('OmnipickerUploadSession').removePicker(this.props.appID,this.picker);},render:function l(){return (c('React').createElement('div',null,this.getThrobber(),this.getPhotoGrid()));},onViewStateChanged:function l(m){c('OmnipickerActions').existingPhotosFetched(this.props.appID,this.props.sourceType,m.media.filter(function(n){return !this.props.photoData[n.id];}.bind(this)));},onPhotoSelected:function l(m){this.picker.select(m,this.props.photoData[m].src);return false;},getPhotoGrid:function l(){if(!c('PhotoStore').hasBeenCreated(this.props.setID))return null;var m=null;if(!c('PhotoStore').hasBeenCreated(this.props.setID)||c('PhotoStore').hasNextPage(this.props.setID))m=function(){this.getViewState().fetchMore();}.bind(this);return (c('React').createElement(c('OmnipickerPhotoGrid.react'),{appID:this.props.appID,onPhotoSelected:this.onPhotoSelected,onScrollPositionThresholdReached:m,photos:this.props.photoData,photoSourceType:this.props.sourceType,showUploadProgress:false}));},getThrobber:function l(){if(c('PhotoStore').hasBeenCreated(this.props.setID))return null;return c('React').createElement('div',{className:"_j0-"});}};f.exports=k;}),null);
__d('ScrollablePhotoViewStateCore',['emptyFunction','SubscriptionsHandler'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.$ScrollablePhotoViewStateCore1=i.photoStore;this.$ScrollablePhotoViewStateCore2=i.viewer;this.$ScrollablePhotoViewStateCore3=i.setToken;this.$ScrollablePhotoViewStateCore4=i.updateCallback;this.$ScrollablePhotoViewStateCore5=i.subscribeUpdatePhotos;this.$ScrollablePhotoViewStateCore6=i.fetchInitData;this.$ScrollablePhotoViewStateCore7=i.initBatchSize;this.$ScrollablePhotoViewStateCore8=i.pageBatchSize;this.$ScrollablePhotoViewStateCore9=new (c('SubscriptionsHandler'))();}h.prototype.initViewState=function(){'use strict';this.$ScrollablePhotoViewStateCore9.addSubscriptions(this.$ScrollablePhotoViewStateCore5(this.updateData.bind(this)));if(this.$ScrollablePhotoViewStateCore1.hasBeenCreated(this.$ScrollablePhotoViewStateCore3)){var i=this.$ScrollablePhotoViewStateCore1.getAvailableRange(this.$ScrollablePhotoViewStateCore3).length;if(i>=this.$ScrollablePhotoViewStateCore7||!this.$ScrollablePhotoViewStateCore1.hasNextPage(this.$ScrollablePhotoViewStateCore3))this.syncState();return;}this.$ScrollablePhotoViewStateCore6(this.$ScrollablePhotoViewStateCore3);};h.prototype.hasNextPage=function(){'use strict';return (this.$ScrollablePhotoViewStateCore1.hasBeenCreated(this.$ScrollablePhotoViewStateCore3)&&this.$ScrollablePhotoViewStateCore1.hasNextPage(this.$ScrollablePhotoViewStateCore3));};h.prototype.fetchToIndex=function(i){'use strict';var j=this.$ScrollablePhotoViewStateCore1.getEndIndex(this.$ScrollablePhotoViewStateCore3),k=i-j;if(k<=0)return;this.$ScrollablePhotoViewStateCore1.getItemsAfterIndex(this.$ScrollablePhotoViewStateCore3,j,k,c('emptyFunction'));};h.prototype.fetchMore=function(i){'use strict';if(!this.hasNextPage())return;this.$ScrollablePhotoViewStateCore1.getItemsAfterIndex(this.$ScrollablePhotoViewStateCore3,this.$ScrollablePhotoViewStateCore1.getEndIndex(this.$ScrollablePhotoViewStateCore3),this.$ScrollablePhotoViewStateCore8,i||c('emptyFunction'));};h.prototype.destroy=function(){'use strict';this.$ScrollablePhotoViewStateCore9.release();};h.prototype.updateData=function(i){'use strict';if(i.set_id!=this.$ScrollablePhotoViewStateCore3)return;var j=i.query_results&&i.query_results.result_type;if(j=='init'){this.$ScrollablePhotoViewStateCore1.executePostCreate(this.$ScrollablePhotoViewStateCore3,function(){this.syncState();}.bind(this));}else this.syncState();};f.exports=h;}),null);
__d('fetchInitPhotoViewState',['AsyncRequest'],(function a(b,c,d,e,f,g){function h(i,j){new (c('AsyncRequest'))(i).setData({set:j}).send();}f.exports=h;}),null);
__d('subscribeToArbiterUpdatePhotos',['Arbiter'],(function a(b,c,d,e,f,g){function h(i){return c('Arbiter').subscribe('update-photos',function(j,k){i(k);});}f.exports=h;}),null);
__d('OmnipickerExistingPhotosViewState',['PhotoStore','ScrollablePhotoViewStateCore','URI','subscribeToArbiterUpdatePhotos','fetchInitPhotoViewState'],(function a(b,c,d,e,f,g){var h,i;function j(l,m){c('fetchInitPhotoViewState')(l,m);}h=babelHelpers.inherits(k,c('ScrollablePhotoViewStateCore'));i=h&&h.prototype;function k(l,m,n,o,p,q){'use strict';i.constructor.call(this,{fetchInitData:j.bind(null,p),initBatchSize:n,pageBatchSize:o,photoStore:c('PhotoStore'),setToken:m,subscribeUpdatePhotos:c('subscribeToArbiterUpdatePhotos'),updateCallback:q,viewer:l});this.$OmnipickerExistingPhotosViewState1=n;this.$OmnipickerExistingPhotosViewState2=m;this.$OmnipickerExistingPhotosViewState3=q;}k.prototype.syncState=function(){'use strict';this.$OmnipickerExistingPhotosViewState3({media:c('PhotoStore').getItemsInAvailableRange(this.$OmnipickerExistingPhotosViewState2),hasNextPage:c('PhotoStore').hasNextPage(this.$OmnipickerExistingPhotosViewState2)});};f.exports=k;}),null);
__d("XPagesManagerPostedPhotosController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/content_tab\/posted_photos\/",{set:{type:"String",required:true},size:{type:"Int",required:true}});}),null);
__d('OmnipickerPagePostedPhotosPanel.react',['ActorURI','OmnipickerConfig','OmnipickerExistingPhotosPanelMixin.react','OmnipickerExistingPhotosViewState','PhotoSourceTypes','PUWMethods','React','SelectionSource','XPagesManagerPostedPhotosController'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'OmnipickerPagePostedPhotosPanel',mixins:[c('OmnipickerExistingPhotosPanelMixin.react')],_viewState:null,propTypes:{pageID:h.string.isRequired},getDefaultProps:function j(){return {initBatchSize:20,pageBatchSize:16,puwMethod:c('PUWMethods').RECENT_PHOTOS,selectionSource:c('SelectionSource').PAGES_POSTED_PHOTOS,setID:c('OmnipickerConfig').POSTED_PHOTOS_SET_ID,sourceType:c('PhotoSourceTypes').PAGES_POSTED_PHOTOS};},componentWillMount:function j(){var k=c('ActorURI').create(c('XPagesManagerPostedPhotosController').getURIBuilder().setString('set',this.props.setID).setInt('size',this.props.initBatchSize).getURI(),this.props.pageID);this._viewState=new (c('OmnipickerExistingPhotosViewState'))(this,this.props.setID,this.props.initBatchSize,this.props.pageBatchSize,k,this.onViewStateChanged);},getViewState:function j(){return this._viewState;}});f.exports=i;}),null);
__d('OmnipickerPagePostedPhotosSelector.react',['cx','fbt','OmnipickerSelector.react','PhotoSourceTypes','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){return (c('React').createElement(c('OmnipickerSelector.react'),babelHelpers['extends']({iconClass:"_2_y4"},this.props),this.props.labelText));};function m(){j.apply(this,arguments);}m.propTypes={labelText:l.node};m.defaultProps={sourceType:c('PhotoSourceTypes').PAGES_POSTED_PHOTOS,labelText:i._("Page Photos")};f.exports=m;}),null);
__d('OmnipickerSelectorList.react',['cx','PhotoSourceTypes','React'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){'use strict';var m=c('React').Children.map(this.props.children,function(n){if(!n)return;return c('React').cloneElement(n,{isSelected:n.props.sourceType===this.props.selectedSourceType,appID:this.props.appID});}.bind(this));return (c('React').createElement('div',{className:"_1n6_"},c('React').createElement('ul',null,m)));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={appID:k.string,selectedSourceType:k.oneOf(Object.keys(c('PhotoSourceTypes')))};f.exports=l;}),null);
__d('ProductVideoChunkedUploader',['AdsVideoUploadEvents','AdsVideoUploadSession','AdsVideoUploadUtil','URI','VideoUploader','VideoUploadFile','VideoUploadProgressBar'],(function a(b,c,d,e,f,g){var h,i,j='/v2.4',k='graph-video';h=babelHelpers.inherits(l,c('VideoUploader'));i=h&&h.prototype;function l(m){'use strict';var n=m.config,o=new (c('URI'))(j+'/'+m.target_id+'/videos?'+'access_token='+m.access_token).setSubdomain(k).toString(),p={start_uri:o,receive_uri:o,post_uri:o,chunk_start_uri:o,chunk_receive_uri:o,chunk_post_uri:o,min_size:n.minSize,min_width:n.minWidth,min_height:n.minHeight,min_length:n.minLength,max_size:n.maxSize,max_length:n.maxLength,extensions:n.extensions,logging_delay:n.loggingDelay,max_transport_retries:n.maxTransportRetries,transport_retry_interval_base:n.transportRetryIntervalBase,max_server_retries:n.maxServerRetries,server_retry_interval_base:n.serverRetryIntervalBase,source:m.source,target_id:m.target_id,target_type:m.target_type};i.constructor.call(this,p);this.$ProductVideoChunkedUploader1='';}l.prototype.getUploadTime=function(){'use strict';if(this.__getSession()!==null)return this.__getSession().getUploadTime();return null;};l.prototype.getEncodingTime=function(){'use strict';if(this.__getSession()!==null)return this.__getSession().getEncodingTime();return null;};l.prototype.abort=function(){'use strict';this.cancel();};l.prototype.upload=function(m){'use strict';var n=m.getFileInput();this.$ProductVideoChunkedUploader1=c('AdsVideoUploadUtil').getVideoTitle(n);i.upload.call(this,m);};l.prototype.__getVideoUploadSession=function(m){'use strict';return new (c('AdsVideoUploadSession'))(m);};l.prototype.getVideoTitle=function(){'use strict';return this.$ProductVideoChunkedUploader1;};l.prototype.__createSession=function(m){'use strict';return new (c('AdsVideoUploadSession'))(m);};l.prototype.__getEventsWhichShouldListenFromSession=function(){'use strict';var m=i.__getEventsWhichShouldListenFromSession.call(this);m.push(c('AdsVideoUploadEvents').ENCODING_SUCCESS,c('AdsVideoUploadEvents').ENCODING_ERROR);return m;};l.prototype.__getEventsForWhichSessionShouldBeSetToNull=function(){'use strict';return ['upload-failed',c('AdsVideoUploadEvents').ENCODING_SUCCESS,c('AdsVideoUploadEvents').ENCODING_ERROR];};l.prototype.__delegateEvent=function(event,m){'use strict';var n=null;if(event==='upload-progressed'){var o=c('VideoUploadProgressBar').computeProgress(m.start_offset,m.sent_bytes,m.file_size,0,0);n=o/100;}else if(event==='upload-finished'){this.post({});}else if(event==='post-finished'){n=m.video_id;}else if(event==='post-failed')event='upload-failed';i.__delegateEvent.call(this,event,n);};f.exports=l;}),null);
__d('PageContentTabProductUploadVideoButton.react',['cx','fbt','AdsVideoUploadConfig','AdsVideoUploadEvents','AsyncRequest','FileInput.react','GraphAPI','Link.react','ProductVideoChunkedUploader','React','VideoUploadFile','VideoUploadTargetType','XUIGrayText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=1000,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={videoUploaders:[],lastEncodingStatusCheckTimes:[]},this.$PageContentTabProductUploadVideoButton1=function(){var t=this.refs.fileInput.getFileInput().getInput(),u=c('VideoUploadFile').fromFileInput(t),v=new (c('ProductVideoChunkedUploader'))({config:c('AdsVideoUploadConfig'),source:'product_edit_tool',target_id:this.props.productCatalogID,target_type:c('VideoUploadTargetType').PRODUCT_CATALOG,access_token:this.props.pageContentTabAccessToken}),w=this.state.videoUploaders.length;v.subscribe('upload-failed',this.$PageContentTabProductUploadVideoButton2.bind(this,w));v.subscribe(c('AdsVideoUploadEvents').UPLOAD_ERROR,this.$PageContentTabProductUploadVideoButton2.bind(this,w));v.subscribe('post-failed',this.$PageContentTabProductUploadVideoButton2.bind(this,w));v.subscribe('post-finished',this.$PageContentTabProductUploadVideoButton3.bind(this,w));this.props.onVideoSelected(w);v.upload(u);var x=this.state.videoUploaders;x[w]=v;this.setState({videoUploaders:x});}.bind(this),this.$PageContentTabProductUploadVideoButton2=function(t){this.props.onVideoUploadError(t);}.bind(this),this.$PageContentTabProductUploadVideoButton3=function(t){this.$PageContentTabProductUploadVideoButton4(t);}.bind(this),this.$PageContentTabProductUploadVideoButton4=function(t){var u=this.state.lastEncodingStatusCheckTimes[t]+l,v=Math.max(0,u-Date.now());setTimeout(this.$PageContentTabProductUploadVideoButton5.bind(this,t),v);}.bind(this),this.$PageContentTabProductUploadVideoButton5=function(t){var u=this.$PageContentTabProductUploadVideoButton6(t),v=this.state.lastEncodingStatusCheckTimes;v[t]=Date.now();this.setState({lastEncodingStatusCheckTimes:v});new (c('AsyncRequest'))().setURI('/ajax/video/encode/feedback/ping/').setData({video_id:u}).setHandler(this.$PageContentTabProductUploadVideoButton7.bind(this,t)).send();}.bind(this),this.$PageContentTabProductUploadVideoButton7=function(t,u){var v=this.$PageContentTabProductUploadVideoButton6(t),w=u.payload;if(w)if(w.is_ready){c('GraphAPI')('2.3').object('video',v).edge('thumbnails').get({access_token:this.props.pageContentTabAccessToken}).done(this.$PageContentTabProductUploadVideoButton8.bind(this,t));}else if(w.error){this.$PageContentTabProductUploadVideoButton2(t);}else this.$PageContentTabProductUploadVideoButton4(t);}.bind(this),this.$PageContentTabProductUploadVideoButton8=function(t,u){var v=this.$PageContentTabProductUploadVideoButton6(t),w=u.data;if(w)for(var x=0;x<w.length;x++)if(w[x].is_preferred){this.props.onVideoUploadFinished(t,v,w[x].uri);return;}}.bind(this),this.$PageContentTabProductUploadVideoButton6=function(t){return this.state.videoUploaders[t].getUploadSession().getVideoID();}.bind(this),p;}n.prototype.render=function(){return c('React').createElement(c('FileInput.react'),{name:'video',ref:'fileInput',onChange:this.$PageContentTabProductUploadVideoButton1},c('React').createElement(c('Link.react'),{className:"_25dc"},c('React').createElement('div',{className:"_25dd _25de"},c('React').createElement(c('XUIGrayText.react'),{className:"_25df",size:'small',display:'block'},i._("Add Videos")))));};n.propTypes={onVideoSelected:m.func.isRequired,onVideoUploadError:m.func.isRequired,onVideoUploadFinished:m.func.isRequired,pageContentTabAccessToken:m.string.isRequired,productCatalogID:m.string.isRequired};f.exports=n;}),null);
__d("XPagesManagerProductPhotoUploadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/upload\/file\/product\/photo\/",{waterfall_id:{type:"String"}});}),null);
__d('PageProductPhotoEditButton.react',['cx','fbt','ActorURI','Arbiter','AsyncRequest','BOFSellerLogger','BOFSellerLoggerEvent','ReactComposerPhotoActions','PhotoEditorTargetType','XPagesManagerProductPhotoUploadController','React','Tooltip','XComposerPhotoUploader','XStickerPhotoEditorController'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.componentDidMount=function(){c('Arbiter').subscribe('PageProductPhotoEditor/newImage'+this.props.composerID,this.$PageProductPhotoEditButton2.bind(this));};m.prototype.render=function(){var n=i._("Edit Photo");return (c('React').createElement('button',babelHelpers['extends']({className:"_k4v",onClick:this.$PageProductPhotoEditButton3.bind(this)},c('Tooltip').propsFor(n)),c('React').createElement('div',{className:"_k4w"})));};m.prototype.$PageProductPhotoEditButton3=function(){if(this.$PageProductPhotoEditButton1)return;c('BOFSellerLogger').log(c('BOFSellerLoggerEvent').ACTN_EDIT_PHOTO_CLICK,this.props.pageID,{target_class:'Photo',target_id:this.props.photoID});var n=void 0,o=void 0;if(this.props.photoID==parseInt(this.props.photoID,10)){n=parseInt(this.props.photoID,10);o='';}else{n=0;o=this.props.photoID;}var p=c('ActorURI').create(c('XStickerPhotoEditorController').getURIBuilder().setString('grid_id',this.props.composerID).setEnum('target_type',c('PhotoEditorTargetType').PAGE_PRODUCT_COMPOSER).setInt('photo_fbid',n).setString('encrypted_photo_id',o).getURI(),this.props.pageID);this.$PageProductPhotoEditButton1=new (c('AsyncRequest'))(p).setFinallyHandler(function(){this.$PageProductPhotoEditButton1=null;}.bind(this)).send();c('ReactComposerPhotoActions').startPhotoEdit(this.props.composerID,null);};m.prototype.$PageProductPhotoEditButton2=function(n,o){var p=c('ActorURI').create(c('XPagesManagerProductPhotoUploadController').getURIBuilder().getURI(),this.props.pageID),q=o.encryptedID||o.fbid,r=new (c('XComposerPhotoUploader'))({uploadEndpoint:p,onUploadSuccess:function(s,t){this.props.onPhotoEdited(q,t.response.payload[0]);}.bind(this)});r.getAsyncUploadRequest([o.blob]).send();};function m(){j.apply(this,arguments);}m.propTypes={composerID:l.string.isRequired,onPhotoEdited:l.func.isRequired,pageID:l.string.isRequired,photoID:l.string.isRequired};f.exports=m;}),null);
__d('PageContentTabProductPhotoUploader.react',['cx','fbt','invariant','ActorURI','AudienceManagerEngagementVideoSelectionError.react','Image.react','Link.react','Omnipicker.react','ComputerPanel.react','OmnipickerComputerSelector.react','OmnipickerDialog.react','OmnipickerDialogRenderer','OmnipickerPagePostedPhotosPanel.react','OmnipickerPagePostedPhotosSelector.react','OmnipickerPanelList.react','OmnipickerSelectorList.react','OmnipickerWaterfallLogger','PageContentTabProductUploadVideoButton.react','PageProductPhotoEditButton.react','XPagesManagerProductPhotoUploadController','PUWApplications','PUWSteps','React','WaterfallIDGenerator','XUICloseButton.react','XUIError.react','XUIGrayText.react','XUISpinner.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('React').PropTypes,l=c('React').createClass({displayName:'PageContentTabProductPhotoUploader',_waterfallLogger:c('OmnipickerWaterfallLogger'),propTypes:{className:k.string,maxPhotosCount:k.number,pageID:k.string.isRequired,onPhotoEdited:k.func,onPhotosSelected:k.func.isRequired,onPhotoRemoved:k.func.isRequired,photos:k.array.isRequired,photoEditingEnabled:k.bool.isRequired,productCatalogID:k.string,pageContentTabAccessToken:k.string,videos:k.array,onVideoSelected:k.func,onVideoUploadFinished:k.func,onVideoUploadError:k.func,onVideoRemoved:k.func,showVideoUploadButton:k.bool,xuiError:k.any},getInitialState:function m(){var n={fileUploadURI:c('ActorURI').create(c('XPagesManagerProductPhotoUploadController').getURIBuilder().getURI(),this.props.pageID)};this._waterfallLogger=new (c('OmnipickerWaterfallLogger'))(c('PUWApplications').WEB_PRODUCT_PHOTO_OMNIPICKER,c('WaterfallIDGenerator').generate());return {dialogRenderer:new (c('OmnipickerDialogRenderer'))(c('React').createElement(c('OmnipickerDialog.react'),{onCancel:this.onPickerCancel,title:i._("Select Photo")},c('React').createElement(c('Omnipicker.react'),{logger:this._waterfallLogger,onDoneSelecting:this.onPickerAddPhotos},c('React').createElement(c('OmnipickerSelectorList.react'),null,c('React').createElement(c('OmnipickerComputerSelector.react'),null),c('React').createElement(c('OmnipickerPagePostedPhotosSelector.react'),null)),c('React').createElement(c('OmnipickerPanelList.react'),null,c('React').createElement(c('ComputerPanel.react'),{config:n}),c('React').createElement(c('OmnipickerPagePostedPhotosPanel.react'),{pageID:this.props.pageID})))))};},onPickerCancel:function m(){this.state.dialogRenderer.hide();this._waterfallLogger.logStep(c('PUWSteps').CLIENT_FLOW_CANCEL);},onPickerAddPhotos:function m(n){this.state.dialogRenderer.hide();this.props.onPhotosSelected(n);},render:function m(){var n=null,o=null,p=this.props.photos.length;if(this.props.videos)p+=this.props.videos.length;if(!this.props.maxPhotosCount||p<this.props.maxPhotosCount){n=this._renderAddPhotoLink();o=this._renderAddVideoLink();}return (c('React').createElement('div',{className:this.props.className},this._renderUploadedMedia(),n,o));},_renderUploadedPhoto:function m(n){var o=null;if(this.props.photoEditingEnabled)o=c('React').createElement(c('PageProductPhotoEditButton.react'),{composerID:this._waterfallLogger.getWaterfallID(),onPhotoEdited:this.props.onPhotoEdited,pageID:this.props.pageID,photoID:n.fbid});return (c('React').createElement('div',{key:n.fbid,className:"_5m94"},c('React').createElement(c('XUICloseButton.react'),{className:"_5m95",size:'medium',shade:'light',onClick:function(p){return this.props.onPhotoRemoved(n);}.bind(this)}),c('React').createElement(c('Image.react'),{className:"_19tc",src:n.src}),o,c('React').createElement('div',{className:"_19td"})));},_renderUploadedVideo:function m(n){var o=null;if(!n.ready&&!n.error)o=c('React').createElement(c('XUISpinner.react'),{className:"_37cg",size:'large'});var p=null;if(n.error)p=c('React').createElement('div',{className:"_37ch"},c('React').createElement(c('AudienceManagerEngagementVideoSelectionError.react'),{mainLabel:i._("Upload failed")}));return (c('React').createElement('div',{key:n.fbid,className:"_5m94"},c('React').createElement(c('XUICloseButton.react'),{className:"_5m95",size:'medium',shade:'light',onClick:function(){this.props.onVideoRemoved||j(0);this.props.onVideoRemoved(n);}.bind(this)}),c('React').createElement(c('Image.react'),{className:"_19tc",src:n.src}),o,p,c('React').createElement('div',{className:"_37cj"}),c('React').createElement('div',{className:"_37cm"},c('React').createElement('div',{className:"_37cn"})),c('React').createElement('div',{className:"_19td"})));},_renderUploadedMedia:function m(){var n=this.props.videos&&this.props.onVideoRemoved?this.props.videos.map(this._renderUploadedVideo):[],o=this.props.photos.map(this._renderUploadedPhoto);return n.concat(o);},_renderAddPhotoLink:function m(){return (c('React').createElement(c('Link.react'),{className:"_3ff7",ref:'uploadButton',onClick:this._onPickerLaunch},c('React').createElement(c('XUIError.react'),{xuiError:this.props.xuiError},c('React').createElement('div',{className:"_22to _19tc"},c('React').createElement(c('XUIGrayText.react'),{className:"_3ff8",size:'small',display:'block'},i._("Add Photos"))))));},_renderAddVideoLink:function m(){if(!this.props.showVideoUploadButton||!this.props.onVideoSelected||!this.props.onVideoUploadFinished||!this.props.onVideoUploadError||!this.props.productCatalogID||!this.props.pageContentTabAccessToken)return null;return (c('React').createElement(c('PageContentTabProductUploadVideoButton.react'),{productCatalogID:this.props.productCatalogID,onVideoSelected:this.props.onVideoSelected,onVideoUploadFinished:this.props.onVideoUploadFinished,onVideoUploadError:this.props.onVideoUploadError,pageContentTabAccessToken:this.props.pageContentTabAccessToken}));},_onPickerLaunch:function m(){this._waterfallLogger.logStep(c('PUWSteps').CLIENT_FLOW_BEGIN);this.state.dialogRenderer.show();}});f.exports=l;}),null);
__d('PageContentTabConfirmationDialog.react',['fbt','LayerHideOnEscape','LayerFadeOnHide','React','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){'use strict';var m=this.props.cancelLabel||h._("Cancel");return (c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerHideOnEscape:c('LayerHideOnEscape'),LayerFadeOnHide:c('LayerFadeOnHide')},shown:true,width:450},c('React').createElement(c('XUIDialogTitle.react'),null,this.props.title),c('React').createElement(c('XUIDialogBody.react'),null,this.props.body),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:m,use:'default'}),c('React').createElement(c('XUIDialogButton.react'),{'data-testid':'page_content_tab_confirm_button',action:'cancel',label:this.props.confirmationLabel,onClick:this.props.onConfirm,use:'confirm'}))));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={cancelLabel:k.string,title:k.string.isRequired,body:k.string.isRequired,confirmationLabel:k.string.isRequired,onConfirm:k.func.isRequired};f.exports=l;}),null);
__d('PageContentTabTextUtils',[],(function a(b,c,d,e,f,g){'use strict';var h={getPostID:function i(j){var k=j.split('_');return k.pop();}};f.exports=h;}),null);
__d('PageContentTabCommonConfig',['DOM','React','ReactDOM','LayerFadeOnHide','LayerHideOnEscape','PageContentTabConfirmationDialog.react','PageContentTabConstants','PageContentTabTextUtils','XUIDialog.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogOkayButton.react','XUIDialogTitle.react'],(function a(b,c,d,e,f,g){'use strict';var h=c('PageContentTabConstants').COLUMNS,i={getValueFromInsight:function j(k){if(k.values&&k.values.length===1)return k.values[0].value.toString();return "0";},maxInsightValue:function j(k,l){var m=0;k.forEach(function(n){var o=n.insights&&n.insights.data;(o||[]).forEach(function(p){if(p.name===l){var q=i.getValueFromInsight(p);m=Math.max(m,parseInt(q,10));}});});return m;},maxProductInsightValue:function j(k,l){var m=0;k.forEach(function(n){var o=l.map(function(q){return n.commerce_insights[q];}),p=o.reduce(function(q,r){return q+r;});m=Math.max(m,p?p:0);});return m;},showErrorDialog:function j(k,l){c('ReactDOM').render(c('React').createElement(c('XUIDialog.react'),{shown:true,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide'),LayerHideOnEscape:c('LayerHideOnEscape')},width:600},c('React').createElement(c('XUIDialogTitle.react'),null,c('React').createElement('span',null,k)),c('React').createElement(c('XUIDialogBody.react'),null,l),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogOkayButton.react'),{use:'confirm',action:'cancel'}))),c('DOM').create('div'));},showConfirmationDialog:function j(k,l,m,n,o){c('ReactDOM').render(c('React').createElement(c('PageContentTabConfirmationDialog.react'),{cancelLabel:o,title:k,body:l,confirmationLabel:m,onConfirm:n}),c('DOM').create('div'));},createScheduledPostRow:function j(k,l){var m=i.createDraftPostRow(k,l);m[h.SCHEDULED_PUBLISH_TIME]={time:k.scheduled_publish_time,admin:k.admin_creator&&k.admin_creator.name};m[h.PROMOTION_STATUS]=k.promotion_info;m[h.ID]=c('PageContentTabTextUtils').getPostID(k.id);return m;},createDraftPostRow:function j(k,l){return i._createUnpublishedPostRowBase(k,l);},_createUnpublishedPostRowBase:function j(k,l){var m={};m[h.POST]={id:k.id,text:k.message,img:k.thumbnail||l.picture&&l.picture.url,url:k.permalink_url,owner:l.page_id,place:k.place,og_action_summary:k.og_action_summary};m[h.DATE_CREATED]={time:k.creation_time,admin:k.admin_creator&&k.admin_creator.name};m[h.DATE_LAST_MODIFIED]={edit_actions:k.edit_actions&&k.edit_actions.data,modified_time:k.modified_time};m[h.LOCATION_LANGUAGE]=k.privacy_description;return m;}};f.exports=i;}),null);
__d("XPagesManagerProductDeleteController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/content_tab\/products\/product_delete\/",{group_ids:{type:"StringVector"}});}),null);
__d('PageProductActions',['fbt','ActorURI','AsyncRequest','PageContentTabCommonConfig','PageContentTabDispatcher','PageContentTabLoadingDialog','XPagesManagerProductDeleteController'],(function a(b,c,d,e,f,g,h){'use strict';var i={deleteProducts:function j(k,l,m){c('PageContentTabLoadingDialog').show();var n=c('ActorURI').create(c('XPagesManagerProductDeleteController').getURIBuilder().setStringVector('group_ids',k).getURI(),l);new (c('AsyncRequest'))(n).setMethod('POST').setHandler(function(o){k.forEach(function(p){return c('PageContentTabDispatcher').handlePostRemoved(l,p);});}).setFinallyHandler(function(){c('PageContentTabLoadingDialog').hide();m&&m();}).send();},deleteProductsWithConfirmation:function j(k,l,m){var n=k.length===1?h._("Deleting this product will remove it from your shop"):h._("Deleting these products will remove them from your shop");c('PageContentTabCommonConfig').showConfirmationDialog(h._({"Product":"Delete Product?","Products":"Delete Products?"},[h['enum'](k.length===1?'Product':'Products',{Product:'Product',Products:'Products'})]),n,h._({"product":"Delete product","products":"Delete products"},[h['enum'](k.length===1?'product':'products',{product:'product',products:'products'})]),i.deleteProducts.bind(i,k,l,m),null);}};f.exports=i;}),null);
__d('PageProductComposerShippingOptions.react',['ix','cx','fbt','xuiglyph','CommerceSelfServeUI','CurrencyInput.atlas','Image.react','LeftRight.react','Link.react','React','XUIGrayText.react','XUIText.react','XUITextInput.react'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m,n=c('React').PropTypes;l=babelHelpers.inherits(o,c('React').Component);m=l&&l.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=m.constructor).call.apply(p,[this].concat(s)),this.$PageProductComposerShippingOptions1=function(){return {shipping_country:'US',shipping_price_currency:this.props.currencyCode,shipping_price_value:0,shipping_service:null};}.bind(this),this.$PageProductComposerShippingOptions2=function(u,v){var w=this.props.shippingOptions;w[u].shipping_service=v;this.props.onShippingOptionsChange(w);}.bind(this),this.$PageProductComposerShippingOptions3=function(u,v){var w=this.props.shippingOptions;w[u].shipping_price_value=v;this.props.onShippingOptionsChange(w);}.bind(this),this.$PageProductComposerShippingOptions5=function(){var u=this.props.shippingOptions;u[u.length]=this.$PageProductComposerShippingOptions1();this.props.onShippingOptionsChange(u);}.bind(this),this.$PageProductComposerShippingOptions4=function(u){var v=this.props.shippingOptions;v.splice(u,1);this.props.onShippingOptionsChange(v);var w=u>0?u-1:0;this.refs[w].focusInput();}.bind(this),q;}o.prototype.componentWillMount=function(){if(this.props.shippingOptions.length===0)this.props.onShippingOptionsChange([this.$PageProductComposerShippingOptions1()]);};o.prototype.componentWillReceiveProps=function(p){if(p.shippingOptions.length===0)this.props.onShippingOptionsChange([this.$PageProductComposerShippingOptions1()]);};o.prototype.render=function(){var p=this.props.shippingOptions.length,q=h("images\/mobile\/glyph\/cross_light-grey_s.png"),r=[];this.props.shippingOptions.forEach(function(x){var y=x.shipping_service,z=r.length;r[z]=c('React').createElement('tr',{className:"_5b1f",key:'option-'+z},c('React').createElement('td',{className:"_b3y"},c('React').createElement(c('XUITextInput.react'),{className:"_2mfs",disabled:this.props.disabled,height:'tall',value:y,placeholder:j._("Shipping method name"),onChange:function(aa){return this.$PageProductComposerShippingOptions2(z,aa.target.value);}.bind(this),ref:z})),c('React').createElement('td',{className:"_b3z"},c('React').createElement(c('CurrencyInput.atlas'),{className:"_5rpn",currency:x.shipping_price_currency,disabled:this.props.disabled,isZeroValidValue:true,value:Number(x.shipping_price_value)/100,onChange:function(aa){return this.$PageProductComposerShippingOptions3(z,aa*100);}.bind(this)})),p>c('CommerceSelfServeUI').MIN_SHIPPING_OPTIONS?c('React').createElement('td',{className:"_b3-"},c('React').createElement(c('Link.react'),{onClick:function(aa){this.props.disabled?null:this.$PageProductComposerShippingOptions4(z);}.bind(this)},c('React').createElement(c('Image.react'),{className:"_2_qb",src:q}))):null);}.bind(this));var s=void 0,t=c('React').createElement(c('XUIText.react'),{size:'small'},j._("Add Shipping Method"));if(p>=c('CommerceSelfServeUI').MAX_SHIPPING_OPTIONS){var u=j._("You have reached the maximum number of shipping options.");s=c('React').createElement(c('Link.react'),{'data-hover':'tooltip','data-tooltip-content':u,onClick:function x(y){return y.stopPropagation();}},t);}else s=c('React').createElement(c('Link.react'),{onClick:this.props.disabled?null:this.$PageProductComposerShippingOptions5},t);var v=null;if(this.props.settingsURI)v=c('React').createElement(c('Link.react'),{className:"_3-9b",href:this.props.settingsURI,target:'_blank'},j._("Edit Default Shipping Options"));var w=null;if(!this.props.hideTitle)w=c('React').createElement('div',{className:"_3-94"},c('React').createElement(c('XUIGrayText.react'),{display:'block',weight:'bold',shade:'dark',size:'small'},j._("Shipping Options"),v),c('React').createElement(c('XUIGrayText.react'),{shade:'light',size:'small'},j._("Customers will only be charged one shipping fee per order, even if they order more than one of this item.")));return c('React').createElement('div',{className:"_4qx _2pid"},w,c('React').createElement('table',{className:"_b40"},c('React').createElement('tbody',null,r)),c('React').createElement('div',{className:"_2pic _2pir"},s));};o.propTypes={currencyCode:n.string.isRequired,disabled:n.bool,hideTitle:n.bool,settingsURI:n.object,shippingOptions:n.arrayOf(n.shape({shipping_country:n.string,shipping_price_currency:n.string,shipping_price_value:n.number,shipping_service:n.string})).isRequired,onShippingOptionsChange:n.func.isRequired};f.exports=o;}),null);
__d('PageProductComposerTaxCategorySelector.react',['cx','fbt','invariant','AdsHelpLink.react','BUIFormSelector.react','CommerceSelfServeProductTaxCategories','React','XUIGrayText.react','forEachObject'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('BUIFormSelector.react').Option,n=c('React').PropTypes;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.$PageProductComposerTaxCategorySelector1=function(u){c('CommerceSelfServeProductTaxCategories').hasOwnProperty(u)||j(0);switch(c('CommerceSelfServeProductTaxCategories')[u]){case c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_SPORT_RECREATION:return i._("Sports and Recreation");case c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_CLOTHING:return i._("Clothing");case c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_SHOES:return i._("Shoes");case c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_LUGGAGE_BAGS:return i._("Luggage\/Bags");case c('CommerceSelfServeProductTaxCategories').TAX_ITME_CODE_COMMERCE_PERSONAL_CARE:return i._("Personal Care");case c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_JEWELRY:return i._("Jewelry");case c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_WATCHES:return i._("Watches");case c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_OTHERS:return i._("Other physical goods");default:j(0);}},q;}o.prototype.render=function(){var p=[];c('forEachObject')(c('CommerceSelfServeProductTaxCategories'),function(q,r){if(q!==c('CommerceSelfServeProductTaxCategories').NONE&&q!==c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_SPORT_RECREATION_BAD)p.push(c('React').createElement(m,{value:q,key:'UNSPSC_'+q},this.$PageProductComposerTaxCategorySelector1(r)));}.bind(this));return c('React').createElement('div',{className:"_3-8x"},c('React').createElement(c('XUIGrayText.react'),{className:"_3-94",display:'block',weight:'bold',shade:'dark',size:'small'},i._("Product Category"),c('React').createElement(c('AdsHelpLink.react'),{width:350,position:'below'},i._("This category is used to calculate taxes. You can also enter a tax rate under Custom Product Taxes in Advanced Options."))),c('React').createElement(c('BUIFormSelector.react'),{density:'snug',onChange:this.props.onTaxCategoryChange,value:this.props.taxCategory},p));};o.propTypes={onTaxCategoryChange:n.func,taxCategory:n.number};o.defaultProps={taxCategory:c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_OTHERS};f.exports=o;}),null);
__d('PageProductReviewNUX.react',['cx','fbt','React','ReactLayeredComponentMixin_DEPRECATED','XUIDialog.react','XUIDialogBody.react','XUICloseButton.react','XUIDialogFooter.react','XUIDialogOkayButton.react','XUIGrayText.react','classWithMixins','mixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=500;j=babelHelpers.inherits(n,c('classWithMixins')(c('React').Component,c('mixin')(c('ReactLayeredComponentMixin_DEPRECATED'))));k=j&&j.prototype;function n(){k.constructor.call(this);this.state={dialogShown:true};}n.prototype.render=function(){return c('React').createElement('span',null);};n.prototype.renderLayers=function(){if(!this.state.dialogShown)return {};return {dialog:c('React').createElement(c('XUIDialog.react'),{width:m,onToggle:function(o){return this.$PageProductReviewNux1.bind(this,o);}.bind(this),shown:this.state.dialogShown,layerHideOnBlur:false},c('React').createElement('div',{className:"_2pie _2pij"},c('React').createElement(c('XUICloseButton.react'),{label:this.props.closeButtonText,className:"layerCancel rfloat"})),c('React').createElement(c('XUIDialogBody.react'),{className:"_4o_9"},c('React').createElement('h1',{className:"_4o_a"},this.$PageProductReviewNux2()),c('React').createElement(c('XUIGrayText.react'),{size:'medium'},this.$PageProductReviewNux3())),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogOkayButton.react'),{use:'confirm',action:'button',onClick:this.$PageProductReviewNux1.bind(this,false)})))};};n.prototype.$PageProductReviewNux2=function(){return i._("You just added your first product!");};n.prototype.$PageProductReviewNux3=function(){return i._("All products are processed before they are visible to your customers. You will receive a notification when this is done, usually within a few minutes.");};n.prototype.$PageProductReviewNux1=function(o){this.setState({dialogShown:o});if(!o&&this.props.onDialogClosed)this.props.onDialogClosed();};n.propTypes={onDialogClosed:l.func};f.exports=n;}),null);
__d('ProductVisibilitySelector.react',['fbt','BUIFormSelector.react','ProductVisibility','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('BUIFormSelector.react').Option,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.render=function(){var n=this.props,o=n.onChange,p=n.value,q=babelHelpers.objectWithoutProperties(n,['onChange','value']);return (c('React').createElement(c('BUIFormSelector.react'),babelHelpers['extends']({onChange:function(r){function s(t){return r.apply(this,arguments);}s.toString=function(){return r.toString();};return s;}(function(r){return o(r.value);}),value:p},q),c('React').createElement(k,{value:c('ProductVisibility').PUBLISHED},h._("Public")),c('React').createElement(k,{value:c('ProductVisibility').STAGING},h._("Unpublished"))));};function m(){i.apply(this,arguments);}m.propTypes=babelHelpers['extends']({onChange:l.func.isRequired,value:l.string.isRequired},c('BUIFormSelector.react').propTypes);f.exports=m;}),null);
__d("XPagesManagerFeaturedItemsCountController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/content_tab\/featured_items_count\/",{});}),null);
__d("XPagesManagerProductCreateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/content_tab\/products\/product_create\/",{});}),null);
__d("XPagesManagerProductVariantsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/content_tab\/product_variants\/",{product_group_id:{type:"String",required:true}});}),null);
__d("XPagesManagerProductViewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/content_tab\/product\/",{product_id:{type:"String",required:true}});}),null);
__d('PageProductComposerDialog.react',['ix','cx','fbt','AdsCurrencyFormatter','AdsHelpLink.react','AsyncRequest','ActorURI','BOFSellerLogger','BOFSellerLoggerEvent','BOFSellerLoggingSources','BUIFormButton.react','CommerceCurrencySelector.react','CommerceExceptionHandlerMixin.react','CommerceSelfServeSection','CommerceSelfServeProductTaxCategories','CommerceSelfServeProductTaxRatesTable.react','Currency','AdsCurrencyInput.react','DOM','FBToggleSwitch.react','InlineBlock.react','Image.react','Link.react','NumberInput.atlas','PageCommerceProductVariantPage.react','PageContentTabDispatcher','PageContentTabProductPhotoUploader.react','PagesManagerProductToolsConstants','PageProductActions','PageProductComposerShippingOptions.react','PageProductComposerTaxCategorySelector.react','PageProductReviewNUX.react','PageSettingsRef','PECurrency','ProductVisibility','ProductVisibilitySelector.react','React','ReactDOM','TextAreaWithLineLimit.react','URI','XCommerceSelfServeParam','XPagesManagerFeaturedItemsCountController','XPagesManagerProductCreateController','XPagesManagerProductVariantsController','XPagesManagerSettingsController','XPagesManagerProductViewController','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogHeader.react','XUIDialogHeaderTitle.react','XUIDialogTitle.react','XUIError.react','XUIGrayText.react','XUINotice.react','XUISpinner.react','XUITextInput.react','fbglyph','getOwnObjectValues','PageContentTabConstants'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('React').PropTypes,l=c('PageContentTabConstants').TABS,m='USD',n=500,o=80,p=3,q=.5,r=100,s={main:'main',variant:'variant'},t={edit:'Edit',advanced:'Advanced'},u=c('React').createClass({displayName:'PageProductComposerDialog',mixins:[c('CommerceExceptionHandlerMixin.react')],propTypes:{checkoutURL:k.string,collectionID:k.string,currencyCode:k.string.isRequired,defaultShippingOptions:k.array,onProductChanged:k.func,onProductCreated:k.func,onProductDeleted:k.func,pageContentTabAccessToken:k.string.isRequired,pageID:k.string.isRequired,pageHasShop:k.bool.isRequired,productCatalogID:k.string.isRequired,productID:k.string,productGroupID:k.string,requireDescription:k.bool.isRequired,sections:k.array.isRequired,shownInitially:k.bool,showShareToTimelineToggle:k.bool,showVideoUploadButton:k.bool,source:k.oneOf(c('getOwnObjectValues')(c('BOFSellerLoggingSources'))).isRequired,onClose:k.func},getDefaultProps:function v(){return {showShareToTimelineToggle:true};},getInitialState:function v(){return {checkoutURL:this.props.checkoutURL||'',currencyCode:this.props.currencyCode||m,currentTabKey:t.edit,currentPage:s.main,dialogShown:this.props.shownInitially,errorTabs:[],featuredCount:0,hasAttemptedSave:false,inventory:1000,isOnSale:false,loading:false,saving:false,photos:[],videos:[],productDesc:'',productPrice:null,productSalePrice:0,productTitle:'',productVisibility:c('ProductVisibility').PUBLISHED,shareToTimeline:false,shippingOptions:this.props.defaultShippingOptions||[],taxCategory:c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_OTHERS,taxRates:{state_abbr:{},zip_code:{}},showVariants:false,visibilityNotice:null,variants:[],variantItems:{}};},componentWillMount:function v(){if(this.props.productID)this._fetchProductDetails(this.props.pageID,this.props.productID);if(this.props.productGroupID)this._fetchVariants(this.props.pageID,this.props.productGroupID);this._fetchFeaturedCount(this.props.pageID);},componentDidMount:function v(){var event=this.props.productID?c('BOFSellerLoggerEvent').ACTN_EDIT_PRODUCT_CLICK:c('BOFSellerLoggerEvent').ACTN_ADD_PRODUCT_CLICK,w=babelHelpers['extends']({source:this.props.source},{});if(this.props.productID){w.target_class='EntProdutItem';w.target_id=this.props.productID;}c('BOFSellerLogger').log(event,this.props.pageID,w);},componentWillReceiveProps:function v(w){if(this.props.pageID!==w.pageID||this.props.productID!==w.productID||this.props.productGroupID!==w.productGroupID){this._fetchProductDetails(w.pageID,w.productID);this._fetchVariants(w.pageID,w.productGroupID);}},_fetchFeaturedCount:function v(w){this.setState({loading:true});var x=c('ActorURI').create(c('XPagesManagerFeaturedItemsCountController').getURIBuilder().getURI(),w);new (c('AsyncRequest'))().setURI(x).setHandler(function(y){var z=y.payload.featured_count;this.setState({loading:false,featuredCount:z});}.bind(this)).send();},_fetchProductDetails:function v(w,x){this.setState({loading:true});var y=c('ActorURI').create(c('XPagesManagerProductViewController').getURIBuilder().setString(c('XCommerceSelfServeParam').PRODUCT_ID,x).getURI(),w);new (c('AsyncRequest'))().setURI(y).setHandler(this._onProductDetailsFetched).send();},_fetchVariants:function v(w,x){this.setState({loading:true});var y=c('ActorURI').create(c('XPagesManagerProductVariantsController').getURIBuilder().setString('product_group_id',x).getURI(),w);new (c('AsyncRequest'))().setURI(y).setHandler(function(z){var aa=z.payload,ba={variants:aa.variants,variantItems:aa.variantItems};this._oldVariants=this._deepClone(ba);this.setState(aa);}.bind(this)).send();},_oldVariants:{},_deepClone:function v(w){return JSON.parse(JSON.stringify(w));},onPhotosSelected:function v(w){this.setState({photos:this.state.photos.concat(w)});},onPhotoRemoved:function v(w){this.setState({photos:this.state.photos.filter(function(x){return x.fbid!==w.fbid;})});},onPhotoEdited:function v(w,x){var y=this.state.photos.findIndex(function(aa){return aa.fbid===w;});if(y!==undefined){c('BOFSellerLogger').log(c('BOFSellerLoggerEvent').ACTN_PHOTO_EDITED,this.props.pageID,{target_class:'Photo',target_id:x.fbid});var z=this.state.photos.slice();z[y]=x;this.setState({photos:z});}},_onVideoSelected:function v(w){var x=this.state.videos;x=x.concat({requestID:w,fbid:w,src:null,ready:false,error:false});this.setState({videos:x});},_onVideoRemoved:function v(w){this.setState({videos:this.state.videos.filter(function(x){return x.fbid!==w.fbid;})});},_onVideoUploadFinished:function v(w,x,y){var z=this.state.videos;for(var aa=0;aa<z.length;aa++)if(z[aa].requestID===w){z[aa].fbid=x;z[aa].src=y;z[aa].ready=true;}this.setState({videos:z});},_onVideoUploadError:function v(w){var x=this.state.videos;for(var y=0;y<x.length;y++)if(x[y].requestID===w){x[y].error=true;x[y].ready=false;}this.setState({videos:x});},_getDialogHeader:function v(){switch(this.state.currentPage){case s.main:return (c('React').createElement(c('XUIDialogHeader.react'),{activeTabKey:this.state.currentTabKey,onTabClick:this._handleTabChange},this._getTabHeaders()));case s.variant:return (c('React').createElement(c('XUIDialogTitle.react'),null,this._getTitle()));}return c('React').createElement('div',null);},_getTabHeaders:function v(){var w=[c('React').createElement(c('XUIDialogHeaderTitle.react'),{href:'#',key:t.edit},this._getTitle())];if(this._showSection(c('CommerceSelfServeSection').TAX_TABLE))w.push(c('React').createElement(c('XUIDialogHeaderTitle.react'),{href:'#',key:t.advanced},j._("Advanced Options")));return w;},_getPhotoUploader:function v(){var w=this.state.hasAttemptedSave?this._getPhotosError(this.state.photos):null;return (c('React').createElement(c('PageContentTabProductPhotoUploader.react'),{className:"_2anr",pageID:this.props.pageID,photoEditingEnabled:true,photos:this.state.photos,onPhotosSelected:this.onPhotosSelected,onPhotoRemoved:this.onPhotoRemoved,onPhotoEdited:this.onPhotoEdited,productCatalogID:this.props.productCatalogID,pageContentTabAccessToken:this.props.pageContentTabAccessToken,videos:this.state.videos,onVideoSelected:this._onVideoSelected,onVideoUploadFinished:this._onVideoUploadFinished,onVideoUploadError:this._onVideoUploadError,onVideoRemoved:this._onVideoRemoved,showVideoUploadButton:this.props.showVideoUploadButton,xuiError:w}));},_getPhotoTooltip:function v(){if(this.state.photos.length>0||this.state.videos.length>0)return null;if(this.props.source===c('BOFSellerLoggingSources').PRODUCT_TAGGING_TYPEAHEAD&&!this.props.pageHasShop)return (c('React').createElement(c('XUINotice.react'),{size:'small'},c('React').createElement('div',{className:"_45zv"},j._("Adding a product lets you tag it in posts, photos and videos on your Page."))));return (c('React').createElement(c('XUINotice.react'),{size:'small'},c('React').createElement('div',{className:"_1mxl"},j._("Check out our {link} for tips on making your product images look good on Facebook.",[j.param('link',c('React').createElement(c('Link.react'),{href:'https://www.facebook.com/business/help/481150918755515',target:'_blank'},j._("recommended photo guidelines")))]))));},_getTabBodies:function v(){var w=this.state.currentTabKey==t.edit,x=[c('React').createElement('div',{className:w?"_2pi1":"hidden_elem",key:'basic_product_edit_tab'},c('React').createElement('div',{dangerouslySetInnerHTML:this.state.visibilityNotice}),c('React').createElement('div',null,this._getPhotoUploader(),this._getPhotoTooltip()),c('React').createElement('div',{className:"clearfix"}),this._getNamePriceDescriptionInputs(),this._getCheckoutURLInput(),this._getFeaturedToggleSwitch(),this._getShareToTimelineToggle(),c('React').createElement('div',{className:"_3p77"},c('React').createElement('div',{className:"_4o5s"},this._getInventoryInput()),c('React').createElement('div',{className:"_4o5t"},this._getTaxCategorySelector())),c('React').createElement('div',{className:"_3p77"},c('React').createElement('div',{className:"_4o5s"},this._getVariantsButton()),c('React').createElement('div',{className:"_4o5t"},this._getVisibilitySelector())),this._getShippingOptionsSection())];if(this._showSection(c('CommerceSelfServeSection').TAX_TABLE))x.push(c('React').createElement('div',{className:(w?"hidden_elem":'')+(' '+"_2pi1")+(' '+"_5dz6"),key:'advanced_product_edit_tab'},this._getTaxTable()));return x;},_getMerchantSettingsURI:function v(){return c('XPagesManagerSettingsController').getURIBuilder().setString('page_token',this.props.pageID).setString('tab','shop').setString('ref',c('PageSettingsRef').PRODUCT_COMPOSER).getURI();},_getTaxTable:function v(){return (c('React').createElement('div',null,c('React').createElement('div',{display:'block',className:"_3-96"},c('React').createElement(c('XUIGrayText.react'),{weight:'bold',shade:'dark',size:'medium'},j._("Custom Product Taxes")),c('React').createElement(c('AdsHelpLink.react'),{width:350,position:'below'},j._("You can enter specific taxes for products taxed at special rates, such as some foods and beverages."))),c('React').createElement(c('CommerceSelfServeProductTaxRatesTable.react'),{taxRates:this.state.taxRates,onChangeTaxRates:this._onChangeTaxRates}),c('React').createElement('div',{display:'block',className:"_3-8x"},c('React').createElement(c('Link.react'),{href:this._getMerchantSettingsURI(),target:'_blank'},j._("View Default Shop Taxes")))));},_getInnerContent:function v(){if(this.state.loading)return (c('React').createElement(c('XUISpinner.react'),{className:"_2_i8",size:'large'}));switch(this.state.currentPage){case s.main:return (c('React').createElement('div',null,this._getTabBodies()));case s.variant:return (c('React').createElement('div',null,c('React').createElement('div',{className:"_1go"},c('React').createElement(c('InlineBlock.react'),{alignv:'middle',className:"_1gp",onClick:this._onVariantsSaveButtonClicked},c('React').createElement(c('Image.react'),{src:h("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/chevron-left_20_bluegray-40.png")})),c('React').createElement(c('InlineBlock.react'),{alignv:'middle',className:"_1gq"},j._("Variants"))),c('React').createElement('div',{className:"_3-8j"},c('React').createElement(c('XUIGrayText.react'),{display:'block'},j._("Variants are the different styles\u2014such as sizes, colors or materials\u2014that a product comes in."))),c('React').createElement(c('PageCommerceProductVariantPage.react'),{currencyCode:this.state.currencyCode,defaultVariantPrice:this.state.productPrice/100,getPriceError:this._getPriceError,isOnSale:this.state.isOnSale,setVariantInfo:function(w){return this.setState(w);}.bind(this),variants:this.state.variants,variantItems:this.state.variantItems})));}return c('React').createElement('div',null);},_backToMainPage:function v(){this.setState({currentPage:s.main});},_getVariantsButton:function v(){if(!this._showSection(c('CommerceSelfServeSection').VARIANTS))return null;return (c('React').createElement('div',{className:"_3-8x"},c('React').createElement(c('XUIGrayText.react'),{weight:'bold',shade:'dark',size:'small',display:'block'},j._("Variants"),c('React').createElement(c('AdsHelpLink.react'),{width:350,position:'below'},j._("Variants are the different styles\u2014such as sizes, colors or materials\u2014that a product comes in."))),c('React').createElement(c('BUIFormButton.react'),{className:"_3-8w",density:'snug',label:j._("Edit Variants"),onClick:function(){return this.setState({currentPage:s.variant});}.bind(this)})));},_getCheckoutURLInput:function v(){if(!this._showSection(c('CommerceSelfServeSection').CHECKOUT_URL))return null;var w=this.getFieldErrorMessage(c('XCommerceSelfServeParam').CHECKOUT_URL)||(this.state.hasAttemptedSave?this._getCheckoutURLError(this.state.checkoutURL):null);return (c('React').createElement('div',{className:"_3-97"},c('React').createElement(c('XUIGrayText.react'),{display:'inline',shade:'dark',size:'small',weight:'bold'},j._("Checkout URL")),c('React').createElement(c('AdsHelpLink.react'),{width:350,position:'above'},j._("The website where users will be directed to purchase this product")),c('React').createElement(c('XUITextInput.react'),{className:"_2mfs",disabled:this.state.loading,height:'tall',name:'checkoutURL',onChange:function(event){return this.setState({checkoutURL:event.target.value});}.bind(this),placeholder:j._("http:\/\/www.example.com"),value:this.state.checkoutURL,xuiError:w})));},_getDialogFooter:function v(){switch(this.state.currentPage){case s.main:return this._getMainFooter();case s.variant:return this._getVariantsFooter();}return null;},_getMainFooter:function v(){var w=null;if(this.props.productID&&!this.state.loading)w=c('React').createElement(c('Link.react'),{onClick:this.state.saving?null:this._onDeleteProductClicked},c('React').createElement(c('XUIGrayText.react'),{shade:'light',size:'small'},j._("Delete Product")));var x=this.state.saving?c('React').createElement(c('XUISpinner.react'),{size:'small',className:"_3-90"}):null;return (c('React').createElement(c('XUIDialogFooter.react'),{leftContent:w},x,c('React').createElement(c('XUIDialogCancelButton.react'),{disabled:this.state.saving||this.state.loading}),c('React').createElement(c('XUIDialogButton.react'),{use:'confirm',label:this._getSaveButtonText(),action:'button',disabled:this.state.saving||this.state.loading,onClick:this._onSubmitButtonClicked})));},_getVariantsFooter:function v(){return (c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{label:j._("Cancel"),action:'button',use:'default',onClick:this._onVariantsCancelButtonClicked}),c('React').createElement(c('XUIDialogButton.react'),{label:j._("Apply"),action:'button',use:'confirm',onClick:this._onVariantsSaveButtonClicked})));},_onVariantsCancelButtonClicked:function v(){this.setState(this._deepClone(this._oldVariants));this._backToMainPage();},_onVariantsSaveButtonClicked:function v(){this._oldVariants=this._deepClone({variants:this.state.variants,variantItems:this.state.variantItems});this._backToMainPage();},show:function v(){this.setState({currentPage:s.main,dialogShown:true});},hide:function v(){this.props.onClose&&this.props.onClose();this.setState({dialogShown:false});},_onDeleteProductClicked:function v(){c('PageProductActions').deleteProductsWithConfirmation(Array(this.props.productGroupID),this.props.pageID,function(){this.hide();if(this.props.onProductDeleted)this.props.onProductDeleted();}.bind(this));},_getNamePriceDescriptionInputs:function v(){var w=null;if(this.props.requireDescription){w=j._("Add details about your item");}else w=j._("Add details about your item (Optional)");var x=null;if(this.state.variants.length===0){x=c('React').createElement(c('AdsCurrencyInput.react'),{className:"_5rpn",currency:this.state.currencyCode,disabled:this.state.loading||this.state.variants.length>0,invalidInputIsNull:true,nonnegative:true,onDataUpdate:function(aa){return this.setState({productPrice:aa});}.bind(this),placeholder:j._("Enter price"),value:this.state.productPrice,xuiError:this.state.hasAttemptedSave?this._getPriceError(this.state.productPrice):null});if(!this.props.currencyCode)x=c('React').createElement('div',null,c('React').createElement('div',{className:"_4tjr"},c('React').createElement(c('CommerceCurrencySelector.react'),{onChange:function(event){return this.setState({currencyCode:event.value});}.bind(this),selectedCurrency:this.state.currencyCode})),c('React').createElement('div',{className:"_4tke"},x));}else x=c('React').createElement('div',{className:"_4o5u"},c('React').createElement(c('XUIGrayText.react'),{shade:'light',size:'medium',className:"_4o5v"},this._getVariantsPriceRange('price')),c('React').createElement(c('Link.react'),{size:'small',className:"_20ac _2pii",onClick:function(){return this.setState({currentPage:s.variant});}.bind(this)},j._("Edit")));var y=null;if(this.state.isOnSale){var z=void 0;if(this.state.variants.length===0){z=c('React').createElement(c('AdsCurrencyInput.react'),{className:"_5rpn",currency:this.state.currencyCode,disabled:this.state.loading||this.state.variants.length>0,invalidInputIsNull:true,nonnegative:true,onDataUpdate:function(aa){return this.setState({productSalePrice:aa});}.bind(this),placeholder:j._("Enter price"),value:this.state.productSalePrice,xuiError:this.state.hasAttemptedSave?this._getPriceError(this.state.productSalePrice):null});}else z=c('React').createElement('div',{className:"_4o5u"},c('React').createElement(c('XUIGrayText.react'),{shade:'light',size:'medium',className:"_4o5v"},this._getVariantsPriceRange('salePrice')),c('React').createElement(c('Link.react'),{size:'small',className:"_20ac _2pii",onClick:function(){return this.setState({currentPage:s.variant});}.bind(this)},j._("Edit")));y=c('React').createElement('div',{className:"_4o5t"},c('React').createElement(c('XUIGrayText.react'),{className:"_3-8x _3-94",display:'block',weight:'bold',shade:'dark',size:'small'},j._("Sale Price")),z);}return (c('React').createElement('div',{className:"_2pin"},this._getNameInput(),c('React').createElement('div',{className:this.state.isOnSale?"_4o5s":''},c('React').createElement(c('XUIGrayText.react'),{className:"_3-8x _3-94",display:'block',weight:'bold',shade:'dark',size:'small'},j._("Price")),x),y,c('React').createElement('div',{className:"clearfix"}),this._getSaleToggleSwitch(),c('React').createElement(c('XUIGrayText.react'),{className:"_3-8x _3-94",display:'block',weight:'bold',shade:'dark',size:'small'},j._("Description")),c('React').createElement(c('XUIError.react'),{xuiError:this.getFieldErrorMessage(c('XCommerceSelfServeParam').PRODUCT_DESCRIPTION)},c('React').createElement(c('TextAreaWithLineLimit.react'),{name:'productDescription',className:"_3jm",disabled:this.state.loading,rows:p,value:this.state.productDesc,onChange:function(aa){return this.setState({productDesc:aa});}.bind(this),placeholder:w}))));},_getNameInput:function v(){var w=this.getFieldErrorMessage(c('XCommerceSelfServeParam').PRODUCT_TITLE)||(this.state.hasAttemptedSave?this._getProductTitleError(this.state.productTitle):null);return (c('React').createElement('div',null,c('React').createElement(c('XUIGrayText.react'),{className:"_3-94",display:'block',weight:'bold',shade:'dark',size:'small'},j._("Name")),c('React').createElement(c('XUITextInput.react'),{name:'productTitle',className:"_2mfs",disabled:this.state.loading,value:this.state.productTitle,height:'tall',maxLength:o,onChange:function(event){return this.setState({productTitle:event.target.value});}.bind(this),xuiError:w})));},_getVariantsPriceRange:function v(w){var x=Number.MAX_VALUE,y=Number.MIN_VALUE;for(var z in this.state.variantItems){var aa=this.state.variantItems[z];if(aa[w]<x)x=aa[w];if(aa[w]>y)y=aa[w];}x*=100;y*=100;var ba=this.state.currencyCode;if(x===y){return c('PECurrency').formatAmount(ba,x,true,false,false);}else return (c('PECurrency').formatAmount(ba,x,true,false,false)+' - '+c('PECurrency').formatAmount(ba,y,true,false,false));},_getTaxCategorySelector:function v(){if(!this._showSection(c('CommerceSelfServeSection').TAX_CATEGORY))return null;var w=this.state.taxCategory||c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_OTHERS;if(w===c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_SPORT_RECREATION_BAD)w=c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_SPORT_RECREATION;return (c('React').createElement(c('PageProductComposerTaxCategorySelector.react'),{className:"_3-8y",onTaxCategoryChange:this._handleTaxCategoryChange,taxCategory:w}));},_getVisibilitySelector:function v(){if(!this._showSection(c('CommerceSelfServeSection').PRODUCT_VISIBILITY))return null;return (c('React').createElement('div',null,c('React').createElement(c('XUIGrayText.react'),{className:"_3-94 _3-8x",display:'block',weight:'bold',shade:'dark',size:'small'},j._("Visibility")),c('React').createElement(c('ProductVisibilitySelector.react'),{density:'snug',onChange:function(w){return this.setState({productVisibility:w});}.bind(this),value:this.state.productVisibility})));},_getInventoryInput:function v(){if(!this._showSection(c('CommerceSelfServeSection').INVENTORY))return null;var w=null;if(this.state.variants.length===0){w=c('React').createElement(c('NumberInput.atlas'),{className:"_3-96",disabled:this.state.loading,isZeroValidValue:true,name:'productInventory',nonnegative:true,value:this.state.inventory,formatNumber:false,onValueUpdated:function(z){return this.setState({inventory:z});}.bind(this)});}else{var x=0;for(var y in this.state.variantItems)x+=this.state.variantItems[y].inventory;w=c('React').createElement('div',{className:"_4o5u"},c('React').createElement('div',{className:"_4o5v"},c('React').createElement(c('XUIGrayText.react'),{shade:'light',size:'medium'},x)),c('React').createElement(c('Link.react'),{size:'small',className:"_20ac _2pii",onClick:function(){return this.setState({currentPage:s.variant});}.bind(this)},j._("Edit Inventory")));}return (c('React').createElement('div',null,c('React').createElement(c('XUIGrayText.react'),{className:"_3-94 _3-8x",display:'block',weight:'bold',shade:'dark',size:'small'},j._("Inventory")),w));},_getSaleToggleSwitch:function v(){if(!this._showSection(c('CommerceSelfServeSection').SALE_PRICE))return null;return (c('React').createElement('div',{className:"_3-8x"},c('React').createElement(c('FBToggleSwitch.react'),{disabled:this.state.loading,animate:true,checked:this.state.isOnSale,onToggle:function(w){return this.setState({isOnSale:w});}.bind(this)}),c('React').createElement('span',{className:"_3jn"},j._("This product is on sale"),c('React').createElement(c('AdsHelpLink.react'),{width:350,position:'below'},j._("Show people you're selling this product at a discount by setting a sale price in addition to the regular price.")))));},_getShippingOptionsSection:function v(){if(!this._showSection(c('CommerceSelfServeSection').SHIPPING_OPTIONS))return null;return (c('React').createElement(c('PageProductComposerShippingOptions.react'),{currencyCode:this.state.currencyCode,disabled:this.state.loading,shippingOptions:this.state.shippingOptions,settingsURI:this.props.productID?undefined:this._getMerchantSettingsURI(),onShippingOptionsChange:function(w){return this.setState({shippingOptions:w});}.bind(this)}));},_getShareToTimelineToggle:function v(){if(this.props.productID||!this.props.showShareToTimelineToggle)return null;var w=null;if(this.state.shareToTimeline)w=c('React').createElement('div',{className:"_4lw_"},j._("Your product will be shared on your Page as soon as it's approved."));return (c('React').createElement('div',null,c('React').createElement(c('FBToggleSwitch.react'),{disabled:this.state.loading,animate:true,checked:this.state.shareToTimeline,onToggle:function(x){return this.setState({shareToTimeline:x});}.bind(this)}),c('React').createElement('span',{className:"_3jn"},j._("Share this product on your page"),c('React').createElement(c('AdsHelpLink.react'),{width:350,position:'above'},j._("Automatically post this product to your Page's Timeline as soon as it's approved."))),w));},_unpackTaxRates:function v(){var w=[],x={},y={};for(var z in this.state.taxRates){var aa=this.state.taxRates[z];for(var ba in aa){w[w.length]=ba;x[ba]=aa[ba].tax_rate;y[ba]=aa[ba].is_applied_to_shipping;}}return {tax_locations:w,tax_percent_map:x,tax_applied_to_shipping_map:y};},_getFeaturedToggleSwitch:function v(){if(!this._showSection(c('CommerceSelfServeSection').FEATURED_PRODUCT_TOGGLE))return null;return (c('React').createElement('div',{className:"_3-95"},c('React').createElement(c('FBToggleSwitch.react'),{disabled:this.state.loading||this._isFeatureProductToggleDisabled(),animate:true,checked:this.state.featuredProduct,onToggle:this._handleFeatureProductToggleChange}),c('React').createElement('span',{className:"_3jn"},j._("Feature this product"),c('React').createElement(c('AdsHelpLink.react'),{width:350,position:'above'},this._getHelpText()))));},_handleFeatureProductToggleChange:function v(w){var x=w?this.state.featuredCount+1:this.state.featuredCount-1;this.setState({featuredProduct:w,featuredCount:x});},_isFeatureProductToggleDisabled:function v(){return (!this.state.featuredProduct&&this.state.featuredCount>=c('PagesManagerProductToolsConstants').MAX_FEATURED_ITEM_COUNT);},_getHelpText:function v(){if(this._isFeatureProductToggleDisabled())return j._({"*":"You've already chosen {Maximum number of products that can be featured} to feature. Stop featuring one of your currently selected products to feature this one instead."},[j.param('Maximum number of products that can be featured',c('PagesManagerProductToolsConstants').MAX_FEATURED_ITEM_COUNT,[0])]);return j._({"*":"Featured products appear at the top of your page and are listed first in your shop. You can feature up to {Maximum number of products that can be featured} products."},[j.param('Maximum number of products that can be featured',c('PagesManagerProductToolsConstants').MAX_FEATURED_ITEM_COUNT,[0])]);},_getTitle:function v(){if(this.state.currentPage===s.variant)return j._("Edit Variants");if(this.props.productID)return j._("Edit Product");return j._("Add Product");},_getSaveButtonText:function v(){return j._("Save");},_onProductDetailsFetched:function v(w){var x=w.payload,y=x.visibility_notice===null?null:x.visibility_notice.markup;for(var z=0;z<x.videos.length;z++){x.videos[z].ready=true;x.videos[z].error=false;}var aa=c('Currency').getOffset(this.state.currencyCode),ba=x.price,ca=x.sale_price;if(aa>0){ba=ba*aa/r;ca=ca*aa/r;}this.setState({checkoutURL:x.checkout_url,currentTabKey:t.edit,currentPage:s.main,dialogShown:true,productTitle:x.name,productDesc:x.description,productPrice:ba,productSalePrice:ca,productVisibility:x.visibility,photos:x.images,videos:x.videos,featuredProduct:x.featured_product,inventory:x.inventory,shippingOptions:x.shipping_options,taxCategory:x.tax_category,showVariants:x.show_variants,visibilityNotice:y,loading:false,featuredCount:x.featured_count,taxRates:x.tax_rates});},_onToggleDialog:function v(w){this.setState({dialogShown:w});if(w)return;this.props.onClose&&this.props.onClose();var x=babelHelpers['extends']({source:this.props.source},{}),event=c('BOFSellerLoggerEvent').ACTN_CANCEL_ADD_PRODUCT;if(this.props.productID){x.target_class='EntProdutItem';x.target_id=this.props.productID;event=c('BOFSellerLoggerEvent').ACTN_CANCEL_EDIT_PRODUCT;}c('BOFSellerLogger').log(event,this.props.pageID,x);c('ReactDOM').unmountComponentAtNode(c('ReactDOM').findDOMNode(this).parentNode);},_getPriceError:function v(w){var x=null;if(this._showSection(c('CommerceSelfServeSection').MINIMUM_PRICE_ERROR)&&(!w||w<q)){var y=c('AdsCurrencyFormatter').formatCurrency('USD',q*100);x=j._("Price must be at least {Minimum Product Price}",[j.param('Minimum Product Price',y)]);}else if(w==null||w<0)x=j._("Non-negative price is required");return x;},_getCheckoutURLError:function v(w){var x=null;if(w==='')x=j._("Missing Checkout URL: This product must have a valid url, like \"http:\/\/www.example.com\"");return x;},_getPhotosError:function v(w){var x=null;if(this.state.photos.length===0)x=j._("Product Photo Required: Please provide at least one photo of this product");return x;},_getProductTitleError:function v(w){var x=null;if(w==='')x=j._("Field is Empty: Can't have this field be blank");return x;},_handleTabChange:function v(w){this.setState({currentTabKey:w});},_handleTaxCategoryChange:function v(w){this.setState({taxCategory:w.value});},_validatePrices:function v(){var w=this.state.variants,x=this.state.variantItems;if(!w||w.length===0){if(this._getPriceError(this.state.productPrice)||this.state.isOnSale&&this._getPriceError(this.state.productSalePrice)){this._navigateToTab(t.edit);return false;}return true;}for(var y in this.state.variantItems)if(x[y].price<q||this.state.isOnSale&&x[y].salePrice<q){this._navigateToTab(s.variant);return false;}return true;},_validateCheckoutURL:function v(){if(!this._showSection(c('CommerceSelfServeSection').CHECKOUT_URL))return true;return !this._getCheckoutURLError(this.state.checkoutURL);},_validatePhotos:function v(){return !this._getPhotosError(this.state.photos);},_validateProductTitle:function v(){return !this._getProductTitleError(this.state.productTitle);},_onSubmitButtonClicked:function v(){this.setState({saving:true,hasAttemptedSave:true});if(!this._validatePrices()||!this._validateCheckoutURL()||!this._validatePhotos()||!this._validateProductTitle()){this.setState({saving:false});return;}var w=[];this.state.photos.forEach(function(ta){w.push(ta.fbid);});var x=[];this.state.videos.forEach(function(ta){if(ta.ready&&!ta.error)x.push(ta.fbid);});var y=this.state.shippingOptions.filter(function(ta){return ta.shipping_service&&!!ta.shipping_service.trim();});this.setState({shippingOptions:y});var z=[],aa=[];y.forEach(function(ta){z.push(ta.shipping_service);aa.push(Math.round(ta.shipping_price_value));});var ba=this._unpackTaxRates(),ca=this.state.variants,da=ca.map(function(ta){return ta.label;}),ea=ca.map(function(ta){return ta.options;}),fa=this.state.variantItems,ga={},ha={},ia={},ja={},ka={};for(var la in fa){var ma=fa[la];ga[la]=ma.inventory;ha[la]=Math.round(ma.price*100);ia[la]=Math.round(ma.salePrice*100);ja[la]=JSON.stringify(ma.properties);ka[la]=ma.productID;}var na=this.state.productPrice,oa=this.state.productSalePrice,pa=c('Currency').getOffset(this.state.currencyCode);if(pa>0){na=na*r/pa;oa=oa*r/pa;}var qa={};qa.source=this.props.source;qa[c('XCommerceSelfServeParam').PRODUCT_TITLE]=this.state.productTitle;qa[c('XCommerceSelfServeParam').PRODUCT_DESCRIPTION]=this.state.productDesc;qa[c('XCommerceSelfServeParam').PRODUCT_PRICE]=na;qa[c('XCommerceSelfServeParam').PRODUCT_SALE_PRICE]=oa;qa[c('XCommerceSelfServeParam').IS_ON_SALE]=this.state.isOnSale;qa[c('XCommerceSelfServeParam').COLLECTION_ID]=this.props.collectionID;qa[c('XCommerceSelfServeParam').CURRENCY_CODE]=this.state.currencyCode;qa[c('XCommerceSelfServeParam').PRODUCT_PHOTO_IDS]=w;qa[c('XCommerceSelfServeParam').PRODUCT_VIDEO_IDS]=x;qa[c('XCommerceSelfServeParam').PRODUCT_ID]=this.props.productID;qa[c('XCommerceSelfServeParam').FEATURED_PRODUCT]=this.state.featuredProduct;qa[c('XCommerceSelfServeParam').SHARE_TO_TIMELINE]=this.props.showShareToTimelineToggle&&this.state.shareToTimeline;qa[c('XCommerceSelfServeParam').INVENTORY]=this.state.inventory;qa[c('XCommerceSelfServeParam').SHIPPING_OPTION_NAMES]=z;qa[c('XCommerceSelfServeParam').SHIPPING_OPTION_VALUES]=aa;qa[c('XCommerceSelfServeParam').TAX_CATEGORY]=this.state.taxCategory;qa[c('XCommerceSelfServeParam').TAX_LOCATIONS]=ba.tax_locations;qa[c('XCommerceSelfServeParam').TAX_APPLIED_TO_SHIPPING_MAP]=ba.tax_applied_to_shipping_map;qa[c('XCommerceSelfServeParam').TAX_PERCENT_MAP]=ba.tax_percent_map;qa[c('XCommerceSelfServeParam').VARIANT_NAMES]=da;qa[c('XCommerceSelfServeParam').VARIANT_INVENTORY]=ga;qa[c('XCommerceSelfServeParam').VARIANT_PRICE]=ha;qa[c('XCommerceSelfServeParam').VARIANT_SALE_PRICE]=ia;qa[c('XCommerceSelfServeParam').VARIANT_DATA]=ja;qa[c('XCommerceSelfServeParam').VARIANT_PRODUCT_ID]=ka;qa[c('XCommerceSelfServeParam').VISIBILITY]=this.state.productVisibility;qa[c('XCommerceSelfServeParam').CHECKOUT_URL]=this.state.checkoutURL;for(var ra=0;ra<ea.length;ra++)qa['variant'+ra+'_options']=ea[ra];var sa=c('ActorURI').create(c('XPagesManagerProductCreateController').getURIBuilder().getURI(),this.props.pageID);this.sendAsync(sa,qa,this._onProductUpdated,function(){return this.setState({saving:false});}.bind(this));},_navigateToTab:function v(w){switch(w){case s.variant:this.setState({currentPage:s.variant});break;case t.edit:this.setState({currentTabKey:t.edit});break;case t.advanced:this.setState({currentTabKey:t.advanced});break;}},_onChangeTaxRates:function v(w){this.setState({taxRates:w});},_onProductUpdated:function v(w){this.setState({saving:false,dialogShown:false});if(this.props.productID){c('PageContentTabDispatcher').handlePostChanged(w.payload);}else{if(this.props.onProductCreated)this.props.onProductCreated(w.payload);c('PageContentTabDispatcher').handlePostCreated(l.COMMERCE_PRODUCTS,w.payload,this.props.pageID);}if(w.payload.show_creation_nux){c('ReactDOM').render(c('React').createElement(c('PageProductReviewNUX.react'),{onDialogClosed:function(){if(this.props.onProductChanged)this.props.onProductChanged(w.payload);}.bind(this)}),c('DOM').create('div'));}else if(this.props.onProductChanged)this.props.onProductChanged(w.payload);c('ReactDOM').unmountComponentAtNode(c('ReactDOM').findDOMNode(this).parentNode);},render:function v(){if(!this.state.dialogShown)return null;var w=[];if(this.hasFieldErrors())w.push(j._("Your product can't be saved as is. Please check the product info, advanced options and variants and try again."));if(this.hasGeneralError())w.push(this.getGeneralErrorMessage());var x=null;if(w.length>0)x=c('React').createElement('div',{className:"_2pib _2piq"},this.renderErrorMessages(w));return (c('React').createElement(c('XUIDialog.react'),{width:n,causalElementRef:function(){return this.refs.createButton;}.bind(this),onToggle:this._onToggleDialog,shown:this.state.dialogShown,key:'dialog'},this._getDialogHeader(),c('React').createElement(c('XUIDialogBody.react'),{useCustomPadding:true},this._getInnerContent()),x,this._getDialogFooter()));},_showSection:function v(w){return this.props.sections.indexOf(w)>=0;}});f.exports=u;}),null);
__d("XCommerceProductDialogLoaderController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/commerce\/product_composer_dialog\/loader\/",{page_id:{type:"Int",required:true}});}),null);
__d('PageProductComposerDialogLoader.react',['AsyncRequest','BOFSellerLoggingSources','PageProductComposerDialog.react','React','XCommerceProductDialogLoaderController','XCommerceSelfServeParam','getOwnObjectValues'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'PageProductComposerDialogLoader',propTypes:{onProductCreated:h.func,pageID:h.string.isRequired,source:h.oneOf(c('getOwnObjectValues')(c('BOFSellerLoggingSources'))).isRequired},getInitialState:function j(){return {loading:true};},componentWillMount:function j(){this._fetchPageDetails(this.props.pageID);},_fetchPageDetails:function j(k){var l=c('XCommerceProductDialogLoaderController').getURIBuilder().setInt(c('XCommerceSelfServeParam').PAGE_ID,k).getURI();new (c('AsyncRequest'))().setURI(l).setHandler(this._onPageDetailsFetched).send();},_onPageDetailsFetched:function j(k){var l=k.payload;this.setState({currencyCode:l.currency_code,defaultShippingOptions:l.default_shipping_options,loading:false,pageContentTabAccessToken:l.page_content_tab_access_token,pageHasShop:l.page_has_shop,productCatalogID:l.product_catalog_id,requireDescription:l.require_description,sections:l.sections,showVideoUploadButton:l.show_video_upload_button});},render:function j(){if(this.state.loading)return null;return (c('React').createElement(c('PageProductComposerDialog.react'),{currencyCode:this.state.currencyCode,defaultShippingOptions:this.state.defaultShippingOptions,onProductCreated:this.props.onProductCreated,pageContentTabAccessToken:this.state.pageContentTabAccessToken,pageID:this.props.pageID,pageHasShop:this.state.pageHasShop,productCatalogID:this.state.productCatalogID,requireDescription:this.state.requireDescription,sections:this.state.sections,shownInitially:true,showShareToTimelineToggle:this.state.pageHasShop,showVideoUploadButton:this.state.showVideoUploadButton,source:this.props.source}));}});f.exports=i;}),null);
__d('ReactComposerProductTaggerTokenizerToken.react',['cx','ReactComposerPeopleTaggerTokenizerToken.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';var l="_rox";return (c('React').createElement(c('ReactComposerPeopleTaggerTokenizerToken.react'),babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,l)})));};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('ReactComposerProductTaggerComponent.react',['cx','fbt','BOFSellerLoggingSources','CommerceProductTaggerType','ReactComposerPhotoActions','ReactComposerProductTaggerTokenizerToken.react','ReactComposerTaggerPresenter','ReactComposerTaggerViewStyles','DOM','Grid.react','PageProductComposerDialogLoader.react','ProductTaggingTranslations','React','ReactDOM','SearchableEntry','TokenizerExampleSearchSource','XUITokenizer.react','emptyFunction'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('Grid.react').GridItem,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={edited:false},this.$ReactComposerProductTaggerComponent7=function(t){var u=t.products.data[0];if(this.$ReactComposerProductTaggerComponent6(u.id))return;var v={title:u.name,subtitle:u.price,type:'product_item',uniqueID:u.id};this.$ReactComposerProductTaggerComponent8(new (c('SearchableEntry'))(v));}.bind(this),this.$ReactComposerProductTaggerComponent2=function(t){if(t.getType()==='product_item_add'){c('ReactDOM').render(c('React').createElement(c('PageProductComposerDialogLoader.react'),{onProductCreated:this.$ReactComposerProductTaggerComponent7,pageID:this.props.pageIDs[0],source:c('BOFSellerLoggingSources').PRODUCT_TAGGING_TYPEAHEAD}),c('DOM').create('div'));return;}if(this.$ReactComposerProductTaggerComponent6(t.getUniqueID()))return;this.$ReactComposerProductTaggerComponent8(t);}.bind(this),this.$ReactComposerProductTaggerComponent4=function(t){var u=this.props.taggerData,v=u.indexOf(t);if(v==-1)return;this.setState({edited:true});u.splice(v,1);c('ReactComposerPhotoActions').untagSubjectFromAllPhotos(this.props.reactComposerID,t.getUniqueID());this.props.onSelect&&this.props.onSelect(u);}.bind(this),this.$ReactComposerProductTaggerComponent3=function(event){this.setState({edited:true});}.bind(this),p;}n.prototype.render=function(){return c('React').createElement(c('Grid.react'),{cols:2,className:"_5esl",role:'presentation'},c('React').createElement(l,{key:'label',className:"_5esm",role:'presentation'},i._("Products")),c('React').createElement(l,{key:'tokenizer',className:"_5esw",role:'presentation'},c('React').createElement('div',null,c('React').createElement(c('XUITokenizer.react'),babelHelpers['extends']({},this.props,{additionalEntries:this.$ReactComposerProductTaggerComponent1(),className:"_ysh _4fmg",entries:this.props.taggerData,focusAfterSelection:false,focusedOnInit:this.props.autoFocus,onAddEntryAttempt:this.$ReactComposerProductTaggerComponent2,onQueryStringChange:this.$ReactComposerProductTaggerComponent3,onRemoveEntryAttempt:this.$ReactComposerProductTaggerComponent4,placeholder:this.props.placeholder,presenter:this.$ReactComposerProductTaggerComponent5(),searchSource:this.props.taggerSource,showEntriesOnFocus:true})))));};n.prototype.$ReactComposerProductTaggerComponent1=function(){if(!this.props.showAddProduct)return [];var o=this.props.productTaggerType===c('CommerceProductTaggerType').SHOP_PAGE,p={photo:'/images/commerce/create-product-typeahead.png',title:c('ProductTaggingTranslations').getAddProductTitle(o),subtitle:c('ProductTaggingTranslations').getAddProductSubtitle(o),type:'product_item_add',uniqueID:'product_item_add'};return [new (c('SearchableEntry'))(p)];};n.prototype.$ReactComposerProductTaggerComponent6=function(o){var p=this.props.taggerData;return p.some(function(q){return q.getUniqueID()===o;});};n.prototype.$ReactComposerProductTaggerComponent8=function(o){var p=this.props.taggerData;p.push(o);this.setState({edited:true});this.props.onSelect&&this.props.onSelect(p);};n.prototype.$ReactComposerProductTaggerComponent5=function(){var o={};o.taggerViewStyle=c('ReactComposerTaggerViewStyles').DEFAULT;o.taggerListClassName="_ysi";return Object.assign({},c('ReactComposerTaggerPresenter'),{extraRendererProps:o,sortEntries:this.$ReactComposerProductTaggerComponent9,TokenRenderer:c('ReactComposerProductTaggerTokenizerToken.react')});};n.prototype.$ReactComposerProductTaggerComponent9=function(o,p,q){o.sort(function(r,s){if(r.getType()==='product_item_add')return 1;if(s.getType()==='product_item_add')return -1;return 0;});return o;};n.propTypes={autoFocus:m.bool,onSelect:m.func,pageIDs:m.arrayOf(m.string).isRequired,placeholder:m.string,productTaggerType:m.string.isRequired,showAddProduct:m.bool,taggerSource:m.object,taggerData:m.array.isRequired};n.defaultProps={autoFocus:true,onSelect:c('emptyFunction'),placeholder:i._("Type product name or ID"),showAddProduct:false,taggerData:[],taggerSource:new (c('TokenizerExampleSearchSource'))()};f.exports=n;}),null);
__d('ReactComposerProductTaggerContainer.react',['ReactComposerLoggingName','ReactComposerProductTaggerComponent.react','ReactComposerTaggerActions','ReactComposerTaggerContainerMixin','ReactComposerTaggerType','React','SubscriptionsHandler','WebAsyncSearchSource'],(function a(b,c,d,e,f,g){var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerProductTaggerContainer',_subscriptions:undefined,mixins:[c('ReactComposerTaggerContainerMixin')],statics:{taggerID:c('ReactComposerTaggerType').PRODUCT,loggingName:c('ReactComposerLoggingName').PRODUCT_TAGGER,taggerComponent:c('ReactComposerProductTaggerComponent.react')},propTypes:{pageIDs:h.arrayOf(h.string).isRequired,productTaggerType:h.string.isRequired,reactComposerID:h.string.isRequired,showAddProduct:h.bool,viewer:h.string.isRequired},getInitialState:function j(){return {reachEstimate:null,searchSource:null};},componentWillMount:function j(){this._updateProductSearchSource();},componentWillUnmount:function j(){this._subscriptions&&this._subscriptions.release();},_updateProductSearchSource:function j(){var k=this.state.searchSource;if(k===null)k=this._createAndBootstrapProductTypeSearchSource();c('ReactComposerTaggerActions').setTaggerSource(this.context.composerID,c('ReactComposerTaggerType').PRODUCT,k);},_createAndBootstrapProductTypeSearchSource:function j(){var k={filter:['product_items'],viewer:this.props.viewer};return new (c('WebAsyncSearchSource'))({getAllForEmptyQuery:true,queryRequests:[{uri:'/ajax/product_items/typeahead/query.php',data:Object.assign({},k,{is_bootstrap:false,page_ids:this.props.pageIDs})}],bootstrapRequests:[{uri:'/ajax/product_items/typeahead/bootstrap.php',data:Object.assign({},k,{is_bootstrap:true,page_ids:this.props.pageIDs})}],auxiliaryFields:{verified:'is_verified'}});}});f.exports=i;}),null);
__d("XBrandedContentTaggerNuxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/branded_content\/tagger\/nux\/",{action:{type:"Enum",required:true,enumType:1}});}),null);
__d('ReactComposerSponsorTaggerButton.react',['cx','fbt','AsyncRequest','BrandedContentTaggerNuxAction','ReactComposerContextMixin','ReactComposerLoggingName','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerTaggerActions','ReactComposerTaggerButton.react','ReactComposerTaggerStore','ReactComposerTaggerType','FluxContainer','React','SimpleXUIDialog','SponsorTagsOptInActionTypes','SponsorTagsOptInDialogContainer.react','SponsorTagsOptInDispatcher','SponsorTagsOptInStore','XBrandedContentTaggerNuxController','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').createClass({displayName:'ReactComposerSponsorTaggerButton',mixins:[c('ReactComposerContextMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerTaggerStore'))],statics:{taggerID:c('ReactComposerTaggerType').SPONSOR,loggingName:c('ReactComposerLoggingName').SPONSOR_TAGGER,calculateState:function k(l,m){var n=c('ReactComposerTaggerStore').getSelectedTagger(l);return {isOptedIn:c('SponsorTagsOptInStore').getState().isOptedIn,selected:n===this.taggerID,hasData:c('ReactComposerTaggerStore').hasData(l,this.taggerID),showNUX:c('ReactComposerTaggerStore').shouldShowNUX(l,this.taggerID)};},getStores:function k(){return [c('SponsorTagsOptInStore')];}},componentWillMount:function k(){c('SponsorTagsOptInDispatcher').explicitlyRegisterStores([c('SponsorTagsOptInStore')]);c('SponsorTagsOptInDispatcher').dispatch({type:c('SponsorTagsOptInActionTypes').QUERY_STATUS,profileID:this.context.targetID});},componentDidUpdate:function k(l,m){if(m.isOptedIn===false&&this.state.isOptedIn===true)c('ReactComposerTaggerActions').selectTagger(this.context.composerID,this.constructor.loggingName,this.constructor.taggerID,this.constructor.disableToggle);},componentDidMount:function k(){this._logNUXView();},render:function k(){var l=this.state.isOptedIn===false?c('React').createElement(c('SponsorTagsOptInDialogContainer.react'),null):null;return (c('React').createElement('div',{className:"_5v-8 uiContextualLayerParent",style:{display:'inline-block'}},c('React').createElement(c('ReactComposerTaggerButton.react'),babelHelpers['extends']({taggerID:this.constructor.taggerID,title:i._("Does this post feature a third party brand or product? If so, you must tag the associated Page. See Branded Content policy."),tooltip:i._("Does this post feature a third party brand or product? If so, you must tag the associated Page. See Branded Content policy."),className:"_5rzo",ref:'fbReactComposerSponsorTaggerButton',onSelect:this._onSelect},this.state),this.getNUX&&this.getNUX(),this.props.children),l));},_onSelect:function k(){if(this.state.isOptedIn===true){c('ReactComposerTaggerActions').selectTagger(this.context.composerID,this.constructor.loggingName,this.constructor.taggerID,this.constructor.disableToggle);}else if(this.state.isOptedIn===false){c('SponsorTagsOptInDispatcher').dispatch({type:c('SponsorTagsOptInActionTypes').SHOW});}else c('SimpleXUIDialog').show(i._("Sponsor Tags are currently unavailable. We appreciate your patience as we resolve the issue. Please try again later."),i._("Sorry, an Error has Occurred..."));},getNUX:function k(){if(!this.state.showNUX||!this.refs.fbReactComposerSponsorTaggerButton)return null;return (c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'left',contextRef:function(){return this.refs.fbReactComposerSponsorTaggerButton;}.bind(this),position:'above',shown:true,offsetY:12,onCloseButtonClick:function(){return this._onNUXClose();}.bind(this)},i._("Share branded content on Facebook with our new tool.")));},_onNUXClose:function k(){c('ReactComposerTaggerActions').handleSetTaggerShowNUX(this.context.composerID,c('ReactComposerTaggerType').SPONSOR,false);this._dismissNUX();},_dismissNUX:function k(){var l=c('XBrandedContentTaggerNuxController').getURIBuilder().setEnum('action',c('BrandedContentTaggerNuxAction').DISMISS).getURI();new (c('AsyncRequest'))().setMethod('post').setURI(l).send();},_logNUXView:function k(){var l=c('XBrandedContentTaggerNuxController').getURIBuilder().setEnum('action',c('BrandedContentTaggerNuxAction').LOG_VIEW).getURI();new (c('AsyncRequest'))().setMethod('post').setURI(l).send();}});f.exports=c('FluxContainer').create(j);}),null);
__d('ComposerVideoAdBreakActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirrorRecursive')({DELETE_AD_BREAK:'',INSERT_CURRENT_AD_BREAK:'',SET_CURRENT_AD_BREAK:'',SET_THUMBNAIL_URL_FOR_AD_BREAK:'',SET_IS_BRANDED_CONTENT_VIDEO:'',SET_RIGHT_AGREEMENT:'',SET_VIDEO_DURATION:'',UPDATE_AD_BREAKS_STATUS:''});f.exports=h;}),null);
__d('ComposerVideoAdBreakDispatcher',['ExplicitRegistrationReactDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationReactDispatcher'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this);}f.exports=new j({strict:true});}),null);
__d('ComposerVideoAdBreakActions',['ComposerVideoAdBreakActionTypes','ComposerVideoAdBreakDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h={deleteAdBreak:function i(j){c('ComposerVideoAdBreakDispatcher').dispatch({type:c('ComposerVideoAdBreakActionTypes').DELETE_AD_BREAK,adBreakIndex:j});},updateAdBreaksStatus:function i(j){c('ComposerVideoAdBreakDispatcher').dispatch({type:c('ComposerVideoAdBreakActionTypes').UPDATE_AD_BREAKS_STATUS,adBreaksDisabled:j});},insertCurrentAdBreak:function i(){c('ComposerVideoAdBreakDispatcher').dispatch({type:c('ComposerVideoAdBreakActionTypes').INSERT_CURRENT_AD_BREAK});},setIsBrandedContentVideo:function i(j){c('ComposerVideoAdBreakDispatcher').dispatch({type:c('ComposerVideoAdBreakActionTypes').SET_IS_BRANDED_CONTENT_VIDEO,isBrandedContentVideo:j});},setCurrentAdBreak:function i(j){var k=arguments.length<=1||arguments[1]===undefined?false:arguments[1];c('ComposerVideoAdBreakDispatcher').dispatch({type:c('ComposerVideoAdBreakActionTypes').SET_CURRENT_AD_BREAK,adBreak:j,isInputtingCurrentAdBreak:k});},setThumbnailURLForAdBreak:function i(j){c('ComposerVideoAdBreakDispatcher').dispatch({type:c('ComposerVideoAdBreakActionTypes').SET_THUMBNAIL_URL_FOR_AD_BREAK,adBreaks:j});},setVideoDuration:function i(j,k){c('ComposerVideoAdBreakDispatcher').dispatch({type:c('ComposerVideoAdBreakActionTypes').SET_VIDEO_DURATION,duration:j,existingAdBreaks:k});},setVideoRightsAgreed:function i(j){c('ComposerVideoAdBreakDispatcher').dispatch({type:c('ComposerVideoAdBreakActionTypes').SET_RIGHT_AGREEMENT,agree:j});}};f.exports=h;}),null);
__d('ReactComposerSponsorTaggerSelector.react',['cx','fbt','ActionList.react','AdsRichSelector.react','BrandedContentSponsorRelationship','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('AdsRichSelector.react').Option,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;n.prototype.$ReactComposerSponsorTaggerSelector1=function(){return {paid_partnership_with:{label:i._("Paid Partnership with"),detail:i._("When the message in your post was specifically created for the tagged brand"),value:c('BrandedContentSponsorRelationship').PAID_RELATIONSHIP_WITH},presented_by:{label:i._("Presented by"),detail:i._("When the tagged brand is just sponsoring your content and has no specific connection with the message"),value:c('BrandedContentSponsorRelationship').PRESENTED_BY}};};n.prototype.$ReactComposerSponsorTaggerSelector2=function(){var o=this.$ReactComposerSponsorTaggerSelector1(),p=[];for(var q in o)p.push(c('React').createElement(l,{key:q,label:o[q].label,value:o[q].value},c('React').createElement('div',{className:"_3e8q"},o[q].label),c('React').createElement(c('ActionList.react'),{className:"_3e8q"},o[q].detail)));return p;};n.prototype.render=function(){return (c('React').createElement(c('AdsRichSelector.react'),{defaultValue:this.props.defalutSponsorRelationship,onChange:this.props.onChange,useMenuDividers:true,maxMenuWidth:400,suppressed:true},this.$ReactComposerSponsorTaggerSelector2()));};function n(){j.apply(this,arguments);}n.propTypes={onChange:m.func.isRequired,defalutSponsorRelationship:m.number.isRequired};f.exports=n;}),null);
__d('ReactComposerSponsorTaggerComponent.react',['cx','fbt','BrandedContentSharedToSponsorStatus','BrandedContentSponsorRelationship','ReactComposerTaggerViewStyles','Grid.react','InputLabel.react','Link.react','React','TaggingLimits','TokenizerExampleSearchSource','XUICheckboxInput.react','XUIContextualDialog.react','XUIContextualDialogBody.react','XUITokenizer.react','ReactComposerSponsorTaggerSelector.react','emptyFunction'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('Grid.react').GridItem,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={tipFocused:false,inputFocused:false,edited:false,sponsorRelationship:this.$ReactComposerSponsorTaggerComponent1()},this.$ReactComposerSponsorTaggerComponent13=function(t){var u=t.target.checked?c('BrandedContentSharedToSponsorStatus').ALL_SHARED:c('BrandedContentSharedToSponsorStatus').NOT_SHARED;this.setState({edited:true});var v={sponsors:this.props.taggerData.sponsors,directShareStatus:u,sponsorRelationship:this.state.sponsorRelationship};this.props.onSelect&&this.props.onSelect(v);}.bind(this),this.$ReactComposerSponsorTaggerComponent6=function(t){this.setState({sponsorRelationship:t.value});var u={sponsors:this.props.taggerData.sponsors,directShareStatus:this.props.taggerData.directShareStatus,sponsorRelationship:t.value};this.props.onSelect&&this.props.onSelect(u);}.bind(this),this.$ReactComposerSponsorTaggerComponent7=function(t){var u=this.props.taggerData.sponsors,v=t.getUniqueID(),w=u.some(function(y){return y.getUniqueID()===v;});if(w){return;}else{this.setState({edited:true});u.push(t);}var x={sponsors:u,directShareStatus:this.props.taggerData.directShareStatus,sponsorRelationship:this.state.sponsorRelationship};this.props.onSelect&&this.props.onSelect(x);}.bind(this),this.$ReactComposerSponsorTaggerComponent11=function(t){var u=this.props.taggerData.sponsors,v=u.indexOf(t);if(v==-1)return;this.setState({edited:true});u.splice(v,1);var w={sponsors:u,directShareStatus:this.props.taggerData.directShareStatus,sponsorRelationship:this.state.sponsorRelationship};this.props.onSelect&&this.props.onSelect(w);}.bind(this),this.$ReactComposerSponsorTaggerComponent8=function(){this.setState({inputFocused:false});}.bind(this),this.$ReactComposerSponsorTaggerComponent9=function(){this.setState({inputFocused:true});}.bind(this),this.$ReactComposerSponsorTaggerComponent5=function(){this.setState({tipFocused:true});}.bind(this),this.$ReactComposerSponsorTaggerComponent4=function(){this.setState({tipFocused:false});}.bind(this),this.$ReactComposerSponsorTaggerComponent10=function(event){this.setState({edited:true});}.bind(this),p;}n.prototype.$ReactComposerSponsorTaggerComponent1=function(){'use strict';if(!this.props.showSponsorRelationship)return c('BrandedContentSponsorRelationship').WITH;if(this.props.taggerData.sponsorRelationship!==c('BrandedContentSponsorRelationship').WITH)return this.props.taggerData.sponsorRelationship;return c('BrandedContentSponsorRelationship').PAID_RELATIONSHIP_WITH;};n.prototype.$ReactComposerSponsorTaggerComponent2=function(){'use strict';this.props.onSelect&&this.props.onSelect({});};n.prototype.$ReactComposerSponsorTaggerComponent3=function(){'use strict';var o=!this.state.edited&&(this.state.inputFocused||this.state.tipFocused)&&this.props.taggerData.sponsors&&this.props.taggerData.sponsors.length===0,p=function(){return this.refs.typeahead;}.bind(this),q=c('React').createElement('span',{onMouseLeave:this.$ReactComposerSponsorTaggerComponent4,onMouseEnter:this.$ReactComposerSponsorTaggerComponent5},i._("Pages you tag in your post will be notified. They will be able to view your post's metrics and use it to create an ad. If you promote this post, the tagged Page can see the ad spend and its CPM metrics."),c('React').createElement('span',{className:"_2pis"},c('React').createElement(c('Link.react'),{href:'/policies/brandedcontent/',target:'_blank'},i._("See Policy"))));return c('React').createElement(c('XUIContextualDialog.react'),{contextRef:p,position:'above',shown:o,width:350},c('React').createElement(c('XUIContextualDialogBody.react'),null,q));};n.prototype.render=function(){'use strict';var o=i._("With"),p="_5esm";if(this.props.showSponsorRelationship){p="_40eg";o=c('React').createElement(c('ReactComposerSponsorTaggerSelector.react'),{onChange:this.$ReactComposerSponsorTaggerComponent6,defalutSponsorRelationship:this.state.sponsorRelationship});}return c('React').createElement(c('Grid.react'),{cols:2,className:"_5esl",role:'presentation'},c('React').createElement(l,{className:p,key:'label',role:'presentation'},o),c('React').createElement(l,{key:'tokenizer',className:"_5esw",role:'presentation'},c('React').createElement('div',null,c('React').createElement(c('XUITokenizer.react'),babelHelpers['extends']({ref:'typeahead'},this.props,{entries:this.props.taggerData.sponsors,focusedOnInit:this.props.autoFocus,onAddEntryAttempt:this.$ReactComposerSponsorTaggerComponent7,onInputBlur:this.$ReactComposerSponsorTaggerComponent8,onInputFocus:this.$ReactComposerSponsorTaggerComponent9,onQueryStringChange:this.$ReactComposerSponsorTaggerComponent10,onRemoveEntryAttempt:this.$ReactComposerSponsorTaggerComponent11,placeholder:this.props.placeholder,searchSource:this.props.taggerSource,limit:c('TaggingLimits').MAX_SPONSOR_TAGS})),this.$ReactComposerSponsorTaggerComponent3())),this.$ReactComposerSponsorTaggerComponent12());};n.prototype.$ReactComposerSponsorTaggerComponent12=function(){'use strict';var o=this.props.taggerData.directShareStatus===c('BrandedContentSharedToSponsorStatus').ALL_SHARED;return this.props.showDirectBoost?c('React').createElement(l,{colSpan:2,key:'toggle',role:'presentation'},c('React').createElement('div',{className:"_4m0r"},c('React').createElement(c('InputLabel.react'),null,c('React').createElement(c('XUICheckboxInput.react'),{name:'directBoostToggle',checked:o,onChange:this.$ReactComposerSponsorTaggerComponent13}),c('React').createElement('label',null,i._("Allow sponsor to boost this post"))))):null;};n.propTypes={autoFocus:m.bool,placeholder:m.string,taggerSource:m.object,taggerData:m.object.isRequired,onPeopleTagRemove:m.func,onSelect:m.func,taggerViewStyle:m.shape(c('ReactComposerTaggerViewStyles').Shape),showDirectBoost:m.bool,showSponsorRelationship:m.bool};n.defaultProps={autoFocus:true,onSelect:c('emptyFunction'),placeholder:i._("Who is sponsoring you for this post?"),taggerViewStyle:c('ReactComposerTaggerViewStyles').DEFAULT,taggerSource:new (c('TokenizerExampleSearchSource'))(),showDirectBoost:false,showSponsorRelationship:false,taggerData:{sponsors:[],directShareStatus:c('BrandedContentSharedToSponsorStatus').NOT_SHARED,sponsorRelationship:c('BrandedContentSponsorRelationship').WITH}};f.exports=n;}),null);
__d('ReactComposerSponsorTaggerContainer.react',['ReactComposerLoggingName','ReactComposerSponsorTaggerComponent.react','ReactComposerTaggerActions','ReactComposerTaggerContainerMixin','ReactComposerTaggerType','ComposerVideoAdBreakActions','React','SubscriptionsHandler','WebAsyncSearchSource'],(function a(b,c,d,e,f,g){var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerSponsorTaggerContainer',_subscriptions:undefined,mixins:[c('ReactComposerTaggerContainerMixin')],statics:{taggerID:c('ReactComposerTaggerType').SPONSOR,loggingName:c('ReactComposerLoggingName').SPONSOR_TAGGER,taggerComponent:c('ReactComposerSponsorTaggerComponent.react')},propTypes:{viewer:h.string.isRequired},getInitialState:function j(){return {sponsorSentences:null,reachEstimate:null,searchSource:null};},componentWillMount:function j(){this._updateSponsorSearchSource();},componentWillUnmount:function j(){this._subscriptions&&this._subscriptions.release();},__onTaggerDataChanged:function j(k){c('ComposerVideoAdBreakActions').setIsBrandedContentVideo(k.sponsors.length!==0);},_updateSponsorSearchSource:function j(){var k=this.state.searchSource;if(k===null)k=this._createAndBootstrapSponsorTypeSearchSource();c('ReactComposerTaggerActions').setTaggerSource(this.context.composerID,c('ReactComposerTaggerType').SPONSOR,k);},_createAndBootstrapSponsorTypeSearchSource:function j(){var k={filter:['page'],viewer:this.props.viewer,rsp:'mentions',bsp:'true'};return new (c('WebAsyncSearchSource'))({queryRequests:[{uri:'/ajax/typeahead/search.php',data:Object.assign({},k,{is_bootstrap:false})}],bootstrapRequests:[{uri:'/ajax/typeahead/first_degree.php',data:Object.assign({},k,{is_bootstrap:true})}],auxiliaryFields:{verified:'is_verified'}});}});f.exports=i;}),null);
__d('ReactComposerTargetingTaggerButtonMixin',['cx','fbt'],(function a(b,c,d,e,f,g,h,i){'use strict';var j={getInitialState:function k(){return {dialogShown:false};},getTitleTooltip:function k(){if(this.props.createLiveVideoTooltipText!=null){return this.props.createLiveVideoTooltipText;}else if(this.props.useTargetingAsFilter){return i._("Narrow the potential News Feed audience for this post");}else return i._("Choose the preferred audiences for this post");},getTitle:function k(){return this.getTitleTooltip();},getTooltip:function k(){return this.getTitleTooltip();},getClassName:function k(){return "_lmf";},getRef:function k(){return 'fbReactComposerTargetingTagger';},_onToggle:function k(l){setTimeout(function(){return this.setState({dialogShown:l});}.bind(this),0);},_onSelectX:function k(){this.setState({dialogShown:true});}};f.exports=j;}),null);
__d("XReactComposerTargetingTaggerNuxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/react_composer\/edit\/targeting_tagger_nux\/",{});}),null);
__d('ReactComposerTargetingTaggerButton.react',['fbt','AsyncRequest','ReactComposerTaggerButtonMixin','ReactComposerTaggerType','ReactComposerTargetingTaggerButtonMixin','PagesComposerAudiences.react','React','ReactLayeredComponentMixin_DEPRECATED','XReactComposerTargetingTaggerNuxController','XUIAmbientNUX.react','XUIText.react','PagesComposerAudiencesConstants'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('PagesComposerAudiencesConstants').TABS,k=-12,l=300,m=c('React').createClass({displayName:'ReactComposerTargetingTaggerButton',mixins:[c('ReactComposerTaggerButtonMixin'),c('ReactComposerTargetingTaggerButtonMixin'),c('ReactLayeredComponentMixin_DEPRECATED')],propTypes:{createLiveVideoTooltipText:i.string,feedTargetingGK:i.bool,feedTargetingShowReachGK:i.bool,hideFeedTargeting:i.bool,shouldShowTargetingTaggerNux:i.bool,shouldShowRestrictionTabNux:i.bool,useTargetingAsFilter:i.bool,shouldHideLeftFooter:i.bool,allowExclusionsWithoutInclusions:i.bool},statics:{taggerID:c('ReactComposerTaggerType').TARGETING,disableToggle:true},getDefaultProps:function n(){return {feedTargetingGK:false,feedTargetingShowReachGK:false,hideFeedTargeting:false,useTargetingAsFilter:true};},getInitialState:function n(){return {showTargetingTaggerNux:this.props.shouldShowTargetingTaggerNux};},componentDidMount:function n(){var o=!this.state.dialogShown&&this.state.showTargetingTaggerNux&&this.props.feedTargetingGK;if(o){var p=c('XReactComposerTargetingTaggerNuxController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(p).setMethod('POST').setData({impression:true}).send();}},componentWillUnmount:function n(){if(this.state.showTargetingTaggerNux)this.setState({showTargetingTaggerNux:false});},_onNuxClose:function n(){this.setState({showTargetingTaggerNux:false});var o=c('XReactComposerTargetingTaggerNuxController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(o).setMethod('POST').setData({acked:true}).send();},_renderNux:function n(){return (c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.fbReactComposerTargetingTagger;}.bind(this),onCloseButtonClick:this._onNuxClose,offsetY:k,position:'below',shown:true,width:'custom',customwidth:l},c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),null,h._("Use Audience Optimization to reach people who are more likely to engage with your post.")))));},renderLayers:function n(){var o=!this.state.dialogShown&&this.state.showTargetingTaggerNux&&this.props.feedTargetingGK;if(o)return this._renderNux();if(this.state.dialogShown)return (c('React').createElement(c('PagesComposerAudiences.react'),{allowExclusionsWithoutInclusions:this.props.allowExclusionsWithoutInclusions,shown:this.state.dialogShown,onToggle:this._onToggle,onSave:function(){return this._onToggle(false);}.bind(this),initialActiveKey:this.props.hideFeedTargeting?j.GATING:j.TARGETING,shouldHideLeftFooter:this.props.shouldHideLeftFooter,useTargetingAsFilter:this.props.useTargetingAsFilter,feedTargetingShowReachGK:this.props.feedTargetingShowReachGK,hideFeedTargeting:this.props.hideFeedTargeting,shouldShowRestrictionTabNux:this.props.shouldShowRestrictionTabNux}));return {};}});f.exports=m;}),null);
__d('ReactComposerTargetingTaggerComponent.react',['cx','fbt','Grid.react','React','XUICloseButton.react','XUIText.react','emptyFunction','isEmpty'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('Grid.react').GridItem,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$ReactComposerTargetingTaggerComponent1=function(){this.props.onSelect({});}.bind(this),p;}n.prototype.render=function(){'use strict';return (c('React').createElement(c('Grid.react'),{cols:2,className:"_5esl",role:'presentation'},c('React').createElement(l,{key:'prefix',className:"_5esm",role:'presentation'},i._("Targeting")),c('React').createElement(l,{key:'tagger',className:"_5esw",role:'presentation'},c('React').createElement('div',{className:"_2doa"},c('React').createElement('div',{className:"_2dob"},c('React').createElement(c('XUICloseButton.react'),{className:"_2doc"+(c('isEmpty')(this.props.taggerData)?' '+"hidden_elem":''),size:'small',type:'button',onClick:this.$ReactComposerTargetingTaggerComponent1})),c('React').createElement('div',{className:"_2dod"},c('React').createElement(c('XUIText.react'),null,this.props.targetingSentences))))));};n.propTypes={taggerData:m.object.isRequired,onSelect:m.func.isRequired,targetingSentences:m.object};n.defaultProps={taggerData:{},onSelect:c('emptyFunction')};f.exports=n;}),null);
__d('ReactComposerTargetingTaggerContainer.react',['ReactComposerLoggingName','ReactComposerTaggerActions','ReactComposerTaggerContainerStateMixin','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComposerTargetingTaggerComponent.react','SubscriptionsHandler','React'],(function a(b,c,d,e,f,g){var h=c('React').createClass({displayName:'ReactComposerTargetingTaggerContainer',_subscriptions:undefined,mixins:[c('ReactComposerTaggerContainerStateMixin')],statics:{taggerID:c('ReactComposerTaggerType').TARGETING},getInitialState:function i(){return {targetingSentences:null};},componentWillMount:function i(){var j=new (c('SubscriptionsHandler'))();j.addSubscriptions(c('ReactComposerTaggerStore').addChangeListener(this._onChange));this._subscriptions=j;},componentWillUnmount:function i(){this._subscriptions&&this._subscriptions.release();},_onChange:function i(){var j=c('ReactComposerTaggerStore').getTaggerData(this.context.composerID,c('ReactComposerTaggerType').TARGETING);this.setState({targetingSentences:j?j.targetingSentences:null});},_onTaggerDataChanged:function i(j){this.__onTaggerDataChanged&&this.__onTaggerDataChanged(j);c('ReactComposerTaggerActions').setTaggerData(this.context.composerID,c('ReactComposerLoggingName').TARGETING_TAGGER,c('ReactComposerTaggerType').TARGETING,j);this.props.onSelect&&this.props.onSelect(j);},render:function i(){if(!this.state.isSelected)return c('React').createElement('noscript',null);return (c('React').createElement(c('ReactComposerTargetingTaggerComponent.react'),babelHelpers['extends']({},this.props,this.state,{autoFocus:this.state.autoFocus,taggerSource:this.state.taggerSource,taggerData:this.state.taggerData,onSelect:this._onTaggerDataChanged})));}});f.exports=h;}),null);
__d('ReactPagesComposerBodyWrapper.react',['ReactComposerAttachmentType','ReactComposerBody.react','ReactComposerBoostedPostLazyButton.react','ReactComposerCallLazyAttachment.react','ReactComposerConfig','ReactComposerContextConfig','ReactComposerContextProviderMixin','ReactComposerCTALazyAttachment.react','ReactComposerGetDirectionsLazyAttachment.react','ReactComposerLiveVideoLazyAttachment.react','ReactComposerMediaLazyAttachment.react','ReactComposerMessageLazyAttachment.react','ReactComposerPagesBootloader','ReactComposerPagesPrivacyContainer.react','ReactComposerProductTaggerButton.react','ReactComposerProductTaggerContainer.react','ReactComposerQAndALazyAttachment.react','ReactComposerQuestionLazyAttachment.react','ReactComposerSponsorTaggerButton.react','ReactComposerSponsorTaggerContainer.react','ReactComposerStatusLazyAttachment.react','ReactComposerTaggerActions','ReactComposerTaggerType','ReactComposerTargetingTaggerButton.react','ReactComposerTargetingTaggerContainer.react','PagesComposerExtraLazyAttachment.react','React','dotAccess'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactPagesComposerBodyWrapper',mixins:[c('ReactComposerContextProviderMixin')],propTypes:{contextConfig:c('ReactComposerContextConfig').isRequired,config:c('ReactComposerConfig').isRequired,selectedAttachment:h.string},_getAdditionalTaggersForStatusAttachment:function j(){var k=[],l=this.props.config.taggersConfig;if(l[c('ReactComposerTaggerType').TARGETING].enabled)k.push(this._getTargetTagger());if(l[c('ReactComposerTaggerType').SPONSOR].enabled)k.push(this._getSponsorTagger());if(l[c('ReactComposerTaggerType').PRODUCT].enabled)k.push(this._getProductTagger());return k;},_getAdditionalTaggersForMediaAttachment:function j(){return this._getAdditionalTaggersForStatusAttachment();},_getTargetTagger:function j(){var k=this.props.config.taggersConfig[c('ReactComposerTaggerType').TARGETING],l=this.props.config.nuxConfig;return {button:c('React').createElement(c('ReactComposerTargetingTaggerButton.react'),{feedTargetingGK:c('dotAccess')(k,'feedTargetingGK'),feedTargetingShowReachGK:c('dotAccess')(k,'feedTargetingShowReachGK'),shouldShowTargetingTaggerNux:l.shouldShowTargetingTaggerNux,shouldShowRestrictionTabNux:this.props.config.nuxConfig.shouldShowRestrictionTabNux,useTargetingAsFilter:!c('dotAccess')(k,'feedTargetingGK'),key:'targeting_button'}),container:c('React').createElement(c('ReactComposerTargetingTaggerContainer.react'),{key:'targeting_container'})};},_getSponsorTagger:function j(){var k=this.props.config.taggersConfig[c('ReactComposerTaggerType').SPONSOR];c('ReactComposerTaggerActions').handleSetTaggerShowNUX(this.props.contextConfig.composerID,c('ReactComposerTaggerType').SPONSOR,k.showSponsorTaggerButtonNUX);return {button:c('React').createElement(c('ReactComposerSponsorTaggerButton.react'),{key:'sponsor_button'}),container:c('React').createElement(c('ReactComposerSponsorTaggerContainer.react'),{key:'sponsor_container',viewer:this.props.config.actorConfig.viewerAccountID,showDirectBoost:this.props.config.taggersConfig[c('ReactComposerTaggerType').SPONSOR].showSponsorTaggerDirectBoost,showSponsorRelationship:this.props.config.taggersConfig[c('ReactComposerTaggerType').SPONSOR].showSponsorTaggerSponsorRelationship})};},_getProductTagger:function j(){var k=this.props.config.taggersConfig[c('ReactComposerTaggerType').PRODUCT];c('ReactComposerTaggerActions').handleSetTaggerShowNUX(this.props.contextConfig.composerID,c('ReactComposerTaggerType').PRODUCT,k.showProductTaggerButtonNUX);var l=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA];return {button:c('React').createElement(c('ReactComposerProductTaggerButton.react'),{key:'product_button',nuxTipID:k.productTaggerButtonNUXTipID,productTaggerType:l.productTaggerType}),container:c('React').createElement(c('ReactComposerProductTaggerContainer.react'),{key:'product_container',pageIDs:[this.props.config.targetData.targetID],productTaggerType:l.productTaggerType,reactComposerID:this.props.contextConfig.composerID,showAddProduct:k.showAddProduct,viewer:this.props.config.actorConfig.viewerAccountID})};},_getAdditionalFooterActionsForStatusAttachment:function j(){var k=[];if(this.props.config.boostedPostButtonConfig)k.push(c('React').createElement(c('ReactComposerBoostedPostLazyButton.react'),babelHelpers['extends']({},this.props.config.boostedPostButtonConfig,{key:'boosted_post_button',reactComposerID:this.props.contextConfig.composerID})));if(this.props.config.taggersConfig[c('ReactComposerTaggerType').TARGETING].enabled&&!c('dotAccess')(this.props.config,'feedTargetingGK'))k.push(c('React').createElement(c('ReactComposerPagesPrivacyContainer.react'),{key:'privacy_selector',lockToPrivacy:this.props.config.taggersConfig[c('ReactComposerTaggerType').TARGETING].lockToPrivacy,useTargetingAsFilter:true}));return k;},_getAdditionalFooterActionsForLiveVideoAttachment:function j(){return [];},_getAdditionalFooterActionsForMediaAttachment:function j(){return this._getAdditionalFooterActionsForStatusAttachment();},render:function j(){var k=this.props.config.attachmentsConfig,l=k[c('ReactComposerAttachmentType').STATUS],m=k[c('ReactComposerAttachmentType').LIVE_VIDEO];return (c('React').createElement(c('ReactComposerBody.react'),null,c('React').createElement(c('ReactComposerStatusLazyAttachment.react'),{config:this.props.config,selected:!this.props.selectedAttachment||this.props.selectedAttachment===c('ReactComposerAttachmentType').STATUS,placeholder:l.placeholder,additionalTaggers:this._getAdditionalTaggersForStatusAttachment(),additionalFooterActions:this._getAdditionalFooterActionsForStatusAttachment(),bootloader:c('ReactComposerPagesBootloader')}),c('React').createElement(c('ReactComposerMediaLazyAttachment.react'),{selected:this.props.selectedAttachment===c('ReactComposerAttachmentType').MEDIA,additionalTaggers:this._getAdditionalTaggersForMediaAttachment(),additionalFooterActions:this._getAdditionalFooterActionsForMediaAttachment(),bootloader:c('ReactComposerPagesBootloader'),config:this.props.config}),m.enabled?c('React').createElement(c('ReactComposerLiveVideoLazyAttachment.react'),{additionalFooterActions:this._getAdditionalFooterActionsForLiveVideoAttachment(),selected:this.props.selectedAttachment===c('ReactComposerAttachmentType').LIVE_VIDEO,bootloader:c('ReactComposerPagesBootloader'),config:this.props.config}):null,c('React').createElement(c('PagesComposerExtraLazyAttachment.react'),{selected:this.props.selectedAttachment===c('ReactComposerAttachmentType').PAGES_EXTRA,bootloader:c('ReactComposerPagesBootloader'),config:this.props.config}),c('React').createElement(c('ReactComposerQuestionLazyAttachment.react'),{selected:this.props.selectedAttachment===c('ReactComposerAttachmentType').QUESTION,config:this.props.config,key:c('ReactComposerAttachmentType').QUESTION,bootloader:c('ReactComposerPagesBootloader')}),c('React').createElement(c('ReactComposerQAndALazyAttachment.react'),{selected:this.props.selectedAttachment===c('ReactComposerAttachmentType').QANDA,config:this.props.config,key:c('ReactComposerAttachmentType').QANDA,bootloader:c('ReactComposerPagesBootloader')}),c('React').createElement(c('ReactComposerCTALazyAttachment.react'),{selected:this.props.selectedAttachment===c('ReactComposerAttachmentType').CTA,config:this.props.config,key:c('ReactComposerAttachmentType').CTA,bootloader:c('ReactComposerPagesBootloader'),additionalFooterActions:this._getAdditionalFooterActionsForStatusAttachment()}),c('React').createElement(c('ReactComposerMessageLazyAttachment.react'),{selected:this.props.selectedAttachment===c('ReactComposerAttachmentType').MESSAGE,config:this.props.config,key:c('ReactComposerAttachmentType').MESSAGE,bootloader:c('ReactComposerPagesBootloader'),additionalFooterActions:this._getAdditionalFooterActionsForStatusAttachment()}),c('React').createElement(c('ReactComposerGetDirectionsLazyAttachment.react'),{selected:this.props.selectedAttachment===c('ReactComposerAttachmentType').GET_DIRECTIONS,config:this.props.config,key:c('ReactComposerAttachmentType').GET_DIRECTIONS,bootloader:c('ReactComposerPagesBootloader'),additionalFooterActions:this._getAdditionalFooterActionsForStatusAttachment()}),c('React').createElement(c('ReactComposerCallLazyAttachment.react'),{selected:this.props.selectedAttachment===c('ReactComposerAttachmentType').CALL,config:this.props.config,key:c('ReactComposerAttachmentType').CALL,bootloader:c('ReactComposerPagesBootloader'),additionalFooterActions:this._getAdditionalFooterActionsForStatusAttachment()})));}});f.exports=i;}),null);
__d('ReactPagesComposer.react',['cx','ReactComposer.react','ReactComposerAttachmentActions','ReactPagesComposerBodyWrapper.react','ReactComposerConfig','ReactComposerContextConfig','ReactComposerContextProviderMixin','ComposerEntryPointRef','ReactComposerLazyHeader.react','ReactComposerLiveVideoAttachmentSelector.react','ReactComposerMediaAttachmentSelector.react','ReactComposerPagesStore','ReactComposerPrefillUtils','ReactComposerStatusAttachmentSelector.react','ReactComposerAttachmentType','BootloadedComponent.react','JSResource','PagesComposer','PagesComposerExtraAttachmentSelector.react','React','XUISpinner.react','PagesComposerUnpublishedPostsStore'],(function a(b,c,d,e,f,g,h){c('PagesComposerUnpublishedPostsStore');var i=c('React').createClass({displayName:'ReactPagesComposer',mixins:[c('ReactComposerContextProviderMixin')],propTypes:{contextConfig:c('ReactComposerContextConfig').isRequired,config:c('ReactComposerConfig').isRequired},componentDidMount:function j(){c('PagesComposer').init(this.props.contextConfig.composerID,this.props.contextConfig.targetID);c('ReactComposerPagesStore').registerComposerID(this.props.contextConfig.composerID);if(this.props.config.expanded)c('ReactComposerAttachmentActions').selectAttachment(this.props.contextConfig.composerID,c('ReactComposerAttachmentType').STATUS,true);},componentWillMount:function j(){if(this.props.prefillConfig)c('ReactComposerPrefillUtils').prefill(this.props.contextConfig.composerID,this.props.prefillConfig);},render:function j(){var k=this.props.config.attachmentsConfig,l=k[c('ReactComposerAttachmentType').PAGES_EXTRA],m=k[c('ReactComposerAttachmentType').STATUS],n=k[c('ReactComposerAttachmentType').MEDIA],o=k[c('ReactComposerAttachmentType').LIVE_VIDEO];return (c('React').createElement(c('ReactComposer.react'),{hideBorders:this.props.config.hideBorders!==false,loggingConfig:this.props.config.loggingConfig},c('React').createElement(c('ReactComposerLazyHeader.react'),{background:'light-wash',noHorizontalMargin:true,rightChild:this._renderActorSelector(),showDelimiter:false},c('React').createElement(c('ReactComposerStatusAttachmentSelector.react'),{label:m.label}),n.enabled?c('React').createElement(c('ReactComposerMediaAttachmentSelector.react'),null):null,o.enabled?c('React').createElement(c('ReactComposerLiveVideoAttachmentSelector.react'),null):null,l.enabled?c('React').createElement(c('PagesComposerExtraAttachmentSelector.react'),{enabled:!!l.enabled,label:l.label,icon:l.icon,aymtNuxEnabled:l.aymtNuxEnabled,attachmentsConfig:l}):null),c('React').createElement(c('ReactPagesComposerBodyWrapper.react'),this.props)));},_renderActorSelector:function j(){var k=this.props.contextConfig.composerType;if(k!==c('ComposerEntryPointRef').PAGES_FEED&&k!==c('ComposerEntryPointRef').TIMELINE)return null;var l=this.props.config.actorConfig;l.composerID=this.props.contextConfig.composerID;return (c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({},l,{bootloadPlaceholder:c('React').createElement(c('XUISpinner.react'),{className:"_3igw"}),bootloadLoader:c('JSResource')('ReactComposerActorSelectorContainer.react').__setRef('ReactPagesComposer.react')})));}});f.exports=i;}),null);
__d('PagesPicUIEvents',[],(function a(b,c,d,e,f,g){var h={PHOTO_DESELECTED:'PagesPicUIEvents/photoDeselected',PHOTO_SELECTED:'PagesPicUIEvents/photoSelected',PHOTOS_SELECTED_CONFIRM:'PagesPicUIEvents/photosSelectedConfirm'};f.exports=h;}),null);
__d('PagesPicModalManager',['Arbiter','PagesPicUIEvents','tidyEvent'],(function a(b,c,d,e,f,g){function h(){'use strict';this.setIsOpen(false);}h.prototype.setIsOpen=function(i){'use strict';this.$PagesPicModalManager1=i;return this;};h.prototype.isOpen=function(){'use strict';return this.$PagesPicModalManager1;};h.prototype.informPhotoSelected=function(i){'use strict';c('Arbiter').inform(c('PagesPicUIEvents').PHOTO_SELECTED,i);};h.prototype.informPhotoDeselected=function(i){'use strict';c('Arbiter').inform(c('PagesPicUIEvents').PHOTO_DESELECTED,i);};h.prototype.informPhotosSelectedConfirm=function(i){'use strict';c('Arbiter').inform(c('PagesPicUIEvents').PHOTOS_SELECTED_CONFIRM,i);};h.prototype.subscribePhotoSelected=function(i){'use strict';c('tidyEvent')(c('Arbiter').subscribe(c('PagesPicUIEvents').PHOTO_SELECTED,i));};h.prototype.subscribePhotoDeselected=function(i){'use strict';c('tidyEvent')(c('Arbiter').subscribe(c('PagesPicUIEvents').PHOTO_DESELECTED,i));};h.prototype.subscribePhotosSelectedConfirm=function(i){'use strict';return c('tidyEvent')(c('Arbiter').subscribeOnce(c('PagesPicUIEvents').PHOTOS_SELECTED_CONFIRM,i));};f.exports=new h();}),null);
__d('ReactComposerCanvasActions',['ReactComposerDispatcher','ReactComposerCanvasActionType'],(function a(b,c,d,e,f,g){var h={showCanvasSelector:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerCanvasActionType').SHOW_CANVAS_SELECTOR});},hideCanvasSelector:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerCanvasActionType').HIDE_CANVAS_SELECTOR});}};f.exports=h;}),null);
__d('ReactComposerPhotoCarouselActions',['ReactComposerPhotoCarouselActionType','ReactComposerDispatcher','ReactComposerPhotoStore'],(function a(b,c,d,e,f,g){c('ReactComposerPhotoStore');var h={selectPhotoCarouselEntryPoint:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoCarouselActionType').SELECT_PHOTO_CAROUSEL});},unselectPhotoCarouselEntryPoint:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoCarouselActionType').UNSELECT_PHOTO_CAROUSEL});},setPreviewCompleted:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoCarouselActionType').PREVIEW_COMPLETED});},setPreviewIncompleted:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoCarouselActionType').PREVIEW_INCOMPLETED});},showPhotoCarouselUrlEditArea:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,source:k,targetID:l,type:c('ReactComposerPhotoCarouselActionType').SHOW_CAROUSEL_URL_INPUT_AREA});},hidePhotoCarouselUrlEditArea:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoCarouselActionType').HIDE_CAROUSEL_URL_INPUT_AREA});},seenNux:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoCarouselActionType').SEEN_NUX});}};f.exports=h;}),null);
__d('SlideshowMediaUploadContainer.react',['cx','fbt','ix','React','Image.react','XUIButton.react','XUINotice.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=l.constructor).call.apply(n,[this].concat(q)),this.$SlideshowMediaUploadContainer1=function(){if(!this.props.errorMessage)return null;return (c('React').createElement('div',{className:"_3dg4"},c('React').createElement(c('XUINotice.react'),{use:'warn'},this.props.errorMessage)));}.bind(this),o;}m.prototype.render=function(){return (c('React').createElement('div',babelHelpers['extends']({},this.props,{className:"_v32"+(!!this.props.errorMessage?' '+"_16q2":'')}),this.$SlideshowMediaUploadContainer1(),c('React').createElement(c('Image.react'),{className:"_v33",hidden:!!this.props.errorMessage,src:j("images\/slideshow\/photostack.png")}),c('React').createElement('div',{className:"_3dg5"+(!!this.props.errorMessage?' '+"_16q2":'')},i._("Use photos or video stills to create a slideshow"),c('React').createElement('div',{className:"_v34"+(!!this.props.errorMessage?' '+"_16q2":'')},this.props.children))));};m.getImageUploadButton=function(){return c('React').createElement(c('XUIButton.react'),{className:"_v35",href:{url:'#'},image:c('React').createElement(c('Image.react'),{className:"_v36",src:j("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/photo-add_20_fig-white.png")}),label:i._("Add Photos"),size:'xlarge',use:'confirm'});};m.getVideoUploadButton=function(){return c('React').createElement(c('XUIButton.react'),{className:"_v35",href:{url:'#'},image:c('React').createElement(c('Image.react'),{className:"_v36",src:j("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/camcorder-plus_20_fig-dark-80.png")}),label:i._("Add Video"),size:'xlarge'});};m.defaultProps={children:null,errorMessage:null};f.exports=m;}),null);
__d("XPagesPicMenuDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/profile\/pages\/picture\/menu_dialog\/",{multiselect:{type:"Bool",defaultValue:false},page_id:{type:"Int",required:true},source:{type:"String",defaultValue:"unknown"},__asyncDialog:{type:"Int"}});}),null);
__d('ReactComposerSlideshowImageUploadsContainer.react',['cx','Link.react','SlideshowMediaUploadContainer.react','Arbiter','AsyncDialog','AsyncRequest','ReactComposerSlideshowActions','PagesPicModalManager','React','XPagesPicMenuDialogController','emptyFunction','tidyEvent'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l='slideshow_pages_composer';i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$ReactComposerSlideshowImageUploadsContainer1=function(event){var s=this.refs.imageFileInput.getFileInput();if(s!==null&&s!==undefined&&this.props.onFilesSelected!==null&&this.props.onFilesSelected!==undefined)this.props.onFilesSelected(event,s);}.bind(this),this.$ReactComposerSlideshowImageUploadsContainer3=function(){c('AsyncDialog').send(new (c('AsyncRequest'))(this.$ReactComposerSlideshowImageUploadsContainer4()),function(s){self.$ReactComposerSlideshowImageUploadsContainer2=s;var t=c('PagesPicModalManager').subscribePhotosSelectedConfirm(function(u,v){c('ReactComposerSlideshowActions').selectImagesConfirm(this.props.composerID,v);s.hide();}.bind(this));s.subscribe('hide',function(event){c('Arbiter').unsubscribe(t);});}.bind(this));}.bind(this),this.$ReactComposerSlideshowImageUploadsContainer4=function(){return c('XPagesPicMenuDialogController').getURIBuilder().setInt('page_id',this.props.pageID).setString('source',l).setBool('multiselect',true).getURI();}.bind(this),o;}m.handleFileInput=function(n){c('tidyEvent')(n.subscribe('change',function(event){if(!n.getValue())return;this.$ReactComposerSlideshowImageUploadsContainer1(event,n);if(self.$ReactComposerSlideshowImageUploadsContainer2)self.$ReactComposerSlideshowImageUploadsContainer2.hide();}.bind(this)));};m.prototype.componentWillMount=function(){m.$ReactComposerSlideshowImageUploadsContainer1=this.props.onFilesSelected;};m.prototype.render=function(){var n=null;switch(this.props.imageUploadButtonType){case 'more_link':n=c('React').createElement(c('Link.react'),{className:"_38i2"});break;case 'add_button':n=c('SlideshowMediaUploadContainer.react').getImageUploadButton();break;}return c('React').createElement('span',{onClick:this.$ReactComposerSlideshowImageUploadsContainer3,role:'presentation'},n);};m.$ReactComposerSlideshowImageUploadsContainer1=c('emptyFunction');m.$ReactComposerSlideshowImageUploadsContainer2=null;m.propTypes={composerID:k.string.isRequired,imageUploadButtonType:k.oneOf(['more_link','add_button']).isRequired,mediaAcceptParam:k.string.isRequired,pageID:k.string.isRequired,onFilesSelected:k.func.isRequired};f.exports=m;}),null);
__d('SlideshowFrameImage.react',['Image.react','React','SlideshowImageUtil'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.$SlideshowFrameImage5=function(){if(this.props.croppingSpec){this.$SlideshowFrameImage3={width:this.props.imageWidth,height:this.props.imageHeight};this.$SlideshowFrameImage4={x:-this.props.croppingSpec.topLeft[0],y:-this.props.croppingSpec.topLeft[1]};this.$SlideshowFrameImage1={width:this.props.croppingSpec.bottomRight[0]+this.$SlideshowFrameImage4.x,height:this.props.croppingSpec.bottomRight[1]+this.$SlideshowFrameImage4.y};}else{this.$SlideshowFrameImage3={width:this.props.imageWidth,height:this.props.imageHeight};this.$SlideshowFrameImage4={x:0,y:0};this.$SlideshowFrameImage1={width:this.props.imageWidth,height:this.props.imageHeight};}if(this.props.fitToMaxHeightAndWidth){var k=this.props.maxWidth/this.$SlideshowFrameImage1.width;this.$SlideshowFrameImage3.width*=k;this.$SlideshowFrameImage4.x*=k;this.$SlideshowFrameImage1.width*=k;var l=this.props.maxHeight/this.$SlideshowFrameImage1.height;this.$SlideshowFrameImage3.height*=l;this.$SlideshowFrameImage4.y*=l;this.$SlideshowFrameImage1.height*=l;}else{var m=Math.min(this.props.maxWidth/this.$SlideshowFrameImage1.width,this.props.maxHeight/this.$SlideshowFrameImage1.height);this.$SlideshowFrameImage3.width*=m;this.$SlideshowFrameImage3.height*=m;this.$SlideshowFrameImage4.x*=m;this.$SlideshowFrameImage4.y*=m;this.$SlideshowFrameImage1.width*=m;this.$SlideshowFrameImage1.height*=m;}this.$SlideshowFrameImage2={x:(this.props.maxWidth-this.$SlideshowFrameImage1.width)/2,y:(this.props.maxHeight-this.$SlideshowFrameImage1.height)/2};};j.prototype.$SlideshowFrameImage6=function(){var k=this.props.textoverlay,l=c('SlideshowImageUtil').getScaleMultiplier(this.props.maxWidth,this.props.maxHeight);if(!k||!k.textoverlay_content)return null;var m=c('SlideshowImageUtil').calculateTextboxCoordinates(this.props.maxHeight,this.props.maxWidth,k,l),n=k.text_alignment.split('-')[1];return (c('React').createElement('div',{style:{backgroundColor:c('SlideshowImageUtil').convertHexToRGBA(k.background_color),color:k.font_color,position:'absolute',fontFamily:k.font,fontSize:c('SlideshowImageUtil').getFontSize(l),fontWeight:c('SlideshowImageUtil').getFontWeight(k.bold),letterSpacing:'0.2px',lineHeight:c('SlideshowImageUtil').getLineHeight(),marginLeft:m.marginLeft,marginTop:m.marginTop,maxHeight:c('SlideshowImageUtil').getTextoverlayMaxEdge(this.props.maxHeight,l),maxWidth:c('SlideshowImageUtil').getTextoverlayMaxEdge(this.props.maxWidth,l),overflow:'hidden',overflowWrap:'break-word',padding:c('SlideshowImageUtil').getTextoverlayPadding(l),textAlign:n,whiteSpace:'pre-wrap'}},k.textoverlay_content));};j.prototype.render=function(){this.$SlideshowFrameImage5();return (c('React').createElement('div',{className:this.props.className,style:{position:this.props.positionStyle,width:this.$SlideshowFrameImage1.width,height:this.$SlideshowFrameImage1.height,left:this.$SlideshowFrameImage2.x,top:this.$SlideshowFrameImage2.y,overflow:'hidden'}},c('React').createElement(c('Image.react'),{src:this.props.imageSrc,width:this.$SlideshowFrameImage3.width,height:this.$SlideshowFrameImage3.height,style:{position:'absolute',left:this.$SlideshowFrameImage4.x,top:this.$SlideshowFrameImage4.y}}),this.$SlideshowFrameImage6()));};function j(){h.apply(this,arguments);}j.defaultProps={className:null,croppingSpec:null,fitToMaxHeightAndWidth:false,positionStyle:'absolute',textoverlay:null};f.exports=j;}),null);
__d('SlideshowFramesPanel.react',['cx','React','SlideshowImageUtil','SlideshowFrameImage.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=3,l=110,m=110;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$SlideshowFramesPanel1=function(t){return (c('React').createElement('div',{onClick:function(){return this.$SlideshowFramesPanel2(t);}.bind(this),role:'presentation'},c('React').createElement(c('SlideshowFrameImage.react'),{className:"_qme",croppingSpec:c('SlideshowImageUtil').getFullSizeImageBoxCroppingSpec({width:t.width,height:t.height},{width:m,height:l}),imageSrc:t.uri,imageWidth:t.width,imageHeight:t.height,maxWidth:m,maxHeight:l,positionStyle:'relative'})));}.bind(this),this.$SlideshowFramesPanel2=function(t){this.props.onFrameImageSelected(t);}.bind(this),this.$SlideshowFramesPanel3=function(t){return t.map(function(u,v){return (c('React').createElement('div',{className:"_qmf",key:u.id},this.$SlideshowFramesPanel1(u)));}.bind(this));}.bind(this),this.$SlideshowFramesPanel4=function(){var t=this.props.frameImages,u=0,v=[];for(u=0;u<t.length;u+=k){var w=t.slice(u,u+k);v.push(c('React').createElement('div',{key:u},this.$SlideshowFramesPanel3(w)));}return v;}.bind(this),this.$SlideshowFramesPanel5=function(){return (c('React').createElement('div',{className:"_qmk"},this.$SlideshowFramesPanel4()));}.bind(this),p;}n.prototype.render=function(){return (c('React').createElement('div',{className:"_qmm"},this.$SlideshowFramesPanel5()));};f.exports=n;}),null);
__d('SlideshowActionTypes',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({CHANGE_COLOR_PICKER_TYPE:null,CHANGE_EDIT_OPTION_TYPE:null,CHANGE_PHOTO_CROPS:null,CHANGE_TEXTOVERLAY_ALIGNMENT:null,CHANGE_TEXTOVERLAY_FONT:null,CHANGE_TEXTOVERLAY_FONT_BOLD:null,SELECT_TEXTOVERLAY_COLOR:null,SET_TEXTOVERLAY_CONTENT:null,SHOW_PHOTO_EDIT_DIALOG:null,CLOSE_PHOTO_EDIT_DIALOG:null,TOGGLE_COLOR_PICKER_DIALOG:null,TOGGLE_PHOTO_EDIT_DIALOG:null});f.exports=h;}),null);
__d('SlideshowDispatcher',['ExplicitRegistrationDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationDispatcher'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this);}f.exports=new j({strict:true});}),null);
__d('SlideshowTextoverlayColorPickerConstants',[],(function a(b,c,d,e,f,g){f.exports={Basic:'BASIC',Advanced:'ADVANCED'};}),null);
__d('SlideshowActions',['SlideshowActionTypes','SlideshowDispatcher','SlideshowTextoverlayColorPickerConstants'],(function a(b,c,d,e,f,g){'use strict';var h={showPhotoEditDialog:function i(j,k,l){c('SlideshowDispatcher').dispatch({isColorPickerDialogShown:false,isPhotoEditDialogShown:true,isTextoverlayFontBold:l.bold,photoCrops:k,photoToEdit:j,textoverlayAlignment:l.text_alignment,textoverlayColor:{background_color:l.background_color,font_color:l.font_color},textoverlayContent:l.textoverlay_content,textoverlayFont:l.font,type:c('SlideshowActionTypes').SHOW_PHOTO_EDIT_DIALOG});},closePhotoEditDialog:function i(){c('SlideshowDispatcher').dispatch({isPhotoEditDialogShown:false,photoToEdit:null,type:c('SlideshowActionTypes').CLOSE_PHOTO_EDIT_DIALOG});},toggleColorPickerDialog:function i(){c('SlideshowDispatcher').dispatch({type:c('SlideshowActionTypes').TOGGLE_COLOR_PICKER_DIALOG});},selectTextoverlayColor:function i(j){c('SlideshowDispatcher').dispatch({textoverlayColor:j,type:c('SlideshowActionTypes').SELECT_TEXTOVERLAY_COLOR});},setTextoverlayContent:function i(j){c('SlideshowDispatcher').dispatch({textoverlayContent:j,type:c('SlideshowActionTypes').SET_TEXTOVERLAY_CONTENT});},changeEditOptionType:function i(j){c('SlideshowDispatcher').dispatch({type:c('SlideshowActionTypes').CHANGE_EDIT_OPTION_TYPE,editOptionType:j});},changePhotoCrops:function i(j){c('SlideshowDispatcher').dispatch({type:c('SlideshowActionTypes').CHANGE_PHOTO_CROPS,photoCrops:j});},changeTextoverlayAlignment:function i(j){c('SlideshowDispatcher').dispatch({textoverlayAlignment:j,type:c('SlideshowActionTypes').CHANGE_TEXTOVERLAY_ALIGNMENT});},changeTextoverlayFont:function i(j){c('SlideshowDispatcher').dispatch({textoverlayFont:j,type:c('SlideshowActionTypes').CHANGE_TEXTOVERLAY_FONT});},changeTextoverlayFontBold:function i(j){c('SlideshowDispatcher').dispatch({isTextoverlayFontBold:j,type:c('SlideshowActionTypes').CHANGE_TEXTOVERLAY_FONT_BOLD});},showBasicColorPicker:function i(){c('SlideshowDispatcher').dispatch({type:c('SlideshowActionTypes').CHANGE_COLOR_PICKER_TYPE,colorPickerType:c('SlideshowTextoverlayColorPickerConstants').Basic});},showAdvancedColorPicker:function i(){c('SlideshowDispatcher').dispatch({type:c('SlideshowActionTypes').CHANGE_COLOR_PICKER_TYPE,colorPickerType:c('SlideshowTextoverlayColorPickerConstants').Advanced});}};f.exports=h;}),null);
__d('SlideshowPhotoEditButton.react',['ix','fbt','Image.react','React','Tooltip','XUIButton.react','fbglyph'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$SlideshowPhotoEditButton1=function(){this.props.onPhotoEdit(this.props.selectedPhoto,this.props.selectedPhotoCrops,this.props.selectedPhotoTextoverlay);}.bind(this);this.$SlideshowPhotoEditButton1=this.$SlideshowPhotoEditButton1.bind(this);}l.prototype.render=function(){var m=i._("Edit Photo");return (c('React').createElement(c('XUIButton.react'),babelHelpers['extends']({image:c('React').createElement(c('Image.react'),{src:h("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/pencil_20_fig-black.png")}),className:this.props.className,onClick:this.$SlideshowPhotoEditButton1},c('Tooltip').propsFor(m),{label:i._("Edit"),labelIsHidden:true})));};f.exports=l;}),null);
__d('SlideshowDraggableImage.react',['cx','invariant','DraggableTokenMixin.react','FBOverlayBase.react','FBOverlayContainer.react','FBOverlayElement.react','LoadingImageBox.react','ReactComponentWithPureRenderMixin','React','SlideshowActions','SlideshowFrameImage.react','SlideshowImageUtil','SlideshowPhotoEditButton.react','XUICloseButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=100,k=100,l=c('React').PropTypes,m=c('React').createClass({displayName:'SlideshowDraggableImage',mixins:[c('DraggableTokenMixin.react'),c('ReactComponentWithPureRenderMixin')],propTypes:{className:l.string.isRequired,dragTargetIndex:l.oneOfType([l.oneOf([null]),l.number]),image:l.shape({height:l.number,isLoading:l.bool.isRequired,key:l.string.isRequired,url:l.string,width:l.number}).isRequired,imageTextoverlay:l.oneOfType([l.oneOf([null]),l.shape({background_color:l.string,bold:l.bool.isRequired,font:l.string.isRequired,font_color:l.string.isRequired,text_alignment:l.string.isRequired,textoverlay_content:l.oneOfType([l.oneOf([null]),l.string])})]),imageCrops:l.oneOfType([l.oneOf([null]),l.object]),index:l.number.isRequired,overflow:l.bool.isRequired,showSlideshowImageCroppingEditOption:l.bool.isRequired,showSlideshowPhotoEditButton:l.bool.isRequired,onImageRemove:l.func.isRequired},_onImageRemove:function n(){this.props.onImageRemove(this.props.image);},_getImage:function n(){var o=this.props.image,p="_590x"+(this.props.overflow?' '+"_5b-k":'');if(o.isLoading){return (c('React').createElement(c('LoadingImageBox.react'),{className:p,height:j,width:k}));}else{o.width!=null&&o.height!=null||i(0);return (c('React').createElement(c('SlideshowFrameImage.react'),{className:p,croppingSpec:c('SlideshowImageUtil').getCroppingSpec(this.props.imageCrops,{width:k,height:j},o,this.props.showSlideshowImageCroppingEditOption),fitToMaxHeightAndWidth:this.props.showSlideshowImageCroppingEditOption,imageSrc:o.url,imageWidth:o.width,imageHeight:o.height,maxWidth:k,maxHeight:j,positionStyle:'relative',textoverlay:this.props.imageTextoverlay}));}},_getPhotoEditButton:function n(){return this.props.showSlideshowPhotoEditButton?c('React').createElement(c('SlideshowPhotoEditButton.react'),{className:"_fah",selectedPhoto:this.props.image,selectedPhotoCrops:this.props.imageCrops,selectedPhotoTextoverlay:this.props.imageTextoverlay,onPhotoEdit:c('SlideshowActions').showPhotoEditDialog}):null;},render:function n(){return this.renderDraggableToken(c('React').createElement(c('FBOverlayContainer.react'),null,c('React').createElement(c('FBOverlayBase.react'),null,this._getImage()),c('React').createElement(c('FBOverlayElement.react'),null,c('React').createElement('div',{className:"_5910"+(this.props.dragTargetIndex===this.props.index?' '+"_5911":'')},c('React').createElement(c('XUICloseButton.react'),{className:"_5912",shade:'light',size:'small',onClick:this._onImageRemove}),this._getPhotoEditButton()))));}});f.exports=m;}),null);
__d('SlideshowImageUploadsContainer.react',['cx','fbt','invariant','AdsHelpLink.react','React','Image.react','SlideshowDraggableImage.react','padNumber'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=1000,n=60,o=':',p=0,q=1,r=2,s=c('React').PropTypes;k=babelHelpers.inherits(t,c('React').Component);l=k&&k.prototype;function t(){var u,v;for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return v=(u=l.constructor).call.apply(u,[this].concat(x)),this.$SlideshowImageUploadsContainer1=function(){return {draggingIndex:null,dragTargetIndex:null};},this.$SlideshowImageUploadsContainer2=function(z,aa){this.setState({draggingIndex:aa});}.bind(this),this.$SlideshowImageUploadsContainer3=function(z,aa){this.setState(this.$SlideshowImageUploadsContainer1());}.bind(this),this.$SlideshowImageUploadsContainer4=function(z,aa,ba){if(this.state.draggingIndex!==null&&this.state.dragTargetIndex!==aa)this.setState({dragTargetIndex:aa});}.bind(this),this.$SlideshowImageUploadsContainer5=function(z,aa){if(this.state.draggingIndex!==null&&this.state.draggingIndex!==undefined&&this.state.draggingIndex!==aa)this.$SlideshowImageUploadsContainer6(this.state.draggingIndex,aa);}.bind(this),this.$SlideshowImageUploadsContainer6=function(z,aa){if(aa<this.props.selectedImages.length&&aa>=0)this.props.onImageReorder(z,aa);}.bind(this),this.$SlideshowImageUploadsContainer7=function(z){this.props.onImageRemove(z);}.bind(this),this.$SlideshowImageUploadsContainer8=function(z,aa){var ba=this.props,ca=ba.durationWithTransitionInMS,da=ba.maxSelectedImages,ea=ca/m;if(aa===da-1){return (c('React').createElement('span',null,this.$SlideshowImageUploadsContainer9(aa*ea),c('React').createElement('span',{className:"_73-"},this.$SlideshowImageUploadsContainer9(da*ea))));}else if(aa===da){return (c('React').createElement(c('AdsHelpLink.react'),{position:'left',width:290},i._("You can only show {maximum number of images} images in your slideshow. All other images won't get displayed.",[i.param('maximum number of images',da)])));}else if(aa<da){return c('React').createElement('span',null,this.$SlideshowImageUploadsContainer9(aa*ea));}else return c('React').createElement('span',null,'\u00A0');}.bind(this),this.$SlideshowImageUploadsContainer9=function(z){var aa=Math.floor(z/n),ba=z-aa*n;return aa+o+c('padNumber')(ba,2);},this.$SlideshowImageUploadsContainer10=function(){var z=this.props,aa=z.maxSelectedImages,ba=z.selectedImages,ca=Math.max(ba.length,aa),da=Array.from(Array(ca),function(ea,fa){if(fa<ba.length&&fa<aa){return p;}else if(fa<ba.length&&fa>=aa){return r;}else return q;});return (c('React').createElement('div',{className:"_73_"},da.map(function(ea,fa){return (c('React').createElement('span',{className:"_2j_u"+(ea===p&&fa!==0&&fa<aa?' '+"_741":'')+(ea===r&&fa>=aa?' '+"_4lrv":'')+(ea===r&&fa===aa?' '+"_4lrw":'')+(ea===q&&fa===0?' '+"_742":'')+(ea===q&&fa===ba.length&&fa!==0?' '+"_743":'')+(ea===q&&fa!==ba.length&&fa!==0?' '+"_749":''),key:fa},this.$SlideshowImageUploadsContainer8(ea,fa)));}.bind(this))));}.bind(this),this.$SlideshowImageUploadsContainer11=function(){if(this.props.selectedImages.length>=this.props.maxSelectedImages)return null;this.props.children!=null&&!Array.isArray(this.props.children)||j(0);return this.props.children;}.bind(this),this.$SlideshowImageUploadsContainer12=function(){var z=this.props.maxSelectedImages-1-this.props.selectedImages.length;if(z<=0)return null;var aa=[];for(var ba=0;ba<z;ba++)aa.push(c('React').createElement('span',{className:"_74a",key:ba}));return aa;}.bind(this),this.$SlideshowImageUploadsContainer13=function(z){var aa=this.state,ba=aa.draggingIndex,ca=aa.dragTargetIndex;if(ba!=null&&ca!=null){if(ca<z&&z<=ba)return z-1;if(ba<=z&&z<ca)return z+1;}return z;}.bind(this),this.state=this.$SlideshowImageUploadsContainer1(),v;}t.prototype.render=function(){var u="_38i3"+(this.props.selectedImages.length>=this.props.maxSelectedImages?' '+"_1ca2":'');return (c('React').createElement('div',{className:"_832"},c('React').createElement('div',{className:"_1ca3"},this.$SlideshowImageUploadsContainer10(),c('React').createElement('div',{className:u},this.props.selectedImages.map(function(v,w){var x=this.$SlideshowImageUploadsContainer13(w),y=this.props.imagesTextoverlays?this.props.imagesTextoverlays[x]:null,z=this.props.imagesCrops?this.props.imagesCrops[x]:null,aa=v.key;return (c('React').createElement(c('SlideshowDraggableImage.react'),{className:this.state.draggingIndex!=null&&this.state.dragTargetIndex===w?"_44cb":'',draggableImageClass:c('Image.react').baseClassName,dragTargetIndex:this.state.dragTargetIndex,entry:{},image:this.props.selectedImages[x],imageTextoverlay:y,imageCrops:z,index:w,isDragDropEnabled:true,key:aa,overflow:w>=this.props.maxSelectedImages,showSlideshowImageCroppingEditOption:this.props.showSlideshowImageCroppingEditOption,showSlideshowPhotoEditButton:this.props.showSlideshowPhotoEditButton,onImageRemove:this.$SlideshowImageUploadsContainer7,onTokenDragEnd:this.$SlideshowImageUploadsContainer3,onTokenDragOver:this.$SlideshowImageUploadsContainer4,onTokenDragStart:this.$SlideshowImageUploadsContainer2,onTokenDrop:this.$SlideshowImageUploadsContainer5}));}.bind(this))),this.$SlideshowImageUploadsContainer11(),this.$SlideshowImageUploadsContainer12())));};t.propTypes={durationWithTransitionInMS:s.number.isRequired,imagesCrops:s.array,imagesTextoverlays:s.array,maxSelectedImages:s.number.isRequired,selectedImages:s.arrayOf(s.shape({height:s.number,isLoading:s.bool.isRequired,key:s.string.isRequired,url:s.string,width:s.number})).isRequired,showSlideshowImageCroppingEditOption:s.bool.isRequired,showSlideshowPhotoEditButton:s.bool.isRequired,onImageRemove:s.func.isRequired,onImageReorder:s.func.isRequired};f.exports=t;}),null);
__d('SlideshowFbtUtils',['fbt','SlideshowFlowTypes','SlideshowMusicCategory'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('SlideshowFlowTypes').SlideshowTabKey,l={None:h._("None"),Fade:h._("Fade"),Unknown:h._("Unknow")},m=(i={},i[k.SETTINGS_TAB]=h._("Settings"),i[k.MUSIC_TAB]=h._("Music"),i[k.FRAMES_TAB]=h._("Video Stills"),i.FRAMES_TAB_NUX=h._("Choose which video stills you want to include in your slideshow"),i.MUSIC_TAB_NUX=h._("You can now add music to your slideshow. Use one of our royalty-free tracks or upload your own."),i),n={UPLOAD_ERROR:h._("There was a problem with your upload"),FRAME_IMAGE_FETCH_ERROR_FIRST:h._("We weren't able to cut your video into a slideshow. Try adding the video again."),FRAME_IMAGE_FETCH_ERROR_SECOND:h._("We still weren't able to cut your video into a slideshow. There could be a problem with your video file."),Unknown:null},o=(j={},j[c('SlideshowMusicCategory').ALL_TRACKS]=h._("All Tracks"),j[c('SlideshowMusicCategory').USER_UPLOADED]=h._("Uploaded Tracks"),j[c('SlideshowMusicCategory').RECENTLY_USED]=h._("Recently Used"),j[c('SlideshowMusicCategory').ENERGETIC]=h._("Energetic"),j[c('SlideshowMusicCategory').INSPIRATIONAL]=h._("Inspirational"),j[c('SlideshowMusicCategory').FUN]=h._("Fun"),j[c('SlideshowMusicCategory').TRUSTWORTHY]=h._("Trustworthy"),j[c('SlideshowMusicCategory').MODERN]=h._("Modern"),j.Unknown=null,j),p={Original:h._("Original"),Wide:h._("Rectangle (16:9)"),Square:h._("Square (1:1)"),Vertical:h._("Vertical (2:3)")},q={Original:null,Wide:null,Square:null,Vertical:null},r={_getFbtString:function s(t,u){if(t[u])return t[u];return t.Unknown;},getDurationFbtString:function s(t){if(t===1)return h._({"*":"{second} second"},[h.param('second',t,[0])]);return h._({"*":"{seconds} seconds"},[h.param('seconds',t,[0])]);},getFramesTabNuxFbtString:function s(){return this._getFbtString(m,'FRAMES_TAB_NUX');},getMusicTabNuxFbtString:function s(){return this._getFbtString(m,'MUSIC_TAB_NUX');},getTabNameFbtString:function s(t){return this._getFbtString(m,t);},getTransitionFbtString:function s(t){return this._getFbtString(l,t);},getSlideshowVideoErrorMessage:function s(t){return this._getFbtString(n,t);},getFormatFbtString:function s(t){return this._getFbtString(p,t);},getFormatTooltipFbtString:function s(t){return this._getFbtString(q,t);},getMusicCategoryTooltip:function s(t){return this._getFbtString(o,t);}};f.exports=r;}),null);
__d('SlideshowMusicCategorySelector.react',['cx','React','SlideshowAudioUtil','SlideshowFbtUtils','SlideshowMusicCategory','Tooltip.react','XUICardSection.react','XUIPageNavigation.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('XUIPageNavigation.react').Group,l=c('XUIPageNavigation.react').Item;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.$SlideshowMusicCategorySelector1=function(n){var o=c('SlideshowAudioUtil').getMusicCategoryGlyph(n);if(!o)return null;return (c('React').createElement(l,{key:n,ref:n},c('React').createElement(c('Tooltip.react'),{alignH:'center',className:"_3fk8",position:'above',tooltip:c('SlideshowFbtUtils').getMusicCategoryTooltip(n)},o)));};m.prototype.$SlideshowMusicCategorySelector2=function(){return (c('React').createElement(c('XUICardSection.react'),{className:"_5vx1"},c('React').createElement(c('XUIPageNavigation.react'),{activeTabKey:this.props.selectedMusicCategory,defaultActiveTabKey:c('SlideshowMusicCategory').ALL_TRACKS,onTabClick:this.props.onMusicCategorySelect},c('React').createElement(k,null,Object.values(c('SlideshowMusicCategory')).map(function(n){return this.$SlideshowMusicCategorySelector1(n);}.bind(this))))));};m.prototype.render=function(){return (c('React').createElement('div',{className:"_d__"},this.$SlideshowMusicCategorySelector2()));};function m(){i.apply(this,arguments);}m.defaultProps={selectedMusicCategory:c('SlideshowMusicCategory').ALL_TRACKS};f.exports=m;}),null);
__d('SlideshowMusicTrackUploader.react',['cx','fbt','ix','LayerFadeOnHide','React','ReactFragment','SlideshowDataManager','FileInput.react','Image.react','Link.react','Tooltip.react','XUIButton.react','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react','emptyFunction'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=700;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(o){l.constructor.call(this,o);this.$SlideshowMusicTrackUploader2=function(p){this.setState({showCopyrightDialog:p});}.bind(this);this.$SlideshowMusicTrackUploader5=function(){this.$SlideshowMusicTrackUploader2(false);this.props.onAudioFileUpload();var p=this.refs.audioFileInput.getFileInput();c('SlideshowDataManager').uploadAudioFile(p,this.props.targetID,this.props.onAudioFileUploadSuccess,this.props.onAudioFileUploadError);}.bind(this);this.state={showCopyrightDialog:false};}n.prototype.renderLayers=function(){var o=this.state.showCopyrightDialog?this.$SlideshowMusicTrackUploader1():null;return c('ReactFragment').create({copyrightDialog:o});};n.prototype.$SlideshowMusicTrackUploader1=function(){return c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},layerHideOnBlur:false,shown:this.state.showCopyrightDialog,width:m,onToggle:this.$SlideshowMusicTrackUploader2},c('React').createElement(c('XUIDialogTitle.react'),null,i._("Rights to Upload Music")),c('React').createElement(c('XUIDialogBody.react'),{className:"_3mav",useCustomPadding:true},this.$SlideshowMusicTrackUploader3()),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:i._("Cancel")}),this.$SlideshowMusicTrackUploader4()));};n.prototype.$SlideshowMusicTrackUploader4=function(){return c('React').createElement(c('FileInput.react'),{accept:'audio/*',multiple:false,ref:'audioFileInput',onChange:this.$SlideshowMusicTrackUploader5},c('React').createElement(c('XUIDialogButton.react'),{action:'confirm',className:"_3maw",href:{url:'#'},label:i._("Proceed"),use:'confirm'}));};n.prototype.$SlideshowMusicTrackUploader3=function(){return c('React').createElement('div',{className:"_3max"},c('React').createElement('div',{className:"_3may"},c('React').createElement(c('Image.react'),{src:j("images\/slideshow\/music_licensing.png")})),c('React').createElement('div',{className:"_3ma-"},i._("By uploading music, you confirm that you have the rights to use it with your slideshow and have it played on Facebook. If you're not sure, learn more about {slideshow_upload_audio_help_link}.",[i.param('slideshow_upload_audio_help_link',c('React').createElement(c('Link.react'),{href:'/help/249141925204375',target:'_blank'},i._("music you can use")))])));};n.prototype.$SlideshowMusicTrackUploader6=function(){var o=this.props.selectedStorylineMood?i._("You need to remove the track you've selected before uploading another"):null,p=this.props.selectedStorylineMood||this.props.audioFileUploadInfo.isUploading;return (c('React').createElement(c('Tooltip.react'),{alignH:'center',className:"_2fiy",position:'above',tooltip:o},c('React').createElement(c('XUIButton.react'),{className:"_3maw"+(p?' '+"_42fr":''),label:i._("Upload"),ref:'dialogButton',size:'xlarge',onClick:p?c('emptyFunction'):function(){this.setState({showCopyrightDialog:true});}.bind(this)})));};n.prototype.render=function(){return (c('React').createElement('div',null,this.$SlideshowMusicTrackUploader6(),this.renderLayers()));};f.exports=n;}),null);
__d('SlideshowMusicSelectedTrackComponent.react',['cx','fbt','React','SlideshowMusicTrackUploader.react','Tooltip.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$SlideshowMusicSelectedTrackComponent4=function(event){event.stopPropagation();this.props.onChangeStorylineMood(null);this.props.onPreviewStateChange(false);}.bind(this),this.$SlideshowMusicSelectedTrackComponent5=function(){if(!this.props.selectedStorylineMood)return;this.props.onPreviewStateChange(!this.props.isPreviewPlaying);}.bind(this),n;}l.prototype.$SlideshowMusicSelectedTrackComponent1=function(){return c('React').createElement('div',{className:"_nan"+(!this.props.isPreviewPlaying?' '+"_5yby":'')+(this.props.isPreviewPlaying?' '+"_5ybz":'')});};l.prototype.$SlideshowMusicSelectedTrackComponent2=function(){var m=i._("No music selected");if(this.props.selectedStorylineMood)m=this.props.selectedStorylineMood.fileName;return c('React').createElement('div',{className:"_nao"},m);};l.prototype.$SlideshowMusicSelectedTrackComponent3=function(){if(!this.props.selectedStorylineMood)return null;return c('React').createElement('div',{className:"_59qs",onClick:this.$SlideshowMusicSelectedTrackComponent4,role:'button',tabIndex:'0'});};l.prototype.$SlideshowMusicSelectedTrackComponent6=function(){return (c('React').createElement(c('SlideshowMusicTrackUploader.react'),{audioFileUploadInfo:this.props.audioFileUploadInfo,selectedStorylineMood:this.props.selectedStorylineMood,targetID:this.props.targetID,onAudioFileUpload:this.props.onAudioFileUpload,onAudioFileUploadError:this.props.onAudioFileUploadError,onAudioFileUploadSuccess:this.props.onAudioFileUploadSuccess}));};l.prototype.$SlideshowMusicSelectedTrackComponent7=function(){return (c('React').createElement('div',{className:(!this.props.selectedStorylineMood?"_1sx5":'')+(!!this.props.selectedStorylineMood?' '+"_nar":''),onClick:this.$SlideshowMusicSelectedTrackComponent5},this.$SlideshowMusicSelectedTrackComponent1(),this.$SlideshowMusicSelectedTrackComponent2(),this.$SlideshowMusicSelectedTrackComponent3()));};l.prototype.$SlideshowMusicSelectedTrackComponent8=function(){return i._("Select a track below or upload your own tracks");};l.prototype.render=function(){if(!this.props.selectedStorylineMood)return (c('React').createElement('div',{className:"_naq"},c('React').createElement(c('Tooltip.react'),{alignH:'center',className:"_9ns",position:'above',tooltip:this.$SlideshowMusicSelectedTrackComponent8()},this.$SlideshowMusicSelectedTrackComponent7()),this.$SlideshowMusicSelectedTrackComponent6()));return (c('React').createElement('div',{className:"_naq"},this.$SlideshowMusicSelectedTrackComponent7(),this.$SlideshowMusicSelectedTrackComponent6()));};f.exports=l;}),null);
__d('SlideshowMusicTrackSelector.react',['cx','fbt','React','Set','SlideshowAudioUtil','SlideshowMusicCategory','Tooltip.react','XUINotice.react','XUISpinner.react','curry'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=6;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$SlideshowMusicTrackSelector2=function(s){this.props.onPreviewStateChange(false);this.props.onChangeStorylineMood(s);}.bind(this),this.$SlideshowMusicTrackSelector3=function(s,event){event.stopPropagation();this.props.onDeleteStorylineMood(s);}.bind(this),o;}m.prototype.$SlideshowMusicTrackSelector1=function(n){if(this.props.selectedMusicCategory===c('SlideshowMusicCategory').ALL_TRACKS||this.props.selectedMusicCategory===c('SlideshowMusicCategory').RECENTLY_USED||n.categories.indexOf(this.props.selectedMusicCategory)!==-1)return true;return false;};m.prototype.$SlideshowMusicTrackSelector4=function(){return (c('React').createElement('div',{className:"_4o-n",key:'UPLOADING_TRACK_KEY'},c('React').createElement(c('XUISpinner.react'),{className:"_2ruw",size:'small'}),c('React').createElement('div',{className:"_4o-p"},i._("Uploading..."))));};m.prototype.$SlideshowMusicTrackSelector5=function(){var n=i._("There was a problem uploading your music. Please make sure it's a supported file format and try again. You can use WAV, MP3, M4A, FLAC or OGG.");return (c('React').createElement('div',{className:"_4o-n",key:'ERROR_UPLOADING_TRACK_KEY'},c('React').createElement(c('XUINotice.react'),{className:"_2h_x",use:'warn'},n)));};m.prototype.$SlideshowMusicTrackSelector6=function(n){var o=i._("Delete");return (c('React').createElement(c('Tooltip.react'),{alignH:'center',className:"_4o-m",position:'above',tooltip:o,onClick:c('curry')(this.$SlideshowMusicTrackSelector3,n)},c('React').createElement('div',null)));};m.prototype.$SlideshowMusicTrackSelector7=function(){return Array.from(new (c('Set'))(this.props.recentlyUsedStorylineMoods)).slice(0,l);};m.prototype.$SlideshowMusicTrackSelector8=function(){var n=[],o=this.props.selectedMusicCategory===c('SlideshowMusicCategory').USER_UPLOADED,p=this.props.selectedMusicCategory===c('SlideshowMusicCategory').RECENTLY_USED;if(o&&this.props.audioFileUploadInfo.isUploading){n.push(this.$SlideshowMusicTrackSelector4());}else if(o&&this.props.audioFileUploadInfo.hasError)n.push(this.$SlideshowMusicTrackSelector5());var q=p?this.$SlideshowMusicTrackSelector7():this.props.storylineMoodFiles;q.sort(function(r,s){if(r.fileName<s.fileName){return -1;}else if(r.fileName>s.fileName){return 1;}else return 0;});q.forEach(function(r){var s=o?this.$SlideshowMusicTrackSelector6(r):null;if(this.$SlideshowMusicTrackSelector1(r)){var t=c('SlideshowAudioUtil').storylineMoodCompare(r,this.props.selectedStorylineMood);n.push(c('React').createElement('div',{className:"_4o-n",key:r.moodID,onClick:c('curry')(this.$SlideshowMusicTrackSelector2,r),role:'presentation'},s,c('React').createElement('div',{className:(!t?"_4o-o":'')+(t?' '+"_4c2n":'')}),c('React').createElement('div',{className:"_4o-p"},r.fileName)));}}.bind(this));return n;};m.prototype.render=function(){return (c('React').createElement('div',{className:"_4o-x"},this.$SlideshowMusicTrackSelector8()));};m.defaultProps={selectedMusicCategory:c('SlideshowMusicCategory').ALL_TRACKS};f.exports=m;}),null);
__d('SlideshowMusicPanel.react',['cx','React','SlideshowMusicCategorySelector.react','SlideshowMusicSelectedTrackComponent.react','SlideshowMusicTrackSelector.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.$SlideshowMusicPanel1=function(){return (c('React').createElement(c('SlideshowMusicSelectedTrackComponent.react'),{audioFileUploadInfo:this.props.audioFileUploadInfo,isPreviewPlaying:this.props.isPreviewPlaying,selectedStorylineMood:this.props.selectedStorylineMood,targetID:this.props.targetID,onAudioFileUpload:this.props.onAudioFileUpload,onAudioFileUploadError:this.props.onAudioFileUploadError,onAudioFileUploadSuccess:this.props.onAudioFileUploadSuccess,onChangeStorylineMood:this.props.onChangeStorylineMood,onPreviewStateChange:this.props.onPreviewStateChange}));};k.prototype.$SlideshowMusicPanel2=function(){return (c('React').createElement(c('SlideshowMusicCategorySelector.react'),{selectedMusicCategory:this.props.selectedMusicCategory,onMusicCategorySelect:this.props.onMusicCategorySelect}));};k.prototype.$SlideshowMusicPanel3=function(){return (c('React').createElement(c('SlideshowMusicTrackSelector.react'),{audioFileUploadInfo:this.props.audioFileUploadInfo,recentlyUsedStorylineMoods:this.props.recentlyUsedStorylineMoods,selectedMusicCategory:this.props.selectedMusicCategory,selectedStorylineMood:this.props.selectedStorylineMood,storylineMoodFiles:this.props.storylineMoodFiles,onChangeStorylineMood:this.props.onChangeStorylineMood,onDeleteStorylineMood:this.props.onDeleteStorylineMood,onPreviewStateChange:this.props.onPreviewStateChange}));};k.prototype.render=function(){return (c('React').createElement('div',{className:"_3-xf"},this.$SlideshowMusicPanel1(),this.$SlideshowMusicPanel2(),this.$SlideshowMusicPanel3()));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('SlideshowAlignmentBox.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$SlideshowAlignmentBox1=function(){var r=this.props,s=r.horizontalAlignment,t=r.verticalAlignment,u=t+'-'+s;this.props.onValueChange&&this.props.onValueChange(u);}.bind(this),n;}l.prototype.render=function(){var m=this.props,n=m.horizontalAlignment,o=m.selectedValue,p=m.verticalAlignment,q=p+'-'+n;return c('React').createElement('div',{className:"_hfg"+(o==q?' '+"_hfh":'')+(p=='bottom'?' '+"_hfi":'')+(p=='top'?' '+"_hfj":'')+(n=='right'?' '+"_hfk":'')+(n=='left'?' '+"_hfl":''),onClick:this.$SlideshowAlignmentBox1,role:'button',tabIndex:'0'});};l.propTypes={onValueChange:k.func.isRequired};f.exports=l;}),null);
__d('SlideshowColorBox.react',['cx','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l='#ffffff';i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$SlideshowColorBox1=function(){this.props.onClick&&this.props.onClick(this.props.color);}.bind(this),o;}m.prototype.render=function(){var n=this.props,o=n.className,p=n.style,q=babelHelpers.objectWithoutProperties(n,['className','style']);o=c('joinClasses')("_5266",this.props.className);if(p&&p.backgroundColor===l){o=c('joinClasses')("_2obn",o);}else if(p&&!p.backgroundColor){o=c('joinClasses')("_526b",o);if(p.color===l)o=c('joinClasses')("_12k3",o);}return c('React').createElement('div',babelHelpers['extends']({},q,{className:o,style:p,onClick:this.$SlideshowColorBox1}),'T');};m.propTypes={className:k.string,style:k.object,onClick:k.func};f.exports=m;}),null);
__d('SlideshowPhotoCropperWindow.react',['cx','fbt','AdsHelpLink.react','React','joinClasses','SlideshowConstants'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('SlideshowConstants').formats;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);}m.prototype.$SlideshowPhotoCropperWindow1=function(){if(this.props.isCropping)return null;var n=void 0;switch(this.props.format){case l.Original:n=i._("Original");break;case l.Wide:n=i._("Rectangle(16:9)");break;case l.Square:n=i._("Square(1:1)");break;case l.Vertical:n=i._("Vertical(2:3)");break;default:n=i._("Unknown");}return (c('React').createElement('div',{className:"_2d6a"},c('React').createElement(c('AdsHelpLink.react'),{alignment:'center',position:'above',width:420},i._("This photo's crop area is based on the aspect ratio of your slideshow. You can change the aspect ratio on the main slideshow editor.")),c('React').createElement('div',{className:"_2d6b"},n)));};m.prototype.render=function(){return (c('React').createElement('div',{onMouseDown:this.props.onMouseDown,className:c('joinClasses')(this.props.className,"_2d6c"),style:babelHelpers['extends']({},this.props.style||{},{width:this.props.width,height:this.props.height})},c('React').createElement('div',{className:"_2d6d"}),this.$SlideshowPhotoCropperWindow1()));};f.exports=m;}),null);
__d('SlideshowPhotoCropSelector.react',['cx','invariant','BackgroundImage.react','Event','SlideshowPhotoCropperWindow.react','React','ReactDOM'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=656,m=425,n=400,o=400,p=function s(t,u,v){return Math.min(Math.max(t,u),v);},q=function s(t){return t*t;};j=babelHelpers.inherits(r,c('React').Component);k=j&&j.prototype;function r(s){k.constructor.call(this,s);this.$SlideshowPhotoCropSelector12=function(t,u){var v=Math.sqrt(q(this.state.screenX-this.$SlideshowPhotoCropSelector5.x)+q(this.state.screenY-this.$SlideshowPhotoCropSelector5.y)),w={x:t/2+this.state.screenX,y:u/2+this.state.screenY},x=Math.sqrt(q(this.$SlideshowPhotoCropSelector5.x-w.x)+q(this.$SlideshowPhotoCropSelector5.y-w.y)),y=p(x/v,this.state.min.scale,this.state.max.scale),z=Math.round(this.state.coordinates.width*y),aa=Math.round(this.state.coordinates.height*y),ba=this.state.screenX<this.$SlideshowPhotoCropSelector5.x?this.state.coordinates.width-z:0,ca=this.state.screenY<this.$SlideshowPhotoCropSelector5.y?this.state.coordinates.height-aa:0,da=p(this.state.coordinates.left+ba,this.state.min.x,this.state.max.x-z),ea=p(this.state.coordinates.top+ca,this.state.min.y,this.state.max.y-aa);this.$SlideshowPhotoCropSelector20(da,ea,z,aa);}.bind(this);this.state={coordinates:{},isCropping:false,isResizing:false,min:{},max:{},photoDimensions:{},scale:1,screenX:0,screenY:0};this.$SlideshowPhotoCropSelector1=false;this.$SlideshowPhotoCropSelector2=null;this.$SlideshowPhotoCropSelector3=null;this.$SlideshowPhotoCropSelector5={};this.$SlideshowPhotoCropSelector4=null;this.$SlideshowPhotoCropSelector6=null;this.$SlideshowPhotoCropSelector7=this.$SlideshowPhotoCropSelector7.bind(this);this.$SlideshowPhotoCropSelector8=this.$SlideshowPhotoCropSelector8.bind(this);this.$SlideshowPhotoCropSelector9=this.$SlideshowPhotoCropSelector9.bind(this);this.$SlideshowPhotoCropSelector10=this.$SlideshowPhotoCropSelector10.bind(this);this.$SlideshowPhotoCropSelector11=this.$SlideshowPhotoCropSelector11.bind(this);this.$SlideshowPhotoCropSelector12=this.$SlideshowPhotoCropSelector12.bind(this);}r.prototype.componentWillMount=function(){this.$SlideshowPhotoCropSelector13(this.props);};r.prototype.componentWillReceiveProps=function(s){this.$SlideshowPhotoCropSelector13(s);};r.prototype.componentWillUnmount=function(){if(this.$SlideshowPhotoCropSelector2)this.$SlideshowPhotoCropSelector2.remove();if(this.$SlideshowPhotoCropSelector6)this.$SlideshowPhotoCropSelector6.remove();};r.prototype.$SlideshowPhotoCropSelector13=function(s){var t=s.photoToEdit.width,u=s.photoToEdit.height;t&&u||i(0);var v=Math.min(l/t,m/u),w={height:u,scaledWidth:Math.round(t*v),scaledHeight:Math.round(u*v),width:t},x={scale:1,x:(l-w.scaledWidth)/2,y:(m-w.scaledHeight)/2},y={scale:1,x:x.x+w.scaledWidth,y:x.y+w.scaledHeight},z=s.photoCrops,aa=Object.keys(z)[0],ba=z[aa],ca={};ca.top=x.y+ba[0][1]*v;ca.left=x.x+ba[0][0]*v;ca.bottom=x.y+(u-ba[1][1])*v;ca.right=x.x+(t-ba[1][0])*v;ca.width=l-ca.right-ca.left;ca.height=m-ca.bottom-ca.top;x.scale=Math.min(n*v/ca.width,o*v/ca.height);y.scale=Math.min(w.scaledWidth/ca.width,w.scaledHeight/ca.height);this.setState({max:y,min:x,photoDimensions:w,scale:v,coordinates:ca});};r.prototype.$SlideshowPhotoCropSelector14=function(){var s=c('React').createElement('td',{className:"_47uq"}),t=c('React').createElement('tr',null,s,s,s);return c('React').createElement('table',{className:"_47ur"},c('React').createElement('tbody',null,t,t,t));};r.prototype.$SlideshowPhotoCropSelector15=function(s){var t=this.state.min.y,u=this.state.min.x,v=Math.floor(s.top-t),w=Math.floor(s.left-u),x=Math.floor(s.right-u),y=Math.floor(s.bottom-t);return v+'px '+x+'px '+y+'px '+w+'px';};r.prototype.$SlideshowPhotoCropSelector16=function(){return c('React').createElement('div',{className:"_47us",ref:'handles'},c('React').createElement('div',{className:"_47ut _47vn",key:'top_left',onMouseDown:this.$SlideshowPhotoCropSelector11}),c('React').createElement('div',{className:"_47ut _47vo",key:'top_right',onMouseDown:this.$SlideshowPhotoCropSelector11}),c('React').createElement('div',{className:"_47ut _47vp",key:'bottom_right',onMouseDown:this.$SlideshowPhotoCropSelector11}),c('React').createElement('div',{className:"_47ut _47vq",key:'bottom_left',onMouseDown:this.$SlideshowPhotoCropSelector11}));};r.prototype.$SlideshowPhotoCropSelector11=function(event){this.$SlideshowPhotoCropSelector17(event,true);};r.prototype.$SlideshowPhotoCropSelector17=function(event,s){event.preventDefault();this.$SlideshowPhotoCropSelector18();if(!this.$SlideshowPhotoCropSelector1){this.$SlideshowPhotoCropSelector3=this.$SlideshowPhotoCropSelector19(s);var t=c('ReactDOM').findDOMNode(this.refs.handles);t||i(0);var u=t.getBoundingClientRect(),v=u.left,w=u.top,x=u.width,y=u.height;this.$SlideshowPhotoCropSelector5={x:v+x/2,y:w+y/2};this.$SlideshowPhotoCropSelector2=c('Event').listen(window,'mousemove',this.$SlideshowPhotoCropSelector8);this.$SlideshowPhotoCropSelector6=c('Event').listen(window,'mouseup',this.$SlideshowPhotoCropSelector7);this.setState({isCropping:true,isResizing:s,screenX:event.pageX,screenY:event.pageY});this.$SlideshowPhotoCropSelector1=true;this.$SlideshowPhotoCropSelector20(this.state.coordinates.left,this.state.coordinates.top,this.state.coordinates.width,this.state.coordinates.height);}};r.prototype.$SlideshowPhotoCropSelector19=function(s){return s?this.$SlideshowPhotoCropSelector12:this.$SlideshowPhotoCropSelector10;};r.prototype.$SlideshowPhotoCropSelector21=function(){var s,t=this.$SlideshowPhotoCropSelector22(this.$SlideshowPhotoCropSelector23()),u=Object.keys(this.props.photoCrops)[0];this.props.onPhotoCropsUpdate((s={},s[u]=t,s));};r.prototype.$SlideshowPhotoCropSelector22=function(s){var t=this.state.photoDimensions,u={bottom:Math.round(t.height-s.bottom/this.state.scale),left:Math.round(s.left/this.state.scale),right:Math.round(t.width-s.right/this.state.scale),top:Math.round(s.top/this.state.scale)};return [[u.left,u.top],[u.right,u.bottom]];};r.prototype.$SlideshowPhotoCropSelector23=function(){return {left:this.state.coordinates.left-this.state.min.x,right:this.state.coordinates.right-this.state.min.x,top:this.state.coordinates.top-this.state.min.y,bottom:this.state.coordinates.bottom-this.state.min.y};};r.prototype.$SlideshowPhotoCropSelector20=function(s,t,u,v){var w=m-t-v,x=l-s-u,y=this.$SlideshowPhotoCropSelector15({top:t,left:s,bottom:w,right:x});this.$SlideshowPhotoCropSelector4||i(0);this.$SlideshowPhotoCropSelector4.style.borderWidth=y;this.$SlideshowPhotoCropSelector4.style.width=u+'px';this.$SlideshowPhotoCropSelector4.style.height=v+'px';if(!this.$SlideshowPhotoCropSelector1)this.setState({coordinates:{top:t,left:s,bottom:w,right:x,width:u,height:v}},function(){this.$SlideshowPhotoCropSelector21();}.bind(this));};r.prototype.$SlideshowPhotoCropSelector10=function(s,t){var u=this.state.coordinates.width,v=this.state.coordinates.height,w=p(this.state.coordinates.left+s,this.state.min.x,this.state.max.x-u),x=p(this.state.coordinates.top+t,this.state.min.y,this.state.max.y-v);this.$SlideshowPhotoCropSelector20(w,x,u,v);};r.prototype.$SlideshowPhotoCropSelector18=function(){!this.$SlideshowPhotoCropSelector4||i(0);this.$SlideshowPhotoCropSelector4=c('ReactDOM').findDOMNode(this.refs.selector);this.$SlideshowPhotoCropSelector4||i(0);};r.prototype.$SlideshowPhotoCropSelector9=function(event){this.$SlideshowPhotoCropSelector17(event,false);};r.prototype.$SlideshowPhotoCropSelector8=function(event){if(this.$SlideshowPhotoCropSelector1){event.prevent();this.$SlideshowPhotoCropSelector3||i(0);this.$SlideshowPhotoCropSelector3(event.pageX-this.state.screenX,event.pageY-this.state.screenY);}};r.prototype.$SlideshowPhotoCropSelector7=function(event){if(this.$SlideshowPhotoCropSelector1){this.$SlideshowPhotoCropSelector1=false;this.setState({isCropping:false,isResizing:false});this.$SlideshowPhotoCropSelector3||i(0);this.$SlideshowPhotoCropSelector3(event.pageX-this.state.screenX,event.pageY-this.state.screenY);this.$SlideshowPhotoCropSelector2&&this.$SlideshowPhotoCropSelector2.remove();this.$SlideshowPhotoCropSelector2=null;this.$SlideshowPhotoCropSelector6&&this.$SlideshowPhotoCropSelector6.remove();this.$SlideshowPhotoCropSelector6=null;this.$SlideshowPhotoCropSelector3=null;}this.$SlideshowPhotoCropSelector24();};r.prototype.$SlideshowPhotoCropSelector24=function(){delete this.$SlideshowPhotoCropSelector4;};r.prototype.$SlideshowPhotoCropSelector25=function(){var s=this.state.coordinates.width+'px',t=this.state.coordinates.height+'px',u=this.$SlideshowPhotoCropSelector15(this.state.coordinates);return (c('React').createElement('div',null,c('React').createElement('div',{className:"_47vr",style:{width:this.state.photoDimensions.scaledWidth+2,height:this.state.photoDimensions.scaledHeight+2,top:this.state.min.y-1,left:this.state.min.x-1}}),c('React').createElement('div',null,c('React').createElement('div',{className:"_47vs",ref:'selector',style:{borderWidth:u,height:t,left:this.state.min.x,top:this.state.min.y,width:s}},this.$SlideshowPhotoCropSelector14(),this.$SlideshowPhotoCropSelector16(),c('React').createElement(c('SlideshowPhotoCropperWindow.react'),{className:"_ms8",format:this.props.format,height:this.state.coordinates.height,isCropping:this.state.isCropping&&this.$SlideshowPhotoCropSelector1,onMouseDown:this.$SlideshowPhotoCropSelector9,width:this.state.coordinates.width})))));};r.prototype.render=function(){return (c('React').createElement('div',{className:"_118z"},c('React').createElement('div',{className:"_47vt"},c('React').createElement(c('BackgroundImage.react'),{backgroundSize:'contain',height:m,loadingIndicatorStyle:'large',src:this.props.photoToEdit.url,width:l}),this.$SlideshowPhotoCropSelector25())));};f.exports=r;}),null);
__d('SlideshowPhotoEditOptionConstants',[],(function a(b,c,d,e,f,g){f.exports={Text:'TEXT',Crop:'CROP'};}),null);
__d('SlideshowPhotoEditOptionSelector.react',['ix','cx','fbt','Image.react','React','SlideshowPhotoEditOptionConstants','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('SlideshowPhotoEditOptionConstants').Text,n=c('SlideshowPhotoEditOptionConstants').Crop;k=babelHelpers.inherits(o,c('React').PureComponent);l=k&&k.prototype;function o(){var p;(p=l.constructor).call.apply(p,[this].concat(Array.prototype.slice.call(arguments)));this.$SlideshowPhotoEditOptionSelector1=this.$SlideshowPhotoEditOptionSelector1.bind(this);this.$SlideshowPhotoEditOptionSelector2=this.$SlideshowPhotoEditOptionSelector2.bind(this);}o.prototype.$SlideshowPhotoEditOptionSelector3=function(p){if(p!==this.props.editOptionType)return null;return (c('React').createElement(c('Image.react'),{className:p===m?"_3rqm":"_3rqn",src:h("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/triangle-left_24_fig-white.png")}));};o.prototype.$SlideshowPhotoEditOptionSelector4=function(){return (c('React').createElement('div',null,c('React').createElement('div',{className:this.props.editOptionType===m?"_4bna":"_3rqo",onClick:this.$SlideshowPhotoEditOptionSelector2,role:'button',tabIndex:'0'},c('React').createElement(c('Image.react'),{className:"_3rqp",src:h("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/text-helvetica_24_fig-blue.png")}),c('React').createElement('span',{className:"_3rqq"},j._("Text"))),this.$SlideshowPhotoEditOptionSelector3(m)));};o.prototype.$SlideshowPhotoEditOptionSelector5=function(){return (c('React').createElement('div',null,c('React').createElement('div',{className:this.props.editOptionType===n?"_4bnb":"_3rqr",onClick:this.$SlideshowPhotoEditOptionSelector1,role:'button',tabIndex:'0'},c('React').createElement(c('Image.react'),{className:"_3rqp",src:h("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/crop_24_fig-blue.png")}),c('React').createElement('span',{className:"_3rqq"},j._("Crop"))),this.$SlideshowPhotoEditOptionSelector3(n)));};o.prototype.$SlideshowPhotoEditOptionSelector2=function(){if(this.props.editOptionType!==m)this.props.onChangeEditOption(m);};o.prototype.$SlideshowPhotoEditOptionSelector1=function(){if(this.props.editOptionType!==n)this.props.onChangeEditOption(n);};o.prototype.render=function(){return (c('React').createElement('div',{className:"_3rqs"},this.$SlideshowPhotoEditOptionSelector4(),this.$SlideshowPhotoEditOptionSelector5()));};f.exports=o;}),null);
__d('SlideshowTextoverlayAlignmentConstants',[],(function a(b,c,d,e,f,g){f.exports={Horizontal:['left','center','right'],Vertical:['top','center','bottom']};}),null);
/**
 * @providesModule color-picker-clamp
 * @preserve-header
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014 Nick Williams
 * Copyright (c) 2014 George Czabania
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */__d("color-picker-clamp",[],(function a(b,c,d,e,f,g){function h(i,j,k){return i<j?j:(i>k?k:i);}f.exports=h;}),null);
/**
 * @providesModule color-picker-draggable-mixin
 * @preserve-header
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014 Nick Williams
 * Copyright (c) 2014 George Czabania
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */__d("color-picker-draggable-mixin",["React","color-picker-clamp"],(function a(b,c,d,e,f,g){var h=c("React"),i=c("color-picker-clamp");function j(){}var k={propTypes:{onChange:h.PropTypes.func,max:h.PropTypes.number},getDefaultProps:function(){return {onChange:j,max:1};},getInitialState:function(){return {active:false};},componentDidMount:function(){document.addEventListener("mousemove",this.handleUpdate);document.addEventListener("touchmove",this.handleUpdate);document.addEventListener("mouseup",this.stopUpdates);document.addEventListener("touchend",this.stopUpdates);},componentWillUnmount:function(){document.removeEventListener("mousemove",this.handleUpdate);document.removeEventListener("touchmove",this.handleUpdate);document.removeEventListener("mouseup",this.stopUpdates);document.removeEventListener("touchend",this.stopUpdates);},startUpdates:function(l){var m=this.getPosition(l);this.setState({active:true});this.updatePosition(m.x,m.y);},handleUpdate:function(l){if(this.state.active){l.preventDefault();var m=this.getPosition(l);this.updatePosition(m.x,m.y);}},stopUpdates:function(){if(this.state.active)this.setState({active:false});},getPosition:function(l){if(l.touches)l=l.touches[0];return {x:l.clientX,y:l.clientY};},getPercentageValue:function(l){return (l/this.props.max)*100+"%";},getScaledValue:function(l){return i(l,0,1)*this.props.max;}};f.exports=k;}),null);
/**
 * @providesModule color-picker-map
 * @preserve-header
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014 Nick Williams
 * Copyright (c) 2014 George Czabania
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @fullSyntaxTransform
 */__d("color-picker-map",["cx","React","ReactDOM","ReactComponentWithPureRenderMixin","color-picker-draggable-mixin"],(function a(b,c,d,e,f,g,h){var i=c("React").createClass({displayName:"Map",mixins:[c("color-picker-draggable-mixin"),c("ReactComponentWithPureRenderMixin")],propTypes:{x:c("React").PropTypes.number,y:c("React").PropTypes.number,backgroundColor:c("React").PropTypes.string},getDefaultProps:function j(){return {x:0,y:0,backgroundColor:"transparent"};},updatePosition:function j(k,l){var m=c("ReactDOM").findDOMNode(this).getBoundingClientRect(),n=(k-m.left)/m.width,o=(m.bottom-l)/m.height;n=this.getScaledValue(n);o=this.getScaledValue(o);this.props.onChange(n,o);},render:function j(){var k="map"+(this.state.active?" "+"active":"");return (c("React").createElement("div",{className:"_4uwo"+" "+this.props.className+" "+k,onMouseDown:this.startUpdates,onTouchStart:this.startUpdates},c("React").createElement("div",{className:"background",style:{backgroundColor:this.props.backgroundColor}}),c("React").createElement("div",{className:"pointer",style:{left:this.getPercentageValue(this.props.x),bottom:this.getPercentageValue(this.props.y)}})));}});f.exports=i;}),null);
/**
 * @providesModule color-picker-slider
 * @preserve-header
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014 Nick Williams
 * Copyright (c) 2014 George Czabania
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @fullSyntaxTransform
 */__d("color-picker-slider",["cx","React","ReactDOM","ReactComponentWithPureRenderMixin","color-picker-draggable-mixin"],(function a(b,c,d,e,f,g,h){var i=c("React").createClass({displayName:"Slider",mixins:[c("color-picker-draggable-mixin"),c("ReactComponentWithPureRenderMixin")],propTypes:{vertical:c("React").PropTypes.bool.isRequired,value:c("React").PropTypes.number.isRequired},getDefaultProps:function j(){return {value:0};},updatePosition:function j(k,l){var m=c("ReactDOM").findDOMNode(this).getBoundingClientRect(),n;if(this.props.vertical){n=(m.bottom-l)/m.height;}else n=(k-m.left)/m.width;n=this.getScaledValue(n);this.props.onChange(n);},getCss:function j(){var k={},l=this.props.vertical?"bottom":"left";k[l]=this.getPercentageValue(this.props.value);return k;},render:function j(){var k="slider"+(this.props.vertical?" "+"vertical":"")+(!this.props.vertical?" "+"horizontal":"");return (c("React").createElement("div",{className:"_4_2w"+" "+k,onMouseDown:this.startUpdates,onTouchStart:this.startUpdates},c("React").createElement("div",{className:"track"}),c("React").createElement("div",{className:"pointer",style:this.getCss()})));}});f.exports=i;}),null);
/**
 * @providesModule color-picker
 * @preserve-header
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014 Nick Williams
 * Copyright (c) 2014 George Czabania
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @fullSyntaxTransform
 * 
 */__d("color-picker",["cx","React","color-picker-map","color-picker-slider","colr","joinClasses"],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;function k(l){"use strict";j.constructor.call(this,l);this.getStateFrom=function(m){var n=c("colr").fromHex(m);return {hsv:n.toHsvObject()};};this.getLuminosity=function(){return c("colr").fromHsvObject(this.state.hsv).toGrayscale()/255;}.bind(this);this.getBackgroundHue=function(){return c("colr").fromHsv(this.state.hsv.h,100,100).toHex();}.bind(this);this.handleHueChange=function(m){this.update({h:m,s:this.state.hsv.s,v:this.state.hsv.v});}.bind(this);this.handleSaturationValueChange=function(m,n){this.update({h:this.state.hsv.h,s:m,v:n});}.bind(this);this.update=function(m){var n=c("colr").fromHsvObject(m);this.props.onChange(n.toHex());this.setState({hsv:m});}.bind(this);this.state=this.getStateFrom(l.color);}k.prototype.componentWillReceiveProps=function(l){"use strict";var m=l.color,n=c("colr").fromHsvObject(this.state.hsv).toHex();if(m.toLowerCase()!==n.toLowerCase())this.setState(this.getStateFrom(m));};k.prototype.render=function(){"use strict";var l=this.getLuminosity(),m=this.getBackgroundHue(),n=(l<=.5?"dark":"")+(l>.5?" "+"light":"");return c("React").createElement("div",{className:c("joinClasses")("_f4e",this.props.className)},c("React").createElement("div",{className:"_2ppf"},c("React").createElement(c("color-picker-slider"),{vertical:true,value:this.state.hsv.h,max:360,onChange:this.handleHueChange})),c("React").createElement(c("color-picker-map"),{x:this.state.hsv.s,y:this.state.hsv.v,max:100,className:n,backgroundColor:m,onChange:this.handleSaturationValueChange}));};k.defaultProps={className:'',color:"#000000"};f.exports=k;}),null);
__d('SlideshowPhotoEditDialog.react',['invariant','cx','fbt','colr','color-picker','LayerHideOnBlur','LayerFadeOnHide','React','SlideshowAlignmentBox.react','SlideshowColorBox.react','SlideshowConstants','SlideshowFrameImage.react','SlideshowPhotoCropSelector.react','SlideshowImageUtil','SlideshowPhotoEditOptionConstants','SlideshowPhotoEditOptionSelector.react','SlideshowTextoverlayAlignmentConstants','SlideshowTextoverlayColorPickerConstants','XUIButton.react','XUIContextualDialog.react','XUIContextualDialogBody.react','XUIContextualDialogFooter.react','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogCancelButton.react','XUIDialogSaveButton.react','XUIDialogFooter.react','XUIDialogTitle.react','XUIRadioButtonGroup.react','XUISingleSelector.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('XUISingleSelector.react').Option,n=204,o=730,p=810,q=460,r=60;k=babelHelpers.inherits(s,c('React').Component);l=k&&k.prototype;function s(t){l.constructor.call(this,t);this.$SlideshowPhotoEditDialog7=function(u){if(this.props.colorPickerDialogShown&&!u)this.props.onSaveColor();}.bind(this);this.$SlideshowPhotoEditDialog6=function(u){this.setState({colorInput:u.background_color});this.props.onSelectTextoverlayColor(u);}.bind(this);this.$SlideshowPhotoEditDialog5=function(u){var v=u.target;v instanceof HTMLInputElement||h(0);this.setState({colorInput:v.value});var w=void 0;try{w=c('colr').fromHex(v.value).toHex();if(w)this.props.onSelectTextoverlayColor({background_color:w,font_color:this.props.textoverlayColor.font_color});}catch(x){}}.bind(this);this.$SlideshowPhotoEditDialog4=function(u){this.setState({colorInput:u});this.props.onSelectTextoverlayColor({background_color:u,font_color:this.props.textoverlayColor.font_color});}.bind(this);this.$SlideshowPhotoEditDialog1=function(u){this.props.onChangeTextoverlayFont(u.value);}.bind(this);this.$SlideshowPhotoEditDialog2=function(u){this.props.onChangeTextoverlayFontBold(u);}.bind(this);this.$SlideshowPhotoEditDialog3=function(u){this.props.onSetTextoverlayContent(u.target.value);}.bind(this);this.state={colorInput:t.textoverlayColor.background_color};this.$SlideshowPhotoEditDialog1=this.$SlideshowPhotoEditDialog1.bind(this);this.$SlideshowPhotoEditDialog2=this.$SlideshowPhotoEditDialog2.bind(this);this.$SlideshowPhotoEditDialog3=this.$SlideshowPhotoEditDialog3.bind(this);this.$SlideshowPhotoEditDialog4=this.$SlideshowPhotoEditDialog4.bind(this);this.$SlideshowPhotoEditDialog5=this.$SlideshowPhotoEditDialog5.bind(this);this.$SlideshowPhotoEditDialog6=this.$SlideshowPhotoEditDialog6.bind(this);this.$SlideshowPhotoEditDialog7=this.$SlideshowPhotoEditDialog7.bind(this);}s.prototype.$SlideshowPhotoEditDialog8=function(){var t=c('SlideshowConstants').textoverlays_fonts;return Object.keys(t).map(function(u){return c('React').createElement(m,{key:u,value:u},t[u]);});};s.prototype.$SlideshowPhotoEditDialog9=function(){return c('React').createElement('div',{className:"_bsi"},c('React').createElement('div',{className:"_bsj"},j._("Font")),c('React').createElement(c('XUISingleSelector.react'),{className:"_bsm",maxwidth:138,name:'font',size:'large',value:this.props.textoverlayFont,onChange:this.$SlideshowPhotoEditDialog1},this.$SlideshowPhotoEditDialog8()),c('React').createElement(c('XUIRadioButtonGroup.react'),{className:"_46un",selectedValue:this.props.isTextoverlayFontBold,selectedDepressed:true,onValueChange:this.$SlideshowPhotoEditDialog2},c('React').createElement(c('XUIButton.react'),{label:j._("Regular"),value:false}),c('React').createElement(c('XUIButton.react'),{label:j._("Bold"),value:true})));};s.prototype.$SlideshowPhotoEditDialog10=function(){return c('React').createElement('div',{className:"_47dr"},c('React').createElement('span',{className:"_bsj"},j._("Colors")),c('React').createElement(c('SlideshowColorBox.react'),{className:"_458a",ref:'colorBox',style:{color:this.props.textoverlayColor.font_color,backgroundColor:this.props.textoverlayColor.background_color},onClick:this.props.onOpenColorPicker}),this.$SlideshowPhotoEditDialog11());};s.prototype.$SlideshowPhotoEditDialog12=function(){var t=c('SlideshowConstants').textoverlays_colors,u=this.props.textoverlayColor;return c('React').createElement('div',{className:"_3pya"},t.map(function(v){return c('React').createElement(c('SlideshowColorBox.react'),{className:"_47ds"+(v.background_color==u.background_color&&v.font_color==u.font_color?' '+"_auk":''),color:v,key:v.font_color+v.background_color,style:{color:v.font_color,backgroundColor:v.background_color},onClick:this.$SlideshowPhotoEditDialog6});}.bind(this)));};s.prototype.$SlideshowPhotoEditDialog13=function(){var t=this.props.textoverlayColor;return c('React').createElement('div',null,c('React').createElement('div',{className:"_3pyb"},c('React').createElement(c('color-picker'),{color:t.background_color,onChange:this.$SlideshowPhotoEditDialog4})),c('React').createElement(c('SlideshowColorBox.react'),{className:"_47ds _3pyc",color:t,style:{color:t.font_color,backgroundColor:t.background_color}}),c('React').createElement('div',{className:"_3pyd"},c('React').createElement('input',{maxLength:7,value:this.state.colorInput,onChange:this.$SlideshowPhotoEditDialog5})));};s.prototype.$SlideshowPhotoEditDialog11=function(){var t=this.props,u=t.colorPickerDialogShown,v=t.colorPickerType,w=v==c('SlideshowTextoverlayColorPickerConstants').Basic;return c('React').createElement(c('XUIContextualDialog.react'),{alignment:'right',behaviors:{LayerHideOnBlur:c('LayerHideOnBlur')},contextRef:function(){return this.refs.colorBox;}.bind(this),shown:u,position:'below',width:n,onToggle:this.$SlideshowPhotoEditDialog7},c('React').createElement(c('XUIContextualDialogBody.react'),null,c('React').createElement('div',{className:"_3pye"+(' '+"_2d75")+(w?' '+"_3pyf":''),onClick:this.props.onClickBasicColorPicker,role:'button',tabIndex:'0'},j._("Basic")),c('React').createElement('div',{className:"_3pye"+(' '+"_2d76")+(!w?' '+"_3pyf":''),onClick:this.props.onClickAdvancedColorPicker,role:'button',tabIndex:'0'},j._("Advanced")),w?this.$SlideshowPhotoEditDialog12():this.$SlideshowPhotoEditDialog13()),c('React').createElement(c('XUIContextualDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{use:'confirm',label:j._("Done"),onClick:this.props.onSaveColor})));};s.prototype.$SlideshowPhotoEditDialog14=function(){var t=c('SlideshowTextoverlayAlignmentConstants').Horizontal,u=c('SlideshowTextoverlayAlignmentConstants').Vertical;return c('React').createElement('div',{className:"_b3r"},c('React').createElement('span',{className:"_bsj"},j._("Alignment")),c('React').createElement('div',{className:"_b3s"},u.map(function(v){return t.map(function(w){return c('React').createElement(c('SlideshowAlignmentBox.react'),{key:v+'-'+w,selectedValue:this.props.textoverlayAlignment,horizontalAlignment:w,verticalAlignment:v,onValueChange:this.props.onChangeTextoverlayAlignment});}.bind(this));}.bind(this))));};s.prototype.$SlideshowPhotoEditDialog15=function(){return c('React').createElement('div',{className:"_32zp"},this.$SlideshowPhotoEditDialog16(),this.$SlideshowPhotoEditDialog9(),this.$SlideshowPhotoEditDialog10(),this.$SlideshowPhotoEditDialog14());};s.prototype.$SlideshowPhotoEditDialog17=function(){if(!this.props.dialogShown)return null;var t=c('SlideshowImageUtil').getPreviewBoxDimensions(this.props.photosCrops,q),u={marginLeft:(q-t.width)/2,marginTop:(q-t.height)/2},v=this.props.photoToEdit;v||h(0);return c('React').createElement('div',{className:"_4ry3"},c('React').createElement('div',{style:u},c('React').createElement(c('SlideshowFrameImage.react'),{croppingSpec:c('SlideshowImageUtil').getCroppingSpec(this.props.photoCrops,t,v,this.props.showSlideshowImageCroppingEditOption),imageSrc:v.url,imageWidth:v.width,imageHeight:v.height,maxWidth:t.width,maxHeight:t.height,positionStyle:'relative',textoverlay:{background_color:this.props.textoverlayColor.background_color,bold:this.props.isTextoverlayFontBold,font:this.props.textoverlayFont,font_color:this.props.textoverlayColor.font_color,text_alignment:this.props.textoverlayAlignment,textoverlay_content:this.props.textoverlayContent}})));};s.prototype.$SlideshowPhotoEditDialog18=function(){switch(this.props.editOptionType){case c('SlideshowPhotoEditOptionConstants').Crop:if(!this.props.photoToEdit||!this.props.photoCrops)return null;return c('React').createElement('div',{className:"_2m0d"},c('React').createElement(c('SlideshowPhotoCropSelector.react'),{format:this.props.format,photoCrops:this.props.photoCrops,photoToEdit:this.props.photoToEdit,onPhotoCropsUpdate:this.props.onPhotoCropsUpdate}));case c('SlideshowPhotoEditOptionConstants').Text:return c('React').createElement('div',{className:"_2m0d"},this.$SlideshowPhotoEditDialog15(),c('React').createElement('div',{className:"_4ry4"},this.$SlideshowPhotoEditDialog17()));default:return null;}};s.prototype.$SlideshowPhotoEditDialog16=function(){var t=this.props.textoverlayContent,u=r-(t?t.length:0);return c('React').createElement('div',null,c('React').createElement('textarea',{className:"_32zq",placeholder:j._("Your text..."),maxLength:r,onChange:this.$SlideshowPhotoEditDialog3,value:t||''}),c('React').createElement('div',{className:"_2nyn"+(u<=0?' '+"_2d77":'')},u));};s.prototype.$SlideshowPhotoEditDialog19=function(){if(!this.props.showSlideshowImageCroppingEditOption)return null;return (c('React').createElement(c('SlideshowPhotoEditOptionSelector.react'),{editOptionType:this.props.editOptionType,onChangeEditOption:this.props.onChangeEditOption}));};s.prototype.render=function(){return (c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},layerHideOnBlur:false,shown:this.props.dialogShown,width:this.props.showSlideshowImageCroppingEditOption?p:o},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},j._("Edit Photo")),c('React').createElement(c('XUIDialogBody.react'),{className:"_5emm",useCustomPadding:true},this.$SlideshowPhotoEditDialog19(),this.$SlideshowPhotoEditDialog18()),c('React').createElement(c('XUIDialogFooter.react'),{className:"_vc3"},c('React').createElement(c('XUIDialogCancelButton.react'),{onClick:this.props.onCancel}),c('React').createElement(c('XUIDialogSaveButton.react'),{disabled:this.props.textoverlayContent&&this.props.textoverlayContent.length>r,use:'confirm',onClick:this.props.onSave}))));};f.exports=s;}),null);
__d('SlideshowPhotoEditStore',['SlideshowConstants','SlideshowPhotoEditOptionConstants','SlideshowTextoverlayColorPickerConstants','FluxReduceStore','immutable','SlideshowActionTypes','SlideshowDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l=c('immutable').Record({colorPickerType:c('SlideshowTextoverlayColorPickerConstants').Basic,isColorPickerDialogShown:false,isPhotoEditDialogShown:false,isTextoverlayFontBold:false,editOptionType:c('SlideshowPhotoEditOptionConstants').Text,photoCrops:null,photoToEdit:null,textoverlayAlignment:'center-center',textoverlayColor:c('SlideshowConstants').textoverlays_colors[0],textoverlayContent:null,textoverlayFont:Object.keys(c('SlideshowConstants').textoverlays_fonts)[0]});h=babelHelpers.inherits(m,l);i=h&&h.prototype;function m(){h.apply(this,arguments);}j=babelHelpers.inherits(n,c('FluxReduceStore'));k=j&&j.prototype;n.prototype.getInitialState=function(){return new m();};n.prototype.getPhotoToEdit=function(){return this.getState().get('photoToEdit');};n.prototype.reduce=function(o,p){switch(p.type){case c('SlideshowActionTypes').SHOW_PHOTO_EDIT_DIALOG:return o.set('isColorPickerDialogShown',p.isColorPickerDialogShown).set('isPhotoEditDialogShown',p.isPhotoEditDialogShown).set('photoCrops',p.photoCrops).set('photoToEdit',p.photoToEdit).set('textoverlayAlignment',p.textoverlayAlignment).set('textoverlayColor',p.textoverlayColor).set('textoverlayContent',p.textoverlayContent).set('textoverlayFont',p.textoverlayFont).set('isTextoverlayFontBold',p.isTextoverlayFontBold);case c('SlideshowActionTypes').CLOSE_PHOTO_EDIT_DIALOG:return o.set('isPhotoEditDialogShown',p.isPhotoEditDialogShown).set('photoToEdit',p.photoToEdit);case c('SlideshowActionTypes').TOGGLE_COLOR_PICKER_DIALOG:return o.set('isColorPickerDialogShown',!o.get('isColorPickerDialogShown'));case c('SlideshowActionTypes').CHANGE_COLOR_PICKER_TYPE:return o.set('colorPickerType',p.colorPickerType);case c('SlideshowActionTypes').CHANGE_EDIT_OPTION_TYPE:return o.set('editOptionType',p.editOptionType);case c('SlideshowActionTypes').CHANGE_PHOTO_CROPS:return o.set('photoCrops',p.photoCrops);case c('SlideshowActionTypes').SELECT_TEXTOVERLAY_COLOR:return o.set('textoverlayColor',p.textoverlayColor);case c('SlideshowActionTypes').SET_TEXTOVERLAY_CONTENT:var q=p.textoverlayContent?p.textoverlayContent.trimLeft():null;return o.set('textoverlayContent',q);case c('SlideshowActionTypes').CHANGE_TEXTOVERLAY_ALIGNMENT:return o.set('textoverlayAlignment',p.textoverlayAlignment);case c('SlideshowActionTypes').CHANGE_TEXTOVERLAY_FONT:return o.set('textoverlayFont',p.textoverlayFont);case c('SlideshowActionTypes').CHANGE_TEXTOVERLAY_FONT_BOLD:return o.set('isTextoverlayFontBold',p.isTextoverlayFontBold);}return o;};n.prototype.getColorPickerType=function(){return this.getState().get('colorPickerType');};n.prototype.getEditOptionType=function(){return this.getState().get('editOptionType');};n.prototype.getPhotoCrops=function(){return this.getState().get('photoCrops');};n.prototype.getTextoverlayAlignment=function(){return this.getState().get('textoverlayAlignment');};n.prototype.getTextoverlayColor=function(){return this.getState().get('textoverlayColor');};n.prototype.getTextoverlayContent=function(){return this.getState().get('textoverlayContent');};n.prototype.getTextoverlayFont=function(){return this.getState().get('textoverlayFont');};n.prototype.shouldShowColorPickerDialog=function(){return this.getState().get('isColorPickerDialogShown');};n.prototype.shouldShowPhotoEditDialog=function(){return this.getState().get('isPhotoEditDialogShown');};n.prototype.isTextoverlayFontBold=function(){return this.getState().get('isTextoverlayFontBold');};function n(){j.apply(this,arguments);}f.exports=new n(c('SlideshowDispatcher'));}),null);
__d('SlideshowPhotoEditDialogContainer.react',['FluxContainer','FluxStore','React','SlideshowActions','SlideshowDispatcher','SlideshowPhotoEditDialog.react','SlideshowPhotoEditStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.$SlideshowPhotoEditDialogContainer1=function(){this.props.onSaveTextoverlay&&this.props.onSaveTextoverlay(this.state.photoToEdit,{textoverlay_content:this.state.textoverlayContent,font_color:this.state.textoverlayColor.font_color,background_color:this.state.textoverlayColor.background_color,text_alignment:this.state.textoverlayAlignment,font:this.state.textoverlayFont,bold:this.state.isTextoverlayFontBold});this.props.onSaveImageCrops&&this.props.onSaveImageCrops(this.state.photoToEdit,this.state.photoCrops);c('SlideshowActions').closePhotoEditDialog();}.bind(this),l;}j.getStores=function(){return [c('SlideshowPhotoEditStore')];};j.calculateState=function(){return {colorPickerType:c('SlideshowPhotoEditStore').getColorPickerType(),editOptionType:c('SlideshowPhotoEditStore').getEditOptionType(),isColorPickerDialogShown:c('SlideshowPhotoEditStore').shouldShowColorPickerDialog(),isPhotoEditDialogShown:c('SlideshowPhotoEditStore').shouldShowPhotoEditDialog(),isTextoverlayFontBold:c('SlideshowPhotoEditStore').isTextoverlayFontBold(),textoverlayAlignment:c('SlideshowPhotoEditStore').getTextoverlayAlignment(),textoverlayColor:c('SlideshowPhotoEditStore').getTextoverlayColor(),textoverlayContent:c('SlideshowPhotoEditStore').getTextoverlayContent(),textoverlayFont:c('SlideshowPhotoEditStore').getTextoverlayFont(),photoToEdit:c('SlideshowPhotoEditStore').getPhotoToEdit(),photoCrops:c('SlideshowPhotoEditStore').getPhotoCrops()};};j.prototype.componentWillMount=function(){c('SlideshowDispatcher').explicitlyRegisterStores([c('SlideshowPhotoEditStore')]);};j.prototype.render=function(){return (c('React').createElement(c('SlideshowPhotoEditDialog.react'),{colorPickerDialogShown:this.state.isColorPickerDialogShown,colorPickerType:this.state.colorPickerType,dialogShown:this.state.isPhotoEditDialogShown,editOptionType:this.state.editOptionType,format:this.props.format,isTextoverlayFontBold:this.state.isTextoverlayFontBold,photoCrops:this.state.photoCrops,photosCrops:this.props.photosCrops,photoToEdit:this.state.photoToEdit,showSlideshowImageCroppingEditOption:this.props.showSlideshowImageCroppingEditOption,textoverlayAlignment:this.state.textoverlayAlignment,textoverlayColor:this.state.textoverlayColor,textoverlayContent:this.state.textoverlayContent,textoverlayFont:this.state.textoverlayFont,onCancel:c('SlideshowActions').closePhotoEditDialog,onChangeEditOption:c('SlideshowActions').changeEditOptionType,onChangeTextoverlayAlignment:c('SlideshowActions').changeTextoverlayAlignment,onChangeTextoverlayFont:c('SlideshowActions').changeTextoverlayFont,onChangeTextoverlayFontBold:c('SlideshowActions').changeTextoverlayFontBold,onClickAdvancedColorPicker:c('SlideshowActions').showAdvancedColorPicker,onClickBasicColorPicker:c('SlideshowActions').showBasicColorPicker,onOpenColorPicker:c('SlideshowActions').toggleColorPickerDialog,onPhotoCropsUpdate:c('SlideshowActions').changePhotoCrops,onSave:this.$SlideshowPhotoEditDialogContainer1,onSaveColor:c('SlideshowActions').toggleColorPickerDialog,onSelectTextoverlayColor:c('SlideshowActions').selectTextoverlayColor,onSetTextoverlayContent:c('SlideshowActions').setTextoverlayContent}));};f.exports=c('FluxContainer').create(j);}),null);
__d("SlideshowPreviewConstants",[],(function a(b,c,d,e,f,g){f.exports={WWW_PREVIEW_CONTAINER_SIZE:450,WWW_PREVIEW_CONTAINER_SIZE_COMPOSER:478,WWW_COMPOSER_LEFT_MARGIN:12,WWW_PLAY_ICON_SIZE:64,WWW_PLAYER_SIZE:350,WWW_PLAYER_SIZE_COMPOSER:478};}),null);
__d('SlideshowPlayer.react',['cx','fbt','ix','Animation','Event','FBOverlayBase.react','FBOverlayContainer.react','FBOverlayElement.react','Image.react','Link.react','React','ReactDOM','Style','SlideshowConstants','SlideshowImageUtil','SlideshowPreviewConstants','SlideshowUtil','XUICloseButton.react','XUIOverlayButton.react','ge','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('React').PropTypes,l=1000,m=100,n=c('React').createClass({displayName:'SlideshowPlayer',_animation:null,_timeout:0,_audioEndedEvent:c('Event'),_audioref:'slideshow_audio_player',_fadeTimeOut:0,_fadeInterval:0,_maxAudioTimeOut:0,propTypes:{durationInMS:k.number.isRequired,imagesAllLoaded:k.bool.isRequired,imagesCrops:k.arrayOf(k.object.isRequired).isRequired,isPreviewPlaying:k.bool.isRequired,previewBoxContainerSize:k.number.isRequired,previewBoxSize:k.number.isRequired,storylineMoodIDSource:k.oneOfType([k.oneOf([null,undefined]),k.string]),transitionInMS:k.number.isRequired,onClose:k.func,onPreviewStateChange:k.func.isRequired},getInitialState:function o(){return {currIndex:0,nextIndex:1,playing:false};},componentDidMount:function o(){this._timeout=0;this._audioEndedEvent=null;},componentWillUnmount:function o(){this._clearTimeout();},componentDidUpdate:function o(p){if(this.props.isPreviewPlaying&&!p.isPreviewPlaying){this._startPlaying();}else if(!this.props.isPreviewPlaying&&p.isPreviewPlaying)this._stopPlaying();},_clearTimeout:function o(){if(this._timeout){clearTimeout(this._timeout);this._timeout=0;}if(this._animation){this._animation.stop();this._animation=null;}if(this._fadeTimeOut)clearTimeout(this._fadeTimeOut);if(this._fadeInterval)clearInterval(this._fadeInterval);if(this._maxAudioTimeOut)clearTimeout(this._maxAudioTimeOut);},_getItemCount:function o(){return c('React').Children.count(this.props.children);},_moveNext:function o(){var p=this._getItemCount();if(p===0){if(this._maxAudioTimeOut){return;}else this._setAudioTimeout();}else if(this.state.nextIndex>=p){this._stopPlaying();}else this._fadeImage();},_setTimeout:function o(){this._timeout=setTimeout(this._moveNext,this.props.durationInMS);},_setAudioTimeout:function o(){var p=this._getItemCount(),q=p===0?c('SlideshowUtil').getMaximumTotalLengthInMS():p*(this.props.durationInMS+this.props.transitionInMS);this._fadeTimeOut=setTimeout(this._fadeAudio,q-l*c('SlideshowConstants').audio_fadeout);this._maxAudioTimeOut=setTimeout(this._stopPlaying,q);},_fadeImage:function o(){var p=this.state,q=p.currIndex,r=p.nextIndex,s=c('ReactDOM').findDOMNode(this.refs[q]);if(!s){this._stopPlaying();return;}this._animation=new (c('Animation'))(c('ReactDOM').findDOMNode(this.refs[q])).from('opacity',1).to('opacity',0).duration(this.props.transitionInMS).ondone(function(){this.setState({currIndex:r,nextIndex:r+1},this._setTimeout);}.bind(this)).go();},_resetImages:function o(){this.setState({currIndex:0,nextIndex:1});for(var p=0;p<this._getItemCount();p++)c('Style').set(c('ReactDOM').findDOMNode(this.refs[p]),'opacity',1);},_fadeAudio:function o(){var p=c('ge')(this._audioref),q=c('SlideshowConstants').audio_fadeout*(l/m),r=1/q;this._fadeInterval=setInterval(function(){var s=p.volume;if(s-r>=0){s-=r;p.volume=s;}else clearInterval(this._fadeInterval);},m);},_startPlaying:function o(){if(this._timeout)return;this.setState({playing:true},this._setTimeout);this._audioEndedEvent=null;var p=this.props.storylineMoodIDSource;if(!p)return;var q=c('ge')(this._audioref);if(!q)return;q.src=p;q.currentTime=0;q.volume=1;q.play();this._audioEndedEvent=c('Event').listen(q,'ended',function(){q.play();});this._setAudioTimeout();},_stopPlaying:function o(){this.props.onPreviewStateChange(false);if(this._timeout){this.setState({playing:false});var p=c('ge')(this._audioref);if(p!=null)p.pause();if(this._audioEndedEvent!==null)this._audioEndedEvent.remove();this._clearTimeout();this._resetImages();}},_getCurrentImages:function o(){return this.props.children.map(function(p,q){return (c('React').createElement('div',{ref:q,key:q,style:{position:'absolute'}},p));}).reverse();},_getPlayerStyle:function o(){return {height:this.props.previewBoxSize,margin:(this.props.previewBoxContainerSize-this.props.previewBoxSize)/2,width:this.props.previewBoxSize};},_getEditOverlayButtonStyle:function o(){var p=c('SlideshowImageUtil').getPreviewBoxDimensions(this.props.imagesCrops,this.props.previewBoxSize);return {marginLeft:(this.props.previewBoxSize-p.width)/2,marginTop:(this.props.previewBoxSize-p.height)/2};},_getCloseOverlayButtonStyle:function o(){var p=c('SlideshowImageUtil').getPreviewBoxDimensions(this.props.imagesCrops,this.props.previewBoxSize);return {marginRight:(this.props.previewBoxSize-p.width)/2,marginTop:(this.props.previewBoxSize-p.height)/2};},_getCloseButton:function o(){if(!this.props.onClose)return null;return (c('React').createElement(c('XUICloseButton.react'),{className:"_4xxs",onClick:this.props.onClose,size:'medium',shade:'light',style:this._getCloseOverlayButtonStyle()}));},_playButtonClick:function o(){this.props.onPreviewStateChange(true);},_getEditButton:function o(){if(!this.props.onEdit)return null;var p=i._("Edit");return (c('React').createElement(c('XUIOverlayButton.react'),{className:"_4xxt",image:c('React').createElement(c('Image.react'),{src:j("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/pencil_16_fig-white.png")}),label:p,style:this._getEditOverlayButtonStyle(),onClick:this.props.onEdit}));},render:function o(){var p=this._getItemCount();if(p===0)return (c('React').createElement('div',{className:"_4xxu"},c('React').createElement(c('Image.react'),{className:"_4xxv",src:j("images\/ads\/video\/play-na.png")}),c('React').createElement('audio',{id:this._audioref,className:'hidden_elem'},c('React').createElement('source',{type:'audio/mpeg'})),i._("Add images to see a preview of your slideshow")));var q={marginLeft:(this.props.previewBoxContainerSize-c('SlideshowPreviewConstants').WWW_PLAY_ICON_SIZE)/2,marginTop:(this.props.previewBoxContainerSize-c('SlideshowPreviewConstants').WWW_PLAY_ICON_SIZE)/2};return (c('React').createElement(c('FBOverlayContainer.react'),null,c('React').createElement(c('FBOverlayBase.react'),null,c('React').createElement('div',{className:"_4xxx",style:this._getPlayerStyle()},p===1?c('React').createElement('div',{ref:0,style:{position:'absolute'}},this.props.children):this._getCurrentImages(),this._getCloseButton(),this._getEditButton(),c('React').createElement('audio',{id:this._audioref,className:'hidden_elem'},c('React').createElement('source',{type:'audio/mpeg'})))),c('React').createElement(c('FBOverlayElement.react'),null,c('React').createElement('div',{className:this.state.playing||!this.props.imagesAllLoaded?"_4xxy":'',style:q},c('React').createElement(c('Link.react'),{onClick:this._playButtonClick},c('React').createElement(c('Image.react'),{src:j("images\/calltoaction\/videoendscreen\/play_64dp.png")}))))));}});f.exports=n;}),null);
__d('SlideshowPreview.react',['cx','invariant','LoadingImageBox.react','React','SlideshowFrameImage.react','SlideshowImageUtil','SlideshowPlayer.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;l.prototype.$SlideshowPreview1=function(){var m=c('SlideshowImageUtil').getPreviewBoxDimensions(this.props.imagesCrops,this.props.previewBoxSize),n={marginLeft:(this.props.previewBoxSize-m.width)/2,marginTop:(this.props.previewBoxSize-m.height)/2};return (this.props.selectedImages.map(function(o,p){o.width!=null&&o.height!=null||i(0);return (c('React').createElement('div',{style:n,key:o.key},c('React').createElement(c('SlideshowFrameImage.react'),{className:"_590x",croppingSpec:c('SlideshowImageUtil').getCroppingSpec(this.props.imagesCrops[p],m,o,this.props.showSlideshowImageCroppingEditOption),imageSrc:o.url,imageWidth:o.width,imageHeight:o.height,maxWidth:m.width,maxHeight:m.height,positionStyle:'relative',textoverlay:this.props.imagesTextoverlays&&this.props.imagesTextoverlays[p].textoverlay_content?this.props.imagesTextoverlays[p]:null})));}.bind(this)).slice(0,this.props.maxSelectedImages));};l.prototype.render=function(){return (c('React').createElement('div',this.props,c('React').createElement(c('SlideshowPlayer.react'),{durationInMS:this.props.durationWithTransitionInMS-this.props.transitionInMS,imagesAllLoaded:this.props.imagesAllLoaded,imagesCrops:this.props.imagesCrops,isPreviewPlaying:this.props.isPreviewPlaying,previewBoxContainerSize:this.props.previewBoxContainerSize,previewBoxSize:this.props.previewBoxSize,storylineMoodIDSource:this.props.storylineMoodIDSource,transitionInMS:this.props.transitionInMS,onClose:this.props.onClose,onEdit:this.props.onEdit,onPreviewStateChange:this.props.onPreviewStateChange},this.props.imagesAllLoaded?this.$SlideshowPreview1():c('React').createElement(c('LoadingImageBox.react'),{className:"_590x",height:this.props.previewBoxSize,width:this.props.previewBoxSize}))));};function l(){j.apply(this,arguments);}f.exports=l;}),null);
__d('SlideshowSettingsPanel.react',['cx','fbt','SlideshowConstants','SlideshowFbtUtils','AdsHelpLink.react','React','XUIButton.react','XUIRadioButtonGroup.react','XUISingleSelector.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('XUISingleSelector.react').Option,m=c('SlideshowConstants').image_duration_in_sec_options,n=1000;j=babelHelpers.inherits(o,c('React').PureComponent);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.$SlideshowSettingsPanel7=function(event){this.props.onPreviewStateChange(false);var u=event.value,v=this.props.storylineMoodFiles.find(function(w){return w.moodID===u;});this.props.onChangeStorylineMood(v?v:null);}.bind(this),q;}o.prototype.$SlideshowSettingsPanel1=function(){return c('React').createElement('div',{className:"_315i"},c('React').createElement('span',{className:"_315k"},i._("ASPECT RATIO")),c('React').createElement(c('AdsHelpLink.react'),{width:360},i._("Choose the aspect ratio for your video. Let the first image of your slideshow determine the ratio, or set it to square (1:1), rectangle (16:9) or vertical (2:3)")),c('React').createElement('div',{className:"_2i2r"},c('React').createElement(c('XUISingleSelector.react'),{defaultValue:this.props.format,name:'format',size:'xlarge',onChange:this.props.onChangeFormat},this.$SlideshowSettingsPanel2())));};o.prototype.$SlideshowSettingsPanel2=function(){var p=c('SlideshowConstants').formats;return Object.keys(p).map(function(q){return c('React').createElement(l,{key:q,value:p[q]},c('SlideshowFbtUtils').getFormatFbtString(q));});};o.prototype.$SlideshowSettingsPanel3=function(){return c('React').createElement('div',{className:"_315i"},c('React').createElement('span',{className:"_315k"},i._("IMAGE DURATION")),c('React').createElement(c('AdsHelpLink.react'),null,i._("Set the total number of seconds you show each image in your slideshow.")),c('React').createElement('div',{className:"_2i2r"},c('React').createElement(c('XUISingleSelector.react'),{defaultValue:this.props.durationWithTransitionInMS,name:'duration',size:'xlarge',onChange:this.props.onChangeDuration},this.$SlideshowSettingsPanel4())));};o.prototype.$SlideshowSettingsPanel4=function(){return m.map(function(p){return c('React').createElement(l,{key:p,value:p*n},c('SlideshowFbtUtils').getDurationFbtString(p));});};o.prototype.$SlideshowSettingsPanel5=function(){var p=c('SlideshowConstants').transitions;return c('React').createElement('div',{className:"_315i"},c('React').createElement('span',{className:"_315k"},i._("TRANSITION")),c('React').createElement(c('AdsHelpLink.react'),null,i._("Choose how your slideshow switches from one image to the next.")),c('React').createElement('div',{className:"_2i2r"},c('React').createElement(c('XUIRadioButtonGroup.react'),{selectedDepressed:true,selectedValue:this.props.transitionInMS,onValueChange:this.props.onChangeTransition},Object.keys(p).map(function(q){return c('React').createElement(c('XUIButton.react'),{key:q,label:c('SlideshowFbtUtils').getTransitionFbtString(q),size:'xlarge',value:p[q]});}))));};o.prototype.$SlideshowSettingsPanel6=function(){var p=[];this.props.storylineMoodFiles.forEach(function(r){p.push(c('React').createElement(l,{key:r.moodID,value:r.moodID},r.fileName));});var q=[c('React').createElement(l,{key:c('SlideshowConstants').storyline_mood_id_none,value:null},i._("None"))];return c('React').createElement(c('XUISingleSelector.react'),{defaultValue:null,name:'storyline_mood_file',size:'xlarge',value:this.props.selectedStorylineMood?this.props.selectedStorylineMood.moodID:null,onChange:this.$SlideshowSettingsPanel7},q.concat(p));};o.prototype.render=function(){return (c('React').createElement('div',babelHelpers['extends']({className:"_2bot"},this.props),this.props.warningMessage,this.$SlideshowSettingsPanel1(),this.$SlideshowSettingsPanel3(),this.$SlideshowSettingsPanel5()));};f.exports=o;}),null);
__d('SlideshowTabBar.react',['cx','LayerFadeOnHide','React','ReactFragment','SimpleNUXMessage','SimpleNUXMessageTypes','SlideshowFbtUtils','SlideshowFlowTypes','XUIAmbientNUX.react','XUICardSection.react','XUIPageNavigation.react'],(function a(b,c,d,e,f,g,h){var i,j,k=c('SlideshowFlowTypes').SlideshowTabKey,l=c('XUIPageNavigation.react').Group,m=c('XUIPageNavigation.react').Item;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(o){'use strict';j.constructor.call(this,o);this.$SlideshowTabBar1=function(p){var q;if(p!==k.FRAMES_TAB){this.setState({showFramesTabNux:false});}else if(p!==k.MUSIC_TAB)this.setState({showMusicTabNux:false});for(var r=arguments.length,s=Array(r>1?r-1:0),t=1;t<r;t++)s[t-1]=arguments[t];(q=this.props).onSelect.apply(q,[p].concat(s));}.bind(this);this.$SlideshowTabBar3=function(p,q){return (c('React').createElement(m,{key:p,ref:q},c('SlideshowFbtUtils').getTabNameFbtString(p)));};this.state={showFramesTabNux:!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').SLIDESHOW_FRAMES_TAB_NUX),showMusicTabNux:!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').SLIDESHOW_MUSIC_TAB_NUX)};}n.prototype.renderLayers=function(){'use strict';var o=this.props.tabKeys.indexOf(k.FRAMES_TAB)!==-1,p=this.props.tabKeys.indexOf(k.MUSIC_TAB)!==-1,q=null,r=null;if(o){c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').SLIDESHOW_FRAMES_TAB_NUX);q=c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'left',behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},contextRef:function(){return this.refs.framesTab;}.bind(this),offsetX:14,position:'below',shown:this.state.showFramesTabNux,width:'normal',onCloseButtonClick:function(){this.setState({showFramesTabNux:false});}.bind(this)},c('SlideshowFbtUtils').getFramesTabNuxFbtString());}if(p){c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').SLIDESHOW_MUSIC_TAB_NUX);r=c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'left',behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},contextRef:function(){return this.refs.musicTab;}.bind(this),offsetX:14,position:'below',shown:this.state.showMusicTabNux,width:'normal',onCloseButtonClick:function(){this.setState({showMusicTabNux:false});}.bind(this)},c('SlideshowFbtUtils').getMusicTabNuxFbtString());}return c('ReactFragment').create({framesTabNUX:q,musicTabNUX:r});};n.prototype.render=function(){'use strict';return c('React').createElement(c('XUICardSection.react'),{className:"_5vx1"},c('React').createElement(c('XUIPageNavigation.react'),{activeTabKey:this.props.selected,defaultActiveTabKey:this.props.tabKeys[0],onTabClick:this.$SlideshowTabBar1},this.$SlideshowTabBar2()),this.renderLayers());};n.prototype.$SlideshowTabBar2=function(){'use strict';return (c('React').createElement(l,null,this.props.tabKeys.map(function(o){switch(o){case k.FRAMES_TAB:return this.$SlideshowTabBar3(k.FRAMES_TAB,'framesTab');case k.MUSIC_TAB:return this.$SlideshowTabBar3(k.MUSIC_TAB,'musicTab');default:return this.$SlideshowTabBar3(o);}}.bind(this))));};f.exports=n;}),null);
__d('SlideshowTopLeftPanelFrame.react',['cx','React','SlideshowTabBar.react','SlideshowFlowTypes','emptyFunction'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('SlideshowFlowTypes').SlideshowTabKey;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.$SlideshowTopLeftPanelFrame1=function(){var m=[k.SETTINGS_TAB,k.MUSIC_TAB];if(this.props.showFramesTab)m.push(k.FRAMES_TAB);return m;};l.prototype.render=function(){var m=this.$SlideshowTopLeftPanelFrame1();return (c('React').createElement('div',{className:"_3mt1"},c('React').createElement(c('SlideshowTabBar.react'),{selected:this.props.selectedTab,tabKeys:m,onSelect:this.props.onTabSelect}),c('React').createElement('div',{className:"_3mt2"},c('React').createElement('div',{className:"_3mtc"+(this.props.selectedTab===m[0]?' '+"_3mtd":'')+(this.props.selectedTab===m[1]?' '+"_3mte":'')+(this.props.selectedTab===m[2]?' '+"_1ovn":'')},c('React').Children.map(this.props.children,function(n){return (c('React').createElement('div',{className:"_3mtf"},n));})))));};function l(){i.apply(this,arguments);}l.defaultProps={selectedTab:k.SETTINGS_TAB,onTabSelect:c('emptyFunction')};f.exports=l;}),null);
__d('SlideshowDialog.react',['cx','fbt','LayerFadeOnHide','LeftRight.react','Link.react','React','SlideshowConstants','SlideshowFramesPanel.react','SlideshowImageUploadsContainer.react','SlideshowMusicPanel.react','SlideshowPhotoEditDialogContainer.react','SlideshowPreview.react','SlideshowPreviewConstants','SlideshowSettingsPanel.react','SlideshowTopLeftPanelFrame.react','XUIDialog.react','XUIDialogButton.react','XUIDialogBody.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=900;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.$SlideshowDialog1=function(){if(this.props.selectedImages.length>=c('SlideshowConstants').min_photo_num)return null;return i._({"*":"You'll need to add at least {Minimum number of images} images to create a slideshow"},[i.param('Minimum number of images',c('SlideshowConstants').min_photo_num,[0])]);};m.prototype.$SlideshowDialog2=function(){return (c('React').createElement(c('SlideshowSettingsPanel.react'),{durationWithTransitionInMS:this.props.durationWithTransitionInMS,format:this.props.format,selectedStorylineMood:this.props.selectedStorylineMood,storylineMoodFiles:this.props.storylineMoodFiles,transitionInMS:this.props.transitionInMS,onChangeDuration:this.props.onChangeDuration,onChangeFormat:this.props.onChangeFormat,onChangeStorylineMood:this.props.onChangeStorylineMood,onChangeTransition:this.props.onChangeTransition,onPreviewStateChange:this.props.onPreviewStateChange,warningMessage:this.props.warningMessage}));};m.prototype.$SlideshowDialog3=function(){return (c('React').createElement(c('SlideshowMusicPanel.react'),{audioFileUploadInfo:this.props.audioFileUploadInfo,isPreviewPlaying:this.props.isPreviewPlaying,recentlyUsedStorylineMoods:this.props.recentlyUsedStorylineMoods,selectedMusicCategory:this.props.selectedMusicCategory,selectedStorylineMood:this.props.selectedStorylineMood,storylineMoodFiles:this.props.storylineMoodFiles,targetID:this.props.targetID,onAudioFileUpload:this.props.onAudioFileUpload,onAudioFileUploadError:this.props.onAudioFileUploadError,onAudioFileUploadSuccess:this.props.onAudioFileUploadSuccess,onChangeStorylineMood:this.props.onChangeStorylineMood,onDeleteStorylineMood:this.props.onDeleteStorylineMood,onMusicCategorySelect:this.props.onMusicCategorySelect,onPreviewStateChange:this.props.onPreviewStateChange}));};m.prototype.$SlideshowDialog4=function(){return (c('React').createElement(c('SlideshowFramesPanel.react'),{frameImages:this.props.frameImages,onFrameImageSelected:this.props.onFrameImageSelected}));};m.prototype.$SlideshowDialog5=function(){var n=this.props.frameImages&&this.props.frameImages.length>0;if(n){return (c('React').createElement(c('SlideshowTopLeftPanelFrame.react'),{selectedTab:this.props.selectedTab,showFramesTab:true,onTabSelect:this.props.onTabSelect},this.$SlideshowDialog2(),this.$SlideshowDialog3(),this.$SlideshowDialog4()));}else return (c('React').createElement(c('SlideshowTopLeftPanelFrame.react'),{selectedTab:this.props.selectedTab,showFramesTab:false,onTabSelect:this.props.onTabSelect},this.$SlideshowDialog2(),this.$SlideshowDialog3()));};m.prototype.render=function(){return (c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},layerHideOnBlur:false,shown:this.props.dialogShown,width:l},c('React').createElement(c('XUIDialogBody.react'),{className:"_5z0a",useCustomPadding:true},this.$SlideshowDialog5(),c('React').createElement('div',{className:"_2ldm"},c('React').createElement(c('SlideshowPreview.react'),{durationWithTransitionInMS:this.props.durationWithTransitionInMS,hidden:!this.props.showPreview,imagesAllLoaded:this.props.imagesAllLoaded,imagesCrops:this.props.imagesCrops,imagesTextoverlays:this.props.imagesTextoverlays,isPreviewPlaying:this.props.isPreviewPlaying,maxSelectedImages:this.props.maxSelectedImages,previewBoxContainerSize:c('SlideshowPreviewConstants').WWW_PREVIEW_CONTAINER_SIZE,previewBoxSize:c('SlideshowPreviewConstants').WWW_PLAYER_SIZE,selectedImages:this.props.selectedImages,showSlideshowImageCroppingEditOption:this.props.showSlideshowImageCroppingEditOption,storylineMoodIDSource:this.props.selectedStorylineMood?this.props.selectedStorylineMood.source:null,transitionInMS:this.props.transitionInMS,onPreviewStateChange:this.props.onPreviewStateChange}),this.props.children[2],this.props.children[1]),c('React').createElement(c('SlideshowImageUploadsContainer.react'),{durationWithTransitionInMS:this.props.durationWithTransitionInMS,imagesCrops:this.props.imagesCrops,imagesTextoverlays:this.props.imagesTextoverlays,maxSelectedImages:this.props.maxSelectedImages,selectedImages:this.props.selectedImages,showSlideshowImageCroppingEditOption:this.props.showSlideshowImageCroppingEditOption,showSlideshowPhotoEditButton:this.props.showSlideshowPhotoEditButton,onImageRemove:this.props.onImageRemove,onImageReorder:this.props.onImageReorder},this.props.children[0])),c('React').createElement(c('LeftRight.react'),{className:"_5z0b"},c('React').createElement('div',null,c('React').createElement(c('Link.react'),{href:'/business/learn/facebook-create-ad-slideshow-ads',target:'_blank'},i._("Guidelines")),c('React').createElement('span',{className:"_5z0c"},c('React').createElement(c('Link.react'),{href:'/help/503502689826117',target:'_blank'},i._("Help Center"))),c('React').createElement(c('Link.react'),{href:'/business/help/search/?query=slideshow',target:'_blank'},i._("FAQ"))),c('React').createElement('div',null,c('React').createElement(c('XUIDialogButton.react'),{label:i._("Cancel"),onClick:this.props.onCloseDialog}),c('React').createElement(c('XUIDialogButton.react'),{'data-hover':'tooltip','data-tooltip-content':this.$SlideshowDialog1(),'data-tooltip-position':'above',disabled:this.props.selectedImages.length<c('SlideshowConstants').min_photo_num,label:i._("Create Slideshow"),use:'confirm',onClick:this.props.onCreateSlideshow}))),c('React').createElement(c('SlideshowPhotoEditDialogContainer.react'),{format:this.props.format,photosCrops:this.props.imagesCrops,showSlideshowImageCroppingEditOption:this.props.showSlideshowImageCroppingEditOption,onSaveImageCrops:this.props.onSaveImageCrops,onSaveTextoverlay:this.props.onSaveTextoverlay})));};function m(){j.apply(this,arguments);}m.defaultProps={adgroupIDs:[]};f.exports=m;}),null);
__d('ReactComposerSlideshowDialogContainer.react',['ReactComposerMediaUploadStore','ReactComposerMediaUploadActions','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerSelectedImagesStore','ReactComposerSlideshowActions','ReactComposerSlideshowAudioStore','ReactComposerSlideshowStore','React','ReactComposerSlideshowImageUploadsContainer.react','SlideshowDialog.react','SlideshowMediaUploadContainer.react'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerSlideshowDialogContainer',mixins:[c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerSelectedImagesStore'),c('ReactComposerSlideshowAudioStore'),c('ReactComposerSlideshowStore'))],propTypes:{dialogShown:h.bool,maxSelectedImages:h.number,mediaAcceptParam:h.string.isRequired,pageID:h.string.isRequired,showSlideshowPhotoEditButton:h.bool,onCloseDialog:h.func,onFilesSelected:h.func.isRequired},statics:{calculateState:function j(k,l){var m=!c('ReactComposerMediaUploadStore').isUploading(k);return {audioFileUploadInfo:c('ReactComposerSlideshowAudioStore').getAudioFileUploadInfo(k),durationWithTransitionInMS:c('ReactComposerSlideshowStore').getDurationInMS(k),format:c('ReactComposerSelectedImagesStore').getFormat(k),imagesAllLoaded:m,imagesCrops:c('ReactComposerSelectedImagesStore').getImagesCrops(k),isPreviewPlaying:c('ReactComposerSlideshowAudioStore').getIsPreviewPlaying(k),recentlyUsedStorylineMoods:c('ReactComposerSlideshowAudioStore').getRecentlyUsedStorylineMoods(k),selectedImages:c('ReactComposerSelectedImagesStore').getSelectedImages(k),selectedMusicCategory:c('ReactComposerSlideshowAudioStore').getSelectedMusicCategory(k),selectedStorylineMood:c('ReactComposerSlideshowAudioStore').getSelectedStorylineMood(k),selectedTab:c('ReactComposerSlideshowStore').getSelectedTab(k),storylineMoodFiles:c('ReactComposerSlideshowAudioStore').getStorylineMoodFiles(k),transitionInMS:c('ReactComposerSlideshowStore').getTransitionInMS(k)};}},_onChangeDuration:function j(event){c('ReactComposerSlideshowActions').changeDuration(this.context.composerID,event.value);},_onChangeFormat:function j(event){c('ReactComposerSlideshowActions').changeFormat(this.context.composerID,event.value);},_onChangeTransition:function j(k){c('ReactComposerSlideshowActions').changeTransition(this.context.composerID,k);},_onChangeStorylineMood:function j(k){c('ReactComposerSlideshowActions').changeStorylineMoodFile(this.context.composerID,k);},_onDeleteStorylineMood:function j(k){c('ReactComposerSlideshowActions').deleteStorylineMoodFile(this.context.composerID,k);},_onCreateSlideshow:function j(){var k=this.context.composerID;if(c('ReactComposerSlideshowStore').isEditing(k)){var l=c('ReactComposerSelectedImagesStore').getRemovedUploadIDs(k);l.forEach(function(m){if(c('ReactComposerMediaUploadStore').getMediaUploadExists(k,m)){var n=c('ReactComposerMediaUploadStore').getMediaUpload(k,m);c('ReactComposerMediaUploadActions').removePhotoAndPhotoUpload(k,n);}});}c('ReactComposerSlideshowActions').createSlideshow(this.context.composerID);},_onImageRemove:function j(k){var l=this.context.composerID;c('ReactComposerSlideshowActions').removeImage(l,k);if(!c('ReactComposerSlideshowStore').isEditing(l)&&c('ReactComposerMediaUploadStore').getMediaUploadExists(l,k.key)){var m=c('ReactComposerMediaUploadStore').getMediaUpload(l,k.key);c('ReactComposerMediaUploadActions').removePhotoAndPhotoUpload(l,m);}},_onImageReorder:function j(k,l){c('ReactComposerSlideshowActions').reorderImages(this.context.composerID,k,l);},_onTabSelect:function j(k){c('ReactComposerSlideshowActions').selectTab(this.context.composerID,k);},_getImageUploadContainer:function j(k){return (c('React').createElement(c('ReactComposerSlideshowImageUploadsContainer.react'),{composerID:this.context.composerID,imageUploadButtonType:k,mediaAcceptParam:this.props.mediaAcceptParam,pageID:this.props.pageID,pageImages:this.state.pageImages,onFilesSelected:this.props.onFilesSelected}));},_onMusicCategorySelect:function j(k){c('ReactComposerSlideshowActions').musicCategorySelect(this.context.composerID,k);},_onPreviewStateChange:function j(k){c('ReactComposerSlideshowActions').previewStateChange(this.context.composerID,k);},_onAudioFileUploadStarted:function j(){c('ReactComposerSlideshowActions').audioFileUploadStarted(this.context.composerID);},_onAudioFileUploadError:function j(){c('ReactComposerSlideshowActions').audioFileUploadError(this.context.composerID);},_onAudioFileUploadSuccess:function j(k){c('ReactComposerSlideshowActions').audioFileUploadSuccess(this.context.composerID,k);},render:function j(){return (c('React').createElement(c('SlideshowDialog.react'),{audioFileUploadInfo:this.state.audioFileUploadInfo,dialogShown:this.props.dialogShown,durationWithTransitionInMS:this.state.durationWithTransitionInMS,format:this.state.format,imagesAllLoaded:this.state.imagesAllLoaded,imagesCrops:this.state.imagesCrops,isPreviewPlaying:this.state.isPreviewPlaying,maxSelectedImages:this.props.maxSelectedImages,recentlyUsedStorylineMoods:this.state.recentlyUsedStorylineMoods,selectedImages:this.state.selectedImages,selectedMusicCategory:this.state.selectedMusicCategory,selectedStorylineMood:this.state.selectedStorylineMood,selectedTab:this.state.selectedTab,showPreview:true,showSlideshowPhotoEditButton:false,showSlideshowImageCroppingEditOption:false,storylineMoodFiles:this.state.storylineMoodFiles,targetID:this.props.pageID,transitionInMS:this.state.transitionInMS,onAudioFileUpload:this._onAudioFileUploadStarted,onAudioFileUploadError:this._onAudioFileUploadError,onAudioFileUploadSuccess:this._onAudioFileUploadSuccess,onChangeDuration:this._onChangeDuration,onChangeFormat:this._onChangeFormat,onChangeTransition:this._onChangeTransition,onChangeStorylineMood:this._onChangeStorylineMood,onCloseDialog:this.props.onCloseDialog,onCreateSlideshow:this._onCreateSlideshow,onDeleteStorylineMood:this._onDeleteStorylineMood,onImageRemove:this._onImageRemove,onImageReorder:this._onImageReorder,onMusicCategorySelect:this._onMusicCategorySelect,onPreviewStateChange:this._onPreviewStateChange,onTabSelect:this._onTabSelect},this._getImageUploadContainer('more_link'),c('React').createElement(c('SlideshowMediaUploadContainer.react'),{hidden:true},this._getImageUploadContainer('add_button'))));}});f.exports=i;}),null);
__d('ReactComposerSlideshowPostButton.react',['ReactComposerSlideshowDialogContainer.react','React','ReactFragment'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.renderLayers=function(){var p=null;if(this.props.dialogShown)p=c('React').createElement(c('ReactComposerSlideshowDialogContainer.react'),babelHelpers['extends']({},this.props,{onCloseDialog:this.props.onCancel}));return c('ReactFragment').create({dialog:p});}.bind(this),l;}j.prototype.render=function(){return c('React').createElement('div',{className:this.props.className,onClick:this.props.onShowDialog,role:'presentation'},this.props.children,this.renderLayers());};f.exports=j;}),null);
__d('ReactComposerSlideshowPostButtonContainer.react',['ReactComposerMediaUploadActions','ReactComposerMediaUploadStore','ReactComposerMediaUploadType','ReactComposerPropsAndStoreBasedStateMixin','React','ReactComposerSlideshowActions','ReactComposerSlideshowLoggingStore','ReactComposerSlideshowPostButton.react','ReactComposerSlideshowStore','SlideshowDataManager','SlideshowEntrypoint','immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerSlideshowPostButtonContainer',mixins:[c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerSlideshowStore'))],propTypes:{className:h.string,maxSelectedImages:h.number.isRequired,mediaAcceptParam:h.string.isRequired,pageID:h.string.isRequired,onFilesSelected:h.func.isRequired},statics:{calculateState:function j(k,l){var m=c('ReactComposerSlideshowStore').shouldShowSlideshowDialog(k);return {dialogShown:m};}},componentDidMount:function j(){var k=this.context.composerID;c('SlideshowDataManager').fetchStorylineMoodFiles(function(l){c('ReactComposerSlideshowActions').setStorylineMoodFiles(k,l);},this.props.pageID);c('ReactComposerSlideshowLoggingStore').activate();},render:function j(){return (c('React').createElement(c('ReactComposerSlideshowPostButton.react'),{className:this.props.className,dialogShown:this.state.dialogShown,maxSelectedImages:this.props.maxSelectedImages,mediaAcceptParam:this.props.mediaAcceptParam,pageID:this.props.pageID,onCancel:this._onCancel,onFilesSelected:this.props.onFilesSelected,onShowDialog:this._onShowDialog},this.props.children));},_onShowDialog:function j(){c('ReactComposerSlideshowActions').showSlideshowDialog(this.context.composerID,c('SlideshowEntrypoint').COMPOSER_PHOTO_VIDEO_TAB);},_onCancel:function j(){c('ReactComposerMediaUploadActions').removeAllPhotoUploads(this.context.composerID,c('ReactComposerMediaUploadStore').getUploadsOfType(this.context.composerID,c('ReactComposerMediaUploadType').PHOTO));c('ReactComposerSlideshowActions').closeSlideshowDialog(this.context.composerID);}});f.exports=i;}),null);
__d("XCarouselPageComposerPhotoUploadFirstController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/composer\/photouploadfirst\/",{composer_id:{type:"String"},target_id:{type:"Int"}});}),null);
__d('ReactComposerMediaAttachmentButtonsWithOptions.react',['cx','fbt','ix','ActorURI','ReactComposerAttachmentStore','ReactComposerCanvasActions','ReactComposerContextMixin','ReactComposerLoggingActions','ReactComposerLoggingName','ReactComposerMediaUtils','ReactComposerPhotoCarouselActions','ComposerTargetData','PagesComposerPostActionsLoggerEvent','PagesComposerActionsLogger','ReactComposerSlideshowPostButtonContainer.react','XCarouselPageComposerPhotoUploadFirstController','AsyncRequest','DOMContainer.react','FileInput.react','Grid.react','Image.react','Link.react','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('Grid.react').GridItem,l=c('React').PropTypes,m=c('React').createClass({displayName:'ReactComposerMediaAttachmentButtonsWithOptions',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{carouselConfig:l.object,createAlbumLink:l.any,mediaAcceptParam:l.shape({photos:l.string,both:l.string}).isRequired,onFilesSelected:l.func.isRequired,showCanvasEntryPoint:l.bool,showCarouselEntryPoint:l.bool,showPhotoAlbumEntryPoint:l.bool,showSlideshowEntryPoint:l.bool,showUploadPhotosButton:l.bool,slideshowConfig:l.object,targetData:l.instanceOf(c('ComposerTargetData')).isRequired},getDefaultProps:function o(){return {mediaAcceptParam:{}};},componentDidMount:function o(){if(c('ReactComposerAttachmentStore').getSelectedAttachmentID(this.context.composerID))c('PagesComposerActionsLogger').log({event:c('PagesComposerPostActionsLoggerEvent').SHOW_PHOTO_CAROUSEL_CREATE_TAB,target_id:parseInt(this.context.targetID,10)});},render:function o(){var p=[];p.push(this._getUploadPhotosButton());var q=null,r=null;if(this.props.showPhotoAlbumEntryPoint&&this.props.createAlbumLink){var s=c('React').createElement(c('DOMContainer.react'),{className:"_3m1x",display:'block'},this.props.createAlbumLink);q=c('React').createElement(k,{className:"_3m1y",key:'createAlbum'},c('React').createElement(c('Link.react'),{className:"_3m1z _5xvh",onClick:this._onClickPhotoAlbumOption},s));}if(this.props.showCarouselEntryPoint)r=this._getCarouselPostButton();p.push(q);p.push(r);if(this.props.showSlideshowEntryPoint)p.push(this._getSlideshowPostButton());if(this.props.showCanvasEntryPoint)p.push(this._getCanvasPostButton());return (c('React').createElement('div',{className:"_3m1_"},c('React').createElement(c('Grid.react'),{className:"_3m20",cols:1},p.filter(function(t){return t!=null;}))));},_getUploadPhotosButton:function o(){if(!this.props.showUploadPhotosButton)return null;var p=this.props.targetData.targetSupportsMultiplePhotos,q=this.props.mediaAcceptParam.both,r=p?i._("Upload Photos\/Video"):i._("Upload Photo\/Video"),s=i._("Add photos or video to your status.");return (c('React').createElement(k,{className:"_3m1y",key:'uploadPhoto'},c('React').createElement(c('FileInput.react'),{accept:q,multiple:p,name:'composer_photo',onChange:this._onFilesSelected,onClick:this._onUploadPhotosClick,ref:'fileInput','data-testid':'media-attachment-add-photo'},c('React').createElement(c('Link.react'),{className:"_3m1z"},this._renderPhotoPostOption(n.PHOTOVIDEO,r,s)))));},_onUploadPhotosClick:function o(){c('ReactComposerLoggingActions').mediaUploadInputClicked(this.context.composerID,c('ReactComposerLoggingName').MEDIA_ATTACHMENT_UPLOAD_BUTTON);c('PagesComposerActionsLogger').log({event:c('PagesComposerPostActionsLoggerEvent').CLICK_UPLOAD_PHOTO_OPTION,target_id:parseInt(this.context.targetID,10)});},_onClickPhotoAlbumOption:function o(){c('PagesComposerActionsLogger').log({event:c('PagesComposerPostActionsLoggerEvent').CLICK_PHOTO_ALBUM_OPTION,target_id:parseInt(this.context.targetID,10)});},_onFilesSelected:function o(event){this.props.onFilesSelected(event,this.refs.fileInput.getFileInput());c('ReactComposerMediaUtils').clearInput(this.refs.fileInput.getFileInput());},_getCarouselPostButton:function o(){if(!this.props.showUploadPhotosButton)return null;var p=i._("Create a Photo Carousel");if(this.props.carouselConfig&&this.props.carouselConfig.supportVideoCarousel)p=i._("Create a Photo\/Video Carousel");var q=i._("Build a scrolling photo carousel with a link.");return (c('React').createElement(k,{className:"_3m1y",key:'carousel'},c('React').createElement(c('Link.react'),{onClick:this._onCarouselClick,className:"_3m1z _5xvh"},this._renderPhotoPostOption(n.CAROUSEL,p,q))));},_onCarouselClick:function o(){c('ReactComposerPhotoCarouselActions').selectPhotoCarouselEntryPoint(this.context.composerID);if(!this.props.carouselConfig||!this.props.carouselConfig.ComposerPhotoCarouselUploadFirst){c('ReactComposerPhotoCarouselActions').showPhotoCarouselUrlEditArea(this.context.composerID);}else{var p=c('XCarouselPageComposerPhotoUploadFirstController').getURIBuilder().setString('composer_id',this.context.composerID).setInt('target_id',parseInt(this.context.targetID,10)).getURI();p=c('ActorURI').create(p,this.context.targetID);var q=new (c('AsyncRequest'))().setURI(p);q.send();c('ReactComposerPhotoCarouselActions').setPreviewIncompleted(this.context.composerID);}var r={event:c('PagesComposerPostActionsLoggerEvent').CLICK_PHOTO_CAROUSEL_CREATE_TAB,target_id:parseInt(this.context.targetID,10)};c('PagesComposerActionsLogger').log(r);},_getSlideshowPostButton:function o(){var p=this.props.slideshowConfig;if(!p)return null;var q=i._("Create Slideshow"),r=i._({"*":{"*":"Add {Minimum number of images} to {Maximum number of images} photos to create a video."}},[i.param('Minimum number of images',p?p.minPhotoNum:3,[0]),i.param('Maximum number of images',p?p.maxPhotoNum:7,[0])]),s=c('React').createElement(c('Link.react'),{className:"_3m1z _5xvh"},this._renderPhotoPostOption(n.SLIDESHOW,q,r));return (c('React').createElement(k,{className:"_3m1y",key:'slideshow'},c('React').createElement(c('ReactComposerSlideshowPostButtonContainer.react'),{className:"_3-8-",maxSelectedImages:p.maxPhotoNum,mediaAcceptParam:this.props.mediaAcceptParam.photos,pageID:p.pageID,onFilesSelected:this._onSlideshowFilesUpload},s)));},_onSlideshowFilesUpload:function o(event,p){this.props.onFilesSelected(event,p);c('ReactComposerMediaUtils').clearInput(p);},_getCanvasPostButton:function o(){var p=i._("Create a Canvas"),q=i._("Now you can tell a more immersive story by combining images and videos.");return (c('React').createElement(k,{className:"_3m1y",key:'canvas'},c('React').createElement(c('Link.react'),{onClick:this._onCanvasClick,className:"_3m1z _5xvh"},this._renderPhotoPostOption(n.CANVAS,p,q))));},_onCanvasClick:function o(){c('ReactComposerCanvasActions').showCanvasSelector(this.context.composerID);var p={event:c('PagesComposerPostActionsLoggerEvent').CLICK_CANVAS_CREATE_TAB,target_id:parseInt(this.context.targetID,10)};c('PagesComposerActionsLogger').log(p);},_renderPhotoPostOption:function o(p,q,r){var s=null;if(p===n.CAROUSEL&&this.props.carouselConfig&&this.props.carouselConfig.showCarouselOptionSuperscript){var t=i._("NEW");s=c('React').createElement('sup',{className:"_9td"},t);}return (c('React').createElement(c('Grid.react'),{className:"_3m1-",cols:2},c('React').createElement(k,{className:"_5xvi"},c('React').createElement(c('Image.react'),{className:"_5xvj",src:this._getIconSource(p)})),c('React').createElement(k,{className:"_5xvk"},c('React').createElement('div',{className:"_5xvl"},q,s),c('React').createElement('div',{className:"_5xvm"},r))));},_getIconSource:function o(p){switch(p){case n.PHOTOVIDEO:return j("images\/composer\/carousel\/photo_video_upload.png");case n.PHOTOALBUM:return j("images\/composer\/carousel\/photo_album_icon.png");case n.CAROUSEL:return j("images\/composer\/carousel\/carousel_photo_tab_icon.png");case n.SLIDESHOW:return j("images\/composer\/carousel\/slideshow_video_icon.png");case n.CANVAS:return j("images\/composer\/carousel\/pages_canvas_icon.png");default:return null;}}}),n={PHOTOVIDEO:'photo_video',PHOTOALBUM:'photo_album',CAROUSEL:'carousel',SLIDESHOW:'slideshow',CANVAS:'canvas'};f.exports=m;}),null);
__d('ReactComposerCanvasTypeaheadContainer.react',['cx','fbt','AdsCanvasCapabilities','AdsCanvasCapabilityConfig','AdsCanvasComposerDialogStore','AdsCanvasEditorFunnelLogging','AdsCanvasSearchSource','AdsCanvasTypeahead.react','CanvasCreationEvent','CanvasCreationWaterfallTypedLogger','CanvasSource','ReactComposerCanvasActions','ReactComposerContextMixin','ReactComposerLoggingName','ReactComposerScrapedAttachmentActions','React','RichMediaEditorActions','RichMediaLoggingStoreUtils','SearchableEntry','StoreAndPropBasedStateMixin','XUICloseButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerCanvasTypeaheadContainer',mixins:[c('ReactComposerContextMixin'),c('StoreAndPropBasedStateMixin')(c('AdsCanvasComposerDialogStore'))],propTypes:{config:j.shape({accessToken:j.string.isRequired,businessID:j.string,canAddProductSet:j.bool.isRequired,canUseCanvasEditorTemplateV0:j.bool.isRequired,canUseCanvasEditorTemplateV1:j.bool.isRequired,canUseLinkedCanvas:j.bool.isRequired,pageGKsToLog:j.array.isRequired}).isRequired},statics:{calculateState:function l(m){return {selectedCanvas:c('AdsCanvasComposerDialogStore').getSelectedCanvas(),unpublishedCanvas:c('AdsCanvasComposerDialogStore').getUnpublishedCanvas()};}},render:function l(){var m,n=new (c('AdsCanvasSearchSource'))({pageID:this.context.targetID,accessToken:this.props.config.accessToken,onlyPublished:true});n.bootstrap();var o=this.state.unpublishedCanvas||this.state.selectedCanvas,p=o?o.id:null,q=this.state.selectedCanvas?new (c('SearchableEntry'))({subtile:'',title:this.state.selectedCanvas.name,uniqueID:0}):null,r=i._("Select a Canvas"),s=i._("Close"),t=new (c('AdsCanvasCapabilityConfig'))((m={},m[c('AdsCanvasCapabilities').CAN_ADD_PRODUCT_SET]=this.props.config.canAddProductSet,m[c('AdsCanvasCapabilities').CAN_ADD_STORE_LOCATOR]=false,m[c('AdsCanvasCapabilities').CAN_SAVE_INCOMPLETE_ELEMENTS]=this.props.config.canvasCanSaveIncompleteElements,m[c('AdsCanvasCapabilities').CAN_USE_CANVAS_EDITOR_TEMPLATEV0]=this.props.config.canUseCanvasEditorTemplateV0,m[c('AdsCanvasCapabilities').CAN_USE_CANVAS_EDITOR_TEMPLATEV1]=this.props.config.canUseCanvasEditorTemplateV1,m[c('AdsCanvasCapabilities').CAN_USE_LINKED_CANVAS]=this.props.config.canUseLinkedCanvas,m)),u={accessToken:this.props.config.accessToken,businessID:this.props.config.businessID,canvasCapbilityConfig:t,disabled:false,error:null,extraGKsToLog:this.props.config.pageGKsToLog,focusedOnInit:false,mustPublish:true,pageID:this.context.targetID,placeholder:r,searchSource:n,onCloseReset:this._onCloseReset,onDuplicateReload:this._onDuplicateReload,onEntrySelect:this._onEntrySelect,onSaveCanvasSuccess:this._onSaveCanvasSuccess};return (c('React').createElement('div',{className:"_3uyo"},c('React').createElement(c('XUICloseButton.react'),{className:"_3uyp",label:s,onClick:this._onClickCloseButton,size:'medium'}),c('React').createElement(c('AdsCanvasTypeahead.react'),babelHelpers['extends']({canvasID:p,selectedEntry:q,source:c('CanvasSource').PAGE_COMPOSER},u))));},_onClickCloseButton:function l(){c('ReactComposerCanvasActions').hideCanvasSelector(this.context.composerID);},_onCloseReset:function l(){c('RichMediaEditorActions').resetUnpublishedCanvas();},_onDuplicateReload:function l(m,n){c('RichMediaEditorActions').setDialogShown(m,false);c('RichMediaEditorActions').setDialogCanvas(n.id,n);c('RichMediaEditorActions').setDialogShown(n.id,true);c('RichMediaEditorActions').setUnpublishedCanvas(n);},_onEntrySelect:function l(m,n){var o=m.getUniqueID(),p=m.getAuxiliaryData();c('RichMediaEditorActions').setDialogCanvas(o,p);c('RichMediaEditorActions').setSelectedCanvas(p);this._scrapeURL(p.canvas_link);},_onSaveCanvasSuccess:function l(m,n,o,p,q){if(p){c('RichMediaEditorActions').resetUnpublishedCanvas();c('AdsCanvasEditorFunnelLogging').endFunnel();c('RichMediaLoggingStoreUtils').logRichMediaCreationEventWithLogger(new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').EDITOR_EXIT));c('RichMediaEditorActions').setDialogShown(o.id,false);c('RichMediaEditorActions').setSelectedCanvas(o);if(o.canvas_link)this._scrapeURL(o.canvas_link);}else{c('RichMediaEditorActions').setDialogCanvas(o.id,o);c('RichMediaEditorActions').setUnpublishedCanvas(o);}},_scrapeURL:function l(m){c('ReactComposerScrapedAttachmentActions').scrapeAttachment(this.context.composerID,this.context.targetID,m,this.context.composerType,this.context.actorID,c('ReactComposerLoggingName').CANVAS_EDITOR);}});f.exports=k;}),null);
__d("XCarouselPageComposerSeenNuxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/composer\/carouselseennux\/",{type:{type:"String"}});}),null);
__d('ReactComposerPhotoCarouselUrlInput.react',['cx','fbt','ix','AsyncRequest','ReactComposerContextMixin','ReactComposerPhotoCarouselActions','ReactComposerPhotoCarouselStore','CSS','Keys','Locale','PagesComposerPostActionsLoggerEvent','PagesComposerActionsLogger','PagesComposerCarouselPostNuxType','ReactComponentWithPureRenderMixin','React','Image.react','ReactDOM','URLMatcher','URLScraper','XCarouselPageComposerSeenNuxController','XUIAmbientNUX.react','XUICloseButton.react','XUITextInput.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('React').PropTypes,l=c('React').createClass({displayName:'ReactComposerPhotoCarouselUrlInput',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{onChange:k.func.isRequired,onClickRemoveButton:k.func.isRequired,prefillURL:k.string,showUrlInputAreaNux:k.bool},getInitialState:function m(){return {disableArrow:true,showUrlInputAreaNux:this.props.showUrlInputAreaNux&&!c('ReactComposerPhotoCarouselStore').seenNux(this.context.composerID)};},componentDidMount:function m(){var n=c('ReactDOM').findDOMNode(this.refs.inputArea);n.focus();c('CSS').addClass(n,"_47_s");var o=this.props.prefillURL?this.props.prefillURL:'',p=!this._checkValidUrl(o);this.setState({disableArrow:p});c('PagesComposerActionsLogger').log({event:c('PagesComposerPostActionsLoggerEvent').PREFILL_SCRAPE_URL,target_id:parseInt(this.context.targetID,10),prefill_scrape_url:this.props.prefillURL});},renderLayers:function m(){var n=i._("Photos are taken from a website you choose. Enter a website to build your photo carousel.");return (c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.inputArea;}.bind(this),shown:this.state.showUrlInputAreaNux,onCloseButtonClick:this._onCloseButtonClick,position:'below',key:'notice'},n));},_onCloseButtonClick:function m(){var n=c('XCarouselPageComposerSeenNuxController').getURIBuilder().setString('type',c('PagesComposerCarouselPostNuxType').MEDIA_ATTACHEMENT_URL_INPUT_AREA_NUX).getURI(),o=new (c('AsyncRequest'))().setURI(n);o.send();this.setState({showUrlInputAreaNux:false});c('ReactComposerPhotoCarouselActions').seenNux(this.context.composerID);},render:function m(){var n=i._("Photo Carousel"),o=i._("Remove"),p=i._("Destination URL"),q=null,r=null,s=null,t=c('Locale').isRTL();if(t){r=j("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/arrow-left_20_bluegray-10.png");s=j("images\/composer\/carousel\/arrow_left_blue.png");}else{r=j("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/arrow-right_20_bluegray-10.png");s=j("images\/composer\/carousel\/arrow_right_blue.png");}if(this.state.disableArrow){q=c('React').createElement(c('Image.react'),{className:"_3ev6",size:'small',src:r,onClick:this._handleScrapeLink});}else q=c('React').createElement(c('Image.react'),{className:"_3ev7",size:'small',src:s,onClick:this._handleScrapeLink});var u=i._("Enter a URL");return (c('React').createElement('div',{className:"_d67"},c('React').createElement('div',{className:"_d68"},c('React').createElement('div',{className:"_d69"},n),c('React').createElement(c('XUICloseButton.react'),{className:"_d6a",label:o,onClick:this.props.onClickRemoveButton,size:'medium'})),c('React').createElement('div',{className:"_d6b"},c('React').createElement('div',{className:"_px7"},c('React').createElement('span',{className:"_2do6"},p),c('React').createElement('div',{className:"_px8"},c('React').createElement(c('XUITextInput.react'),{className:"_d6c",defaultValue:this.props.prefillURL,onBlur:this._onBlur,onChange:this._onChange,onKeyUp:this._handleKeyUp,placeholder:u,ref:'inputArea'}))),q),this.renderLayers()));},_handleScrapeLink:function m(event){var n=c('ReactDOM').findDOMNode(this.refs.inputArea),o=n.childNodes[0].value+'\n';this.setState({inputValue:o});this.props.onChange&&this.props.onChange(o);},_onBlur:function m(event){c('CSS').removeClass(c('ReactDOM').findDOMNode(this.refs.inputArea),"_47_s");},_onChange:function m(event){this.setState({inputValue:event.target.value});this.props.onChange&&this.props.onChange(event.target.value);var n=!this._checkValidUrl(event.target.value);this.setState({disableArrow:n});c('CSS').removeClass(c('ReactDOM').findDOMNode(this.refs.inputArea),"_47_s");},_handleKeyUp:function m(event){if(event.keyCode===c('Keys').RETURN){var n=event.target.value+'\n';this.setState({inputValue:n});this.props.onChange&&this.props.onChange(n);}},_checkValidUrl:function m(n){return c('URLScraper').match(n)||c('URLMatcher').permissiveMatch(n);}});f.exports=l;}),null);
__d('ReactComposerPhotoCarouselUrlInputContainer.react',['ReactComposerContextMixin','ReactComposerLoggingName','ReactComposerPhotoCarouselActions','ReactComposerPhotoCarouselUrlInput.react','ReactComposerStatusUtils','PagesComposerPostActionsLoggerEvent','PagesComposerActionsLogger','ReactComponentWithPureRenderMixin','React','URLScraper'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerPhotoCarouselUrlInputContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{prefillURL:h.string,showUrlInputAreaNux:h.bool},render:function j(){return (c('React').createElement(c('ReactComposerPhotoCarouselUrlInput.react'),{onChange:this._onMentionsInputChange,onClickRemoveButton:this._onClickRemoveButton,prefillURL:this.props.prefillURL,showUrlInputAreaNux:this.props.showUrlInputAreaNux}));},_onClickRemoveButton:function j(){c('ReactComposerPhotoCarouselActions').hidePhotoCarouselUrlEditArea(this.context.composerID);c('PagesComposerActionsLogger').log({event:c('PagesComposerPostActionsLoggerEvent').REMOVE_PHOTO_CAROUSEL_URL_INPUT,target_id:parseInt(this.context.targetID,10)});},_onMentionsInputChange:function j(k){if(!c('URLScraper').trigger(k))c('ReactComposerStatusUtils').scrapeLink(this.context.composerID,this.context.targetID,k,this.context.composerType,this.context.actorID,c('ReactComposerLoggingName').INLINE_COMPOSER);}});f.exports=i;}),null);
__d('ReactComposerPhotoCarouselUtils',['fbt','ReactComposerPhotoCarouselStore','React'],(function a(b,c,d,e,f,g,h){var i={getPhotoCarouselMediaContent:function j(k,l){var m=null;if(!k)return m;if(k.ComposerPhotoCarouselPlaceHolder){var n=k.ComposerPhotoCarouselPlaceHolder;m=c('React').createElement(n,null);}else{var o=k.ComposerPhotoCarouselUrlInputContainer;m=c('React').createElement(o,{showUrlInputAreaNux:l.showUrlInputAreaNux,prefillURL:k.preFillURL});}return m;},getInputPlaceHolder:function j(k,l){var m=h._("Write something...");if(l||!k||!k.ComposerPhotoCarouselPlaceHolder)return m;return h._("Enter a URL");},isPagePostButtonDisabled:function j(k){if(!c('ReactComposerPhotoCarouselStore').isPhotoCarouselSelected(k))return false;if(c('ReactComposerPhotoCarouselStore').shouldShowURLEditArea(k))return true;if(!c('ReactComposerPhotoCarouselStore').isCarouselPreviewCompleted(k))return true;return false;}};f.exports=i;}),null);
__d('ReactComposerSlideshowThumbnailViewContainer.react',['cx','ReactComposerMediaUploadActions','ReactComposerMediaUploadStore','ReactComposerMediaUploadType','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerSelectedImagesStore','ReactComposerSlideshowActions','ReactComposerSlideshowAudioStore','ReactComposerSlideshowDialogContainer.react','ReactComposerSlideshowStore','React','ReactComponentWithPureRenderMixin','ReactFragment','SlideshowPreview.react','SlideshowPreviewConstants','SlideshowImageUtil'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'ReactComposerSlideshowThumbnailViewContainer',mixins:[c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerSlideshowAudioStore'),c('ReactComposerSlideshowStore'),c('ReactComposerSelectedImagesStore')),c('ReactComponentWithPureRenderMixin')],propTypes:{maxSelectedImages:i.number.isRequired,mediaAcceptParam:i.string.isRequired,pageID:i.string.isRequired,onFilesSelected:i.func.isRequired},statics:{calculateState:function k(l,m){return {dialogShown:c('ReactComposerSlideshowStore').shouldShowSlideshowDialog(l),durationWithTransitionInMS:c('ReactComposerSlideshowStore').getDurationInMS(l),imagesAllLoaded:!c('ReactComposerMediaUploadStore').isUploading(l),imagesCrops:c('ReactComposerSelectedImagesStore').getImagesCrops(l),isPreviewPlaying:c('ReactComposerSlideshowAudioStore').getIsPreviewPlaying(l),selectedImages:c('ReactComposerSelectedImagesStore').getSelectedImages(l),selectedStorylineMood:c('ReactComposerSlideshowAudioStore').getSelectedStorylineMood(l),transitionInMS:c('ReactComposerSlideshowStore').getTransitionInMS(l)};}},_renderPreview:function k(){var l=c('SlideshowPreviewConstants').WWW_PREVIEW_CONTAINER_SIZE_COMPOSER,m=c('SlideshowPreviewConstants').WWW_PLAYER_SIZE_COMPOSER,n=c('SlideshowImageUtil').getPreviewBoxDimensions(this.state.imagesCrops,m),o={marginBottom:(n.height-l)/2,marginLeft:c('SlideshowPreviewConstants').WWW_COMPOSER_LEFT_MARGIN,marginTop:(n.height-l)/2};return (c('React').createElement('div',{className:"_3-95",style:{overflow:'hidden'}},c('React').createElement(c('SlideshowPreview.react'),{durationWithTransitionInMS:this.state.durationWithTransitionInMS,hidden:false,imagesAllLoaded:this.state.imagesAllLoaded,imagesCrops:this.state.imagesCrops,isPreviewPlaying:this.state.isPreviewPlaying,maxSelectedImages:this.props.maxSelectedImages,previewBoxContainerSize:l,previewBoxSize:m,showSlideshowImageCroppingEditOption:false,selectedImages:this.state.selectedImages,storylineMoodIDSource:this.state.selectedStorylineMood?this.state.selectedStorylineMood.source:null,style:o,transitionInMS:this.state.transitionInMS,onClose:this._onXout,onEdit:this._onShowDialog,onPreviewStateChange:this._onPreviewStateChange})));},render:function k(){return (c('React').createElement('div',null,this._renderPreview(),this.renderLayers()));},renderLayers:function k(){var l=null;if(this.state.dialogShown)l=c('React').createElement(c('ReactComposerSlideshowDialogContainer.react'),{dialogShown:this.state.dialogShown,maxSelectedImages:this.props.maxSelectedImages,mediaAcceptParam:this.props.mediaAcceptParam,pageID:this.props.pageID,onCloseDialog:this._onCloseDialog,onFilesSelected:this.props.onFilesSelected});return c('ReactFragment').create({dialog:l});},_onShowDialog:function k(){c('ReactComposerSlideshowActions').showEditSlideshowDialog(this.context.composerID);},_onPreviewStateChange:function k(l){c('ReactComposerSlideshowActions').previewStateChange(this.context.composerID,l);},_onXout:function k(){var l=c('ReactComposerSelectedImagesStore').getNumberOfImages(this.context.composerID);c('ReactComposerMediaUploadActions').removeAllPhotoUploads(this.context.composerID,c('ReactComposerMediaUploadStore').getUploadsOfType(this.context.composerID,c('ReactComposerMediaUploadType').PHOTO));c('ReactComposerSlideshowActions').hideSlideshowEditField(this.context.composerID,l);},_onCloseDialog:function k(){var l=c('ReactComposerSelectedImagesStore').getAddedUploadIDs(this.context.composerID);l.forEach(function(m){var n=c('ReactComposerMediaUploadStore').getMediaUpload(this.context.composerID,m);c('ReactComposerMediaUploadActions').removePhotoAndPhotoUpload(this.context.composerID,n);}.bind(this));c('ReactComposerSlideshowActions').closeEditSlideshowDialog(this.context.composerID);}});f.exports=j;}),null);