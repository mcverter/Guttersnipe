<!DOCTYPE html>
<!-- saved from url=(0076)http://justinvoelkel.me/laravel-angularjs-part-two-login-and-authentication/ -->
<html lang="en-US" prefix="og: http://ogp.me/ns#"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>Laravel and AngularJS: Part Two – Login and Authentication -JustinVoelkel.me</title>
		<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="dcterms.audience" content="Global">

<!-- This site is optimized with the Yoast WordPress SEO plugin v1.6.3 - https://yoast.com/wordpress/plugins/seo/ -->
<meta name="description" content="In part two of my Laravel and Angular series learn how to create a login for our blog application and setup an API to allow Angular to communicate with Laravel">
<link rel="canonical" href="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me.html">
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Laravel and AngularJS: Part Two – Login and Authentication -">
<meta property="og:description" content="In part two of my Laravel and Angular series learn how to create a login for our blog application and setup an API to allow Angular to communicate with Laravel">
<meta property="og:url" content="http://justinvoelkel.me/laravel-angularjs-part-two-login-and-authentication/">
<meta property="og:site_name" content="JustinVoelkel.me">
<meta property="article:tag" content="AngularJS">
<meta property="article:tag" content="Laravel">
<meta property="article:tag" content="laravelandangular.com">
<meta property="article:section" content="AngularJS">
<meta property="article:section" content="Javascript">
<meta property="article:section" content="Laravel">
<meta property="article:section" content="PHP">
<meta property="article:published_time" content="2014-07-17T19:19:45+00:00">
<meta property="article:modified_time" content="2014-07-17T19:22:23+00:00">
<meta property="og:updated_time" content="2014-07-17T19:22:23+00:00">
<meta property="og:image" content="http://justinvoelkel.me/wp-content/uploads/2014/07/login-console-dir-e1405606318413-1200x605.png">
<meta property="og:image" content="http://justinvoelkel.me/wp-content/uploads/2014/07/login-console-after-e1405619803342-1200x608.png">
<meta property="og:image" content="http://justinvoelkel.me/wp-content/uploads/2014/07/session-auth-set-e1405621896316-1200x647.png">
<!-- / Yoast WordPress SEO plugin. -->

<link rel="alternate" type="application/rss+xml" title="JustinVoelkel.me » Feed" href="http://justinvoelkel.me/feed/">
<link rel="alternate" type="application/rss+xml" title="JustinVoelkel.me » Comments Feed" href="http://justinvoelkel.me/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="JustinVoelkel.me » Laravel and AngularJS: Part Two – Login and Authentication Comments Feed" href="http://justinvoelkel.me/laravel-angularjs-part-two-login-and-authentication/feed/">
<link rel="stylesheet" id="st-shortcodes-css-css" href="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/shortcodes.css" type="text/css" media="all">
<link rel="stylesheet" id="st-projects-css-css" href="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/ctp.css" type="text/css" media="all">
<link rel="stylesheet" id="st-prettyPhoto-css" href="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/prettyPhoto.css" type="text/css" media="screen">
<link rel="stylesheet" id="st-style-css" href="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/style.css" type="text/css" media="all">
<link rel="stylesheet" id="mediaelement-css" href="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/mediaelementplayer.min.css" type="text/css" media="all">
<link rel="stylesheet" id="st-responsive-css" href="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/responsive.css" type="text/css" media="all">
<link rel="stylesheet" id="st-dark-css" href="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/dark.css" type="text/css" media="screen">
<link rel="stylesheet" id="st-custom-css" href="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/recital_custom.css" type="text/css" media="screen">
<script async="" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/saved_resource"></script><script type="text/javascript" async="" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/ga.js"></script><script type="text/javascript" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/jquery.js"></script>
<script type="text/javascript" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/jquery-migrate.min.js"></script>
<script type="text/javascript" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/external-tracking.min.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://justinvoelkel.me/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://justinvoelkel.me/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress 4.0">
<link rel="shortlink" href="http://justinvoelkel.me/?p=374">
<link rel="Shortcut Icon" href="http://justinvoelkel.me/wp-content/themes/Recital/favicon.ico" type="image/x-icon">
<link rel="stylesheet" type="text/css" href="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/shCore.css"><link rel="stylesheet" type="text/css" href="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/shThemeDefault.css"><style type="text/css" id="syntaxhighlighteranchor"></style>
<!-- Google Analytics Tracking by Google Analyticator 6.4.8: http://www.videousermanuals.com/google-analyticator/ -->
<script type="text/javascript">
    var analyticsFileTypes = [''];
    var analyticsSnippet = 'enabled';
    var analyticsEventTracking = 'enabled';
</script>
<script type="text/javascript">
	var _gaq = _gaq || [];
  
	_gaq.push(['_setAccount', 'UA-45432821-1']);
    _gaq.push(['_addDevId', 'i9k95']); // Google Analyticator App ID with Google
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
	<script type="text/javascript" async="" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/embed.js"></script><style id="st-dynamic-css" type="text/css"></style></head>

	<body class="single single-post postid-374 single-format-standard dark chrome">
	
		<div id="layout">
		
			<div id="header">

				<div id="header-layout-2">

					<div id="header-holder-2">

						
						<div class="clear"><!-- --></div>

					</div><!-- #header-holder-2 -->

				</div><!-- #header-layout-2 -->

				<div id="header-layout">

					<div id="header-holder">

						<div id="logo" class="div-as-table">
							<div>
								<div>
									<h2><a href="http://justinvoelkel.me/"><img src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/logo-sm.png" data-hidpi="http://justinvoelkel.me/wp-content/uploads/2013/10/logo2-e1382492414974.png" alt="Recital"></a></h2>								</div>
							</div>
						</div><!-- #logo -->

						<div id="menu" class="div-as-table">
							<div>
								<div>
									<div id="menu-box" class="menu-menu-1-container"><nav><ul class="menu"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home"><a href="http://justinvoelkel.me/">Home</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href="http://justinvoelkel.me/category/general-web-development/">General Development</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent"><a href="http://justinvoelkel.me/category/php/">PHP</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href="http://justinvoelkel.me/category/css3/">CSS3</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href="http://justinvoelkel.me/category/problem-solved/">Problem Solved</a></li>
</ul></nav></div><div id="menu-select" class="menu-menu-1-container"><select id="selectElement"><option value="#">Select a page ↵</option><option value="http://justinvoelkel.me/">Home</option>
<option value="http://justinvoelkel.me/category/general-web-development/">General Development</option>
<option value="http://justinvoelkel.me/category/php/">PHP</option>
<option value="http://justinvoelkel.me/category/css3/">CSS3</option>
<option value="http://justinvoelkel.me/category/problem-solved/">Problem Solved</option>
</select></div>								</div>
							</div>
						</div><!-- #menu -->

						<div id="hcustom" class="div-as-table">
							<div>
								<div>
																	</div>
							</div>
						</div><!-- #hcustom -->

						<div class="clear"><!-- --></div>

					</div><!-- #header-holder -->

				</div><!-- #header-layout -->

			</div><!-- #header -->
			<div id="content">
			
				<div id="content-layout">

					<div id="content-holder" class="sidebar-position-none">
		
						<div id="content-box">
				
							<div>
				
								


												<div id="post-374" class="post-374 post type-post status-publish format-standard hentry category-angularjs category-javascript category-laravel category-php tag-angularjs tag-laravel tag-laravelandangular-com post-single">
	
													<div class="breadcrumb breadcrumbs"><div class="breadcrumb-trail"><a href="http://justinvoelkel.me/" title="JustinVoelkel.me" rel="home" class="trail-begin">Home</a> <span class="sep"> </span> <span class="trail-end">Laravel and AngularJS: Part Two – Login and Authentication</span></div></div>	
															<h1 class="post-title">Laravel and AngularJS: Part Two – Login and Authentication													
															</h1>	
														<article>

															<div class="st-format-standard-holder">

	
</div>
															<div id="article">

																<p>Well it’s been a while<em> again</em>; the past few months have been an absolute whirlwind of busy but I’ve finally mapped out time to continue with this series. OK – so, time to keep rollin’ on<a title="Laravel and AngularJS: Part One – Prep Your App" href="http://justinvoelkel.me/laravel-and-angularjs-part-one-prep-your-app/"> Part One – Prep Your App</a>. In case you haven’t read that post we’ve only gotten as far as setting up a fresh Laravel install with a migration and seed, as well as adding AngularJS to the project. Not impressed? I can’t blame you – let’s dig deeper into setting up our Laravel API and Angular login for the blog application.</p>
<p>In part one we had setup two templates inside of the <strong>App&nbsp;&gt; Views</strong> directory. One of those was <strong>index.blade.php</strong> – don’t worry about that one for now – our blog views are going to live there so we can save that for some time later. We’re going to first focus on <strong>admin.php&nbsp;</strong>because this is where our administrative dashboard is going to live. This is the area we’re looking to lock down unless your an authenticated user. To start out lets go in and remove our placeholder <strong>h1</strong> tag – it’s purpose hath’ been served. In it’s place drop in this snippet –</p>
<div><div id="highlighter_566612" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">body</code> <code class="xml color1">ng-app</code><code class="xml plain">=</code><code class="xml string">"blogApp"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">div</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"wrapper"</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">div</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"container"</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"view"</code> <code class="xml plain">ng-view&gt;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">div</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">div</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">body</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
<p>Make sure you don’t miss that&nbsp;<strong>body&nbsp;</strong>tag, it’s pretty important. You’ll notice the&nbsp;<strong>ng-app</strong> directive included in the open&nbsp;<strong>body</strong>&nbsp;tag – this is how Angular identifies the <a title="AngularJS root scope" href="https://docs.angularjs.org/api/ng/service/$rootScope" target="_blank">root scope</a>. Root scope is sort of the skeleton key to your application –&nbsp;all other scopes are descendants of your root scope. You’ll see later this is referenced in <strong>Public &gt; js &gt; app.js</strong> which&nbsp;we created in part one. Also, kindly notice the <strong>ng-view&nbsp;</strong>directive on the&nbsp;<strong>view</strong> div. This is going to be the main injection point for our angular views. So, if you’ve worked with Laravel before you can this of this as the<strong>&nbsp;master template</strong>. Our login view, post editor, post list, everything — it’s just&nbsp;going to be injected right through that div. Super cool, right?&nbsp;Ok, lets move on – make sure that’s saved. Let’s make our login form. Go to&nbsp;<strong>Public &gt; js &gt; templates &gt; login.html</strong> (created in part one) and open it&nbsp;up. There should be a div in there already but if there isn’t we’re using bootstrap to make things a bit more organized so you’ll want to start with –</p>
<div><div id="highlighter_689303" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">pre</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">div</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"login"</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"col-md-4 col-md-offset-4"</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">div</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"login-form"</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">h4</code><code class="xml plain">&gt;Login&lt;/</code><code class="xml keyword">h4</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">form</code><code class="xml plain">&gt;</code><code class="xml comments">&lt;!--username--&gt;</code></div><div class="line number6 index5 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">div</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"form-group"</code><code class="xml plain">&gt;&lt;</code><code class="xml keyword">input</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"username"</code> <code class="xml color1">type</code><code class="xml plain">=</code><code class="xml string">"text"</code> <code class="xml plain">/&gt;&lt;/</code><code class="xml keyword">div</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="xml comments">&lt;!--password--&gt;</code></div><div class="line number8 index7 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">div</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"form-group"</code><code class="xml plain">&gt;&lt;</code><code class="xml keyword">input</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"password"</code> <code class="xml color1">type</code><code class="xml plain">=</code><code class="xml string">"password"</code> <code class="xml plain">/&gt;&lt;/</code><code class="xml keyword">div</code><code class="xml plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="xml comments">&lt;!--submit--&gt;</code></div><div class="line number10 index9 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">div</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"form-group"</code><code class="xml plain">&gt;&lt;</code><code class="xml keyword">button</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"btn btn-primary"</code> <code class="xml color1">type</code><code class="xml plain">=</code><code class="xml string">"submit"</code><code class="xml plain">&gt;Login&lt;/</code><code class="xml keyword">button</code><code class="xml plain">&gt;&lt;/</code><code class="xml keyword">div</code><code class="xml plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">form</code><code class="xml plain">&gt;&lt;/</code><code class="xml keyword">div</code><code class="xml plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">div</code><code class="xml plain">&gt;</code></div><div class="line number13 index12 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">pre</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
<p>That just gives us a centered box inside of our template with&nbsp;the login form (note there’s some css going on here but I’ll leave you to look at that as this isn’t a post on css). You’ll notice more Angular directives on our form fields as well.&nbsp;If you’re wondering about how we were going to access the values in our form – those are how.</p>
<p>To give you a brief overview (we’ll be touching on this again in a few minutes) ng-model is what allows us to access the information in the scope. It turns ‘loginData’ into an object; if you’ve worked with javascript objects before you’ll recognize the dot notation. So, when we go and setup a controller, we’ll be able to work directly with that loginData object for the username and password. As of right now, we have our master template,&nbsp;<strong>admin.php</strong>,&nbsp;setup to inject our angular views (for the admin dashboard) such as the one above but if you load /admin nothing is going to show up. That’s because we’ve not yet setup any routes for angular to deal&nbsp;with. Let’s setup our first route now –&nbsp;open up <b>public &gt; js &gt; app.js</b> and you can find the following –</p>
<div><div id="highlighter_746693" class="syntaxhighlighter  jscript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="jscript keyword">var</code> <code class="jscript plain">app = angular.module(</code><code class="jscript string">'blogApp'</code><code class="jscript plain">,[</code><code class="jscript string">'ngRoute'</code><code class="jscript plain">]);</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="jscript spaces">&nbsp;</code><code class="jscript plain">app.run(</code><code class="jscript keyword">function</code><code class="jscript plain">(){</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="jscript spaces">&nbsp;</code><code class="jscript plain">});</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="jscript spaces">&nbsp;</code><code class="jscript comments">//This will handle all of our routing</code></div><div class="line number8 index7 alt1"><code class="jscript spaces">&nbsp;</code><code class="jscript plain">app.config(</code><code class="jscript keyword">function</code><code class="jscript plain">($routeProvider, $locationProvider){</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="jscript spaces">&nbsp;</code><code class="jscript plain">});</code></div></div></td></tr></tbody></table></div></div>
<p>As I eluded to&nbsp;earlier, there is our reference to blogApp – our application name. This is how the whole application is bootstrapped through angular. If you misspell or name that module differently nothing is going to load inside of your master template. To give you a brief explanation of what’s going on in <b>app.js</b>&nbsp;– we’re basically bootstrapping Angular and defining the app’s dependencies. In this case we’ve only named ngRoute as a dependency. That dependency of ngRoute allows us to route url’s through Angular and it is not included with Angular core. Don’t worry about&nbsp;<strong>app.run</strong> just this minute – we just need to focus on creating a route in&nbsp;<strong>app.config</strong>. The updated&nbsp;<strong>app.config</strong> is below – take a look:</p>
<div><div id="highlighter_437411" class="syntaxhighlighter  jscript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="jscript plain">app.config(</code><code class="jscript keyword">function</code><code class="jscript plain">($routeProvider, $locationProvider){</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="jscript plain">$routeProvider.when(</code><code class="jscript string">'/'</code><code class="jscript plain">,{</code></div><div class="line number4 index3 alt1"><code class="jscript plain">templateUrl:</code><code class="jscript string">'js/templates/login.html'</code><code class="jscript plain">,</code></div><div class="line number5 index4 alt2"><code class="jscript plain">controller:</code><code class="jscript string">'LoginController'</code></div><div class="line number6 index5 alt1"><code class="jscript plain">});</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="jscript plain">});</code></div></div></td></tr></tbody></table></div></div>
<p>Ok, you can kind of get a feel for how easy it is to route things with angular. We’re taking our injected dependency of routeprovider and calling it’s method ‘when’ to match a case for a requested URI. This can be a little tricky to interpret off the bat – the route that we’re matching is the root ‘/’ route but the URI in relation to the domain is actually something like laravelandangular.com/admin. Why is it setup like this and why does it work? Well, it’s because we’re utilizing two routing systems between&nbsp;Laravel and Angular. In our&nbsp;<strong>app &gt; routes.php</strong> file you’ll see the route to /admin that builds the admin.php view, which in turn invokes angular – so, to angular that <em><strong>is</strong></em> the ‘root’. You’ll also notice I’ve thrown a controller into the mix there – if you save and run anything at this point it’s not going to work because that controller is non-existant. Let’s set it up. In the interest of keeping ourselves clean and sane go ahead and setup a folder just for controllers at&nbsp;<strong>public &gt; js</strong>. We’ll end up having one folder for our templates, controllers, and services (if you want to create one for services now knock yourself out). Inside of the newly created controllers directory create a new js file-&nbsp;<strong>loginController.js</strong>. Just like any javascript file -ever- it needs to be included as a script. Head back to&nbsp;<strong>App &gt; views &gt; admin.php</strong> and include it as you would any other javascript. It’s important to note here that the path to&nbsp;<em>anything</em> in the public folder is relative to the root dir. So, even though our Laravel template is under&nbsp;<strong>App &gt; views</strong> the path the the javascript is&nbsp;<em><strong>still</strong></em><strong>&nbsp;</strong>going to be <strong>js/controllers/loginController.js</strong>.</p>
<div><div id="highlighter_972750" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml comments">&lt;!--angular controllers--&gt;</code><code class="xml plain">&lt;</code><code class="xml keyword">script</code> <code class="xml color1">src</code><code class="xml plain">=</code><code class="xml string">"js/controllers/loginController.js"</code><code class="xml plain">&gt;&lt;/</code><code class="xml keyword">script</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
<p>Since this is independent of <strong>app.js</strong> (it could’ve been built directly into app.js but it’s good practice to separate these pieces for modularity and sanity) it needs to be injected as a dependency. That’s actually really easy, we already have&nbsp;<strong>ngRoute</strong> injected as a dependency so just follow the same formula. I named my module&nbsp;<strong>LoginCtrl</strong> but you can name it whatever as long as it’s descriptive and you can remember it when we’re setting up the controller in a minute.&nbsp;<strong>App.js&nbsp;</strong>should now look similar to this:</p>
<div><div id="highlighter_142555" class="syntaxhighlighter  jscript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="jscript keyword">var</code> <code class="jscript plain">app = angular.module(</code><code class="jscript string">'blogApp'</code><code class="jscript plain">,[</code></div><div class="line number2 index1 alt1"><code class="jscript string">'ngRoute'</code><code class="jscript plain">,</code></div><div class="line number3 index2 alt2"><code class="jscript comments">//Login</code></div><div class="line number4 index3 alt1"><code class="jscript string">'LoginCtrl'</code></div><div class="line number5 index4 alt2"><code class="jscript plain">]);</code></div><div class="line number6 index5 alt1"><code class="jscript plain">app.run(</code><code class="jscript keyword">function</code><code class="jscript plain">(){</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="jscript plain">});</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="jscript comments">//This will handle all of our routing</code></div><div class="line number11 index10 alt2"><code class="jscript plain">app.config(</code><code class="jscript keyword">function</code><code class="jscript plain">($routeProvider, $locationProvider){</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="jscript plain">$routeProvider.when(</code><code class="jscript string">'/'</code><code class="jscript plain">,{</code></div><div class="line number14 index13 alt1"><code class="jscript plain">templateUrl:</code><code class="jscript string">'js/templates/login.html'</code><code class="jscript plain">,</code></div><div class="line number15 index14 alt2"><code class="jscript plain">controller:</code><code class="jscript string">'LoginController'</code></div><div class="line number16 index15 alt1"><code class="jscript plain">});</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="jscript plain">});</code></div></div></td></tr></tbody></table></div></div>
<div class="alert alert-notice"><strong>Notice this:</strong> 
I bumped the dependency injections to a new line just for cleanliness and so I could throw in a comment but it’s not necessary. With the controller file included and injected as a dependency we need to actually set it up for any of this jazz to work. Open up Public &gt; js &gt; controllers &gt; loginController.js. I’ll post what mine looks like and explain after:<br>
<span class="ico-st alert-close"><!-- --></span><div class="clear"><!-- --></div></div>
<div><div id="highlighter_43663" class="syntaxhighlighter  jscript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="jscript keyword">var</code> <code class="jscript plain">login = angular.module(</code><code class="jscript string">'LoginCtrl'</code><code class="jscript plain">,[]);</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="jscript plain">login.controller(</code><code class="jscript string">'LoginController'</code><code class="jscript plain">,</code><code class="jscript keyword">function</code><code class="jscript plain">($scope){</code></div><div class="line number4 index3 alt1"><code class="jscript plain">$scope.loginSubmit = </code><code class="jscript keyword">function</code><code class="jscript plain">(){</code></div><div class="line number5 index4 alt2"><code class="jscript plain">console.dir($scope.loginData);</code></div><div class="line number6 index5 alt1"><code class="jscript plain">}</code></div><div class="line number7 index6 alt2"><code class="jscript plain">});</code></div></div></td></tr></tbody></table></div></div>
<p>As I said, I injected the controller as&nbsp;<strong>LoginCtrl&nbsp;</strong>in&nbsp;<strong>app.js</strong> so that’s the module name here – if you named it differently change it appropriately.&nbsp;From there we define a new controller named&nbsp;<strong>LoginController&nbsp;</strong>and inject&nbsp;<strong>$scope</strong>. If you don’t inject scope you’re not going to be able to access our scope data (loginData). In&nbsp;our template&nbsp;<strong>login.html</strong> we set the ngSubmit directive on our form to a function called – can you guess? – yep –&nbsp;<strong>loginSubmit</strong> and this is where that function lives. If everything is saved and updated you should be able to fire the URI /admin and see the form – if you add a test username and pass you’ll be able to see that object in your dev tools console. <a href="http://justinvoelkel.me/wp-content/uploads/2014/07/login-console-dir.png" rel="prettyPhoto"><img class="aligncenter wp-image-391 size-large" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/login-console-dir-e1405606318413-1200x605.png" alt="login screen shot" width="837" height="421"></a></p>
<h2>Services</h2>
<p>Now that we have a simple controller that captures the login information we need a&nbsp;way of sharing that information with Laravel to verify the login.&nbsp;We’ll be creating an auth service to do this – essentially it’s going to communicate the login credentials to Laravel over our API, authenticate the user, and send back the appropriate response.</p>
<p>If you haven’t already, create a new folder in&nbsp;<strong>Public &gt; js&nbsp;</strong> called&nbsp;<strong>‘services’</strong>. Again, we’re doing this to keep things nice and modular and clean. Inside of&nbsp;<strong>services&nbsp;</strong>create a new js file called&nbsp;<strong>authService.js</strong>. Now, full disclosure – I’m going to be lazy and just set a session key/val pair to successfully authenticate a user. This isn’t super secure (it can be hi-jacked fairly easily) so I’d suggest either using c<a title="Angular Cookies vs Tokens" href="https://auth0.com/blog/2014/01/07/angularjs-authentication-with-cookies-vs-token/" target="_blank">ookies or tokens to lock this down</a>&nbsp;in a production environment.</p>
<p>We’re going to just add some basic boilerplate type stuff in here for now. You can add the following and I’ll explain later when we come back to it:</p>
<div><div id="highlighter_754802" class="syntaxhighlighter  jscript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="jscript keyword">var</code> <code class="jscript plain">login = angular.module(</code><code class="jscript string">'AuthSrvc'</code><code class="jscript plain">,[]);</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="jscript plain">login.factory(</code><code class="jscript string">'Login'</code><code class="jscript plain">,</code><code class="jscript keyword">function</code><code class="jscript plain">($http,$rootscope,SessionService){</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="jscript plain">});</code></div></div></td></tr></tbody></table></div></div>
<p>And, just like our controller we have to add the script source to&nbsp;<strong>App &gt; views &gt; admin.php</strong> as well as&nbsp;<strong>Public &gt; js &gt; app.js</strong> so that it’s properly bootstrapped by the application. It’s the same process as before, just make sure you have the correct path in&nbsp;<strong>admin.php&nbsp;</strong>and make sure you have the correct name (in my case&nbsp;<strong>AuthSrvc</strong>) injected into&nbsp;<strong>app.js</strong>.</p>
<div><div id="highlighter_312865" class="syntaxhighlighter  jscript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="jscript keyword">var</code> <code class="jscript plain">app = angular.module(</code><code class="jscript string">'blogApp'</code><code class="jscript plain">,[</code></div><div class="line number2 index1 alt1"><code class="jscript string">'ngRoute'</code><code class="jscript plain">,</code></div><div class="line number3 index2 alt2"><code class="jscript comments">//Login</code></div><div class="line number4 index3 alt1"><code class="jscript string">'LoginCtrl'</code><code class="jscript plain">,</code></div><div class="line number5 index4 alt2"><code class="jscript comments">//AuthService</code></div><div class="line number6 index5 alt1"><code class="jscript string">'AuthSrvc'</code></div><div class="line number7 index6 alt2"><code class="jscript plain">]);</code></div></div></td></tr></tbody></table></div></div>
<h2>Laravel API</h2>
<p>Before we fiddle with&nbsp;<strong>authService.js</strong> we need to actually setup our Laravel API so we have something to call out to from our auth service. Go ahead and open up your routes at&nbsp;<strong>App &gt; routes.php</strong>. What we’re going to do is add a prefixed <a title="laravel route group" href="http://laravel.com/docs/routing#route-groups" target="_blank">route group</a> to segregate our API calls from any run of the mill Laravel routes. That just means that any http calls made by a CRUD service or the auth service will made to a URI that&nbsp;will look like&nbsp;<em>‘api/login/auth’</em>. Again, it’s for cleanliness and sanity. Add this above any existing routes:</p>
<div><div id="highlighter_935903" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">Route::group(</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'prefix'</code><code class="php plain">=&gt;</code><code class="php string">'/api'</code><code class="php plain">),</code><code class="php keyword">function</code><code class="php plain">(){</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="php plain">});</code></div></div></td></tr></tbody></table></div></div>
<p>That creates our prefixed group. Now, we can drop in regular routes that will all assume an&nbsp;<em>‘api/’</em> prefix. They work just like every other route that routes to a closure or a controller. I’m&nbsp;going to be modular and route to a controller for our auth. To do that let’s add a new Laravel controller at&nbsp;<strong>App &gt; controllers&nbsp;</strong> and call it&nbsp;<strong>AuthController.php</strong>. You can add in the following – explanation to follow:</p>
<div><div id="highlighter_748217" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php keyword">class</code> <code class="php plain">AuthController </code><code class="php keyword">extends</code> <code class="php plain">BaseController{</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">Login(){</code></div><div class="line number4 index3 alt1"><code class="php keyword">if</code><code class="php plain">(Auth::attempt(Input::only(</code><code class="php string">'username'</code><code class="php plain">,</code><code class="php string">'password'</code><code class="php plain">))){</code></div><div class="line number5 index4 alt2"><code class="php keyword">return</code> <code class="php plain">Auth::user();</code></div><div class="line number6 index5 alt1"><code class="php plain">}</code><code class="php keyword">else</code><code class="php plain">{</code></div><div class="line number7 index6 alt2"><code class="php keyword">return</code> <code class="php string">'invalid username/pass combo'</code><code class="php plain">;</code></div><div class="line number8 index7 alt1"><code class="php plain">}</code></div><div class="line number9 index8 alt2"><code class="php plain">}</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="php keyword">public</code> <code class="php plain">Function Logout(){</code></div><div class="line number12 index11 alt1"><code class="php plain">Auth::logout();</code></div><div class="line number13 index12 alt2"><code class="php keyword">return</code> <code class="php string">'logged out'</code><code class="php plain">;</code></div><div class="line number14 index13 alt1"><code class="php plain">}</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>
<div class="notice  ">
<h4>Note</h4>
<p>I just wanted to note something important and really awesome about Laravel here. In the sample code above you’ll notice I’m just returning ‘Auth::user()’. Laravel will automatically cast that to JSON for you – no need to do anything else. That’s particularly helpful when you’re handing that data back to a JS front end like angular or ember.<br>
</p><div class="clear"><!-- --></div></div>
<p>You can see we’ve added a method for logging in and logging out. If you’ve done some basic user authentication with Laravel this probably looks standard. We’re making use of Laravel’s auth attempt method but we’re getting our username and pass from posted inputs. Now we just need to add the appropriate routes to our&nbsp;<strong>App &gt; routes.php</strong> to access these methods. The updated route group is below – we’re posting for login and getting for logout:</p>
<div><div id="highlighter_388564" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">Route::group(</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'prefix'</code><code class="php plain">=&gt;</code><code class="php string">'/api'</code><code class="php plain">),</code><code class="php keyword">function</code><code class="php plain">(){</code></div><div class="line number2 index1 alt1"><code class="php plain">Route::post(</code><code class="php string">'login/auth'</code><code class="php plain">,</code><code class="php string">'AuthController@Login'</code><code class="php plain">);</code></div><div class="line number3 index2 alt2"><code class="php plain">Route::get(</code><code class="php string">'login/destroy'</code><code class="php plain">,</code><code class="php string">'AuthController@Logout'</code><code class="php plain">);</code></div><div class="line number4 index3 alt1"><code class="php plain">});</code></div></div></td></tr></tbody></table></div></div>
<p>Now, we’ll be able to send an http post request with credentials from angular to either <strong><em>‘api/login/auth’</em></strong> to login or <em><strong>‘api/login/destory’</strong></em> to logout. With this good to go we can jump back into our <strong>AuthService.js</strong> file and start adding in some functional code to interact with the API.</p>
<h2>Initiating API Calls from Angular to Laravel</h2>
<p>We need to update two files straight away. To make the call to the API we need to add an http request to our&nbsp;<strong>authService.js</strong> file. Our ‘Login’ factory is now going to look like this:</p>
<div><div id="highlighter_179207" class="syntaxhighlighter  jscript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="jscript plain">login.factory(</code><code class="jscript string">'Login'</code><code class="jscript plain">,</code><code class="jscript keyword">function</code><code class="jscript plain">($http){</code></div><div class="line number2 index1 alt1"><code class="jscript keyword">return</code><code class="jscript plain">{</code></div><div class="line number3 index2 alt2"><code class="jscript plain">auth:</code><code class="jscript keyword">function</code><code class="jscript plain">(credentials){</code></div><div class="line number4 index3 alt1"><code class="jscript keyword">var</code> <code class="jscript plain">authUser = $http({method:</code><code class="jscript string">'POST'</code><code class="jscript plain">,url:</code><code class="jscript string">'api/login/auth'</code><code class="jscript plain">,params:credentials});</code></div><div class="line number5 index4 alt2"><code class="jscript keyword">return</code> <code class="jscript plain">authUser;</code></div><div class="line number6 index5 alt1"><code class="jscript plain">}</code></div><div class="line number7 index6 alt2"><code class="jscript plain">}</code></div><div class="line number8 index7 alt1"><code class="jscript plain">});</code></div></div></td></tr></tbody></table></div></div>
<p>Notice we’re making the http post request to our prefixed Laravel URL&nbsp;<em>‘api/login/auth’</em> and sending credentials as a parameter. those credentials are going to come from our $scope.loginData that is being submitted from the login form. That is all located in&nbsp;<strong>loginController.js</strong>. We need to replace our console test with a call to our authService and a subsequent promise to catch the response. See below for the updated login controller:</p>
<div><div id="highlighter_615674" class="syntaxhighlighter  jscript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="jscript plain">login.controller(</code><code class="jscript string">'LoginController'</code><code class="jscript plain">,</code><code class="jscript keyword">function</code><code class="jscript plain">($scope,Login){</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="jscript plain">$scope.loginSubmit = </code><code class="jscript keyword">function</code><code class="jscript plain">(){</code></div><div class="line number4 index3 alt1"><code class="jscript keyword">var</code> <code class="jscript plain">auth = Login.auth($scope.loginData);</code></div><div class="line number5 index4 alt2"><code class="jscript plain">auth.success(</code><code class="jscript keyword">function</code><code class="jscript plain">(response){</code></div><div class="line number6 index5 alt1"><code class="jscript plain">console.log(response);</code></div><div class="line number7 index6 alt2"><code class="jscript plain">});</code></div><div class="line number8 index7 alt1"><code class="jscript plain">}</code></div><div class="line number9 index8 alt2"><code class="jscript plain">});</code></div></div></td></tr></tbody></table></div></div>
<p>You’ll see I’ve injected our service ‘Login’ which allows me to call to auth and send it the entered login data ($scope.loginData). The variable auth is&nbsp;a promise object and <a title="AngularJS promises" href="http://stackoverflow.com/questions/16385278/angular-httppromise-difference-between-success-error-methods-and-thens-a" target="_blank">it requires a method to be called to extract that data</a>. I am using success here because it’s just a bit more convenient but you can bundle success/error with .then instead. So, right now I am just logging the API’s response – assuming everything is setup correctly you should see something like the following:</p>
<p><a href="http://justinvoelkel.me/wp-content/uploads/2014/07/login-console-after-e1405619803342.png" rel="prettyPhoto"><img class="aligncenter size-large wp-image-399" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/login-console-after-e1405619803342-1200x608.png" alt="Login console response" width="837" height="424"></a></p>
<p>&nbsp;</p>
<p>With any luck you’re able to see the console responses. The first came from entering an incorrect combination of test/test and the second came from entering the correct user and pass for the user we seeded in part one admin/password. It’s worked as expected and returned the user data from our database. We’ve made our first successful call to our Laravel API!!!</p>
<p>Now that we’ve got an authenticated user we can set a session variable to indicate that this user is verified authenticated and is free to move about the&nbsp;application. To do this we’ll add another factory to our <b>authService.js</b> file and make use of the browsers session storage. The following is&nbsp;the new factory added to the&nbsp;<strong>authServices.js&nbsp;</strong>file:</p>
<div><div id="highlighter_34760" class="syntaxhighlighter  jscript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="jscript plain">login.factory(</code><code class="jscript string">'SessionService'</code><code class="jscript plain">,</code><code class="jscript keyword">function</code><code class="jscript plain">(){</code></div><div class="line number2 index1 alt1"><code class="jscript keyword">return</code><code class="jscript plain">{</code></div><div class="line number3 index2 alt2"><code class="jscript plain">get:</code><code class="jscript keyword">function</code><code class="jscript plain">(key){</code></div><div class="line number4 index3 alt1"><code class="jscript keyword">return</code> <code class="jscript plain">sessionStorage.getItem(key);</code></div><div class="line number5 index4 alt2"><code class="jscript plain">},</code></div><div class="line number6 index5 alt1"><code class="jscript plain">set:</code><code class="jscript keyword">function</code><code class="jscript plain">(key,val){</code></div><div class="line number7 index6 alt2"><code class="jscript keyword">return</code> <code class="jscript plain">sessionStorage.setItem(key,val);</code></div><div class="line number8 index7 alt1"><code class="jscript plain">},</code></div><div class="line number9 index8 alt2"><code class="jscript plain">unset:</code><code class="jscript keyword">function</code><code class="jscript plain">(key){</code></div><div class="line number10 index9 alt1"><code class="jscript keyword">return</code> <code class="jscript plain">sessionStorage.removeItem(key);</code></div><div class="line number11 index10 alt2"><code class="jscript plain">}</code></div><div class="line number12 index11 alt1"><code class="jscript plain">}</code></div><div class="line number13 index12 alt2"><code class="jscript plain">});</code></div></div></td></tr></tbody></table></div></div>
<p>Now, we can inject <strong>SessionService</strong> into our&nbsp;<strong>Public &gt; js &gt; controllers &gt; loginController.js</strong> file. Now we can set a session variable that says the user has been authenticated.</p>
<div><div id="highlighter_332400" class="syntaxhighlighter  jscript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="jscript plain">login.controller(</code><code class="jscript string">'LoginController'</code><code class="jscript plain">,</code><code class="jscript keyword">function</code><code class="jscript plain">($scope,$location,Login,SessionService){</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="jscript spaces">&nbsp;</code><code class="jscript plain">$scope.loginSubmit = </code><code class="jscript keyword">function</code><code class="jscript plain">(){</code></div><div class="line number4 index3 alt1"><code class="jscript spaces">&nbsp;</code><code class="jscript keyword">var</code> <code class="jscript plain">auth = Login.auth($scope.loginData);</code></div><div class="line number5 index4 alt2"><code class="jscript spaces">&nbsp;</code><code class="jscript plain">auth.success(</code><code class="jscript keyword">function</code><code class="jscript plain">(response){</code></div><div class="line number6 index5 alt1"><code class="jscript spaces">&nbsp;</code><code class="jscript keyword">if</code><code class="jscript plain">(response.id){</code></div><div class="line number7 index6 alt2"><code class="jscript spaces">&nbsp;</code><code class="jscript plain">SessionService.set(</code><code class="jscript string">'auth'</code><code class="jscript plain">,</code><code class="jscript keyword">true</code><code class="jscript plain">); </code><code class="jscript comments">//This sets our session key/val pair as authenticated</code></div><div class="line number8 index7 alt1"><code class="jscript spaces">&nbsp;</code><code class="jscript plain">}</code><code class="jscript keyword">else</code> <code class="jscript plain">alert(</code><code class="jscript string">'could not verify your login'</code><code class="jscript plain">);</code></div><div class="line number9 index8 alt2"><code class="jscript spaces">&nbsp;</code><code class="jscript plain">});</code></div><div class="line number10 index9 alt1"><code class="jscript spaces">&nbsp;</code><code class="jscript plain">}</code></div><div class="line number11 index10 alt2"><code class="jscript spaces">&nbsp;</code><code class="jscript plain">});</code></div></div></td></tr></tbody></table></div></div>
<p>In the above I just replaced the console dump of our response to a conditional to check if the response contains a user ID – if it does that means we had a successful authentication – if not just alert that we couldn’t verify. I know it’s not super secure but this is only for demonstration purposes. With the correct credentials entered you’ll be able to see the auth session variable set in your browser now:</p>
<p><a href="http://justinvoelkel.me/wp-content/uploads/2014/07/session-auth-set-e1405621896316.png" rel="prettyPhoto"><img class="aligncenter size-large wp-image-405" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/session-auth-set-e1405621896316-1200x647.png" alt="Angular Session Auth Set" width="837" height="451"></a></p>
<h2>What’s Next?</h2>
<p>Essentially that covers the user authentication process. Moving forward we’ll be able to check for that <em>auth</em>&nbsp;session variable&nbsp;to validate the user on all the&nbsp;<em>protected</em> pages (i.e anything under dashboard). In the next post I’m going to cover creating the dashboard, redirecting authenticated users to that dashboard, logging users out, and setting up a CRUD service for our blog posts. I’m hoping to have that up in a few weeks but at this point I can’t promise anything – work has been insane and I’m in the middle of planning a wedding for pete’s sake! I hope you all enjoyed part two though, and if there are any improvements I can make to any of this please feel free to leave them in the comments!</p>
<p><time class="date updated none" datetime="2014-07-17" data-pubdate="">Jul 17, 2014</time><span class="author vcard none"><span class="fn">Justin Voelkel</span></span></p>

																<div class="clear"><!-- --></div>

															</div><!-- #article -->

															
														</article><div id="pre_next_post"><a class="p tooltip" title="Previous" href="http://justinvoelkel.me/laravel-and-angularjs-part-one-prep-your-app/">Laravel and AngularJS: Part One - Prep Your App</a><a class="n tooltip" title="Next" href="http://justinvoelkel.me/saga-continues/">The Saga Continues</a><div class="clear"><!-- --></div></div>
<div id="disqus_thread"><iframe id="dsq-272" data-disqus-uid="272" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/saved_resource.html" style="width: 100% !important; border: none !important; overflow: hidden !important; height: 911px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe><iframe id="dsq-indicator-north" data-disqus-uid="indicator-north" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width: 790px !important; border: none !important; overflow: hidden !important; top: 0px !important; min-width: 790px !important; max-width: 790px !important; position: fixed !important; z-index: 2147483646 !important; height: 29px !important; min-height: 29px !important; max-height: 29px !important; display: none !important;"></iframe><iframe id="dsq-indicator-south" data-disqus-uid="indicator-south" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width: 790px !important; border: none !important; overflow: hidden !important; bottom: 0px !important; min-width: 790px !important; max-width: 790px !important; position: fixed !important; z-index: 2147483646 !important; height: 29px !important; min-height: 29px !important; max-height: 29px !important; display: none !important;"></iframe></div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://justinvoelkel.me/laravel-angularjs-part-two-login-and-authentication/';
    var disqus_identifier = '374 http://justinvoelkel.me/?p=374';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'justinvoelkelme';
    var disqus_title = "Laravel and AngularJS: Part Two – Login and Authentication";
    var disqus_config = function () {
        var config = this; // Access to the config object
        config.language = '';

        /* Add the ability to add javascript callbacks */
        
        /*
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            var script = document.createElement('script');
            script.async = true;
            script.src = '?cf_action=sync_comments&post_id=374';

            var firstScript = document.getElementsByTagName( "script" )[0];
            firstScript.parentNode.insertBefore(script, firstScript);
        });
                    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
            {
                'author_name':    "Laravel and AngularJS - Part One - Prep Your AppJustinVoelkel.me",
                'author_url':    "http:\/\/justinvoelkel.me\/laravel-and-angularjs-part-one-prep-your-app\/",
                'date':            "07\/25\/2014 08:41 PM",
                'excerpt':        "[&#8230;] It took a few millennia but I managed to post part two! Check it out&#8230;   May 5, &hellip;",
                'type':            "pingback"            }
        ],
        'trackback_url': "http:\/\/justinvoelkel.me\/laravel-angularjs-part-two-login-and-authentication\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.' + 'disqus.com' + '/' + 'embed' + '.js' + '?pname=wordpress&pver=2.77';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>
	
													<div class="clear"><!-- --></div>
				
												</div><!-- #post-% -->
	
	
	
												<div class="sidebar-post">
								
																			
																<div class="single-author-info">
						
																	<div class="single-author-upic"><a href="http://justinvoelkel.me/author/stin4u/"><img src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/avatar-150x150.png" width="110" height="110" alt="Justin Voelkel" class="avatar avatar-110 wp-user-avatar wp-user-avatar-110 alignnone photo"></a></div>
												
																	<h5>Justin Voelkel</h5>
																	
																							
																</div>	
															<div class="post-short-info">
	
																
				<div class="meta">
			
					<span class="ico16 ico16-calendar">3 months ago</span>										<span class="ico16 ico16-folder"><a href="http://justinvoelkel.me/category/angularjs/">AngularJS</a>, <a href="http://justinvoelkel.me/category/javascript/">Javascript</a>, <a href="http://justinvoelkel.me/category/laravel/">Laravel</a>, <a href="http://justinvoelkel.me/category/php/">PHP</a></span><span class="ico16 ico16-tag"><a href="http://justinvoelkel.me/tag/angularjs/" rel="tag">AngularJS</a>, <a href="http://justinvoelkel.me/tag/laravel/" rel="tag">Laravel</a>, <a href="http://justinvoelkel.me/tag/laravelandangular-com/" rel="tag">laravelandangular.com</a></span>			
				</div><!-- .meta -->	
															</div><div><!-- --></div><div class="stickyDiv"></div>								
												</div><!-- .sidebar-post -->



															
								<div class="clear"><!-- --></div>
				
							</div>
					
						</div><!-- #content-box -->

							
						<div class="clear"><!-- --></div>

					</div><!-- #content-holder -->
		
				</div><!-- #content-layout -->
		
			</div><!-- #content -->
	
					<div class="clear"><!-- --></div>

			<footer>

				<div id="footer">
	
					<div id="footer-layout">
	
						<div id="footer-holder">
					
								
	
		<div id="footer-box" class="footer-box-v5"><div class="sidebar-footer"><div>
<div class="widget widget_calendar">
<div id="calendar_wrap"><table id="wp-calendar">
	<caption>November 2014</caption>
	<thead>
	<tr>
		<th scope="col" title="Monday">M</th>
		<th scope="col" title="Tuesday">T</th>
		<th scope="col" title="Wednesday">W</th>
		<th scope="col" title="Thursday">T</th>
		<th scope="col" title="Friday">F</th>
		<th scope="col" title="Saturday">S</th>
		<th scope="col" title="Sunday">S</th>
	</tr>
	</thead>

	<tfoot>
	<tr>
		<td colspan="3" id="prev"><a href="http://justinvoelkel.me/2014/10/" class="tooltip">« Oct</a></td>
		<td class="pad">&nbsp;</td>
		<td colspan="3" id="next" class="pad">&nbsp;</td>
	</tr>
	</tfoot>

	<tbody>
	<tr>
		<td colspan="5" class="pad">&nbsp;</td><td>1</td><td>2</td>
	</tr>
	<tr>
		<td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td>
	</tr>
	<tr>
		<td>10</td><td>11</td><td>12</td><td id="today">13</td><td>14</td><td>15</td><td>16</td>
	</tr>
	<tr>
		<td>17</td><td>18</td><td>19</td><td>20</td><td>21</td><td>22</td><td>23</td>
	</tr>
	<tr>
		<td>24</td><td>25</td><td>26</td><td>27</td><td>28</td><td>29</td><td>30</td>
	</tr>
	</tbody>
	</table></div>
<div class="clear"><!-- --></div></div>
</div></div><div class="sidebar-footer"><div>		
<div class="widget widget_recent_entries">
		<h5>Recent Posts</h5>
		<ul>
					<li>
				<a href="http://justinvoelkel.me/saga-continues/">The Saga Continues</a>
						</li>
					<li>
				<a href="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me.html">Laravel and AngularJS: Part Two – Login and Authentication</a>
						</li>
					<li>
				<a href="http://justinvoelkel.me/laravel-and-angularjs-part-one-prep-your-app/">Laravel and AngularJS: Part One – Prep Your App</a>
						</li>
					<li>
				<a href="http://justinvoelkel.me/laravel-and-angularjs-ignite-your-app-development/">Laravel and AngularJS: Ignite Your App Development</a>
						</li>
					<li>
				<a href="http://justinvoelkel.me/web-accessibility-matters-think/">Web Accessibility: It Matters More Than You Think</a>
						</li>
				</ul>
		
<div class="clear"><!-- --></div></div>
</div></div><div class="sidebar-footer"><div>
<div class="widget widget_tag_cloud">
<h5>Categories</h5>
<div class="tagcloud"><a href="http://justinvoelkel.me/category/general-web-development/" class="tag-link-2" title="" style="font-size: 13px;">General Web Development<span>19</span></a><a href="http://justinvoelkel.me/category/php/" class="tag-link-7" title="" style="font-size: 13px;">PHP<span>7</span></a><a href="http://justinvoelkel.me/category/development-tools/" class="tag-link-40" title="" style="font-size: 13px;">Development Tools<span>5</span></a><a href="http://justinvoelkel.me/category/problem-solved/" class="tag-link-9" title="" style="font-size: 13px;">Problem Solved<span>5</span></a><a href="http://justinvoelkel.me/category/javascript/" class="tag-link-34" title="" style="font-size: 13px;">Javascript<span>3</span></a><a href="http://justinvoelkel.me/category/mysql/" class="tag-link-25" title="" style="font-size: 13px;">MySQL<span>3</span></a><a href="http://justinvoelkel.me/category/performance/" class="tag-link-33" title="" style="font-size: 13px;">Performance<span>3</span></a><a href="http://justinvoelkel.me/category/css3/" class="tag-link-20" title="" style="font-size: 13px;">CSS3<span>3</span></a><a href="http://justinvoelkel.me/category/app-development/" class="tag-link-53" title="" style="font-size: 13px;">App Development<span>3</span></a><a href="http://justinvoelkel.me/category/laravel/" class="tag-link-42" title="" style="font-size: 13px;">Laravel<span>3</span></a><a href="http://justinvoelkel.me/category/angularjs/" class="tag-link-85" title="" style="font-size: 13px;">AngularJS<span>3</span></a><a href="http://justinvoelkel.me/category/wordpress/" class="tag-link-15" title="" style="font-size: 13px;">Wordpress<span>1</span></a><a href="http://justinvoelkel.me/category/accessibility/" class="tag-link-80" title="" style="font-size: 13px;">Accessibility<span>1</span></a><a href="http://justinvoelkel.me/category/nodejs/" class="tag-link-60" title="" style="font-size: 13px;">NodeJS<span>1</span></a><a href="http://justinvoelkel.me/category/ruby/" class="tag-link-45" title="" style="font-size: 13px;">Ruby<span>1</span></a><a href="http://justinvoelkel.me/category/recommended-reading/" class="tag-link-10" title="" style="font-size: 13px;">Recommended Reading<span>1</span></a><a href="http://justinvoelkel.me/category/services/" class="tag-link-11" title="" style="font-size: 13px;">Services<span>1</span></a></div>

<div class="clear"><!-- --></div></div>
</div></div><div class="sidebar-footer last"><div>
<div class="widget widget_search">
<form role="search" method="get" id="searchform" class="searchform" action="http://justinvoelkel.me/">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s" placeholder="Search">
					<input type="submit" id="searchsubmit" value="Search">
				</div>
			</form>
<div class="clear"><!-- --></div></div>
</div></div><div class="clear"><!-- --></div>	
		</div><!-- end footer-box -->		
						</div><!-- #footer-holder -->
	
						<div id="copyrights-holder">
	
							<div id="copyrights-box">
						
								<div id="copyrights-company">2013 © Justin Voelkel</div>	
								<div class="clear"><!-- --></div>
	
							</div><!-- #copyrights-box -->
						
						</div><!-- #copyrights-holder -->
	
					</div><!-- #footer-layout -->
	
				</div><!-- #footer -->

			</footer>

		</div><!-- #layout -->

		<script type="text/javascript">/* <![CDATA[ */var stData = new Array();
			stData[0] = "494158";
			stData[1] = "6ddc77";
			stData[2] = "http://justinvoelkel.me/wp-content/themes/Recital";
			stData[3] = "http://justinvoelkel.me";/* ]]> */</script>
<script type="text/javascript" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/shCore.js"></script>
<script type="text/javascript" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/shBrushXml.js"></script>
<script type="text/javascript" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/shBrushJScript.js"></script>
<script type="text/javascript" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/shBrushPhp.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://justinvoelkel.me/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://justinvoelkel.me/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type="text/javascript" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/jquery.hidpi.js"></script>
<script type="text/javascript" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/jquery.shortcodes.js"></script>
<script type="text/javascript" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/jquery.ctp.js"></script>
<script type="text/javascript" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/jquery.prettyPhoto.js"></script>
<script type="text/javascript" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/jquery.menu.js"></script>
<script type="text/javascript" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/jquery.st.js"></script>
<script type="text/javascript" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/jquery.ie.js"></script>
<script type="text/javascript" src="./Laravel and AngularJS  Part Two – Login and Authentication -JustinVoelkel.me_files/mediaelement-and-player.min.js"></script>

	


<!-- Performance optimized by W3 Total Cache. Learn more: http://www.w3-edge.com/wordpress-plugins/

Page Caching using disk: enhanced

 Served from: justinvoelkel.me @ 2014-11-13 06:24:30 by W3 Total Cache --></body></html>